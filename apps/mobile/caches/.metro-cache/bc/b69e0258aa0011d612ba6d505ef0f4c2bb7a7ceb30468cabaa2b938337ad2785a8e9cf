{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":106,"index":106}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"applySourceContextToFrame\", {\n    enumerable: true,\n    get: function () {\n      return applySourceContextToFrame;\n    }\n  });\n  Object.defineProperty(exports, \"contextLinesIntegration\", {\n    enumerable: true,\n    get: function () {\n      return contextLinesIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var WINDOW = _sentryCore.GLOBAL_OBJ;\n  var DEFAULT_LINES_OF_CONTEXT = 7;\n  var INTEGRATION_NAME = 'ContextLines';\n  var _contextLinesIntegration = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var contextLines = options.frameContextLines != null ? options.frameContextLines : DEFAULT_LINES_OF_CONTEXT;\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(event) {\n        return addSourceContext(event, contextLines);\n      }\n    };\n  };\n\n  /**\n   * Collects source context lines around the lines of stackframes pointing to JS embedded in\n   * the current page's HTML.\n   *\n   * This integration DOES NOT work for stack frames pointing to JS files that are loaded by the browser.\n   * For frames pointing to files, context lines are added during ingestion and symbolication\n   * by attempting to download the JS files to the Sentry backend.\n   *\n   * Use this integration if you have inline JS code in HTML pages that can't be accessed\n   * by our backend (e.g. due to a login-protected page).\n   */\n  var contextLinesIntegration = (0, _sentryCore.defineIntegration)(_contextLinesIntegration);\n\n  /**\n   * Processes an event and adds context lines.\n   */\n  function addSourceContext(event, contextLines) {\n    var doc = WINDOW.document;\n    var htmlFilename = WINDOW.location && (0, _sentryCore.stripUrlQueryAndFragment)(WINDOW.location.href);\n    if (!doc || !htmlFilename) {\n      return event;\n    }\n    var exceptions = event.exception?.values;\n    if (!exceptions?.length) {\n      return event;\n    }\n    var html = doc.documentElement.innerHTML;\n    if (!html) {\n      return event;\n    }\n    var htmlLines = ['<!DOCTYPE html>', '<html>', ...html.split('\\n'), '</html>'];\n    exceptions.forEach(exception => {\n      var stacktrace = exception.stacktrace;\n      if (stacktrace?.frames) {\n        stacktrace.frames = stacktrace.frames.map(frame => applySourceContextToFrame(frame, htmlLines, htmlFilename, contextLines));\n      }\n    });\n    return event;\n  }\n\n  /**\n   * Only exported for testing\n   */\n  function applySourceContextToFrame(frame, htmlLines, htmlFilename, linesOfContext) {\n    if (frame.filename !== htmlFilename || !frame.lineno || !htmlLines.length) {\n      return frame;\n    }\n    (0, _sentryCore.addContextToFrame)(htmlLines, frame, linesOfContext);\n    return frame;\n  }\n});","lineCount":84,"map":[[7,2,85,0,"Object"],[7,8,85,0],[7,9,85,0,"defineProperty"],[7,23,85,0],[7,24,85,0,"exports"],[7,31,85,0],[8,4,85,0,"enumerable"],[8,14,85,0],[9,4,85,0,"get"],[9,7,85,0],[9,18,85,0,"get"],[9,19,85,0],[10,6,85,0],[10,13,85,9,"applySourceContextToFrame"],[10,38,85,34],[11,4,85,34],[12,2,85,34],[13,2,85,0,"Object"],[13,8,85,0],[13,9,85,0,"defineProperty"],[13,23,85,0],[13,24,85,0,"exports"],[13,31,85,0],[14,4,85,0,"enumerable"],[14,14,85,0],[15,4,85,0,"get"],[15,7,85,0],[15,18,85,0,"get"],[15,19,85,0],[16,6,85,0],[16,13,85,36,"contextLinesIntegration"],[16,36,85,59],[17,4,85,59],[18,2,85,59],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,3,0],[20,6,3,6,"WINDOW"],[20,12,3,12],[20,15,3,15,"GLOBAL_OBJ"],[20,26,3,25],[20,27,3,25,"GLOBAL_OBJ"],[20,37,3,25],[21,2,5,0],[21,6,5,6,"DEFAULT_LINES_OF_CONTEXT"],[21,30,5,30],[21,33,5,33],[21,34,5,34],[22,2,7,0],[22,6,7,6,"INTEGRATION_NAME"],[22,22,7,22],[22,25,7,25],[22,39,7,39],[23,2,9,0],[23,6,9,6,"_contextLinesIntegration"],[23,30,9,30],[23,33,9,34],[23,42,9,34,"_contextLinesIntegration"],[23,43,9,34],[23,45,9,52],[24,4,9,52],[24,8,9,35,"options"],[24,15,9,42],[24,18,9,42,"arguments"],[24,27,9,42],[24,28,9,42,"length"],[24,34,9,42],[24,42,9,42,"arguments"],[24,51,9,42],[24,59,9,42,"undefined"],[24,68,9,42],[24,71,9,42,"arguments"],[24,80,9,42],[24,86,9,45],[24,87,9,46],[24,88,9,47],[25,4,10,2],[25,8,10,8,"contextLines"],[25,20,10,20],[25,23,10,23,"options"],[25,30,10,30],[25,31,10,31,"frameContextLines"],[25,48,10,48],[25,52,10,52],[25,56,10,56],[25,59,10,59,"options"],[25,66,10,66],[25,67,10,67,"frameContextLines"],[25,84,10,84],[25,87,10,87,"DEFAULT_LINES_OF_CONTEXT"],[25,111,10,111],[26,4,12,2],[26,11,12,9],[27,6,13,4,"name"],[27,10,13,8],[27,12,13,10,"INTEGRATION_NAME"],[27,28,13,26],[28,6,14,4,"processEvent"],[28,18,14,16,"processEvent"],[28,19,14,17,"event"],[28,24,14,22],[28,26,14,24],[29,8,15,6],[29,15,15,13,"addSourceContext"],[29,31,15,29],[29,32,15,30,"event"],[29,37,15,35],[29,39,15,37,"contextLines"],[29,51,15,49],[29,52,15,50],[30,6,16,4],[31,4,17,2],[31,5,17,3],[32,2,18,0],[32,3,18,2],[34,2,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,0,25,0],[40,0,26,0],[41,0,27,0],[42,0,28,0],[43,0,29,0],[44,0,30,0],[45,2,31,0],[45,6,31,6,"contextLinesIntegration"],[45,29,31,29],[45,32,31,32],[45,36,31,32,"defineIntegration"],[45,47,31,49],[45,48,31,49,"defineIntegration"],[45,65,31,49],[45,67,31,50,"_contextLinesIntegration"],[45,91,31,74],[45,92,31,75],[47,2,33,0],[48,0,34,0],[49,0,35,0],[50,2,36,0],[50,11,36,9,"addSourceContext"],[50,27,36,25,"addSourceContext"],[50,28,36,26,"event"],[50,33,36,31],[50,35,36,33,"contextLines"],[50,47,36,45],[50,49,36,47],[51,4,37,2],[51,8,37,8,"doc"],[51,11,37,11],[51,14,37,14,"WINDOW"],[51,20,37,20],[51,21,37,21,"document"],[51,29,37,29],[52,4,38,2],[52,8,38,8,"htmlFilename"],[52,20,38,20],[52,23,38,23,"WINDOW"],[52,29,38,29],[52,30,38,30,"location"],[52,38,38,38],[52,42,38,42],[52,46,38,42,"stripUrlQueryAndFragment"],[52,57,38,66],[52,58,38,66,"stripUrlQueryAndFragment"],[52,82,38,66],[52,84,38,67,"WINDOW"],[52,90,38,73],[52,91,38,74,"location"],[52,99,38,82],[52,100,38,83,"href"],[52,104,38,87],[52,105,38,88],[53,4,39,2],[53,8,39,6],[53,9,39,7,"doc"],[53,12,39,10],[53,16,39,14],[53,17,39,15,"htmlFilename"],[53,29,39,27],[53,31,39,29],[54,6,40,4],[54,13,40,11,"event"],[54,18,40,16],[55,4,41,2],[56,4,43,2],[56,8,43,8,"exceptions"],[56,18,43,18],[56,21,43,21,"event"],[56,26,43,26],[56,27,43,27,"exception"],[56,36,43,36],[56,38,43,38,"values"],[56,44,43,44],[57,4,44,2],[57,8,44,6],[57,9,44,7,"exceptions"],[57,19,44,17],[57,21,44,19,"length"],[57,27,44,25],[57,29,44,27],[58,6,45,4],[58,13,45,11,"event"],[58,18,45,16],[59,4,46,2],[60,4,48,2],[60,8,48,8,"html"],[60,12,48,12],[60,15,48,15,"doc"],[60,18,48,18],[60,19,48,19,"documentElement"],[60,34,48,34],[60,35,48,35,"innerHTML"],[60,44,48,44],[61,4,49,2],[61,8,49,6],[61,9,49,7,"html"],[61,13,49,11],[61,15,49,13],[62,6,50,4],[62,13,50,11,"event"],[62,18,50,16],[63,4,51,2],[64,4,53,2],[64,8,53,8,"htmlLines"],[64,17,53,17],[64,20,53,20],[64,21,53,21],[64,38,53,38],[64,40,53,40],[64,48,53,48],[64,50,53,50],[64,53,53,53,"html"],[64,57,53,57],[64,58,53,58,"split"],[64,63,53,63],[64,64,53,64],[64,68,53,68],[64,69,53,69],[64,71,53,71],[64,80,53,80],[64,81,53,81],[65,4,55,2,"exceptions"],[65,14,55,12],[65,15,55,13,"forEach"],[65,22,55,20],[65,23,55,21,"exception"],[65,32,55,30],[65,36,55,34],[66,6,56,4],[66,10,56,10,"stacktrace"],[66,20,56,20],[66,23,56,23,"exception"],[66,32,56,32],[66,33,56,33,"stacktrace"],[66,43,56,43],[67,6,57,4],[67,10,57,8,"stacktrace"],[67,20,57,18],[67,22,57,20,"frames"],[67,28,57,26],[67,30,57,28],[68,8,58,6,"stacktrace"],[68,18,58,16],[68,19,58,17,"frames"],[68,25,58,23],[68,28,58,26,"stacktrace"],[68,38,58,36],[68,39,58,37,"frames"],[68,45,58,43],[68,46,58,44,"map"],[68,49,58,47],[68,50,58,48,"frame"],[68,55,58,53],[68,59,59,8,"applySourceContextToFrame"],[68,84,59,33],[68,85,59,34,"frame"],[68,90,59,39],[68,92,59,41,"htmlLines"],[68,101,59,50],[68,103,59,52,"htmlFilename"],[68,115,59,64],[68,117,59,66,"contextLines"],[68,129,59,78],[68,130,60,6],[68,131,60,7],[69,6,61,4],[70,4,62,2],[70,5,62,3],[70,6,62,4],[71,4,64,2],[71,11,64,9,"event"],[71,16,64,14],[72,2,65,0],[74,2,67,0],[75,0,68,0],[76,0,69,0],[77,2,70,0],[77,11,70,9,"applySourceContextToFrame"],[77,36,70,34,"applySourceContextToFrame"],[77,37,71,2,"frame"],[77,42,71,7],[77,44,72,2,"htmlLines"],[77,53,72,11],[77,55,73,2,"htmlFilename"],[77,67,73,14],[77,69,74,2,"linesOfContext"],[77,83,74,16],[77,85,75,2],[78,4,76,2],[78,8,76,6,"frame"],[78,13,76,11],[78,14,76,12,"filename"],[78,22,76,20],[78,27,76,25,"htmlFilename"],[78,39,76,37],[78,43,76,41],[78,44,76,42,"frame"],[78,49,76,47],[78,50,76,48,"lineno"],[78,56,76,54],[78,60,76,58],[78,61,76,59,"htmlLines"],[78,70,76,68],[78,71,76,69,"length"],[78,77,76,75],[78,79,76,77],[79,6,77,4],[79,13,77,11,"frame"],[79,18,77,16],[80,4,78,2],[81,4,80,2],[81,8,80,2,"addContextToFrame"],[81,19,80,19],[81,20,80,19,"addContextToFrame"],[81,37,80,19],[81,39,80,20,"htmlLines"],[81,48,80,29],[81,50,80,31,"frame"],[81,55,80,36],[81,57,80,38,"linesOfContext"],[81,71,80,52],[81,72,80,53],[82,4,82,2],[82,11,82,9,"frame"],[82,16,82,14],[83,2,83,0],[84,0,83,1],[84,3]],"functionMap":{"names":["<global>","_contextLinesIntegration","processEvent","addSourceContext","exceptions.forEach$argument_0","stacktrace.frames.map$argument_0","applySourceContextToFrame"],"mappings":"AAA;kCCQ;ICK;KDE;CDE;AGkB;qBCmB;gDCG;+EDC;GDG;CHG;AMK;CNa"},"hasCjsExports":false},"type":"js/module"}]}