{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":14,"index":120},"end":{"line":4,"column":30,"index":136}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"./env","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":12,"index":150},"end":{"line":5,"column":28,"index":166}}],"key":"GSS4TBkrLSYCHbLb3hGkieNEhpc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useSidecar = void 0;\n  var react_1 = require(_dependencyMap[0], \"react\");\n  var env_1 = require(_dependencyMap[1], \"./env\");\n  var cache = new WeakMap();\n  var NO_OPTIONS = {};\n  function useSidecar(importer, effect) {\n    var options = effect && effect.options || NO_OPTIONS;\n    if (env_1.env.isNode && !options.ssr) {\n      return [null, null];\n    }\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    return useRealSidecar(importer, effect);\n  }\n  exports.useSidecar = useSidecar;\n  function useRealSidecar(importer, effect) {\n    var options = effect && effect.options || NO_OPTIONS;\n    var couldUseCache = env_1.env.forceCache || env_1.env.isNode && !!options.ssr || !options.async;\n    var _a = (0, react_1.useState)(couldUseCache ? function () {\n        return cache.get(importer);\n      } : undefined),\n      Car = _a[0],\n      setCar = _a[1];\n    var _b = (0, react_1.useState)(null),\n      error = _b[0],\n      setError = _b[1];\n    (0, react_1.useEffect)(function () {\n      if (!Car) {\n        importer().then(function (car) {\n          var resolved = effect ? effect.read() : car.default || car;\n          if (!resolved) {\n            console.error('Sidecar error: with importer', importer);\n            var error_1;\n            if (effect) {\n              console.error('Sidecar error: with medium', effect);\n              error_1 = new Error('Sidecar medium was not found');\n            } else {\n              error_1 = new Error('Sidecar was not found in exports');\n            }\n            setError(function () {\n              return error_1;\n            });\n            throw error_1;\n          }\n          cache.set(importer, resolved);\n          setCar(function () {\n            return resolved;\n          });\n        }, function (e) {\n          return setError(function () {\n            return e;\n          });\n        });\n      }\n    }, []);\n    return [Car, error];\n  }\n});","lineCount":63,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"useSidecar"],[7,20,3,18],[7,23,3,21],[7,28,3,26],[7,29,3,27],[8,2,4,0],[8,6,4,4,"react_1"],[8,13,4,11],[8,16,4,14,"require"],[8,23,4,21],[8,24,4,21,"_dependencyMap"],[8,38,4,21],[8,50,4,29],[8,51,4,30],[9,2,5,0],[9,6,5,4,"env_1"],[9,11,5,9],[9,14,5,12,"require"],[9,21,5,19],[9,22,5,19,"_dependencyMap"],[9,36,5,19],[9,48,5,27],[9,49,5,28],[10,2,6,0],[10,6,6,4,"cache"],[10,11,6,9],[10,14,6,12],[10,18,6,16,"WeakMap"],[10,25,6,23],[10,26,6,24],[10,27,6,25],[11,2,7,0],[11,6,7,4,"NO_OPTIONS"],[11,16,7,14],[11,19,7,17],[11,20,7,18],[11,21,7,19],[12,2,8,0],[12,11,8,9,"useSidecar"],[12,21,8,19,"useSidecar"],[12,22,8,20,"importer"],[12,30,8,28],[12,32,8,30,"effect"],[12,38,8,36],[12,40,8,38],[13,4,9,4],[13,8,9,8,"options"],[13,15,9,15],[13,18,9,19,"effect"],[13,24,9,25],[13,28,9,29,"effect"],[13,34,9,35],[13,35,9,36,"options"],[13,42,9,43],[13,46,9,48,"NO_OPTIONS"],[13,56,9,58],[14,4,10,4],[14,8,10,8,"env_1"],[14,13,10,13],[14,14,10,14,"env"],[14,17,10,17],[14,18,10,18,"isNode"],[14,24,10,24],[14,28,10,28],[14,29,10,29,"options"],[14,36,10,36],[14,37,10,37,"ssr"],[14,40,10,40],[14,42,10,42],[15,6,11,8],[15,13,11,15],[15,14,11,16],[15,18,11,20],[15,20,11,22],[15,24,11,26],[15,25,11,27],[16,4,12,4],[17,4,13,4],[18,4,14,4],[18,11,14,11,"useRealSidecar"],[18,25,14,25],[18,26,14,26,"importer"],[18,34,14,34],[18,36,14,36,"effect"],[18,42,14,42],[18,43,14,43],[19,2,15,0],[20,2,16,0,"exports"],[20,9,16,7],[20,10,16,8,"useSidecar"],[20,20,16,18],[20,23,16,21,"useSidecar"],[20,33,16,31],[21,2,17,0],[21,11,17,9,"useRealSidecar"],[21,25,17,23,"useRealSidecar"],[21,26,17,24,"importer"],[21,34,17,32],[21,36,17,34,"effect"],[21,42,17,40],[21,44,17,42],[22,4,18,4],[22,8,18,8,"options"],[22,15,18,15],[22,18,18,19,"effect"],[22,24,18,25],[22,28,18,29,"effect"],[22,34,18,35],[22,35,18,36,"options"],[22,42,18,43],[22,46,18,48,"NO_OPTIONS"],[22,56,18,58],[23,4,19,4],[23,8,19,8,"couldUseCache"],[23,21,19,21],[23,24,19,24,"env_1"],[23,29,19,29],[23,30,19,30,"env"],[23,33,19,33],[23,34,19,34,"forceCache"],[23,44,19,44],[23,48,19,49,"env_1"],[23,53,19,54],[23,54,19,55,"env"],[23,57,19,58],[23,58,19,59,"isNode"],[23,64,19,65],[23,68,19,69],[23,69,19,70],[23,70,19,71,"options"],[23,77,19,78],[23,78,19,79,"ssr"],[23,81,19,83],[23,85,19,87],[23,86,19,88,"options"],[23,93,19,95],[23,94,19,96,"async"],[23,99,19,101],[24,4,20,4],[24,8,20,8,"_a"],[24,10,20,10],[24,13,20,13],[24,14,20,14],[24,15,20,15],[24,17,20,17,"react_1"],[24,24,20,24],[24,25,20,25,"useState"],[24,33,20,33],[24,35,20,35,"couldUseCache"],[24,48,20,48],[24,51,20,51],[24,63,20,63],[25,8,20,65],[25,15,20,72,"cache"],[25,20,20,77],[25,21,20,78,"get"],[25,24,20,81],[25,25,20,82,"importer"],[25,33,20,90],[25,34,20,91],[26,6,20,93],[26,7,20,94],[26,10,20,97,"undefined"],[26,19,20,106],[26,20,20,107],[27,6,20,109,"Car"],[27,9,20,112],[27,12,20,115,"_a"],[27,14,20,117],[27,15,20,118],[27,16,20,119],[27,17,20,120],[28,6,20,122,"setCar"],[28,12,20,128],[28,15,20,131,"_a"],[28,17,20,133],[28,18,20,134],[28,19,20,135],[28,20,20,136],[29,4,21,4],[29,8,21,8,"_b"],[29,10,21,10],[29,13,21,13],[29,14,21,14],[29,15,21,15],[29,17,21,17,"react_1"],[29,24,21,24],[29,25,21,25,"useState"],[29,33,21,33],[29,35,21,35],[29,39,21,39],[29,40,21,40],[30,6,21,42,"error"],[30,11,21,47],[30,14,21,50,"_b"],[30,16,21,52],[30,17,21,53],[30,18,21,54],[30,19,21,55],[31,6,21,57,"setError"],[31,14,21,65],[31,17,21,68,"_b"],[31,19,21,70],[31,20,21,71],[31,21,21,72],[31,22,21,73],[32,4,22,4],[32,5,22,5],[32,6,22,6],[32,8,22,8,"react_1"],[32,15,22,15],[32,16,22,16,"useEffect"],[32,25,22,25],[32,27,22,27],[32,39,22,39],[33,6,23,8],[33,10,23,12],[33,11,23,13,"Car"],[33,14,23,16],[33,16,23,18],[34,8,24,12,"importer"],[34,16,24,20],[34,17,24,21],[34,18,24,22],[34,19,24,23,"then"],[34,23,24,27],[34,24,24,28],[34,34,24,38,"car"],[34,37,24,41],[34,39,24,43],[35,10,25,16],[35,14,25,20,"resolved"],[35,22,25,28],[35,25,25,31,"effect"],[35,31,25,37],[35,34,25,40,"effect"],[35,40,25,46],[35,41,25,47,"read"],[35,45,25,51],[35,46,25,52],[35,47,25,53],[35,50,25,56,"car"],[35,53,25,59],[35,54,25,60,"default"],[35,61,25,67],[35,65,25,71,"car"],[35,68,25,74],[36,10,26,16],[36,14,26,20],[36,15,26,21,"resolved"],[36,23,26,29],[36,25,26,31],[37,12,27,20,"console"],[37,19,27,27],[37,20,27,28,"error"],[37,25,27,33],[37,26,27,34],[37,56,27,64],[37,58,27,66,"importer"],[37,66,27,74],[37,67,27,75],[38,12,28,20],[38,16,28,24,"error_1"],[38,23,28,31],[39,12,29,20],[39,16,29,24,"effect"],[39,22,29,30],[39,24,29,32],[40,14,30,24,"console"],[40,21,30,31],[40,22,30,32,"error"],[40,27,30,37],[40,28,30,38],[40,56,30,66],[40,58,30,68,"effect"],[40,64,30,74],[40,65,30,75],[41,14,31,24,"error_1"],[41,21,31,31],[41,24,31,34],[41,28,31,38,"Error"],[41,33,31,43],[41,34,31,44],[41,64,31,74],[41,65,31,75],[42,12,32,20],[42,13,32,21],[42,19,33,25],[43,14,34,24,"error_1"],[43,21,34,31],[43,24,34,34],[43,28,34,38,"Error"],[43,33,34,43],[43,34,34,44],[43,68,34,78],[43,69,34,79],[44,12,35,20],[45,12,36,20,"setError"],[45,20,36,28],[45,21,36,29],[45,33,36,41],[46,14,36,43],[46,21,36,50,"error_1"],[46,28,36,57],[47,12,36,59],[47,13,36,60],[47,14,36,61],[48,12,37,20],[48,18,37,26,"error_1"],[48,25,37,33],[49,10,38,16],[50,10,39,16,"cache"],[50,15,39,21],[50,16,39,22,"set"],[50,19,39,25],[50,20,39,26,"importer"],[50,28,39,34],[50,30,39,36,"resolved"],[50,38,39,44],[50,39,39,45],[51,10,40,16,"setCar"],[51,16,40,22],[51,17,40,23],[51,29,40,35],[52,12,40,37],[52,19,40,44,"resolved"],[52,27,40,52],[53,10,40,54],[53,11,40,55],[53,12,40,56],[54,8,41,12],[54,9,41,13],[54,11,41,15],[54,21,41,25,"e"],[54,22,41,26],[54,24,41,28],[55,10,41,30],[55,17,41,37,"setError"],[55,25,41,45],[55,26,41,46],[55,38,41,58],[56,12,41,60],[56,19,41,67,"e"],[56,20,41,68],[57,10,41,70],[57,11,41,71],[57,12,41,72],[58,8,41,74],[58,9,41,75],[58,10,41,76],[59,6,42,8],[60,4,43,4],[60,5,43,5],[60,7,43,7],[60,9,43,9],[60,10,43,10],[61,4,44,4],[61,11,44,11],[61,12,44,12,"Car"],[61,15,44,15],[61,17,44,17,"error"],[61,22,44,22],[61,23,44,23],[62,2,45,0],[63,0,45,1],[63,3]],"functionMap":{"names":["<global>","useSidecar","useRealSidecar","<anonymous>","importer.then$argument_0","setError$argument_0","setCar$argument_0","importer.then$argument_1"],"mappings":"AAA;ACO;CDO;AEE;mDCG,2CD;2BCE;4BCE;6BCY,+BD;uBEI,gCF;aDC,EI,+BF,yBE,IJ;KDE;CFE"},"hasCjsExports":true},"type":"js/module"}]}