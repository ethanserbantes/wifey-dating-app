{"dependencies":[{"name":"../asyncContext/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":67,"index":67}}],"key":"0lgbsiOKFlLN56kb6TORm/gLqf8=","exportNames":["*"],"imports":1}},{"name":"../carrier.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":68},"end":{"line":2,"column":47,"index":115}}],"key":"/CHWq5A6N7GxVM0vQJS3tsMdXuE=","exportNames":["*"],"imports":1}},{"name":"../currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":116},"end":{"line":3,"column":65,"index":181}}],"key":"4IMzW1L9FGOQbFYVibN4P3pVG0E=","exportNames":["*"],"imports":1}},{"name":"../exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":182},"end":{"line":4,"column":42,"index":224}}],"key":"PyiI6yM07W7J+gN2cHiTPsTCV4c=","exportNames":["*"],"imports":1}},{"name":"./debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":225},"end":{"line":5,"column":42,"index":267}}],"key":"VSeoyyJzODV++e70LcO1jVtvSwg=","exportNames":["*"],"imports":1}},{"name":"./spanUtils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":268},"end":{"line":6,"column":91,"index":359}}],"key":"pE6EbrkYaK+zZjEPcLbMGlNIybs=","exportNames":["*"],"imports":1}},{"name":"../tracing/dynamicSamplingContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":360},"end":{"line":7,"column":125,"index":485}}],"key":"FvwhgvpQZsL+PnAoapZrk+Q+d08=","exportNames":["*"],"imports":1}},{"name":"./baggage.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":486},"end":{"line":8,"column":75,"index":561}}],"key":"YLOHW1rZiihehep84TQ0K/MkF3E=","exportNames":["*"],"imports":1}},{"name":"./tracing.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":562},"end":{"line":9,"column":104,"index":666}}],"key":"/BFmc2J2ETDGb0NsBczfU3vlDXI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getTraceData\", {\n    enumerable: true,\n    get: function () {\n      return getTraceData;\n    }\n  });\n  var _asyncContextIndexJs = require(_dependencyMap[0]);\n  var _carrierJs = require(_dependencyMap[1]);\n  var _currentScopesJs = require(_dependencyMap[2]);\n  var _exportsJs = require(_dependencyMap[3]);\n  var _debugLoggerJs = require(_dependencyMap[4]);\n  var _spanUtilsJs = require(_dependencyMap[5]);\n  var _tracingDynamicSamplingContextJs = require(_dependencyMap[6]);\n  var _baggageJs = require(_dependencyMap[7]);\n  var _tracingJs = require(_dependencyMap[8]);\n  /**\n   * Extracts trace propagation data from the current span or from the client's scope (via transaction or propagation\n   * context) and serializes it to `sentry-trace` and `baggage` values. These values can be used to propagate\n   * a trace via our tracing Http headers or Html `<meta>` tags.\n   *\n   * This function also applies some validation to the generated sentry-trace and baggage values to ensure that\n   * only valid strings are returned.\n   *\n   * If (@param options.propagateTraceparent) is `true`, the function will also generate a `traceparent` value,\n   * following the W3C traceparent header format.\n   *\n   * @returns an object with the tracing data values. The object keys are the name of the tracing key to be used as header\n   * or meta tag name.\n   */\n  function getTraceData() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var client = options.client || (0, _currentScopesJs.getClient)();\n    if (!(0, _exportsJs.isEnabled)() || !client) {\n      return {};\n    }\n    var carrier = (0, _carrierJs.getMainCarrier)();\n    var acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n    if (acs.getTraceData) {\n      return acs.getTraceData(options);\n    }\n    var scope = options.scope || (0, _currentScopesJs.getCurrentScope)();\n    var span = options.span || (0, _spanUtilsJs.getActiveSpan)();\n    var sentryTrace = span ? (0, _spanUtilsJs.spanToTraceHeader)(span) : scopeToTraceHeader(scope);\n    var dsc = span ? (0, _tracingDynamicSamplingContextJs.getDynamicSamplingContextFromSpan)(span) : (0, _tracingDynamicSamplingContextJs.getDynamicSamplingContextFromScope)(client, scope);\n    var baggage = (0, _baggageJs.dynamicSamplingContextToSentryBaggageHeader)(dsc);\n    var isValidSentryTraceHeader = _tracingJs.TRACEPARENT_REGEXP.test(sentryTrace);\n    if (!isValidSentryTraceHeader) {\n      _debugLoggerJs.debug.warn('Invalid sentry-trace data. Cannot generate trace data');\n      return {};\n    }\n    var traceData = {\n      'sentry-trace': sentryTrace,\n      baggage\n    };\n    if (options.propagateTraceparent) {\n      var traceparent = span ? (0, _spanUtilsJs.spanToTraceparentHeader)(span) : scopeToTraceparentHeader(scope);\n      if (traceparent) {\n        traceData.traceparent = traceparent;\n      }\n    }\n    return traceData;\n  }\n\n  /**\n   * Get a sentry-trace header value for the given scope.\n   */\n  function scopeToTraceHeader(scope) {\n    var _scope$getPropagation = scope.getPropagationContext(),\n      traceId = _scope$getPropagation.traceId,\n      sampled = _scope$getPropagation.sampled,\n      propagationSpanId = _scope$getPropagation.propagationSpanId;\n    return (0, _tracingJs.generateSentryTraceHeader)(traceId, propagationSpanId, sampled);\n  }\n  function scopeToTraceparentHeader(scope) {\n    var _scope$getPropagation2 = scope.getPropagationContext(),\n      traceId = _scope$getPropagation2.traceId,\n      sampled = _scope$getPropagation2.sampled,\n      propagationSpanId = _scope$getPropagation2.propagationSpanId;\n    return (0, _tracingJs.generateTraceparentHeader)(traceId, propagationSpanId, sampled);\n  }\n});","lineCount":87,"map":[[7,2,79,0,"Object"],[7,8,79,0],[7,9,79,0,"defineProperty"],[7,23,79,0],[7,24,79,0,"exports"],[7,31,79,0],[8,4,79,0,"enumerable"],[8,14,79,0],[9,4,79,0,"get"],[9,7,79,0],[9,18,79,0,"get"],[9,19,79,0],[10,6,79,0],[10,13,79,9,"getTraceData"],[10,25,79,21],[11,4,79,21],[12,2,79,21],[13,2,1,0],[13,6,1,0,"_asyncContextIndexJs"],[13,26,1,0],[13,29,1,0,"require"],[13,36,1,0],[13,37,1,0,"_dependencyMap"],[13,51,1,0],[14,2,2,0],[14,6,2,0,"_carrierJs"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,0],[15,6,3,0,"_currentScopesJs"],[15,22,3,0],[15,25,3,0,"require"],[15,32,3,0],[15,33,3,0,"_dependencyMap"],[15,47,3,0],[16,2,4,0],[16,6,4,0,"_exportsJs"],[16,16,4,0],[16,19,4,0,"require"],[16,26,4,0],[16,27,4,0,"_dependencyMap"],[16,41,4,0],[17,2,5,0],[17,6,5,0,"_debugLoggerJs"],[17,20,5,0],[17,23,5,0,"require"],[17,30,5,0],[17,31,5,0,"_dependencyMap"],[17,45,5,0],[18,2,6,0],[18,6,6,0,"_spanUtilsJs"],[18,18,6,0],[18,21,6,0,"require"],[18,28,6,0],[18,29,6,0,"_dependencyMap"],[18,43,6,0],[19,2,7,0],[19,6,7,0,"_tracingDynamicSamplingContextJs"],[19,38,7,0],[19,41,7,0,"require"],[19,48,7,0],[19,49,7,0,"_dependencyMap"],[19,63,7,0],[20,2,8,0],[20,6,8,0,"_baggageJs"],[20,16,8,0],[20,19,8,0,"require"],[20,26,8,0],[20,27,8,0,"_dependencyMap"],[20,41,8,0],[21,2,9,0],[21,6,9,0,"_tracingJs"],[21,16,9,0],[21,19,9,0,"require"],[21,26,9,0],[21,27,9,0,"_dependencyMap"],[21,41,9,0],[22,2,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,2,25,0],[36,11,25,9,"getTraceData"],[36,23,25,21,"getTraceData"],[36,24,25,21],[36,26,27,2],[37,4,27,2],[37,8,26,2,"options"],[37,15,26,9],[37,18,26,9,"arguments"],[37,27,26,9],[37,28,26,9,"length"],[37,34,26,9],[37,42,26,9,"arguments"],[37,51,26,9],[37,59,26,9,"undefined"],[37,68,26,9],[37,71,26,9,"arguments"],[37,80,26,9],[37,86,26,12],[37,87,26,13],[37,88,26,14],[38,4,28,2],[38,8,28,8,"client"],[38,14,28,14],[38,17,28,17,"options"],[38,24,28,24],[38,25,28,25,"client"],[38,31,28,31],[38,35,28,35],[38,39,28,35,"getClient"],[38,55,28,44],[38,56,28,44,"getClient"],[38,65,28,44],[38,67,28,45],[38,68,28,46],[39,4,29,2],[39,8,29,6],[39,9,29,7],[39,13,29,7,"isEnabled"],[39,23,29,16],[39,24,29,16,"isEnabled"],[39,33,29,16],[39,35,29,17],[39,36,29,18],[39,40,29,22],[39,41,29,23,"client"],[39,47,29,29],[39,49,29,31],[40,6,30,4],[40,13,30,11],[40,14,30,12],[40,15,30,13],[41,4,31,2],[42,4,33,2],[42,8,33,8,"carrier"],[42,15,33,15],[42,18,33,18],[42,22,33,18,"getMainCarrier"],[42,32,33,32],[42,33,33,32,"getMainCarrier"],[42,47,33,32],[42,49,33,33],[42,50,33,34],[43,4,34,2],[43,8,34,8,"acs"],[43,11,34,11],[43,14,34,14],[43,18,34,14,"getAsyncContextStrategy"],[43,38,34,37],[43,39,34,37,"getAsyncContextStrategy"],[43,62,34,37],[43,64,34,38,"carrier"],[43,71,34,45],[43,72,34,46],[44,4,35,2],[44,8,35,6,"acs"],[44,11,35,9],[44,12,35,10,"getTraceData"],[44,24,35,22],[44,26,35,24],[45,6,36,4],[45,13,36,11,"acs"],[45,16,36,14],[45,17,36,15,"getTraceData"],[45,29,36,27],[45,30,36,28,"options"],[45,37,36,35],[45,38,36,36],[46,4,37,2],[47,4,39,2],[47,8,39,8,"scope"],[47,13,39,13],[47,16,39,16,"options"],[47,23,39,23],[47,24,39,24,"scope"],[47,29,39,29],[47,33,39,33],[47,37,39,33,"getCurrentScope"],[47,53,39,48],[47,54,39,48,"getCurrentScope"],[47,69,39,48],[47,71,39,49],[47,72,39,50],[48,4,40,2],[48,8,40,8,"span"],[48,12,40,12],[48,15,40,15,"options"],[48,22,40,22],[48,23,40,23,"span"],[48,27,40,27],[48,31,40,31],[48,35,40,31,"getActiveSpan"],[48,47,40,44],[48,48,40,44,"getActiveSpan"],[48,61,40,44],[48,63,40,45],[48,64,40,46],[49,4,41,2],[49,8,41,8,"sentryTrace"],[49,19,41,19],[49,22,41,22,"span"],[49,26,41,26],[49,29,41,29],[49,33,41,29,"spanToTraceHeader"],[49,45,41,46],[49,46,41,46,"spanToTraceHeader"],[49,63,41,46],[49,65,41,47,"span"],[49,69,41,51],[49,70,41,52],[49,73,41,55,"scopeToTraceHeader"],[49,91,41,73],[49,92,41,74,"scope"],[49,97,41,79],[49,98,41,80],[50,4,42,2],[50,8,42,8,"dsc"],[50,11,42,11],[50,14,42,14,"span"],[50,18,42,18],[50,21,42,21],[50,25,42,21,"getDynamicSamplingContextFromSpan"],[50,57,42,54],[50,58,42,54,"getDynamicSamplingContextFromSpan"],[50,91,42,54],[50,93,42,55,"span"],[50,97,42,59],[50,98,42,60],[50,101,42,63],[50,105,42,63,"getDynamicSamplingContextFromScope"],[50,137,42,97],[50,138,42,97,"getDynamicSamplingContextFromScope"],[50,172,42,97],[50,174,42,98,"client"],[50,180,42,104],[50,182,42,106,"scope"],[50,187,42,111],[50,188,42,112],[51,4,43,2],[51,8,43,8,"baggage"],[51,15,43,15],[51,18,43,18],[51,22,43,18,"dynamicSamplingContextToSentryBaggageHeader"],[51,32,43,61],[51,33,43,61,"dynamicSamplingContextToSentryBaggageHeader"],[51,76,43,61],[51,78,43,62,"dsc"],[51,81,43,65],[51,82,43,66],[52,4,45,2],[52,8,45,8,"isValidSentryTraceHeader"],[52,32,45,32],[52,35,45,35,"TRACEPARENT_REGEXP"],[52,45,45,53],[52,46,45,53,"TRACEPARENT_REGEXP"],[52,64,45,53],[52,65,45,54,"test"],[52,69,45,58],[52,70,45,59,"sentryTrace"],[52,81,45,70],[52,82,45,71],[53,4,46,2],[53,8,46,6],[53,9,46,7,"isValidSentryTraceHeader"],[53,33,46,31],[53,35,46,33],[54,6,47,4,"debug"],[54,20,47,9],[54,21,47,9,"debug"],[54,26,47,9],[54,27,47,10,"warn"],[54,31,47,14],[54,32,47,15],[54,87,47,70],[54,88,47,71],[55,6,48,4],[55,13,48,11],[55,14,48,12],[55,15,48,13],[56,4,49,2],[57,4,51,2],[57,8,51,8,"traceData"],[57,17,51,17],[57,20,51,20],[58,6,52,4],[58,20,52,18],[58,22,52,20,"sentryTrace"],[58,33,52,31],[59,6,53,4,"baggage"],[60,4,54,2],[60,5,54,3],[61,4,56,2],[61,8,56,6,"options"],[61,15,56,13],[61,16,56,14,"propagateTraceparent"],[61,36,56,34],[61,38,56,36],[62,6,57,4],[62,10,57,10,"traceparent"],[62,21,57,21],[62,24,57,24,"span"],[62,28,57,28],[62,31,57,31],[62,35,57,31,"spanToTraceparentHeader"],[62,47,57,54],[62,48,57,54,"spanToTraceparentHeader"],[62,71,57,54],[62,73,57,55,"span"],[62,77,57,59],[62,78,57,60],[62,81,57,63,"scopeToTraceparentHeader"],[62,105,57,87],[62,106,57,88,"scope"],[62,111,57,93],[62,112,57,94],[63,6,58,4],[63,10,58,8,"traceparent"],[63,21,58,19],[63,23,58,21],[64,8,59,6,"traceData"],[64,17,59,15],[64,18,59,16,"traceparent"],[64,29,59,27],[64,32,59,30,"traceparent"],[64,43,59,41],[65,6,60,4],[66,4,61,2],[67,4,63,2],[67,11,63,9,"traceData"],[67,20,63,18],[68,2,64,0],[70,2,66,0],[71,0,67,0],[72,0,68,0],[73,2,69,0],[73,11,69,9,"scopeToTraceHeader"],[73,29,69,27,"scopeToTraceHeader"],[73,30,69,28,"scope"],[73,35,69,33],[73,37,69,35],[74,4,70,2],[74,8,70,2,"_scope$getPropagation"],[74,29,70,2],[74,32,70,50,"scope"],[74,37,70,55],[74,38,70,56,"getPropagationContext"],[74,59,70,77],[74,60,70,78],[74,61,70,79],[75,6,70,10,"traceId"],[75,13,70,17],[75,16,70,17,"_scope$getPropagation"],[75,37,70,17],[75,38,70,10,"traceId"],[75,45,70,17],[76,6,70,19,"sampled"],[76,13,70,26],[76,16,70,26,"_scope$getPropagation"],[76,37,70,26],[76,38,70,19,"sampled"],[76,45,70,26],[77,6,70,28,"propagationSpanId"],[77,23,70,45],[77,26,70,45,"_scope$getPropagation"],[77,47,70,45],[77,48,70,28,"propagationSpanId"],[77,65,70,45],[78,4,71,2],[78,11,71,9],[78,15,71,9,"generateSentryTraceHeader"],[78,25,71,34],[78,26,71,34,"generateSentryTraceHeader"],[78,51,71,34],[78,53,71,35,"traceId"],[78,60,71,42],[78,62,71,44,"propagationSpanId"],[78,79,71,61],[78,81,71,63,"sampled"],[78,88,71,70],[78,89,71,71],[79,2,72,0],[80,2,74,0],[80,11,74,9,"scopeToTraceparentHeader"],[80,35,74,33,"scopeToTraceparentHeader"],[80,36,74,34,"scope"],[80,41,74,39],[80,43,74,41],[81,4,75,2],[81,8,75,2,"_scope$getPropagation2"],[81,30,75,2],[81,33,75,50,"scope"],[81,38,75,55],[81,39,75,56,"getPropagationContext"],[81,60,75,77],[81,61,75,78],[81,62,75,79],[82,6,75,10,"traceId"],[82,13,75,17],[82,16,75,17,"_scope$getPropagation2"],[82,38,75,17],[82,39,75,10,"traceId"],[82,46,75,17],[83,6,75,19,"sampled"],[83,13,75,26],[83,16,75,26,"_scope$getPropagation2"],[83,38,75,26],[83,39,75,19,"sampled"],[83,46,75,26],[84,6,75,28,"propagationSpanId"],[84,23,75,45],[84,26,75,45,"_scope$getPropagation2"],[84,48,75,45],[84,49,75,28,"propagationSpanId"],[84,66,75,45],[85,4,76,2],[85,11,76,9],[85,15,76,9,"generateTraceparentHeader"],[85,25,76,34],[85,26,76,34,"generateTraceparentHeader"],[85,51,76,34],[85,53,76,35,"traceId"],[85,60,76,42],[85,62,76,44,"propagationSpanId"],[85,79,76,61],[85,81,76,63,"sampled"],[85,88,76,70],[85,89,76,71],[86,2,77,0],[87,0,77,1],[87,3]],"functionMap":{"names":["<global>","getTraceData","scopeToTraceHeader","scopeToTraceparentHeader"],"mappings":"AAA;ACwB;CDuC;AEK;CFG;AGE;CHG"},"hasCjsExports":false},"type":"js/module"}]}