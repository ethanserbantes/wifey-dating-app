{"dependencies":[{"name":"../../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"How8xsoS0dUDpKnVy0jHSdmxOM4=","exportNames":["*"],"imports":1}},{"name":"./globalListeners.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":55,"index":99}}],"key":"vUYyxH7QtXe33DCzXpyRH3XH51k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"onHidden\", {\n    enumerable: true,\n    get: function () {\n      return onHidden;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0], \"../../../types.js\");\n  var _globalListenersJs = require(_dependencyMap[1], \"./globalListeners.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  // Sentry-specific change:\n  // This function's logic was NOT updated to web-vitals 4.2.4 or 5.x but we continue\n  // to use the web-vitals 3.5.2 versiondue to us having stricter browser support.\n  // PR with context that made the changes: https://github.com/GoogleChrome/web-vitals/pull/442/files#r1530492402\n  // The PR removed listening to the `pagehide` event, in favour of only listening to `visibilitychange` event.\n  // This is \"more correct\" but some browsers we still support (Safari <14.4) don't fully support `visibilitychange`\n  // or have known bugs w.r.t the `visibilitychange` event.\n  // TODO (v11): If we decide to drop support for Safari 14.4, we can use the logic from web-vitals 4.2.4\n  // In this case, we also need to update the integration tests that currently trigger the `pagehide` event to\n  // simulate the page being hidden.\n  var onHidden = cb => {\n    var onHiddenOrPageHide = event => {\n      if (event.type === 'pagehide' || _typesJs.WINDOW.document?.visibilityState === 'hidden') {\n        cb(event);\n      }\n    };\n    (0, _globalListenersJs.addPageListener)('visibilitychange', onHiddenOrPageHide, true);\n    // Some browsers have buggy implementations of visibilitychange,\n    // so we use pagehide in addition, just to be safe.\n    (0, _globalListenersJs.addPageListener)('pagehide', onHiddenOrPageHide, true);\n  };\n});","lineCount":52,"map":[[7,2,44,0,"Object"],[7,8,44,0],[7,9,44,0,"defineProperty"],[7,23,44,0],[7,24,44,0,"exports"],[7,31,44,0],[8,4,44,0,"enumerable"],[8,14,44,0],[9,4,44,0,"get"],[9,7,44,0],[9,18,44,0,"get"],[9,19,44,0],[10,6,44,0],[10,13,44,9,"onHidden"],[10,21,44,17],[11,4,44,17],[12,2,44,17],[13,2,1,0],[13,6,1,0,"_typesJs"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_globalListenersJs"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[31,2,21,0],[32,2,22,0],[33,2,23,0],[34,2,24,0],[35,2,25,0],[36,2,26,0],[37,2,27,0],[38,2,28,0],[39,2,29,0],[40,2,30,0],[41,2,31,0],[41,6,31,6,"onHidden"],[41,14,31,14],[41,17,31,18,"cb"],[41,19,31,20],[41,23,31,25],[42,4,32,2],[42,8,32,8,"onHiddenOrPageHide"],[42,26,32,26],[42,29,32,30,"event"],[42,34,32,35],[42,38,32,40],[43,6,33,4],[43,10,33,8,"event"],[43,15,33,13],[43,16,33,14,"type"],[43,20,33,18],[43,25,33,23],[43,35,33,33],[43,39,33,37,"WINDOW"],[43,47,33,43],[43,48,33,43,"WINDOW"],[43,54,33,43],[43,55,33,44,"document"],[43,63,33,52],[43,65,33,54,"visibilityState"],[43,80,33,69],[43,85,33,74],[43,93,33,82],[43,95,33,84],[44,8,34,6,"cb"],[44,10,34,8],[44,11,34,9,"event"],[44,16,34,14],[44,17,34,15],[45,6,35,4],[46,4,36,2],[46,5,36,3],[47,4,38,2],[47,8,38,2,"addPageListener"],[47,26,38,17],[47,27,38,17,"addPageListener"],[47,42,38,17],[47,44,38,18],[47,62,38,36],[47,64,38,38,"onHiddenOrPageHide"],[47,82,38,56],[47,84,38,58],[47,88,38,62],[47,89,38,63],[48,4,39,2],[49,4,40,2],[50,4,41,2],[50,8,41,2,"addPageListener"],[50,26,41,17],[50,27,41,17,"addPageListener"],[50,42,41,17],[50,44,41,18],[50,54,41,28],[50,56,41,30,"onHiddenOrPageHide"],[50,74,41,48],[50,76,41,50],[50,80,41,54],[50,81,41,55],[51,2,42,0],[51,3,42,1],[52,0,42,2],[52,3]],"functionMap":{"names":["<global>","onHidden","onHiddenOrPageHide"],"mappings":"AAA;iBC8B;6BCC;GDI;CDM"},"hasCjsExports":false},"type":"js/module"}]}