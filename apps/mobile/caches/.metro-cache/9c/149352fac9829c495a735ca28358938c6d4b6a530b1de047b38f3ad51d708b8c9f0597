{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":69,"index":135}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":136},"end":{"line":3,"column":55,"index":191}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesData = useMessagesData;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _tanstackReactQuery = require(_dependencyMap[4]);\n  function useMessagesData() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      jwt = _ref.jwt;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      matches = _useState4[0],\n      setMatches = _useState4[1];\n    var _useState5 = (0, _react.useState)(0),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      pendingMatchCount = _useState6[0],\n      setPendingMatchCount = _useState6[1];\n    var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      user = _useState8[0],\n      setUser = _useState8[1];\n    var _useState9 = (0, _react.useState)(null),\n      _useState0 = (0, _slicedToArray.default)(_useState9, 2),\n      error = _useState0[0],\n      setError = _useState0[1];\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n\n    // NEW: safety valve so the Messages tab can never spin forever.\n    var didFinishInitialLoadRef = (0, _react.useRef)(false);\n\n    // NEW: when we have a web-auth JWT (mobile WebView auth), make sure we are\n    // using the correct legacy `users.id`.\n    var ensureLegacyUserFromJwt = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      var token = jwt && typeof jwt === \"string\" ? jwt : null;\n      if (!token) return null;\n      try {\n        var resp = yield fetch(\"/api/users/ensure\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!resp.ok) {\n          // Non-fatal: fall back to AsyncStorage.\n          return null;\n        }\n        var data = yield resp.json().catch(() => null);\n        var ensured = data?.user || null;\n        var ensuredId = Number(ensured?.id);\n        if (!Number.isFinite(ensuredId)) {\n          return null;\n        }\n        return ensured;\n      } catch (e) {\n        console.error(\"/api/users/ensure failed\", e);\n        return null;\n      }\n    }), [jwt]);\n    var markMatchesSeen = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          var resp = yield fetch(\"/api/matches/mark-seen\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              userId\n            })\n          });\n          if (resp.ok) {\n            queryClient.invalidateQueries({\n              queryKey: [\"matchesForBadge\", userId]\n            });\n            queryClient.invalidateQueries({\n              queryKey: [\"matchesSummary\", userId]\n            });\n          }\n        } catch (e) {\n          console.error(\"Could not mark matches seen\", e);\n        }\n      });\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [queryClient]);\n    var fetchWithTimeout = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* (url, options, timeoutMs) {\n        // NOTE: AbortController support varies across RN runtimes.\n        // Promise.race guarantees we never hang on a stuck network call.\n        var controller = typeof AbortController !== \"undefined\" ? new AbortController() : null;\n        var timeoutId = null;\n        var fetchPromise = fetch(url, {\n          ...(options || {}),\n          ...(controller ? {\n            signal: controller.signal\n          } : {})\n        }).finally(() => {\n          if (timeoutId != null) {\n            clearTimeout(timeoutId);\n          }\n        });\n        var timeoutPromise = new Promise((_, reject) => {\n          timeoutId = setTimeout(() => {\n            try {\n              controller?.abort();\n            } catch {\n              // ignore\n            }\n            var err = new Error(`Request timed out after ${timeoutMs}ms`);\n            err.name = \"TimeoutError\";\n            reject(err);\n          }, timeoutMs);\n        });\n        return Promise.race([fetchPromise, timeoutPromise]);\n      });\n      return function (_x2, _x3, _x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }(), []);\n    var loadMatches = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref5 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          setError(null);\n          var response = yield fetchWithTimeout(`/api/matches?userId=${userId}`, null, 12000);\n          if (!response.ok) {\n            throw new Error(`When fetching /api/matches, the response was [${response.status}] ${response.statusText}`);\n          }\n          var data = yield response.json();\n          var list = data.matches || [];\n          setMatches(list);\n          setPendingMatchCount(Number(data?.pendingMatchCount) || 0);\n          return list;\n        } catch (err) {\n          var isTimeout = String(err?.name || \"\").toLowerCase() === \"timeouterror\";\n          console.error(\"Error loading matches:\", err);\n          setError(isTimeout ? \"Messages are taking too long to load. Please try again.\" : \"Could not load matches. Please try again.\");\n          return [];\n        }\n      });\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }(), [fetchWithTimeout]);\n    var loadUserAndMatches = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      try {\n        setError(null);\n        var ensured = yield ensureLegacyUserFromJwt();\n        var userData = yield AsyncStorage.default.getItem(\"user\");\n        var parsedUser = userData ? JSON.parse(userData) : null;\n\n        // Prefer ensured legacy id when available (keeps date credits + matches in sync).\n        var nextUser = parsedUser;\n        if (ensured) {\n          nextUser = {\n            ...(parsedUser || {}),\n            ...ensured,\n            id: ensured.id\n          };\n          try {\n            yield AsyncStorage.default.setItem(\"user\", JSON.stringify(nextUser));\n          } catch (e) {\n            console.error(\"Could not persist ensured user\", e);\n          }\n        }\n        if (!nextUser) {\n          setUser(null);\n          setMatches([]);\n          setPendingMatchCount(0);\n          return;\n        }\n        setUser(nextUser);\n        var uid = Number(nextUser?.id);\n        if (!Number.isFinite(uid)) {\n          setError(\"Could not load messages (missing user id). Please sign in again.\");\n          return;\n        }\n\n        // IMPORTANT: never block the whole screen on mark-seen.\n        markMatchesSeen(uid).catch(() => null);\n        yield loadMatches(uid);\n      } catch (error) {\n        console.error(\"Error loading user:\", error);\n        setError(\"Could not load messages. Please try again.\");\n      } finally {\n        didFinishInitialLoadRef.current = true;\n        setLoading(false);\n      }\n    }), [ensureLegacyUserFromJwt, loadMatches, markMatchesSeen]);\n    (0, _react.useEffect)(() => {\n      loadUserAndMatches();\n    }, [loadUserAndMatches]);\n    (0, _react.useEffect)(() => {\n      // If something in RN fetch/AsyncStorage ever gets into a weird state,\n      // we still stop the spinner and show an error.\n      var watchdogMs = 15000;\n      var id = setTimeout(() => {\n        if (didFinishInitialLoadRef.current) {\n          return;\n        }\n        console.error(`Messages watchdog fired after ${watchdogMs}ms (forcing loading=false).`);\n        setError(\"Messages are taking too long to load. Please try again.\");\n        setLoading(false);\n      }, watchdogMs);\n      return () => clearTimeout(id);\n    }, []);\n    return {\n      loading,\n      matches,\n      pendingMatchCount,\n      user,\n      error,\n      loadMatches,\n      markMatchesSeen\n    };\n  }\n});","lineCount":234,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useMessagesData"],[12,25,5,0],[12,28,5,0,"useMessagesData"],[12,43,5,0],[13,2,224,1],[13,6,224,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,224,1],[13,45,224,1,"require"],[13,52,224,1],[13,53,224,1,"_dependencyMap"],[13,67,224,1],[14,2,224,1],[14,6,224,1,"_asyncToGenerator"],[14,23,224,1],[14,26,224,1,"_interopDefault"],[14,41,224,1],[14,42,224,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,224,1],[15,2,224,1],[15,6,224,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,224,1],[15,42,224,1,"require"],[15,49,224,1],[15,50,224,1,"_dependencyMap"],[15,64,224,1],[16,2,224,1],[16,6,224,1,"_slicedToArray"],[16,20,224,1],[16,23,224,1,"_interopDefault"],[16,38,224,1],[16,39,224,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,224,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_tanstackReactQuery"],[20,25,3,0],[20,28,3,0,"require"],[20,35,3,0],[20,36,3,0,"_dependencyMap"],[20,50,3,0],[21,2,5,7],[21,11,5,16,"useMessagesData"],[21,26,5,31,"useMessagesData"],[21,27,5,31],[21,29,5,46],[22,4,5,46],[22,8,5,46,"_ref"],[22,12,5,46],[22,15,5,46,"arguments"],[22,24,5,46],[22,25,5,46,"length"],[22,31,5,46],[22,39,5,46,"arguments"],[22,48,5,46],[22,56,5,46,"undefined"],[22,65,5,46],[22,68,5,46,"arguments"],[22,77,5,46],[22,83,5,42],[22,84,5,43],[22,85,5,44],[23,6,5,34,"jwt"],[23,9,5,37],[23,12,5,37,"_ref"],[23,16,5,37],[23,17,5,34,"jwt"],[23,20,5,37],[24,4,6,2],[24,8,6,2,"_useState"],[24,17,6,2],[24,20,6,32],[24,24,6,32,"useState"],[24,30,6,40],[24,31,6,40,"useState"],[24,39,6,40],[24,41,6,41],[24,45,6,45],[24,46,6,46],[25,6,6,46,"_useState2"],[25,16,6,46],[25,23,6,46,"_slicedToArray"],[25,37,6,46],[25,38,6,46,"default"],[25,45,6,46],[25,47,6,46,"_useState"],[25,56,6,46],[26,6,6,9,"loading"],[26,13,6,16],[26,16,6,16,"_useState2"],[26,26,6,16],[27,6,6,18,"setLoading"],[27,16,6,28],[27,19,6,28,"_useState2"],[27,29,6,28],[28,4,7,2],[28,8,7,2,"_useState3"],[28,18,7,2],[28,21,7,32],[28,25,7,32,"useState"],[28,31,7,40],[28,32,7,40,"useState"],[28,40,7,40],[28,42,7,41],[28,44,7,43],[28,45,7,44],[29,6,7,44,"_useState4"],[29,16,7,44],[29,23,7,44,"_slicedToArray"],[29,37,7,44],[29,38,7,44,"default"],[29,45,7,44],[29,47,7,44,"_useState3"],[29,57,7,44],[30,6,7,9,"matches"],[30,13,7,16],[30,16,7,16,"_useState4"],[30,26,7,16],[31,6,7,18,"setMatches"],[31,16,7,28],[31,19,7,28,"_useState4"],[31,29,7,28],[32,4,8,2],[32,8,8,2,"_useState5"],[32,18,8,2],[32,21,8,52],[32,25,8,52,"useState"],[32,31,8,60],[32,32,8,60,"useState"],[32,40,8,60],[32,42,8,61],[32,43,8,62],[32,44,8,63],[33,6,8,63,"_useState6"],[33,16,8,63],[33,23,8,63,"_slicedToArray"],[33,37,8,63],[33,38,8,63,"default"],[33,45,8,63],[33,47,8,63,"_useState5"],[33,57,8,63],[34,6,8,9,"pendingMatchCount"],[34,23,8,26],[34,26,8,26,"_useState6"],[34,36,8,26],[35,6,8,28,"setPendingMatchCount"],[35,26,8,48],[35,29,8,48,"_useState6"],[35,39,8,48],[36,4,9,2],[36,8,9,2,"_useState7"],[36,18,9,2],[36,21,9,26],[36,25,9,26,"useState"],[36,31,9,34],[36,32,9,34,"useState"],[36,40,9,34],[36,42,9,35],[36,46,9,39],[36,47,9,40],[37,6,9,40,"_useState8"],[37,16,9,40],[37,23,9,40,"_slicedToArray"],[37,37,9,40],[37,38,9,40,"default"],[37,45,9,40],[37,47,9,40,"_useState7"],[37,57,9,40],[38,6,9,9,"user"],[38,10,9,13],[38,13,9,13,"_useState8"],[38,23,9,13],[39,6,9,15,"setUser"],[39,13,9,22],[39,16,9,22,"_useState8"],[39,26,9,22],[40,4,10,2],[40,8,10,2,"_useState9"],[40,18,10,2],[40,21,10,28],[40,25,10,28,"useState"],[40,31,10,36],[40,32,10,36,"useState"],[40,40,10,36],[40,42,10,37],[40,46,10,41],[40,47,10,42],[41,6,10,42,"_useState0"],[41,16,10,42],[41,23,10,42,"_slicedToArray"],[41,37,10,42],[41,38,10,42,"default"],[41,45,10,42],[41,47,10,42,"_useState9"],[41,57,10,42],[42,6,10,9,"error"],[42,11,10,14],[42,14,10,14,"_useState0"],[42,24,10,14],[43,6,10,16,"setError"],[43,14,10,24],[43,17,10,24,"_useState0"],[43,27,10,24],[44,4,11,2],[44,8,11,8,"queryClient"],[44,19,11,19],[44,22,11,22],[44,26,11,22,"useQueryClient"],[44,45,11,36],[44,46,11,36,"useQueryClient"],[44,60,11,36],[44,62,11,37],[44,63,11,38],[46,4,13,2],[47,4,14,2],[47,8,14,8,"didFinishInitialLoadRef"],[47,31,14,31],[47,34,14,34],[47,38,14,34,"useRef"],[47,44,14,40],[47,45,14,40,"useRef"],[47,51,14,40],[47,53,14,41],[47,58,14,46],[47,59,14,47],[49,4,16,2],[50,4,17,2],[51,4,18,2],[51,8,18,8,"ensureLegacyUserFromJwt"],[51,31,18,31],[51,34,18,34],[51,38,18,34,"useCallback"],[51,44,18,45],[51,45,18,45,"useCallback"],[51,56,18,45],[51,75,18,45,"_asyncToGenerator"],[51,92,18,45],[51,93,18,45,"default"],[51,100,18,45],[51,102,18,46],[51,115,18,58],[52,6,19,4],[52,10,19,10,"token"],[52,15,19,15],[52,18,19,18,"jwt"],[52,21,19,21],[52,25,19,25],[52,32,19,32,"jwt"],[52,35,19,35],[52,40,19,40],[52,48,19,48],[52,51,19,51,"jwt"],[52,54,19,54],[52,57,19,57],[52,61,19,61],[53,6,20,4],[53,10,20,8],[53,11,20,9,"token"],[53,16,20,14],[53,18,20,16],[53,25,20,23],[53,29,20,27],[54,6,22,4],[54,10,22,8],[55,8,23,6],[55,12,23,12,"resp"],[55,16,23,16],[55,25,23,25,"fetch"],[55,30,23,30],[55,31,23,31],[55,50,23,50],[55,52,23,52],[56,10,24,8,"headers"],[56,17,24,15],[56,19,24,17],[57,12,24,19,"Authorization"],[57,25,24,32],[57,27,24,34],[57,37,24,44,"token"],[57,42,24,49],[58,10,24,52],[59,8,25,6],[59,9,25,7],[59,10,25,8],[60,8,27,6],[60,12,27,10],[60,13,27,11,"resp"],[60,17,27,15],[60,18,27,16,"ok"],[60,20,27,18],[60,22,27,20],[61,10,28,8],[62,10,29,8],[62,17,29,15],[62,21,29,19],[63,8,30,6],[64,8,32,6],[64,12,32,12,"data"],[64,16,32,16],[64,25,32,25,"resp"],[64,29,32,29],[64,30,32,30,"json"],[64,34,32,34],[64,35,32,35],[64,36,32,36],[64,37,32,37,"catch"],[64,42,32,42],[64,43,32,43],[64,49,32,49],[64,53,32,53],[64,54,32,54],[65,8,33,6],[65,12,33,12,"ensured"],[65,19,33,19],[65,22,33,22,"data"],[65,26,33,26],[65,28,33,28,"user"],[65,32,33,32],[65,36,33,36],[65,40,33,40],[66,8,35,6],[66,12,35,12,"ensuredId"],[66,21,35,21],[66,24,35,24,"Number"],[66,30,35,30],[66,31,35,31,"ensured"],[66,38,35,38],[66,40,35,40,"id"],[66,42,35,42],[66,43,35,43],[67,8,36,6],[67,12,36,10],[67,13,36,11,"Number"],[67,19,36,17],[67,20,36,18,"isFinite"],[67,28,36,26],[67,29,36,27,"ensuredId"],[67,38,36,36],[67,39,36,37],[67,41,36,39],[68,10,37,8],[68,17,37,15],[68,21,37,19],[69,8,38,6],[70,8,40,6],[70,15,40,13,"ensured"],[70,22,40,20],[71,6,41,4],[71,7,41,5],[71,8,41,6],[71,15,41,13,"e"],[71,16,41,14],[71,18,41,16],[72,8,42,6,"console"],[72,15,42,13],[72,16,42,14,"error"],[72,21,42,19],[72,22,42,20],[72,48,42,46],[72,50,42,48,"e"],[72,51,42,49],[72,52,42,50],[73,8,43,6],[73,15,43,13],[73,19,43,17],[74,6,44,4],[75,4,45,2],[75,5,45,3],[75,8,45,5],[75,9,45,6,"jwt"],[75,12,45,9],[75,13,45,10],[75,14,45,11],[76,4,47,2],[76,8,47,8,"markMatchesSeen"],[76,23,47,23],[76,26,47,26],[76,30,47,26,"useCallback"],[76,36,47,37],[76,37,47,37,"useCallback"],[76,48,47,37],[77,6,47,37],[77,10,47,37,"_ref3"],[77,15,47,37],[77,22,47,37,"_asyncToGenerator"],[77,39,47,37],[77,40,47,37,"default"],[77,47,47,37],[77,49,48,4],[77,60,48,11,"userId"],[77,66,48,17],[77,68,48,22],[78,8,49,6],[78,12,49,10],[79,10,50,8],[79,14,50,14,"resp"],[79,18,50,18],[79,27,50,27,"fetch"],[79,32,50,32],[79,33,50,33],[79,57,50,57],[79,59,50,59],[80,12,51,10,"method"],[80,18,51,16],[80,20,51,18],[80,26,51,24],[81,12,52,10,"headers"],[81,19,52,17],[81,21,52,19],[82,14,52,21],[82,28,52,35],[82,30,52,37],[83,12,52,56],[83,13,52,57],[84,12,53,10,"body"],[84,16,53,14],[84,18,53,16,"JSON"],[84,22,53,20],[84,23,53,21,"stringify"],[84,32,53,30],[84,33,53,31],[85,14,53,33,"userId"],[86,12,53,40],[86,13,53,41],[87,10,54,8],[87,11,54,9],[87,12,54,10],[88,10,55,8],[88,14,55,12,"resp"],[88,18,55,16],[88,19,55,17,"ok"],[88,21,55,19],[88,23,55,21],[89,12,56,10,"queryClient"],[89,23,56,21],[89,24,56,22,"invalidateQueries"],[89,41,56,39],[89,42,56,40],[90,14,57,12,"queryKey"],[90,22,57,20],[90,24,57,22],[90,25,57,23],[90,42,57,40],[90,44,57,42,"userId"],[90,50,57,48],[91,12,58,10],[91,13,58,11],[91,14,58,12],[92,12,59,10,"queryClient"],[92,23,59,21],[92,24,59,22,"invalidateQueries"],[92,41,59,39],[92,42,59,40],[93,14,60,12,"queryKey"],[93,22,60,20],[93,24,60,22],[93,25,60,23],[93,41,60,39],[93,43,60,41,"userId"],[93,49,60,47],[94,12,61,10],[94,13,61,11],[94,14,61,12],[95,10,62,8],[96,8,63,6],[96,9,63,7],[96,10,63,8],[96,17,63,15,"e"],[96,18,63,16],[96,20,63,18],[97,10,64,8,"console"],[97,17,64,15],[97,18,64,16,"error"],[97,23,64,21],[97,24,64,22],[97,53,64,51],[97,55,64,53,"e"],[97,56,64,54],[97,57,64,55],[98,8,65,6],[99,6,66,4],[99,7,66,5],[100,6,66,5],[100,23,66,5,"_x"],[100,25,66,5],[101,8,66,5],[101,15,66,5,"_ref3"],[101,20,66,5],[101,21,66,5,"apply"],[101,26,66,5],[101,33,66,5,"arguments"],[101,42,66,5],[102,6,66,5],[103,4,66,5],[103,9,67,4],[103,10,67,5,"queryClient"],[103,21,67,16],[103,22,68,2],[103,23,68,3],[104,4,70,2],[104,8,70,8,"fetchWithTimeout"],[104,24,70,24],[104,27,70,27],[104,31,70,27,"useCallback"],[104,37,70,38],[104,38,70,38,"useCallback"],[104,49,70,38],[105,6,70,38],[105,10,70,38,"_ref4"],[105,15,70,38],[105,22,70,38,"_asyncToGenerator"],[105,39,70,38],[105,40,70,38,"default"],[105,47,70,38],[105,49,70,39],[105,60,70,46,"url"],[105,63,70,49],[105,65,70,51,"options"],[105,72,70,58],[105,74,70,60,"timeoutMs"],[105,83,70,69],[105,85,70,74],[106,8,71,4],[107,8,72,4],[108,8,73,4],[108,12,73,10,"controller"],[108,22,73,20],[108,25,74,6],[108,32,74,13,"AbortController"],[108,47,74,28],[108,52,74,33],[108,63,74,44],[108,66,74,47],[108,70,74,51,"AbortController"],[108,85,74,66],[108,86,74,67],[108,87,74,68],[108,90,74,71],[108,94,74,75],[109,8,76,4],[109,12,76,8,"timeoutId"],[109,21,76,17],[109,24,76,20],[109,28,76,24],[110,8,78,4],[110,12,78,10,"fetchPromise"],[110,24,78,22],[110,27,78,25,"fetch"],[110,32,78,30],[110,33,78,31,"url"],[110,36,78,34],[110,38,78,36],[111,10,79,6],[111,14,79,10,"options"],[111,21,79,17],[111,25,79,21],[111,26,79,22],[111,27,79,23],[111,28,79,24],[112,10,80,6],[112,14,80,10,"controller"],[112,24,80,20],[112,27,80,23],[113,12,80,25,"signal"],[113,18,80,31],[113,20,80,33,"controller"],[113,30,80,43],[113,31,80,44,"signal"],[114,10,80,51],[114,11,80,52],[114,14,80,55],[114,15,80,56],[114,16,80,57],[115,8,81,4],[115,9,81,5],[115,10,81,6],[115,11,81,7,"finally"],[115,18,81,14],[115,19,81,15],[115,25,81,21],[116,10,82,6],[116,14,82,10,"timeoutId"],[116,23,82,19],[116,27,82,23],[116,31,82,27],[116,33,82,29],[117,12,83,8,"clearTimeout"],[117,24,83,20],[117,25,83,21,"timeoutId"],[117,34,83,30],[117,35,83,31],[118,10,84,6],[119,8,85,4],[119,9,85,5],[119,10,85,6],[120,8,87,4],[120,12,87,10,"timeoutPromise"],[120,26,87,24],[120,29,87,27],[120,33,87,31,"Promise"],[120,40,87,38],[120,41,87,39],[120,42,87,40,"_"],[120,43,87,41],[120,45,87,43,"reject"],[120,51,87,49],[120,56,87,54],[121,10,88,6,"timeoutId"],[121,19,88,15],[121,22,88,18,"setTimeout"],[121,32,88,28],[121,33,88,29],[121,39,88,35],[122,12,89,8],[122,16,89,12],[123,14,90,10,"controller"],[123,24,90,20],[123,26,90,22,"abort"],[123,31,90,27],[123,32,90,28],[123,33,90,29],[124,12,91,8],[124,13,91,9],[124,14,91,10],[124,20,91,16],[125,14,92,10],[126,12,92,10],[127,12,94,8],[127,16,94,14,"err"],[127,19,94,17],[127,22,94,20],[127,26,94,24,"Error"],[127,31,94,29],[127,32,94,30],[127,59,94,57,"timeoutMs"],[127,68,94,66],[127,72,94,70],[127,73,94,71],[128,12,95,8,"err"],[128,15,95,11],[128,16,95,12,"name"],[128,20,95,16],[128,23,95,19],[128,37,95,33],[129,12,96,8,"reject"],[129,18,96,14],[129,19,96,15,"err"],[129,22,96,18],[129,23,96,19],[130,10,97,6],[130,11,97,7],[130,13,97,9,"timeoutMs"],[130,22,97,18],[130,23,97,19],[131,8,98,4],[131,9,98,5],[131,10,98,6],[132,8,100,4],[132,15,100,11,"Promise"],[132,22,100,18],[132,23,100,19,"race"],[132,27,100,23],[132,28,100,24],[132,29,100,25,"fetchPromise"],[132,41,100,37],[132,43,100,39,"timeoutPromise"],[132,57,100,53],[132,58,100,54],[132,59,100,55],[133,6,101,2],[133,7,101,3],[134,6,101,3],[134,23,101,3,"_x2"],[134,26,101,3],[134,28,101,3,"_x3"],[134,31,101,3],[134,33,101,3,"_x4"],[134,36,101,3],[135,8,101,3],[135,15,101,3,"_ref4"],[135,20,101,3],[135,21,101,3,"apply"],[135,26,101,3],[135,33,101,3,"arguments"],[135,42,101,3],[136,6,101,3],[137,4,101,3],[137,9,101,5],[137,11,101,7],[137,12,101,8],[138,4,103,2],[138,8,103,8,"loadMatches"],[138,19,103,19],[138,22,103,22],[138,26,103,22,"useCallback"],[138,32,103,33],[138,33,103,33,"useCallback"],[138,44,103,33],[139,6,103,33],[139,10,103,33,"_ref5"],[139,15,103,33],[139,22,103,33,"_asyncToGenerator"],[139,39,103,33],[139,40,103,33,"default"],[139,47,103,33],[139,49,104,4],[139,60,104,11,"userId"],[139,66,104,17],[139,68,104,22],[140,8,105,6],[140,12,105,10],[141,10,106,8,"setError"],[141,18,106,16],[141,19,106,17],[141,23,106,21],[141,24,106,22],[142,10,107,8],[142,14,107,14,"response"],[142,22,107,22],[142,31,107,31,"fetchWithTimeout"],[142,47,107,47],[142,48,108,10],[142,71,108,33,"userId"],[142,77,108,39],[142,79,108,41],[142,81,109,10],[142,85,109,14],[142,87,110,10],[142,92,111,8],[142,93,111,9],[143,10,112,8],[143,14,112,12],[143,15,112,13,"response"],[143,23,112,21],[143,24,112,22,"ok"],[143,26,112,24],[143,28,112,26],[144,12,113,10],[144,18,113,16],[144,22,113,20,"Error"],[144,27,113,25],[144,28,114,12],[144,77,114,61,"response"],[144,85,114,69],[144,86,114,70,"status"],[144,92,114,76],[144,97,114,81,"response"],[144,105,114,89],[144,106,114,90,"statusText"],[144,116,114,100],[144,118,115,10],[144,119,115,11],[145,10,116,8],[146,10,117,8],[146,14,117,14,"data"],[146,18,117,18],[146,27,117,27,"response"],[146,35,117,35],[146,36,117,36,"json"],[146,40,117,40],[146,41,117,41],[146,42,117,42],[147,10,118,8],[147,14,118,14,"list"],[147,18,118,18],[147,21,118,21,"data"],[147,25,118,25],[147,26,118,26,"matches"],[147,33,118,33],[147,37,118,37],[147,39,118,39],[148,10,119,8,"setMatches"],[148,20,119,18],[148,21,119,19,"list"],[148,25,119,23],[148,26,119,24],[149,10,120,8,"setPendingMatchCount"],[149,30,120,28],[149,31,120,29,"Number"],[149,37,120,35],[149,38,120,36,"data"],[149,42,120,40],[149,44,120,42,"pendingMatchCount"],[149,61,120,59],[149,62,120,60],[149,66,120,64],[149,67,120,65],[149,68,120,66],[150,10,121,8],[150,17,121,15,"list"],[150,21,121,19],[151,8,122,6],[151,9,122,7],[151,10,122,8],[151,17,122,15,"err"],[151,20,122,18],[151,22,122,20],[152,10,123,8],[152,14,123,14,"isTimeout"],[152,23,123,23],[152,26,124,10,"String"],[152,32,124,16],[152,33,124,17,"err"],[152,36,124,20],[152,38,124,22,"name"],[152,42,124,26],[152,46,124,30],[152,48,124,32],[152,49,124,33],[152,50,124,34,"toLowerCase"],[152,61,124,45],[152,62,124,46],[152,63,124,47],[152,68,124,52],[152,82,124,66],[153,10,126,8,"console"],[153,17,126,15],[153,18,126,16,"error"],[153,23,126,21],[153,24,126,22],[153,48,126,46],[153,50,126,48,"err"],[153,53,126,51],[153,54,126,52],[154,10,127,8,"setError"],[154,18,127,16],[154,19,128,10,"isTimeout"],[154,28,128,19],[154,31,129,14],[154,88,129,71],[154,91,130,14],[154,134,131,8],[154,135,131,9],[155,10,132,8],[155,17,132,15],[155,19,132,17],[156,8,133,6],[157,6,134,4],[157,7,134,5],[158,6,134,5],[158,23,134,5,"_x5"],[158,26,134,5],[159,8,134,5],[159,15,134,5,"_ref5"],[159,20,134,5],[159,21,134,5,"apply"],[159,26,134,5],[159,33,134,5,"arguments"],[159,42,134,5],[160,6,134,5],[161,4,134,5],[161,9,135,4],[161,10,135,5,"fetchWithTimeout"],[161,26,135,21],[161,27,136,2],[161,28,136,3],[162,4,138,2],[162,8,138,8,"loadUserAndMatches"],[162,26,138,26],[162,29,138,29],[162,33,138,29,"useCallback"],[162,39,138,40],[162,40,138,40,"useCallback"],[162,51,138,40],[162,70,138,40,"_asyncToGenerator"],[162,87,138,40],[162,88,138,40,"default"],[162,95,138,40],[162,97,138,41],[162,110,138,53],[163,6,139,4],[163,10,139,8],[164,8,140,6,"setError"],[164,16,140,14],[164,17,140,15],[164,21,140,19],[164,22,140,20],[165,8,142,6],[165,12,142,12,"ensured"],[165,19,142,19],[165,28,142,28,"ensureLegacyUserFromJwt"],[165,51,142,51],[165,52,142,52],[165,53,142,53],[166,8,144,6],[166,12,144,12,"userData"],[166,20,144,20],[166,29,144,29,"AsyncStorage"],[166,41,144,41],[166,42,144,41,"default"],[166,49,144,41],[166,50,144,42,"getItem"],[166,57,144,49],[166,58,144,50],[166,64,144,56],[166,65,144,57],[167,8,145,6],[167,12,145,12,"parsedUser"],[167,22,145,22],[167,25,145,25,"userData"],[167,33,145,33],[167,36,145,36,"JSON"],[167,40,145,40],[167,41,145,41,"parse"],[167,46,145,46],[167,47,145,47,"userData"],[167,55,145,55],[167,56,145,56],[167,59,145,59],[167,63,145,63],[169,8,147,6],[170,8,148,6],[170,12,148,10,"nextUser"],[170,20,148,18],[170,23,148,21,"parsedUser"],[170,33,148,31],[171,8,149,6],[171,12,149,10,"ensured"],[171,19,149,17],[171,21,149,19],[172,10,150,8,"nextUser"],[172,18,150,16],[172,21,150,19],[173,12,151,10],[173,16,151,14,"parsedUser"],[173,26,151,24],[173,30,151,28],[173,31,151,29],[173,32,151,30],[173,33,151,31],[174,12,152,10],[174,15,152,13,"ensured"],[174,22,152,20],[175,12,153,10,"id"],[175,14,153,12],[175,16,153,14,"ensured"],[175,23,153,21],[175,24,153,22,"id"],[176,10,154,8],[176,11,154,9],[177,10,156,8],[177,14,156,12],[178,12,157,10],[178,18,157,16,"AsyncStorage"],[178,30,157,28],[178,31,157,28,"default"],[178,38,157,28],[178,39,157,29,"setItem"],[178,46,157,36],[178,47,157,37],[178,53,157,43],[178,55,157,45,"JSON"],[178,59,157,49],[178,60,157,50,"stringify"],[178,69,157,59],[178,70,157,60,"nextUser"],[178,78,157,68],[178,79,157,69],[178,80,157,70],[179,10,158,8],[179,11,158,9],[179,12,158,10],[179,19,158,17,"e"],[179,20,158,18],[179,22,158,20],[180,12,159,10,"console"],[180,19,159,17],[180,20,159,18,"error"],[180,25,159,23],[180,26,159,24],[180,58,159,56],[180,60,159,58,"e"],[180,61,159,59],[180,62,159,60],[181,10,160,8],[182,8,161,6],[183,8,163,6],[183,12,163,10],[183,13,163,11,"nextUser"],[183,21,163,19],[183,23,163,21],[184,10,164,8,"setUser"],[184,17,164,15],[184,18,164,16],[184,22,164,20],[184,23,164,21],[185,10,165,8,"setMatches"],[185,20,165,18],[185,21,165,19],[185,23,165,21],[185,24,165,22],[186,10,166,8,"setPendingMatchCount"],[186,30,166,28],[186,31,166,29],[186,32,166,30],[186,33,166,31],[187,10,167,8],[188,8,168,6],[189,8,170,6,"setUser"],[189,15,170,13],[189,16,170,14,"nextUser"],[189,24,170,22],[189,25,170,23],[190,8,172,6],[190,12,172,12,"uid"],[190,15,172,15],[190,18,172,18,"Number"],[190,24,172,24],[190,25,172,25,"nextUser"],[190,33,172,33],[190,35,172,35,"id"],[190,37,172,37],[190,38,172,38],[191,8,173,6],[191,12,173,10],[191,13,173,11,"Number"],[191,19,173,17],[191,20,173,18,"isFinite"],[191,28,173,26],[191,29,173,27,"uid"],[191,32,173,30],[191,33,173,31],[191,35,173,33],[192,10,174,8,"setError"],[192,18,174,16],[192,19,175,10],[192,85,176,8],[192,86,176,9],[193,10,177,8],[194,8,178,6],[196,8,180,6],[197,8,181,6,"markMatchesSeen"],[197,23,181,21],[197,24,181,22,"uid"],[197,27,181,25],[197,28,181,26],[197,29,181,27,"catch"],[197,34,181,32],[197,35,181,33],[197,41,181,39],[197,45,181,43],[197,46,181,44],[198,8,183,6],[198,14,183,12,"loadMatches"],[198,25,183,23],[198,26,183,24,"uid"],[198,29,183,27],[198,30,183,28],[199,6,184,4],[199,7,184,5],[199,8,184,6],[199,15,184,13,"error"],[199,20,184,18],[199,22,184,20],[200,8,185,6,"console"],[200,15,185,13],[200,16,185,14,"error"],[200,21,185,19],[200,22,185,20],[200,43,185,41],[200,45,185,43,"error"],[200,50,185,48],[200,51,185,49],[201,8,186,6,"setError"],[201,16,186,14],[201,17,186,15],[201,61,186,59],[201,62,186,60],[202,6,187,4],[202,7,187,5],[202,16,187,14],[203,8,188,6,"didFinishInitialLoadRef"],[203,31,188,29],[203,32,188,30,"current"],[203,39,188,37],[203,42,188,40],[203,46,188,44],[204,8,189,6,"setLoading"],[204,18,189,16],[204,19,189,17],[204,24,189,22],[204,25,189,23],[205,6,190,4],[206,4,191,2],[206,5,191,3],[206,8,191,5],[206,9,191,6,"ensureLegacyUserFromJwt"],[206,32,191,29],[206,34,191,31,"loadMatches"],[206,45,191,42],[206,47,191,44,"markMatchesSeen"],[206,62,191,59],[206,63,191,60],[206,64,191,61],[207,4,193,2],[207,8,193,2,"useEffect"],[207,14,193,11],[207,15,193,11,"useEffect"],[207,24,193,11],[207,26,193,12],[207,32,193,18],[208,6,194,4,"loadUserAndMatches"],[208,24,194,22],[208,25,194,23],[208,26,194,24],[209,4,195,2],[209,5,195,3],[209,7,195,5],[209,8,195,6,"loadUserAndMatches"],[209,26,195,24],[209,27,195,25],[209,28,195,26],[210,4,197,2],[210,8,197,2,"useEffect"],[210,14,197,11],[210,15,197,11,"useEffect"],[210,24,197,11],[210,26,197,12],[210,32,197,18],[211,6,198,4],[212,6,199,4],[213,6,200,4],[213,10,200,10,"watchdogMs"],[213,20,200,20],[213,23,200,23],[213,28,200,28],[214,6,201,4],[214,10,201,10,"id"],[214,12,201,12],[214,15,201,15,"setTimeout"],[214,25,201,25],[214,26,201,26],[214,32,201,32],[215,8,202,6],[215,12,202,10,"didFinishInitialLoadRef"],[215,35,202,33],[215,36,202,34,"current"],[215,43,202,41],[215,45,202,43],[216,10,203,8],[217,8,204,6],[218,8,205,6,"console"],[218,15,205,13],[218,16,205,14,"error"],[218,21,205,19],[218,22,206,8],[218,55,206,41,"watchdogMs"],[218,65,206,51],[218,94,207,6],[218,95,207,7],[219,8,208,6,"setError"],[219,16,208,14],[219,17,208,15],[219,74,208,72],[219,75,208,73],[220,8,209,6,"setLoading"],[220,18,209,16],[220,19,209,17],[220,24,209,22],[220,25,209,23],[221,6,210,4],[221,7,210,5],[221,9,210,7,"watchdogMs"],[221,19,210,17],[221,20,210,18],[222,6,212,4],[222,13,212,11],[222,19,212,17,"clearTimeout"],[222,31,212,29],[222,32,212,30,"id"],[222,34,212,32],[222,35,212,33],[223,4,213,2],[223,5,213,3],[223,7,213,5],[223,9,213,7],[223,10,213,8],[224,4,215,2],[224,11,215,9],[225,6,216,4,"loading"],[225,13,216,11],[226,6,217,4,"matches"],[226,13,217,11],[227,6,218,4,"pendingMatchCount"],[227,23,218,21],[228,6,219,4,"user"],[228,10,219,8],[229,6,220,4,"error"],[229,11,220,9],[230,6,221,4,"loadMatches"],[230,17,221,15],[231,6,222,4,"markMatchesSeen"],[232,4,223,2],[232,5,223,3],[233,2,224,0],[234,0,224,1],[234,3]],"functionMap":{"names":["<global>","useMessagesData","ensureLegacyUserFromJwt","resp.json._catch$argument_0","markMatchesSeen","fetchWithTimeout","fetch._finally$argument_0","Promise$argument_0","setTimeout$argument_0","loadMatches","loadUserAndMatches","markMatchesSeen._catch$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;8CCa;2CCc,UD;GDa;IGG;KHkB;uCII;eCW;KDI;uCEE;6BCC;ODS;KFC;GJG;IQG;KR8B;yCSI;iCC2C,UD;GTU;YWE;GXE;YWE;0BJI;KIS;WCE,sBD;GXC;CDW"},"hasCjsExports":false},"type":"js/module"}]}