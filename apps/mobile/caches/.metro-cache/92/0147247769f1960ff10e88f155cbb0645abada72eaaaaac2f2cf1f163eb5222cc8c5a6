{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":74,"index":74}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":75},"end":{"line":2,"column":51,"index":126}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react-native-purchases","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":127},"end":{"line":3,"column":47,"index":174}}],"key":"w6kXlt3+wzwVuELA/KXcfEkh03Q=","exportNames":["*"],"imports":1}},{"name":"@/utils/subscription","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":175},"end":{"line":4,"column":62,"index":237}}],"key":"jUbXHGp0jcOKUUYC/w0fagW62w8=","exportNames":["*"],"imports":1}},{"name":"@/utils/dateCreditsHelpers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":88,"index":326}}],"key":"oRWBdvQUhGiyZ/vbJNT/hHj85Fs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesCredits = useMessagesCredits;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _reactNativePurchases = require(_dependencyMap[4], \"react-native-purchases\");\n  var Purchases = _interopDefault(_reactNativePurchases);\n  var _utilsSubscription = require(_dependencyMap[5], \"@/utils/subscription\");\n  var _utilsDateCreditsHelpers = require(_dependencyMap[6], \"@/utils/dateCreditsHelpers\");\n  function useMessagesCredits(_ref) {\n    _s();\n    var jwt = _ref.jwt,\n      user = _ref.user,\n      loadMatches = _ref.loadMatches;\n    var params = (0, _expoRouter.useLocalSearchParams)();\n    var creditsRefreshParam = (0, _react.useMemo)(() => {\n      var raw = params?.creditsRefresh;\n      var v = Array.isArray(raw) ? raw[0] : raw;\n      var s = v != null ? String(v).trim() : \"\";\n      return s || null;\n    }, [params?.creditsRefresh]);\n    var _useState = (0, _react.useState)({\n        credits: 0,\n        maxCredits: 3\n      }),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      creditStatus = _useState2[0],\n      setCreditStatus = _useState2[1];\n    var _useState3 = (0, _react.useState)({\n        restoring: false,\n        lastError: null\n      }),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      restoreState = _useState4[0],\n      setRestoreState = _useState4[1];\n    var refreshCredits = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          var uid = Number(userId);\n          var hasUid = Number.isFinite(uid);\n          var hasJwt = jwt && typeof jwt === \"string\";\n          if (!hasUid && !hasJwt) {\n            return null;\n          }\n          var url = hasUid ? `/api/date-credits/status?userId=${uid}` : \"/api/date-credits/status\";\n          var resp = yield fetch(url, {\n            headers: hasJwt ? {\n              Authorization: `Bearer ${jwt}`\n            } : undefined\n          });\n          if (!resp.ok) {\n            throw new Error(`When fetching /api/date-credits/status, the response was [${resp.status}] ${resp.statusText}`);\n          }\n          var data = yield resp.json();\n          var next = {\n            credits: Number(data?.credits || 0),\n            maxCredits: Number(data?.maxCredits || 3)\n          };\n          setCreditStatus(next);\n          return next;\n        } catch (e) {\n          console.error(e);\n          return null;\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [jwt]);\n    var restoreInFlightRef = (0, _react.useRef)(false);\n    var attemptRestoreCredits = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (userId) {\n        var hasJwt = jwt && typeof jwt === \"string\";\n        var uid = Number(userId);\n        if (!Number.isFinite(uid)) return null;\n        if (!hasJwt) return null;\n\n        // Don't attempt restore if user already has credits â€” the initial purchase\n        // claim already worked. Restoring here risks double-crediting because\n        // CustomerInfo can return a different transaction ID than what was used\n        // in the original claim.\n        if (creditStatus.credits > 0) return null;\n\n        // Avoid spamming RevenueCat / server\n        if (restoreInFlightRef.current) return null;\n        restoreInFlightRef.current = true;\n        setRestoreState({\n          restoring: true,\n          lastError: null\n        });\n        try {\n          var _configurePurchasesOn = (0, _utilsSubscription.configurePurchasesOnce)(),\n            ok = _configurePurchasesOn.ok;\n          if (!ok) {\n            return null;\n          }\n\n          // Make sure RevenueCat is logged in as this user before syncing.\n          yield Purchases.default.logIn(String(uid)).catch(() => null);\n\n          // Ensure RC receipt is synced (helps TestFlight)\n          if (typeof Purchases.default.syncPurchases === \"function\") {\n            yield Purchases.default.syncPurchases().catch(() => null);\n          }\n          var info = yield Purchases.default.getCustomerInfo().catch(() => null);\n          var latestTxn = (0, _utilsDateCreditsHelpers.extractLatestTransactionIdFromCustomerInfo)(info);\n          if (!latestTxn?.transactionId || !latestTxn?.productId) {\n            return null;\n          }\n\n          // Claim on the backend (idempotent by transaction id)\n          var resp = yield fetch(\"/api/date-credits/claim\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${jwt}`\n            },\n            body: JSON.stringify({\n              transactionId: latestTxn.transactionId,\n              productId: latestTxn.productId\n            })\n          });\n          var json = yield resp.json().catch(() => null);\n          if (!resp.ok) {\n            throw new Error(json?.error || `Claim failed (${resp.status})`);\n          }\n\n          // Refresh credits after claim\n          var next = yield refreshCredits(uid);\n\n          // Also refresh matches so the newly-unlocked section populates immediately\n          if (next?.credits > 0) {\n            loadMatches(uid).catch(() => null);\n          }\n          return next;\n        } catch (e) {\n          console.error(e);\n          setRestoreState({\n            restoring: false,\n            lastError: e?.message || \"Failed\"\n          });\n          return null;\n        } finally {\n          setRestoreState(s => ({\n            ...s,\n            restoring: false\n          }));\n          restoreInFlightRef.current = false;\n        }\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [jwt, loadMatches, refreshCredits, creditStatus.credits]);\n    var lastCreditsRefreshRef = (0, _react.useRef)(null);\n    (0, _react.useEffect)(() => {\n      if (!creditsRefreshParam) return;\n      if (!user?.id) return;\n      if (lastCreditsRefreshRef.current === creditsRefreshParam) {\n        return;\n      }\n      lastCreditsRefreshRef.current = creditsRefreshParam;\n      loadMatches(user.id).catch(() => null);\n      refreshCredits(user.id).catch(() => null);\n\n      // NEW: also attempt to restore any just-finished purchase\n      attemptRestoreCredits(user.id).catch(() => null);\n    }, [attemptRestoreCredits, creditsRefreshParam, loadMatches, refreshCredits, user?.id]);\n    return {\n      creditStatus,\n      refreshCredits,\n      attemptRestoreCredits,\n      restoreState\n    };\n  }\n  _s(useMessagesCredits, \"BRVSssVDW6/3VDoG4P1sj56D02Q=\", false, function () {\n    return [_expoRouter.useLocalSearchParams];\n  });\n});","lineCount":193,"map":[[13,2,7,0,"exports"],[13,9,7,0],[13,10,7,0,"useMessagesCredits"],[13,28,7,0],[13,31,7,0,"useMessagesCredits"],[13,49,7,0],[14,2,180,1],[14,6,180,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,180,1],[14,45,180,1,"require"],[14,52,180,1],[14,53,180,1,"_dependencyMap"],[14,67,180,1],[15,2,180,1],[15,6,180,1,"_asyncToGenerator"],[15,23,180,1],[15,26,180,1,"_interopDefault"],[15,41,180,1],[15,42,180,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,180,1],[16,2,180,1],[16,6,180,1,"_babelRuntimeHelpersSlicedToArray"],[16,39,180,1],[16,42,180,1,"require"],[16,49,180,1],[16,50,180,1,"_dependencyMap"],[16,64,180,1],[17,2,180,1],[17,6,180,1,"_slicedToArray"],[17,20,180,1],[17,23,180,1,"_interopDefault"],[17,38,180,1],[17,39,180,1,"_babelRuntimeHelpersSlicedToArray"],[17,72,180,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_expoRouter"],[19,17,2,0],[19,20,2,0,"require"],[19,27,2,0],[19,28,2,0,"_dependencyMap"],[19,42,2,0],[20,2,3,0],[20,6,3,0,"_reactNativePurchases"],[20,27,3,0],[20,30,3,0,"require"],[20,37,3,0],[20,38,3,0,"_dependencyMap"],[20,52,3,0],[21,2,3,0],[21,6,3,0,"Purchases"],[21,15,3,0],[21,18,3,0,"_interopDefault"],[21,33,3,0],[21,34,3,0,"_reactNativePurchases"],[21,55,3,0],[22,2,4,0],[22,6,4,0,"_utilsSubscription"],[22,24,4,0],[22,27,4,0,"require"],[22,34,4,0],[22,35,4,0,"_dependencyMap"],[22,49,4,0],[23,2,5,0],[23,6,5,0,"_utilsDateCreditsHelpers"],[23,30,5,0],[23,33,5,0,"require"],[23,40,5,0],[23,41,5,0,"_dependencyMap"],[23,55,5,0],[24,2,7,7],[24,11,7,16,"useMessagesCredits"],[24,29,7,34,"useMessagesCredits"],[24,30,7,34,"_ref"],[24,34,7,34],[24,36,7,63],[25,4,7,63,"_s"],[25,6,7,63],[26,4,7,63],[26,8,7,37,"jwt"],[26,11,7,40],[26,14,7,40,"_ref"],[26,18,7,40],[26,19,7,37,"jwt"],[26,22,7,40],[27,6,7,42,"user"],[27,10,7,46],[27,13,7,46,"_ref"],[27,17,7,46],[27,18,7,42,"user"],[27,22,7,46],[28,6,7,48,"loadMatches"],[28,17,7,59],[28,20,7,59,"_ref"],[28,24,7,59],[28,25,7,48,"loadMatches"],[28,36,7,59],[29,4,8,2],[29,8,8,8,"params"],[29,14,8,14],[29,17,8,17],[29,21,8,17,"useLocalSearchParams"],[29,32,8,37],[29,33,8,37,"useLocalSearchParams"],[29,53,8,37],[29,55,8,38],[29,56,8,39],[30,4,10,2],[30,8,10,8,"creditsRefreshParam"],[30,27,10,27],[30,30,10,30],[30,34,10,30,"useMemo"],[30,40,10,37],[30,41,10,37,"useMemo"],[30,48,10,37],[30,50,10,38],[30,56,10,44],[31,6,11,4],[31,10,11,10,"raw"],[31,13,11,13],[31,16,11,16,"params"],[31,22,11,22],[31,24,11,24,"creditsRefresh"],[31,38,11,38],[32,6,12,4],[32,10,12,10,"v"],[32,11,12,11],[32,14,12,14,"Array"],[32,19,12,19],[32,20,12,20,"isArray"],[32,27,12,27],[32,28,12,28,"raw"],[32,31,12,31],[32,32,12,32],[32,35,12,35,"raw"],[32,38,12,38],[32,39,12,39],[32,40,12,40],[32,41,12,41],[32,44,12,44,"raw"],[32,47,12,47],[33,6,13,4],[33,10,13,10,"s"],[33,11,13,11],[33,14,13,14,"v"],[33,15,13,15],[33,19,13,19],[33,23,13,23],[33,26,13,26,"String"],[33,32,13,32],[33,33,13,33,"v"],[33,34,13,34],[33,35,13,35],[33,36,13,36,"trim"],[33,40,13,40],[33,41,13,41],[33,42,13,42],[33,45,13,45],[33,47,13,47],[34,6,14,4],[34,13,14,11,"s"],[34,14,14,12],[34,18,14,16],[34,22,14,20],[35,4,15,2],[35,5,15,3],[35,7,15,5],[35,8,15,6,"params"],[35,14,15,12],[35,16,15,14,"creditsRefresh"],[35,30,15,28],[35,31,15,29],[35,32,15,30],[36,4,17,2],[36,8,17,2,"_useState"],[36,17,17,2],[36,20,17,42],[36,24,17,42,"useState"],[36,30,17,50],[36,31,17,50,"useState"],[36,39,17,50],[36,41,17,51],[37,8,18,4,"credits"],[37,15,18,11],[37,17,18,13],[37,18,18,14],[38,8,19,4,"maxCredits"],[38,18,19,14],[38,20,19,16],[39,6,20,2],[39,7,20,3],[39,8,20,4],[40,6,20,4,"_useState2"],[40,16,20,4],[40,23,20,4,"_slicedToArray"],[40,37,20,4],[40,38,20,4,"default"],[40,45,20,4],[40,47,20,4,"_useState"],[40,56,20,4],[41,6,17,9,"creditStatus"],[41,18,17,21],[41,21,17,21,"_useState2"],[41,31,17,21],[42,6,17,23,"setCreditStatus"],[42,21,17,38],[42,24,17,38,"_useState2"],[42,34,17,38],[43,4,22,2],[43,8,22,2,"_useState3"],[43,18,22,2],[43,21,22,42],[43,25,22,42,"useState"],[43,31,22,50],[43,32,22,50,"useState"],[43,40,22,50],[43,42,22,51],[44,8,23,4,"restoring"],[44,17,23,13],[44,19,23,15],[44,24,23,20],[45,8,24,4,"lastError"],[45,17,24,13],[45,19,24,15],[46,6,25,2],[46,7,25,3],[46,8,25,4],[47,6,25,4,"_useState4"],[47,16,25,4],[47,23,25,4,"_slicedToArray"],[47,37,25,4],[47,38,25,4,"default"],[47,45,25,4],[47,47,25,4,"_useState3"],[47,57,25,4],[48,6,22,9,"restoreState"],[48,18,22,21],[48,21,22,21,"_useState4"],[48,31,22,21],[49,6,22,23,"setRestoreState"],[49,21,22,38],[49,24,22,38,"_useState4"],[49,34,22,38],[50,4,27,2],[50,8,27,8,"refreshCredits"],[50,22,27,22],[50,25,27,25],[50,29,27,25,"useCallback"],[50,35,27,36],[50,36,27,36,"useCallback"],[50,47,27,36],[51,6,27,36],[51,10,27,36,"_ref2"],[51,15,27,36],[51,22,27,36,"_asyncToGenerator"],[51,39,27,36],[51,40,27,36,"default"],[51,47,27,36],[51,49,28,4],[51,60,28,11,"userId"],[51,66,28,17],[51,68,28,22],[52,8,29,6],[52,12,29,10],[53,10,30,8],[53,14,30,14,"uid"],[53,17,30,17],[53,20,30,20,"Number"],[53,26,30,26],[53,27,30,27,"userId"],[53,33,30,33],[53,34,30,34],[54,10,31,8],[54,14,31,14,"hasUid"],[54,20,31,20],[54,23,31,23,"Number"],[54,29,31,29],[54,30,31,30,"isFinite"],[54,38,31,38],[54,39,31,39,"uid"],[54,42,31,42],[54,43,31,43],[55,10,32,8],[55,14,32,14,"hasJwt"],[55,20,32,20],[55,23,32,23,"jwt"],[55,26,32,26],[55,30,32,30],[55,37,32,37,"jwt"],[55,40,32,40],[55,45,32,45],[55,53,32,53],[56,10,34,8],[56,14,34,12],[56,15,34,13,"hasUid"],[56,21,34,19],[56,25,34,23],[56,26,34,24,"hasJwt"],[56,32,34,30],[56,34,34,32],[57,12,35,10],[57,19,35,17],[57,23,35,21],[58,10,36,8],[59,10,38,8],[59,14,38,14,"url"],[59,17,38,17],[59,20,38,20,"hasUid"],[59,26,38,26],[59,29,39,12],[59,64,39,47,"uid"],[59,67,39,50],[59,69,39,52],[59,72,40,12],[59,98,40,38],[60,10,42,8],[60,14,42,14,"resp"],[60,18,42,18],[60,27,42,27,"fetch"],[60,32,42,32],[60,33,42,33,"url"],[60,36,42,36],[60,38,42,38],[61,12,43,10,"headers"],[61,19,43,17],[61,21,43,19,"hasJwt"],[61,27,43,25],[61,30,43,28],[62,14,43,30,"Authorization"],[62,27,43,43],[62,29,43,45],[62,39,43,55,"jwt"],[62,42,43,58],[63,12,43,61],[63,13,43,62],[63,16,43,65,"undefined"],[64,10,44,8],[64,11,44,9],[64,12,44,10],[65,10,46,8],[65,14,46,12],[65,15,46,13,"resp"],[65,19,46,17],[65,20,46,18,"ok"],[65,22,46,20],[65,24,46,22],[66,12,47,10],[66,18,47,16],[66,22,47,20,"Error"],[66,27,47,25],[66,28,48,12],[66,89,48,73,"resp"],[66,93,48,77],[66,94,48,78,"status"],[66,100,48,84],[66,105,48,89,"resp"],[66,109,48,93],[66,110,48,94,"statusText"],[66,120,48,104],[66,122,49,10],[66,123,49,11],[67,10,50,8],[68,10,52,8],[68,14,52,14,"data"],[68,18,52,18],[68,27,52,27,"resp"],[68,31,52,31],[68,32,52,32,"json"],[68,36,52,36],[68,37,52,37],[68,38,52,38],[69,10,53,8],[69,14,53,14,"next"],[69,18,53,18],[69,21,53,21],[70,12,54,10,"credits"],[70,19,54,17],[70,21,54,19,"Number"],[70,27,54,25],[70,28,54,26,"data"],[70,32,54,30],[70,34,54,32,"credits"],[70,41,54,39],[70,45,54,43],[70,46,54,44],[70,47,54,45],[71,12,55,10,"maxCredits"],[71,22,55,20],[71,24,55,22,"Number"],[71,30,55,28],[71,31,55,29,"data"],[71,35,55,33],[71,37,55,35,"maxCredits"],[71,47,55,45],[71,51,55,49],[71,52,55,50],[72,10,56,8],[72,11,56,9],[73,10,58,8,"setCreditStatus"],[73,25,58,23],[73,26,58,24,"next"],[73,30,58,28],[73,31,58,29],[74,10,59,8],[74,17,59,15,"next"],[74,21,59,19],[75,8,60,6],[75,9,60,7],[75,10,60,8],[75,17,60,15,"e"],[75,18,60,16],[75,20,60,18],[76,10,61,8,"console"],[76,17,61,15],[76,18,61,16,"error"],[76,23,61,21],[76,24,61,22,"e"],[76,25,61,23],[76,26,61,24],[77,10,62,8],[77,17,62,15],[77,21,62,19],[78,8,63,6],[79,6,64,4],[79,7,64,5],[80,6,64,5],[80,23,64,5,"_x"],[80,25,64,5],[81,8,64,5],[81,15,64,5,"_ref2"],[81,20,64,5],[81,21,64,5,"apply"],[81,26,64,5],[81,33,64,5,"arguments"],[81,42,64,5],[82,6,64,5],[83,4,64,5],[83,9,65,4],[83,10,65,5,"jwt"],[83,13,65,8],[83,14,66,2],[83,15,66,3],[84,4,68,2],[84,8,68,8,"restoreInFlightRef"],[84,26,68,26],[84,29,68,29],[84,33,68,29,"useRef"],[84,39,68,35],[84,40,68,35,"useRef"],[84,46,68,35],[84,48,68,36],[84,53,68,41],[84,54,68,42],[85,4,69,2],[85,8,69,8,"attemptRestoreCredits"],[85,29,69,29],[85,32,69,32],[85,36,69,32,"useCallback"],[85,42,69,43],[85,43,69,43,"useCallback"],[85,54,69,43],[86,6,69,43],[86,10,69,43,"_ref3"],[86,15,69,43],[86,22,69,43,"_asyncToGenerator"],[86,39,69,43],[86,40,69,43,"default"],[86,47,69,43],[86,49,70,4],[86,60,70,11,"userId"],[86,66,70,17],[86,68,70,22],[87,8,71,6],[87,12,71,12,"hasJwt"],[87,18,71,18],[87,21,71,21,"jwt"],[87,24,71,24],[87,28,71,28],[87,35,71,35,"jwt"],[87,38,71,38],[87,43,71,43],[87,51,71,51],[88,8,72,6],[88,12,72,12,"uid"],[88,15,72,15],[88,18,72,18,"Number"],[88,24,72,24],[88,25,72,25,"userId"],[88,31,72,31],[88,32,72,32],[89,8,73,6],[89,12,73,10],[89,13,73,11,"Number"],[89,19,73,17],[89,20,73,18,"isFinite"],[89,28,73,26],[89,29,73,27,"uid"],[89,32,73,30],[89,33,73,31],[89,35,73,33],[89,42,73,40],[89,46,73,44],[90,8,74,6],[90,12,74,10],[90,13,74,11,"hasJwt"],[90,19,74,17],[90,21,74,19],[90,28,74,26],[90,32,74,30],[92,8,76,6],[93,8,77,6],[94,8,78,6],[95,8,79,6],[96,8,80,6],[96,12,80,10,"creditStatus"],[96,24,80,22],[96,25,80,23,"credits"],[96,32,80,30],[96,35,80,33],[96,36,80,34],[96,38,80,36],[96,45,80,43],[96,49,80,47],[98,8,82,6],[99,8,83,6],[99,12,83,10,"restoreInFlightRef"],[99,30,83,28],[99,31,83,29,"current"],[99,38,83,36],[99,40,83,38],[99,47,83,45],[99,51,83,49],[100,8,84,6,"restoreInFlightRef"],[100,26,84,24],[100,27,84,25,"current"],[100,34,84,32],[100,37,84,35],[100,41,84,39],[101,8,85,6,"setRestoreState"],[101,23,85,21],[101,24,85,22],[102,10,85,24,"restoring"],[102,19,85,33],[102,21,85,35],[102,25,85,39],[103,10,85,41,"lastError"],[103,19,85,50],[103,21,85,52],[104,8,85,57],[104,9,85,58],[104,10,85,59],[105,8,87,6],[105,12,87,10],[106,10,88,8],[106,14,88,8,"_configurePurchasesOn"],[106,35,88,8],[106,38,88,23],[106,42,88,23,"configurePurchasesOnce"],[106,60,88,45],[106,61,88,45,"configurePurchasesOnce"],[106,83,88,45],[106,85,88,46],[106,86,88,47],[107,12,88,16,"ok"],[107,14,88,18],[107,17,88,18,"_configurePurchasesOn"],[107,38,88,18],[107,39,88,16,"ok"],[107,41,88,18],[108,10,89,8],[108,14,89,12],[108,15,89,13,"ok"],[108,17,89,15],[108,19,89,17],[109,12,90,10],[109,19,90,17],[109,23,90,21],[110,10,91,8],[112,10,93,8],[113,10,94,8],[113,16,94,14,"Purchases"],[113,25,94,23],[113,26,94,23,"default"],[113,33,94,23],[113,34,94,24,"logIn"],[113,39,94,29],[113,40,94,30,"String"],[113,46,94,36],[113,47,94,37,"uid"],[113,50,94,40],[113,51,94,41],[113,52,94,42],[113,53,94,43,"catch"],[113,58,94,48],[113,59,94,49],[113,65,94,55],[113,69,94,59],[113,70,94,60],[115,10,96,8],[116,10,97,8],[116,14,97,12],[116,21,97,19,"Purchases"],[116,30,97,28],[116,31,97,28,"default"],[116,38,97,28],[116,39,97,29,"syncPurchases"],[116,52,97,42],[116,57,97,47],[116,67,97,57],[116,69,97,59],[117,12,98,10],[117,18,98,16,"Purchases"],[117,27,98,25],[117,28,98,25,"default"],[117,35,98,25],[117,36,98,26,"syncPurchases"],[117,49,98,39],[117,50,98,40],[117,51,98,41],[117,52,98,42,"catch"],[117,57,98,47],[117,58,98,48],[117,64,98,54],[117,68,98,58],[117,69,98,59],[118,10,99,8],[119,10,101,8],[119,14,101,14,"info"],[119,18,101,18],[119,27,101,27,"Purchases"],[119,36,101,36],[119,37,101,36,"default"],[119,44,101,36],[119,45,101,37,"getCustomerInfo"],[119,60,101,52],[119,61,101,53],[119,62,101,54],[119,63,101,55,"catch"],[119,68,101,60],[119,69,101,61],[119,75,101,67],[119,79,101,71],[119,80,101,72],[120,10,102,8],[120,14,102,14,"latestTxn"],[120,23,102,23],[120,26,102,26],[120,30,102,26,"extractLatestTransactionIdFromCustomerInfo"],[120,54,102,68],[120,55,102,68,"extractLatestTransactionIdFromCustomerInfo"],[120,97,102,68],[120,99,102,69,"info"],[120,103,102,73],[120,104,102,74],[121,10,104,8],[121,14,104,12],[121,15,104,13,"latestTxn"],[121,24,104,22],[121,26,104,24,"transactionId"],[121,39,104,37],[121,43,104,41],[121,44,104,42,"latestTxn"],[121,53,104,51],[121,55,104,53,"productId"],[121,64,104,62],[121,66,104,64],[122,12,105,10],[122,19,105,17],[122,23,105,21],[123,10,106,8],[125,10,108,8],[126,10,109,8],[126,14,109,14,"resp"],[126,18,109,18],[126,27,109,27,"fetch"],[126,32,109,32],[126,33,109,33],[126,58,109,58],[126,60,109,60],[127,12,110,10,"method"],[127,18,110,16],[127,20,110,18],[127,26,110,24],[128,12,111,10,"headers"],[128,19,111,17],[128,21,111,19],[129,14,112,12],[129,28,112,26],[129,30,112,28],[129,48,112,46],[130,14,113,12,"Authorization"],[130,27,113,25],[130,29,113,27],[130,39,113,37,"jwt"],[130,42,113,40],[131,12,114,10],[131,13,114,11],[132,12,115,10,"body"],[132,16,115,14],[132,18,115,16,"JSON"],[132,22,115,20],[132,23,115,21,"stringify"],[132,32,115,30],[132,33,115,31],[133,14,116,12,"transactionId"],[133,27,116,25],[133,29,116,27,"latestTxn"],[133,38,116,36],[133,39,116,37,"transactionId"],[133,52,116,50],[134,14,117,12,"productId"],[134,23,117,21],[134,25,117,23,"latestTxn"],[134,34,117,32],[134,35,117,33,"productId"],[135,12,118,10],[135,13,118,11],[136,10,119,8],[136,11,119,9],[136,12,119,10],[137,10,121,8],[137,14,121,14,"json"],[137,18,121,18],[137,27,121,27,"resp"],[137,31,121,31],[137,32,121,32,"json"],[137,36,121,36],[137,37,121,37],[137,38,121,38],[137,39,121,39,"catch"],[137,44,121,44],[137,45,121,45],[137,51,121,51],[137,55,121,55],[137,56,121,56],[138,10,122,8],[138,14,122,12],[138,15,122,13,"resp"],[138,19,122,17],[138,20,122,18,"ok"],[138,22,122,20],[138,24,122,22],[139,12,123,10],[139,18,123,16],[139,22,123,20,"Error"],[139,27,123,25],[139,28,123,26,"json"],[139,32,123,30],[139,34,123,32,"error"],[139,39,123,37],[139,43,123,41],[139,60,123,58,"resp"],[139,64,123,62],[139,65,123,63,"status"],[139,71,123,69],[139,74,123,72],[139,75,123,73],[140,10,124,8],[142,10,126,8],[143,10,127,8],[143,14,127,14,"next"],[143,18,127,18],[143,27,127,27,"refreshCredits"],[143,41,127,41],[143,42,127,42,"uid"],[143,45,127,45],[143,46,127,46],[145,10,129,8],[146,10,130,8],[146,14,130,12,"next"],[146,18,130,16],[146,20,130,18,"credits"],[146,27,130,25],[146,30,130,28],[146,31,130,29],[146,33,130,31],[147,12,131,10,"loadMatches"],[147,23,131,21],[147,24,131,22,"uid"],[147,27,131,25],[147,28,131,26],[147,29,131,27,"catch"],[147,34,131,32],[147,35,131,33],[147,41,131,39],[147,45,131,43],[147,46,131,44],[148,10,132,8],[149,10,134,8],[149,17,134,15,"next"],[149,21,134,19],[150,8,135,6],[150,9,135,7],[150,10,135,8],[150,17,135,15,"e"],[150,18,135,16],[150,20,135,18],[151,10,136,8,"console"],[151,17,136,15],[151,18,136,16,"error"],[151,23,136,21],[151,24,136,22,"e"],[151,25,136,23],[151,26,136,24],[152,10,137,8,"setRestoreState"],[152,25,137,23],[152,26,137,24],[153,12,138,10,"restoring"],[153,21,138,19],[153,23,138,21],[153,28,138,26],[154,12,139,10,"lastError"],[154,21,139,19],[154,23,139,21,"e"],[154,24,139,22],[154,26,139,24,"message"],[154,33,139,31],[154,37,139,35],[155,10,140,8],[155,11,140,9],[155,12,140,10],[156,10,141,8],[156,17,141,15],[156,21,141,19],[157,8,142,6],[157,9,142,7],[157,18,142,16],[158,10,143,8,"setRestoreState"],[158,25,143,23],[158,26,143,25,"s"],[158,27,143,26],[158,32,143,32],[159,12,143,34],[159,15,143,37,"s"],[159,16,143,38],[160,12,143,40,"restoring"],[160,21,143,49],[160,23,143,51],[161,10,143,57],[161,11,143,58],[161,12,143,59],[161,13,143,60],[162,10,144,8,"restoreInFlightRef"],[162,28,144,26],[162,29,144,27,"current"],[162,36,144,34],[162,39,144,37],[162,44,144,42],[163,8,145,6],[164,6,146,4],[164,7,146,5],[165,6,146,5],[165,23,146,5,"_x2"],[165,26,146,5],[166,8,146,5],[166,15,146,5,"_ref3"],[166,20,146,5],[166,21,146,5,"apply"],[166,26,146,5],[166,33,146,5,"arguments"],[166,42,146,5],[167,6,146,5],[168,4,146,5],[168,9,147,4],[168,10,147,5,"jwt"],[168,13,147,8],[168,15,147,10,"loadMatches"],[168,26,147,21],[168,28,147,23,"refreshCredits"],[168,42,147,37],[168,44,147,39,"creditStatus"],[168,56,147,51],[168,57,147,52,"credits"],[168,64,147,59],[168,65,148,2],[168,66,148,3],[169,4,150,2],[169,8,150,8,"lastCreditsRefreshRef"],[169,29,150,29],[169,32,150,32],[169,36,150,32,"useRef"],[169,42,150,38],[169,43,150,38,"useRef"],[169,49,150,38],[169,51,150,39],[169,55,150,43],[169,56,150,44],[170,4,151,2],[170,8,151,2,"useEffect"],[170,14,151,11],[170,15,151,11,"useEffect"],[170,24,151,11],[170,26,151,12],[170,32,151,18],[171,6,152,4],[171,10,152,8],[171,11,152,9,"creditsRefreshParam"],[171,30,152,28],[171,32,152,30],[172,6,153,4],[172,10,153,8],[172,11,153,9,"user"],[172,15,153,13],[172,17,153,15,"id"],[172,19,153,17],[172,21,153,19],[173,6,155,4],[173,10,155,8,"lastCreditsRefreshRef"],[173,31,155,29],[173,32,155,30,"current"],[173,39,155,37],[173,44,155,42,"creditsRefreshParam"],[173,63,155,61],[173,65,155,63],[174,8,156,6],[175,6,157,4],[176,6,159,4,"lastCreditsRefreshRef"],[176,27,159,25],[176,28,159,26,"current"],[176,35,159,33],[176,38,159,36,"creditsRefreshParam"],[176,57,159,55],[177,6,161,4,"loadMatches"],[177,17,161,15],[177,18,161,16,"user"],[177,22,161,20],[177,23,161,21,"id"],[177,25,161,23],[177,26,161,24],[177,27,161,25,"catch"],[177,32,161,30],[177,33,161,31],[177,39,161,37],[177,43,161,41],[177,44,161,42],[178,6,162,4,"refreshCredits"],[178,20,162,18],[178,21,162,19,"user"],[178,25,162,23],[178,26,162,24,"id"],[178,28,162,26],[178,29,162,27],[178,30,162,28,"catch"],[178,35,162,33],[178,36,162,34],[178,42,162,40],[178,46,162,44],[178,47,162,45],[180,6,164,4],[181,6,165,4,"attemptRestoreCredits"],[181,27,165,25],[181,28,165,26,"user"],[181,32,165,30],[181,33,165,31,"id"],[181,35,165,33],[181,36,165,34],[181,37,165,35,"catch"],[181,42,165,40],[181,43,165,41],[181,49,165,47],[181,53,165,51],[181,54,165,52],[182,4,166,2],[182,5,166,3],[182,7,166,5],[182,8,167,4,"attemptRestoreCredits"],[182,29,167,25],[182,31,168,4,"creditsRefreshParam"],[182,50,168,23],[182,52,169,4,"loadMatches"],[182,63,169,15],[182,65,170,4,"refreshCredits"],[182,79,170,18],[182,81,171,4,"user"],[182,85,171,8],[182,87,171,10,"id"],[182,89,171,12],[182,90,172,3],[182,91,172,4],[183,4,174,2],[183,11,174,9],[184,6,175,4,"creditStatus"],[184,18,175,16],[185,6,176,4,"refreshCredits"],[185,20,176,18],[186,6,177,4,"attemptRestoreCredits"],[186,27,177,25],[187,6,178,4,"restoreState"],[188,4,179,2],[188,5,179,3],[189,2,180,0],[190,2,180,1,"_s"],[190,4,180,1],[190,5,7,16,"useMessagesCredits"],[190,23,7,34],[191,4,7,34],[191,12,8,17,"useLocalSearchParams"],[191,23,8,37],[191,24,8,37,"useLocalSearchParams"],[191,44,8,37],[192,2,8,37],[193,0,8,37],[193,3]],"functionMap":{"names":["<global>","useMessagesCredits","useMemo$argument_0","refreshCredits","attemptRestoreCredits","Purchases.logIn._catch$argument_0","Purchases.syncPurchases._catch$argument_0","Purchases.getCustomerInfo._catch$argument_0","resp.json._catch$argument_0","loadMatches._catch$argument_0","setRestoreState$argument_0","useEffect$argument_0","refreshCredits._catch$argument_0","attemptRestoreCredits._catch$argument_0"],"mappings":"AAA;OCM;sCCG;GDK;IEa;KFoC;IGM;iDCwB,UD;gDEI,UF;6DGG,UH;6CIoB,UJ;iCKU,UL;wBMY,mCN;KHG;YUK;+BFU,UE;kCCC,UD;yCEG,UF;GVC;CDc"},"hasCjsExports":false},"type":"js/module"}]}