{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"../exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"PyiI6yM07W7J+gN2cHiTPsTCV4c=","exportNames":["*"],"imports":1}},{"name":"./debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":42,"index":81}}],"key":"VSeoyyJzODV++e70LcO1jVtvSwg=","exportNames":["*"],"imports":1}},{"name":"./vercelWaitUntil.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":82},"end":{"line":3,"column":55,"index":137}}],"key":"QcqZQa+BFoXcXKBFyK0lJIV28tE=","exportNames":["*"],"imports":1}},{"name":"./worldwide.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":138},"end":{"line":4,"column":44,"index":182}}],"key":"LZlrQCVO4H3zUFIdbw1eEy4GKGE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"flushIfServerless\", {\n    enumerable: true,\n    get: function () {\n      return flushIfServerless;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _exportsJs = require(_dependencyMap[1], \"../exports.js\");\n  var _debugLoggerJs = require(_dependencyMap[2], \"./debug-logger.js\");\n  var _vercelWaitUntilJs = require(_dependencyMap[3], \"./vercelWaitUntil.js\");\n  var _worldwideJs = require(_dependencyMap[4], \"./worldwide.js\");\n  function flushWithTimeout(_x) {\n    return _flushWithTimeout.apply(this, arguments);\n  }\n  /**\n   *  Flushes the event queue with a timeout in serverless environments to ensure that events are sent to Sentry before the\n   *  serverless function execution ends.\n   *\n   * The function is async, but in environments that support a `waitUntil` mechanism, it will run synchronously.\n   *\n   * This function is aware of the following serverless platforms:\n   * - Cloudflare: If a Cloudflare context is provided, it will use `ctx.waitUntil()` to flush events (keeps the `this` context of `ctx`).\n   *               If a `cloudflareWaitUntil` function is provided, it will use that to flush events (looses the `this` context of `ctx`).\n   * - Vercel: It detects the Vercel environment and uses Vercel's `waitUntil` function.\n   * - Other Serverless (AWS Lambda, Google Cloud, etc.): It detects the environment via environment variables\n   *   and uses a regular `await flush()`.\n   *\n   *  @internal This function is supposed for internal Sentry SDK usage only.\n   *  @hidden\n   */\n  function _flushWithTimeout() {\n    _flushWithTimeout = (0, _asyncToGenerator.default)(function* (timeout) {\n      try {\n        _debugLoggerJs.debug.log('Flushing events...');\n        yield (0, _exportsJs.flush)(timeout);\n        _debugLoggerJs.debug.log('Done flushing events');\n      } catch (e) {\n        _debugLoggerJs.debug.log('Error while flushing events:\\n', e);\n      }\n    });\n    return _flushWithTimeout.apply(this, arguments);\n  }\n  function flushIfServerless() {\n    return _flushIfServerless.apply(this, arguments);\n  }\n  function _flushIfServerless() {\n    _flushIfServerless = (0, _asyncToGenerator.default)(function* () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _params$timeout = params.timeout,\n        timeout = _params$timeout === void 0 ? 2000 : _params$timeout;\n      if ('cloudflareWaitUntil' in params && typeof params?.cloudflareWaitUntil === 'function') {\n        params.cloudflareWaitUntil(flushWithTimeout(timeout));\n        return;\n      }\n      if ('cloudflareCtx' in params && typeof params.cloudflareCtx?.waitUntil === 'function') {\n        params.cloudflareCtx.waitUntil(flushWithTimeout(timeout));\n        return;\n      }\n\n      // @ts-expect-error This is not typed\n      if (_worldwideJs.GLOBAL_OBJ[Symbol.for('@vercel/request-context')]) {\n        // Vercel has a waitUntil equivalent that works without execution context\n        (0, _vercelWaitUntilJs.vercelWaitUntil)(flushWithTimeout(timeout));\n        return;\n      }\n      if (typeof process === 'undefined') {\n        return;\n      }\n      var isServerless = !!process.env.FUNCTIONS_WORKER_RUNTIME ||\n      // Azure Functions\n      !!process.env.LAMBDA_TASK_ROOT ||\n      // AWS Lambda\n      !!process.env.K_SERVICE ||\n      // Google Cloud Run\n      !!process.env.CF_PAGES ||\n      // Cloudflare Pages\n      !!process.env.VERCEL || !!process.env.NETLIFY;\n      if (isServerless) {\n        // Use regular flush for environments without a generic waitUntil mechanism\n        yield flushWithTimeout(timeout);\n      }\n    });\n    return _flushIfServerless.apply(this, arguments);\n  }\n});","lineCount":97,"map":[[12,2,74,0,"Object"],[12,8,74,0],[12,9,74,0,"defineProperty"],[12,23,74,0],[12,24,74,0,"exports"],[12,31,74,0],[13,4,74,0,"enumerable"],[13,14,74,0],[14,4,74,0,"get"],[14,7,74,0],[14,18,74,0,"get"],[14,19,74,0],[15,6,74,0],[15,13,74,9,"flushIfServerless"],[15,30,74,26],[16,4,74,26],[17,2,74,26],[18,2,74,29],[18,6,74,29,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,74,29],[18,45,74,29,"require"],[18,52,74,29],[18,53,74,29,"_dependencyMap"],[18,67,74,29],[19,2,74,29],[19,6,74,29,"_asyncToGenerator"],[19,23,74,29],[19,26,74,29,"_interopDefault"],[19,41,74,29],[19,42,74,29,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,74,29],[20,2,1,0],[20,6,1,0,"_exportsJs"],[20,16,1,0],[20,19,1,0,"require"],[20,26,1,0],[20,27,1,0,"_dependencyMap"],[20,41,1,0],[21,2,2,0],[21,6,2,0,"_debugLoggerJs"],[21,20,2,0],[21,23,2,0,"require"],[21,30,2,0],[21,31,2,0,"_dependencyMap"],[21,45,2,0],[22,2,3,0],[22,6,3,0,"_vercelWaitUntilJs"],[22,24,3,0],[22,27,3,0,"require"],[22,34,3,0],[22,35,3,0,"_dependencyMap"],[22,49,3,0],[23,2,4,0],[23,6,4,0,"_worldwideJs"],[23,18,4,0],[23,21,4,0,"require"],[23,28,4,0],[23,29,4,0,"_dependencyMap"],[23,43,4,0],[24,2,4,44],[24,11,6,15,"flushWithTimeout"],[24,27,6,31,"flushWithTimeout"],[24,28,6,31,"_x"],[24,30,6,31],[25,4,6,31],[25,11,6,31,"_flushWithTimeout"],[25,28,6,31],[25,29,6,31,"apply"],[25,34,6,31],[25,41,6,31,"arguments"],[25,50,6,31],[26,2,6,31],[27,2,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,0,25,0],[37,0,26,0],[38,0,27,0],[39,0,28,0],[40,0,29,0],[41,0,30,0],[42,0,31,0],[43,2,16,0],[43,11,16,0,"_flushWithTimeout"],[43,29,16,0],[44,4,16,0,"_flushWithTimeout"],[44,21,16,0],[44,28,16,0,"_asyncToGenerator"],[44,45,16,0],[44,46,16,0,"default"],[44,53,16,0],[44,55,6,0],[44,66,6,32,"timeout"],[44,73,6,39],[44,75,6,41],[45,6,7,2],[45,10,7,6],[46,8,8,4,"debug"],[46,22,8,9],[46,23,8,9,"debug"],[46,28,8,9],[46,29,8,10,"log"],[46,32,8,13],[46,33,8,14],[46,53,8,34],[46,54,8,35],[47,8,9,4],[47,14,9,10],[47,18,9,10,"flush"],[47,28,9,15],[47,29,9,15,"flush"],[47,34,9,15],[47,36,9,16,"timeout"],[47,43,9,23],[47,44,9,24],[48,8,10,4,"debug"],[48,22,10,9],[48,23,10,9,"debug"],[48,28,10,9],[48,29,10,10,"log"],[48,32,10,13],[48,33,10,14],[48,55,10,36],[48,56,10,37],[49,6,11,2],[49,7,11,3],[49,8,11,4],[49,15,11,11,"e"],[49,16,11,12],[49,18,11,14],[50,8,12,4,"debug"],[50,22,12,9],[50,23,12,9,"debug"],[50,28,12,9],[50,29,12,10,"log"],[50,32,12,13],[50,33,12,14],[50,65,12,46],[50,67,12,48,"e"],[50,68,12,49],[50,69,12,50],[51,6,13,2],[52,4,14,0],[52,5,14,1],[53,4,14,1],[53,11,14,1,"_flushWithTimeout"],[53,28,14,1],[53,29,14,1,"apply"],[53,34,14,1],[53,41,14,1,"arguments"],[53,50,14,1],[54,2,14,1],[55,2,14,1],[55,11,32,15,"flushIfServerless"],[55,28,32,32,"flushIfServerless"],[55,29,32,32],[56,4,32,32],[56,11,32,32,"_flushIfServerless"],[56,29,32,32],[56,30,32,32,"apply"],[56,35,32,32],[56,42,32,32,"arguments"],[56,51,32,32],[57,2,32,32],[58,2,32,32],[58,11,32,32,"_flushIfServerless"],[58,30,32,32],[59,4,32,32,"_flushIfServerless"],[59,22,32,32],[59,29,32,32,"_asyncToGenerator"],[59,46,32,32],[59,47,32,32,"default"],[59,54,32,32],[59,56,32,0],[59,69,36,2],[60,6,36,2],[60,10,33,2,"params"],[60,16,33,8],[60,19,33,8,"arguments"],[60,28,33,8],[60,29,33,8,"length"],[60,35,33,8],[60,43,33,8,"arguments"],[60,52,33,8],[60,60,33,8,"undefined"],[60,69,33,8],[60,72,33,8,"arguments"],[60,81,33,8],[60,87,35,3],[60,88,35,4],[60,89,35,5],[61,6,37,2],[61,10,37,2,"_params$timeout"],[61,25,37,2],[61,28,37,29,"params"],[61,34,37,35],[61,35,37,10,"timeout"],[61,42,37,17],[62,8,37,10,"timeout"],[62,15,37,17],[62,18,37,17,"_params$timeout"],[62,33,37,17],[62,47,37,20],[62,51,37,24],[62,54,37,24,"_params$timeout"],[62,69,37,24],[63,6,39,2],[63,10,39,6],[63,31,39,27],[63,35,39,31,"params"],[63,41,39,37],[63,45,39,41],[63,52,39,48,"params"],[63,58,39,54],[63,60,39,56,"cloudflareWaitUntil"],[63,79,39,75],[63,84,39,80],[63,94,39,90],[63,96,39,92],[64,8,40,4,"params"],[64,14,40,10],[64,15,40,11,"cloudflareWaitUntil"],[64,34,40,30],[64,35,40,31,"flushWithTimeout"],[64,51,40,47],[64,52,40,48,"timeout"],[64,59,40,55],[64,60,40,56],[64,61,40,57],[65,8,41,4],[66,6,42,2],[67,6,44,2],[67,10,44,6],[67,25,44,21],[67,29,44,25,"params"],[67,35,44,31],[67,39,44,35],[67,46,44,42,"params"],[67,52,44,48],[67,53,44,49,"cloudflareCtx"],[67,66,44,62],[67,68,44,64,"waitUntil"],[67,77,44,73],[67,82,44,78],[67,92,44,88],[67,94,44,90],[68,8,45,4,"params"],[68,14,45,10],[68,15,45,11,"cloudflareCtx"],[68,28,45,24],[68,29,45,25,"waitUntil"],[68,38,45,34],[68,39,45,35,"flushWithTimeout"],[68,55,45,51],[68,56,45,52,"timeout"],[68,63,45,59],[68,64,45,60],[68,65,45,61],[69,8,46,4],[70,6,47,2],[72,6,49,2],[73,6,50,2],[73,10,50,6,"GLOBAL_OBJ"],[73,22,50,16],[73,23,50,16,"GLOBAL_OBJ"],[73,33,50,16],[73,34,50,17,"Symbol"],[73,40,50,23],[73,41,50,24,"for"],[73,44,50,27],[73,45,50,28],[73,70,50,53],[73,71,50,54],[73,72,50,55],[73,74,50,57],[74,8,51,4],[75,8,52,4],[75,12,52,4,"vercelWaitUntil"],[75,30,52,19],[75,31,52,19,"vercelWaitUntil"],[75,46,52,19],[75,48,52,20,"flushWithTimeout"],[75,64,52,36],[75,65,52,37,"timeout"],[75,72,52,44],[75,73,52,45],[75,74,52,46],[76,8,53,4],[77,6,54,2],[78,6,56,2],[78,10,56,6],[78,17,56,13,"process"],[78,24,56,20],[78,29,56,25],[78,40,56,36],[78,42,56,38],[79,8,57,4],[80,6,58,2],[81,6,60,2],[81,10,60,8,"isServerless"],[81,22,60,20],[81,25,61,4],[81,26,61,5],[81,27,61,6,"process"],[81,34,61,13],[81,35,61,14,"env"],[81,38,61,17],[81,39,61,18,"FUNCTIONS_WORKER_RUNTIME"],[81,63,61,42],[82,6,61,46],[83,6,62,4],[83,7,62,5],[83,8,62,6,"process"],[83,15,62,13],[83,16,62,14,"env"],[83,19,62,17],[83,20,62,18,"LAMBDA_TASK_ROOT"],[83,36,62,34],[84,6,62,38],[85,6,63,4],[85,7,63,5],[85,8,63,6,"process"],[85,15,63,13],[85,16,63,14,"env"],[85,19,63,17],[85,20,63,18,"K_SERVICE"],[85,29,63,27],[86,6,63,31],[87,6,64,4],[87,7,64,5],[87,8,64,6,"process"],[87,15,64,13],[87,16,64,14,"env"],[87,19,64,17],[87,20,64,18,"CF_PAGES"],[87,28,64,26],[88,6,64,30],[89,6,65,4],[89,7,65,5],[89,8,65,6,"process"],[89,15,65,13],[89,16,65,14,"env"],[89,19,65,17],[89,20,65,18,"VERCEL"],[89,26,65,24],[89,30,66,4],[89,31,66,5],[89,32,66,6,"process"],[89,39,66,13],[89,40,66,14,"env"],[89,43,66,17],[89,44,66,18,"NETLIFY"],[89,51,66,25],[90,6,68,2],[90,10,68,6,"isServerless"],[90,22,68,18],[90,24,68,20],[91,8,69,4],[92,8,70,4],[92,14,70,10,"flushWithTimeout"],[92,30,70,26],[92,31,70,27,"timeout"],[92,38,70,34],[92,39,70,35],[93,6,71,2],[94,4,72,0],[94,5,72,1],[95,4,72,1],[95,11,72,1,"_flushIfServerless"],[95,29,72,1],[95,30,72,1,"apply"],[95,35,72,1],[95,42,72,1,"arguments"],[95,51,72,1],[96,2,72,1],[97,0,72,1],[97,3]],"functionMap":{"names":["<global>","flushWithTimeout","flushIfServerless"],"mappings":"AAA;ACK;CDQ;AEkB;CFwC"},"hasCjsExports":false},"type":"js/module"}]}