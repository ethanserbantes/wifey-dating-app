{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":290,"index":290}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":291},"end":{"line":2,"column":48,"index":339}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"./instrument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":340},"end":{"line":3,"column":63,"index":403}}],"key":"/faGONMhKrqQj2KSLxxwco89Hvc=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":404},"end":{"line":4,"column":115,"index":519}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"_sendStandaloneLcpSpan\", {\n    enumerable: true,\n    get: function () {\n      return _sendStandaloneLcpSpan;\n    }\n  });\n  Object.defineProperty(exports, \"trackLcpAsStandaloneSpan\", {\n    enumerable: true,\n    get: function () {\n      return trackLcpAsStandaloneSpan;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  var _instrumentJs = require(_dependencyMap[2], \"./instrument.js\");\n  var _utilsJs = require(_dependencyMap[3], \"./utils.js\");\n  /**\n   * Starts tracking the Largest Contentful Paint on the current page and collects the value once\n   *\n   * - the page visibility is hidden\n   * - a navigation span is started (to stop LCP measurement for SPA soft navigations)\n   *\n   * Once either of these events triggers, the LCP value is sent as a standalone span and we stop\n   * measuring LCP for subsequent routes.\n   */\n  function trackLcpAsStandaloneSpan(client) {\n    var standaloneLcpValue = 0;\n    var standaloneLcpEntry;\n    if (!(0, _utilsJs.supportsWebVital)('largest-contentful-paint')) {\n      return;\n    }\n    var cleanupLcpHandler = (0, _instrumentJs.addLcpInstrumentationHandler)(_ref => {\n      var metric = _ref.metric;\n      var entry = metric.entries[metric.entries.length - 1];\n      if (!entry) {\n        return;\n      }\n      standaloneLcpValue = metric.value;\n      standaloneLcpEntry = entry;\n    }, true);\n    (0, _utilsJs.listenForWebVitalReportEvents)(client, (reportEvent, pageloadSpanId) => {\n      _sendStandaloneLcpSpan(standaloneLcpValue, standaloneLcpEntry, pageloadSpanId, reportEvent);\n      cleanupLcpHandler();\n    });\n  }\n\n  /**\n   * Exported only for testing!\n   */\n  function _sendStandaloneLcpSpan(lcpValue, entry, pageloadSpanId, reportEvent) {\n    _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log(`Sending LCP span (${lcpValue})`);\n    var startTime = (0, _utilsJs.msToSec)(((0, _sentryCore.browserPerformanceTimeOrigin)() || 0) + (entry?.startTime || 0));\n    var routeName = (0, _sentryCore.getCurrentScope)().getScopeData().transactionName;\n    var name = entry ? (0, _sentryCore.htmlTreeAsString)(entry.element) : 'Largest contentful paint';\n    var attributes = {\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.http.browser.lcp',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'ui.webvital.lcp',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: 0,\n      // LCP is a point-in-time metric\n      // attach the pageload span id to the LCP span so that we can link them in the UI\n      'sentry.pageload.span_id': pageloadSpanId,\n      // describes what triggered the web vital to be reported\n      'sentry.report_event': reportEvent\n    };\n    if (entry) {\n      entry.element && (attributes['lcp.element'] = (0, _sentryCore.htmlTreeAsString)(entry.element));\n      entry.id && (attributes['lcp.id'] = entry.id);\n      entry.url && (attributes['lcp.url'] = entry.url);\n\n      // loadTime is the time of LCP that's related to receiving the LCP element response..\n      entry.loadTime != null && (attributes['lcp.loadTime'] = entry.loadTime);\n\n      // renderTime is loadTime + rendering time\n      // it's 0 if the LCP element is loaded from a 3rd party origin that doesn't send the\n      // `Timing-Allow-Origin` header.\n      entry.renderTime != null && (attributes['lcp.renderTime'] = entry.renderTime);\n      entry.size != null && (attributes['lcp.size'] = entry.size);\n    }\n    var span = (0, _utilsJs.startStandaloneWebVitalSpan)({\n      name,\n      transaction: routeName,\n      attributes,\n      startTime\n    });\n    if (span) {\n      span.addEvent('lcp', {\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: 'millisecond',\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: lcpValue\n      });\n\n      // LCP is a point-in-time metric, so we end the span immediately\n      span.end(startTime);\n    }\n  }\n});","lineCount":101,"map":[[7,2,99,0,"Object"],[7,8,99,0],[7,9,99,0,"defineProperty"],[7,23,99,0],[7,24,99,0,"exports"],[7,31,99,0],[8,4,99,0,"enumerable"],[8,14,99,0],[9,4,99,0,"get"],[9,7,99,0],[9,18,99,0,"get"],[9,19,99,0],[10,6,99,0],[10,13,99,9,"_sendStandaloneLcpSpan"],[10,35,99,31],[11,4,99,31],[12,2,99,31],[13,2,99,0,"Object"],[13,8,99,0],[13,9,99,0,"defineProperty"],[13,23,99,0],[13,24,99,0,"exports"],[13,31,99,0],[14,4,99,0,"enumerable"],[14,14,99,0],[15,4,99,0,"get"],[15,7,99,0],[15,18,99,0,"get"],[15,19,99,0],[16,6,99,0],[16,13,99,33,"trackLcpAsStandaloneSpan"],[16,37,99,57],[17,4,99,57],[18,2,99,57],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,2,0],[20,6,2,0,"_debugBuildJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,3,0],[21,6,3,0,"_instrumentJs"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,4,0],[22,6,4,0,"_utilsJs"],[22,14,4,0],[22,17,4,0,"require"],[22,24,4,0],[22,25,4,0,"_dependencyMap"],[22,39,4,0],[23,2,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,2,15,0],[32,11,15,9,"trackLcpAsStandaloneSpan"],[32,35,15,33,"trackLcpAsStandaloneSpan"],[32,36,15,34,"client"],[32,42,15,40],[32,44,15,42],[33,4,16,2],[33,8,16,6,"standaloneLcpValue"],[33,26,16,24],[33,29,16,27],[33,30,16,28],[34,4,17,2],[34,8,17,6,"standaloneLcpEntry"],[34,26,17,24],[35,4,19,2],[35,8,19,6],[35,9,19,7],[35,13,19,7,"supportsWebVital"],[35,21,19,23],[35,22,19,23,"supportsWebVital"],[35,38,19,23],[35,40,19,24],[35,66,19,50],[35,67,19,51],[35,69,19,53],[36,6,20,4],[37,4,21,2],[38,4,23,2],[38,8,23,8,"cleanupLcpHandler"],[38,25,23,25],[38,28,23,28],[38,32,23,28,"addLcpInstrumentationHandler"],[38,45,23,56],[38,46,23,56,"addLcpInstrumentationHandler"],[38,74,23,56],[38,76,23,57,"_ref"],[38,80,23,57],[38,84,23,73],[39,6,23,73],[39,10,23,60,"metric"],[39,16,23,66],[39,19,23,66,"_ref"],[39,23,23,66],[39,24,23,60,"metric"],[39,30,23,66],[40,6,24,4],[40,10,24,10,"entry"],[40,15,24,15],[40,18,24,18,"metric"],[40,24,24,24],[40,25,24,25,"entries"],[40,32,24,32],[40,33,24,33,"metric"],[40,39,24,39],[40,40,24,40,"entries"],[40,47,24,47],[40,48,24,48,"length"],[40,54,24,54],[40,57,24,57],[40,58,24,58],[40,59,24,59],[41,6,25,4],[41,10,25,8],[41,11,25,9,"entry"],[41,16,25,14],[41,18,25,16],[42,8,26,6],[43,6,27,4],[44,6,28,4,"standaloneLcpValue"],[44,24,28,22],[44,27,28,25,"metric"],[44,33,28,31],[44,34,28,32,"value"],[44,39,28,37],[45,6,29,4,"standaloneLcpEntry"],[45,24,29,22],[45,27,29,25,"entry"],[45,32,29,30],[46,4,30,2],[46,5,30,3],[46,7,30,5],[46,11,30,9],[46,12,30,10],[47,4,32,2],[47,8,32,2,"listenForWebVitalReportEvents"],[47,16,32,31],[47,17,32,31,"listenForWebVitalReportEvents"],[47,46,32,31],[47,48,32,32,"client"],[47,54,32,38],[47,56,32,40],[47,57,32,41,"reportEvent"],[47,68,32,52],[47,70,32,54,"pageloadSpanId"],[47,84,32,68],[47,89,32,73],[48,6,33,4,"_sendStandaloneLcpSpan"],[48,28,33,26],[48,29,33,27,"standaloneLcpValue"],[48,47,33,45],[48,49,33,47,"standaloneLcpEntry"],[48,67,33,65],[48,69,33,67,"pageloadSpanId"],[48,83,33,81],[48,85,33,83,"reportEvent"],[48,96,33,94],[48,97,33,95],[49,6,34,4,"cleanupLcpHandler"],[49,23,34,21],[49,24,34,22],[49,25,34,23],[50,4,35,2],[50,5,35,3],[50,6,35,4],[51,2,36,0],[53,2,38,0],[54,0,39,0],[55,0,40,0],[56,2,41,0],[56,11,41,9,"_sendStandaloneLcpSpan"],[56,33,41,31,"_sendStandaloneLcpSpan"],[56,34,42,2,"lcpValue"],[56,42,42,10],[56,44,43,2,"entry"],[56,49,43,7],[56,51,44,2,"pageloadSpanId"],[56,65,44,16],[56,67,45,2,"reportEvent"],[56,78,45,13],[56,80,46,2],[57,4,47,2,"DEBUG_BUILD"],[57,17,47,13],[57,18,47,13,"DEBUG_BUILD"],[57,29,47,13],[57,33,47,17,"debug"],[57,44,47,22],[57,45,47,22,"debug"],[57,50,47,22],[57,51,47,23,"log"],[57,54,47,26],[57,55,47,27],[57,76,47,48,"lcpValue"],[57,84,47,56],[57,87,47,59],[57,88,47,60],[58,4,49,2],[58,8,49,8,"startTime"],[58,17,49,17],[58,20,49,20],[58,24,49,20,"msToSec"],[58,32,49,27],[58,33,49,27,"msToSec"],[58,40,49,27],[58,42,49,28],[58,43,49,29],[58,47,49,29,"browserPerformanceTimeOrigin"],[58,58,49,57],[58,59,49,57,"browserPerformanceTimeOrigin"],[58,87,49,57],[58,89,49,58],[58,90,49,59],[58,94,49,63],[58,95,49,64],[58,100,49,69,"entry"],[58,105,49,74],[58,107,49,76,"startTime"],[58,116,49,85],[58,120,49,89],[58,121,49,90],[58,122,49,91],[58,123,49,92],[59,4,50,2],[59,8,50,8,"routeName"],[59,17,50,17],[59,20,50,20],[59,24,50,20,"getCurrentScope"],[59,35,50,35],[59,36,50,35,"getCurrentScope"],[59,51,50,35],[59,53,50,36],[59,54,50,37],[59,55,50,38,"getScopeData"],[59,67,50,50],[59,68,50,51],[59,69,50,52],[59,70,50,53,"transactionName"],[59,85,50,68],[60,4,52,2],[60,8,52,8,"name"],[60,12,52,12],[60,15,52,15,"entry"],[60,20,52,20],[60,23,52,23],[60,27,52,23,"htmlTreeAsString"],[60,38,52,39],[60,39,52,39,"htmlTreeAsString"],[60,55,52,39],[60,57,52,40,"entry"],[60,62,52,45],[60,63,52,46,"element"],[60,70,52,53],[60,71,52,54],[60,74,52,57],[60,100,52,83],[61,4,54,2],[61,8,54,8,"attributes"],[61,18,54,18],[61,21,54,21],[62,6,55,4],[62,7,55,5,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[62,18,55,37],[62,19,55,37,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[62,51,55,37],[62,54,55,40],[62,77,55,63],[63,6,56,4],[63,7,56,5,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[63,18,56,33],[63,19,56,33,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[63,47,56,33],[63,50,56,36],[63,67,56,53],[64,6,57,4],[64,7,57,5,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[64,18,57,38],[64,19,57,38,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[64,52,57,38],[64,55,57,41],[64,56,57,42],[65,6,57,44],[66,6,58,4],[67,6,59,4],[67,31,59,29],[67,33,59,31,"pageloadSpanId"],[67,47,59,45],[68,6,60,4],[69,6,61,4],[69,27,61,25],[69,29,61,27,"reportEvent"],[70,4,62,2],[70,5,62,3],[71,4,64,2],[71,8,64,6,"entry"],[71,13,64,11],[71,15,64,13],[72,6,65,4,"entry"],[72,11,65,9],[72,12,65,10,"element"],[72,19,65,17],[72,24,65,22,"attributes"],[72,34,65,32],[72,35,65,33],[72,48,65,46],[72,49,65,47],[72,52,65,50],[72,56,65,50,"htmlTreeAsString"],[72,67,65,66],[72,68,65,66,"htmlTreeAsString"],[72,84,65,66],[72,86,65,67,"entry"],[72,91,65,72],[72,92,65,73,"element"],[72,99,65,80],[72,100,65,81],[72,101,65,82],[73,6,66,4,"entry"],[73,11,66,9],[73,12,66,10,"id"],[73,14,66,12],[73,19,66,17,"attributes"],[73,29,66,27],[73,30,66,28],[73,38,66,36],[73,39,66,37],[73,42,66,40,"entry"],[73,47,66,45],[73,48,66,46,"id"],[73,50,66,48],[73,51,66,49],[74,6,68,4,"entry"],[74,11,68,9],[74,12,68,10,"url"],[74,15,68,13],[74,20,68,18,"attributes"],[74,30,68,28],[74,31,68,29],[74,40,68,38],[74,41,68,39],[74,44,68,42,"entry"],[74,49,68,47],[74,50,68,48,"url"],[74,53,68,51],[74,54,68,52],[76,6,70,4],[77,6,71,4,"entry"],[77,11,71,9],[77,12,71,10,"loadTime"],[77,20,71,18],[77,24,71,22],[77,28,71,26],[77,33,71,31,"attributes"],[77,43,71,41],[77,44,71,42],[77,58,71,56],[77,59,71,57],[77,62,71,60,"entry"],[77,67,71,65],[77,68,71,66,"loadTime"],[77,76,71,74],[77,77,71,75],[79,6,73,4],[80,6,74,4],[81,6,75,4],[82,6,76,4,"entry"],[82,11,76,9],[82,12,76,10,"renderTime"],[82,22,76,20],[82,26,76,24],[82,30,76,28],[82,35,76,33,"attributes"],[82,45,76,43],[82,46,76,44],[82,62,76,60],[82,63,76,61],[82,66,76,64,"entry"],[82,71,76,69],[82,72,76,70,"renderTime"],[82,82,76,80],[82,83,76,81],[83,6,78,4,"entry"],[83,11,78,9],[83,12,78,10,"size"],[83,16,78,14],[83,20,78,18],[83,24,78,22],[83,29,78,27,"attributes"],[83,39,78,37],[83,40,78,38],[83,50,78,48],[83,51,78,49],[83,54,78,52,"entry"],[83,59,78,57],[83,60,78,58,"size"],[83,64,78,62],[83,65,78,63],[84,4,79,2],[85,4,81,2],[85,8,81,8,"span"],[85,12,81,12],[85,15,81,15],[85,19,81,15,"startStandaloneWebVitalSpan"],[85,27,81,42],[85,28,81,42,"startStandaloneWebVitalSpan"],[85,55,81,42],[85,57,81,43],[86,6,82,4,"name"],[86,10,82,8],[87,6,83,4,"transaction"],[87,17,83,15],[87,19,83,17,"routeName"],[87,28,83,26],[88,6,84,4,"attributes"],[88,16,84,14],[89,6,85,4,"startTime"],[90,4,86,2],[90,5,86,3],[90,6,86,4],[91,4,88,2],[91,8,88,6,"span"],[91,12,88,10],[91,14,88,12],[92,6,89,4,"span"],[92,10,89,8],[92,11,89,9,"addEvent"],[92,19,89,17],[92,20,89,18],[92,25,89,23],[92,27,89,25],[93,8,90,6],[93,9,90,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[93,20,90,49],[93,21,90,49,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[93,63,90,49],[93,66,90,52],[93,79,90,65],[94,8,91,6],[94,9,91,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[94,20,91,50],[94,21,91,50,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[94,64,91,50],[94,67,91,53,"lcpValue"],[95,6,92,4],[95,7,92,5],[95,8,92,6],[97,6,94,4],[98,6,95,4,"span"],[98,10,95,8],[98,11,95,9,"end"],[98,14,95,12],[98,15,95,13,"startTime"],[98,24,95,22],[98,25,95,23],[99,4,96,2],[100,2,97,0],[101,0,97,1],[101,3]],"functionMap":{"names":["<global>","trackLcpAsStandaloneSpan","addLcpInstrumentationHandler$argument_0","listenForWebVitalReportEvents$argument_1","_sendStandaloneLcpSpan"],"mappings":"AAA;ACc;yDCQ;GDO;wCEE;GFG;CDC;AIK;CJwD"},"hasCjsExports":false},"type":"js/module"}]}