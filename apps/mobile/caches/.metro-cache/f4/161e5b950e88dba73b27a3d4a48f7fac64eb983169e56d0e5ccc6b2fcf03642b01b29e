{"dependencies":[{"name":"../language/kinds.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"DYuiImaor5NJsXEIc7+6lq9coRI=","exportNames":["*"],"imports":1}},{"name":"../type/definition.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":46},"end":{"line":2,"column":56,"index":102}}],"key":"hpLFFXhPDbJgAZW4WoRQJKwpJT4=","exportNames":["*"],"imports":1}},{"name":"../type/directives.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":103},"end":{"line":6,"column":32,"index":195}}],"key":"r8bFVC+efeYE+arrKYNhjW9SQE8=","exportNames":["*"],"imports":1}},{"name":"../utilities/typeFromAST.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":196},"end":{"line":7,"column":59,"index":255}}],"key":"liLo4cSKT76Iug9yldfS3qOl9mo=","exportNames":["*"],"imports":1}},{"name":"./values.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":256},"end":{"line":8,"column":50,"index":306}}],"key":"21I/xp5Aie7Zc4NRzi8UkhWzQ6E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.collectFields = collectFields;\n  exports.collectSubfields = collectSubfields;\n  var _languageKindsMjs = require(_dependencyMap[0], \"../language/kinds.mjs\");\n  var _typeDefinitionMjs = require(_dependencyMap[1], \"../type/definition.mjs\");\n  var _typeDirectivesMjs = require(_dependencyMap[2], \"../type/directives.mjs\");\n  var _utilitiesTypeFromASTMjs = require(_dependencyMap[3], \"../utilities/typeFromAST.mjs\");\n  var _valuesMjs = require(_dependencyMap[4], \"./values.mjs\");\n  /**\n   * Given a selectionSet, collects all of the fields and returns them.\n   *\n   * CollectFields requires the \"runtime type\" of an object. For a field that\n   * returns an Interface or Union type, the \"runtime type\" will be the actual\n   * object type returned by that field.\n   *\n   * @internal\n   */\n\n  function collectFields(schema, fragments, variableValues, runtimeType, selectionSet) {\n    var fields = new Map();\n    collectFieldsImpl(schema, fragments, variableValues, runtimeType, selectionSet, fields, new Set());\n    return fields;\n  }\n  /**\n   * Given an array of field nodes, collects all of the subfields of the passed\n   * in fields, and returns them at the end.\n   *\n   * CollectSubFields requires the \"return type\" of an object. For a field that\n   * returns an Interface or Union type, the \"return type\" will be the actual\n   * object type returned by that field.\n   *\n   * @internal\n   */\n\n  function collectSubfields(schema, fragments, variableValues, returnType, fieldNodes) {\n    var subFieldNodes = new Map();\n    var visitedFragmentNames = new Set();\n    for (var node of fieldNodes) {\n      if (node.selectionSet) {\n        collectFieldsImpl(schema, fragments, variableValues, returnType, node.selectionSet, subFieldNodes, visitedFragmentNames);\n      }\n    }\n    return subFieldNodes;\n  }\n  function collectFieldsImpl(schema, fragments, variableValues, runtimeType, selectionSet, fields, visitedFragmentNames) {\n    for (var selection of selectionSet.selections) {\n      switch (selection.kind) {\n        case _languageKindsMjs.Kind.FIELD:\n          {\n            if (!shouldIncludeNode(variableValues, selection)) {\n              continue;\n            }\n            var name = getFieldEntryKey(selection);\n            var fieldList = fields.get(name);\n            if (fieldList !== undefined) {\n              fieldList.push(selection);\n            } else {\n              fields.set(name, [selection]);\n            }\n            break;\n          }\n        case _languageKindsMjs.Kind.INLINE_FRAGMENT:\n          {\n            if (!shouldIncludeNode(variableValues, selection) || !doesFragmentConditionMatch(schema, selection, runtimeType)) {\n              continue;\n            }\n            collectFieldsImpl(schema, fragments, variableValues, runtimeType, selection.selectionSet, fields, visitedFragmentNames);\n            break;\n          }\n        case _languageKindsMjs.Kind.FRAGMENT_SPREAD:\n          {\n            var fragName = selection.name.value;\n            if (visitedFragmentNames.has(fragName) || !shouldIncludeNode(variableValues, selection)) {\n              continue;\n            }\n            visitedFragmentNames.add(fragName);\n            var fragment = fragments[fragName];\n            if (!fragment || !doesFragmentConditionMatch(schema, fragment, runtimeType)) {\n              continue;\n            }\n            collectFieldsImpl(schema, fragments, variableValues, runtimeType, fragment.selectionSet, fields, visitedFragmentNames);\n            break;\n          }\n      }\n    }\n  }\n  /**\n   * Determines if a field should be included based on the `@include` and `@skip`\n   * directives, where `@skip` has higher precedence than `@include`.\n   */\n\n  function shouldIncludeNode(variableValues, node) {\n    var skip = (0, _valuesMjs.getDirectiveValues)(_typeDirectivesMjs.GraphQLSkipDirective, node, variableValues);\n    if ((skip === null || skip === void 0 ? void 0 : skip.if) === true) {\n      return false;\n    }\n    var include = (0, _valuesMjs.getDirectiveValues)(_typeDirectivesMjs.GraphQLIncludeDirective, node, variableValues);\n    if ((include === null || include === void 0 ? void 0 : include.if) === false) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Determines if a fragment is applicable to the given type.\n   */\n\n  function doesFragmentConditionMatch(schema, fragment, type) {\n    var typeConditionNode = fragment.typeCondition;\n    if (!typeConditionNode) {\n      return true;\n    }\n    var conditionalType = (0, _utilitiesTypeFromASTMjs.typeFromAST)(schema, typeConditionNode);\n    if (conditionalType === type) {\n      return true;\n    }\n    if ((0, _typeDefinitionMjs.isAbstractType)(conditionalType)) {\n      return schema.isSubType(conditionalType, type);\n    }\n    return false;\n  }\n  /**\n   * Implements the logic to compute the key of a given field's entry\n   */\n\n  function getFieldEntryKey(node) {\n    return node.alias ? node.alias.value : node.name.value;\n  }\n});","lineCount":133,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"collectFields"],[7,23,19,0],[7,26,19,0,"collectFields"],[7,39,19,0],[8,2,49,0,"exports"],[8,9,49,0],[8,10,49,0,"collectSubfields"],[8,26,49,0],[8,29,49,0,"collectSubfields"],[8,45,49,0],[9,2,1,0],[9,6,1,0,"_languageKindsMjs"],[9,23,1,0],[9,26,1,0,"require"],[9,33,1,0],[9,34,1,0,"_dependencyMap"],[9,48,1,0],[10,2,2,0],[10,6,2,0,"_typeDefinitionMjs"],[10,24,2,0],[10,27,2,0,"require"],[10,34,2,0],[10,35,2,0,"_dependencyMap"],[10,49,2,0],[11,2,3,0],[11,6,3,0,"_typeDirectivesMjs"],[11,24,3,0],[11,27,3,0,"require"],[11,34,3,0],[11,35,3,0,"_dependencyMap"],[11,49,3,0],[12,2,7,0],[12,6,7,0,"_utilitiesTypeFromASTMjs"],[12,30,7,0],[12,33,7,0,"require"],[12,40,7,0],[12,41,7,0,"_dependencyMap"],[12,55,7,0],[13,2,8,0],[13,6,8,0,"_valuesMjs"],[13,16,8,0],[13,19,8,0,"require"],[13,26,8,0],[13,27,8,0,"_dependencyMap"],[13,41,8,0],[14,2,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[24,2,19,7],[24,11,19,16,"collectFields"],[24,24,19,29,"collectFields"],[24,25,20,2,"schema"],[24,31,20,8],[24,33,21,2,"fragments"],[24,42,21,11],[24,44,22,2,"variableValues"],[24,58,22,16],[24,60,23,2,"runtimeType"],[24,71,23,13],[24,73,24,2,"selectionSet"],[24,85,24,14],[24,87,25,2],[25,4,26,2],[25,8,26,8,"fields"],[25,14,26,14],[25,17,26,17],[25,21,26,21,"Map"],[25,24,26,24],[25,25,26,25],[25,26,26,26],[26,4,27,2,"collectFieldsImpl"],[26,21,27,19],[26,22,28,4,"schema"],[26,28,28,10],[26,30,29,4,"fragments"],[26,39,29,13],[26,41,30,4,"variableValues"],[26,55,30,18],[26,57,31,4,"runtimeType"],[26,68,31,15],[26,70,32,4,"selectionSet"],[26,82,32,16],[26,84,33,4,"fields"],[26,90,33,10],[26,92,34,4],[26,96,34,8,"Set"],[26,99,34,11],[26,100,34,12],[26,101,35,2],[26,102,35,3],[27,4,36,2],[27,11,36,9,"fields"],[27,17,36,15],[28,2,37,0],[29,2,38,0],[30,0,39,0],[31,0,40,0],[32,0,41,0],[33,0,42,0],[34,0,43,0],[35,0,44,0],[36,0,45,0],[37,0,46,0],[38,0,47,0],[40,2,49,7],[40,11,49,16,"collectSubfields"],[40,27,49,32,"collectSubfields"],[40,28,50,2,"schema"],[40,34,50,8],[40,36,51,2,"fragments"],[40,45,51,11],[40,47,52,2,"variableValues"],[40,61,52,16],[40,63,53,2,"returnType"],[40,73,53,12],[40,75,54,2,"fieldNodes"],[40,85,54,12],[40,87,55,2],[41,4,56,2],[41,8,56,8,"subFieldNodes"],[41,21,56,21],[41,24,56,24],[41,28,56,28,"Map"],[41,31,56,31],[41,32,56,32],[41,33,56,33],[42,4,57,2],[42,8,57,8,"visitedFragmentNames"],[42,28,57,28],[42,31,57,31],[42,35,57,35,"Set"],[42,38,57,38],[42,39,57,39],[42,40,57,40],[43,4,59,2],[43,9,59,7],[43,13,59,13,"node"],[43,17,59,17],[43,21,59,21,"fieldNodes"],[43,31,59,31],[43,33,59,33],[44,6,60,4],[44,10,60,8,"node"],[44,14,60,12],[44,15,60,13,"selectionSet"],[44,27,60,25],[44,29,60,27],[45,8,61,6,"collectFieldsImpl"],[45,25,61,23],[45,26,62,8,"schema"],[45,32,62,14],[45,34,63,8,"fragments"],[45,43,63,17],[45,45,64,8,"variableValues"],[45,59,64,22],[45,61,65,8,"returnType"],[45,71,65,18],[45,73,66,8,"node"],[45,77,66,12],[45,78,66,13,"selectionSet"],[45,90,66,25],[45,92,67,8,"subFieldNodes"],[45,105,67,21],[45,107,68,8,"visitedFragmentNames"],[45,127,69,6],[45,128,69,7],[46,6,70,4],[47,4,71,2],[48,4,73,2],[48,11,73,9,"subFieldNodes"],[48,24,73,22],[49,2,74,0],[50,2,76,0],[50,11,76,9,"collectFieldsImpl"],[50,28,76,26,"collectFieldsImpl"],[50,29,77,2,"schema"],[50,35,77,8],[50,37,78,2,"fragments"],[50,46,78,11],[50,48,79,2,"variableValues"],[50,62,79,16],[50,64,80,2,"runtimeType"],[50,75,80,13],[50,77,81,2,"selectionSet"],[50,89,81,14],[50,91,82,2,"fields"],[50,97,82,8],[50,99,83,2,"visitedFragmentNames"],[50,119,83,22],[50,121,84,2],[51,4,85,2],[51,9,85,7],[51,13,85,13,"selection"],[51,22,85,22],[51,26,85,26,"selectionSet"],[51,38,85,38],[51,39,85,39,"selections"],[51,49,85,49],[51,51,85,51],[52,6,86,4],[52,14,86,12,"selection"],[52,23,86,21],[52,24,86,22,"kind"],[52,28,86,26],[53,8,87,6],[53,13,87,11,"Kind"],[53,30,87,15],[53,31,87,15,"Kind"],[53,35,87,15],[53,36,87,16,"FIELD"],[53,41,87,21],[54,10,87,23],[55,12,88,8],[55,16,88,12],[55,17,88,13,"shouldIncludeNode"],[55,34,88,30],[55,35,88,31,"variableValues"],[55,49,88,45],[55,51,88,47,"selection"],[55,60,88,56],[55,61,88,57],[55,63,88,59],[56,14,89,10],[57,12,90,8],[58,12,92,8],[58,16,92,14,"name"],[58,20,92,18],[58,23,92,21,"getFieldEntryKey"],[58,39,92,37],[58,40,92,38,"selection"],[58,49,92,47],[58,50,92,48],[59,12,93,8],[59,16,93,14,"fieldList"],[59,25,93,23],[59,28,93,26,"fields"],[59,34,93,32],[59,35,93,33,"get"],[59,38,93,36],[59,39,93,37,"name"],[59,43,93,41],[59,44,93,42],[60,12,95,8],[60,16,95,12,"fieldList"],[60,25,95,21],[60,30,95,26,"undefined"],[60,39,95,35],[60,41,95,37],[61,14,96,10,"fieldList"],[61,23,96,19],[61,24,96,20,"push"],[61,28,96,24],[61,29,96,25,"selection"],[61,38,96,34],[61,39,96,35],[62,12,97,8],[62,13,97,9],[62,19,97,15],[63,14,98,10,"fields"],[63,20,98,16],[63,21,98,17,"set"],[63,24,98,20],[63,25,98,21,"name"],[63,29,98,25],[63,31,98,27],[63,32,98,28,"selection"],[63,41,98,37],[63,42,98,38],[63,43,98,39],[64,12,99,8],[65,12,101,8],[66,10,102,6],[67,8,104,6],[67,13,104,11,"Kind"],[67,30,104,15],[67,31,104,15,"Kind"],[67,35,104,15],[67,36,104,16,"INLINE_FRAGMENT"],[67,51,104,31],[68,10,104,33],[69,12,105,8],[69,16,106,10],[69,17,106,11,"shouldIncludeNode"],[69,34,106,28],[69,35,106,29,"variableValues"],[69,49,106,43],[69,51,106,45,"selection"],[69,60,106,54],[69,61,106,55],[69,65,107,10],[69,66,107,11,"doesFragmentConditionMatch"],[69,92,107,37],[69,93,107,38,"schema"],[69,99,107,44],[69,101,107,46,"selection"],[69,110,107,55],[69,112,107,57,"runtimeType"],[69,123,107,68],[69,124,107,69],[69,126,108,10],[70,14,109,10],[71,12,110,8],[72,12,112,8,"collectFieldsImpl"],[72,29,112,25],[72,30,113,10,"schema"],[72,36,113,16],[72,38,114,10,"fragments"],[72,47,114,19],[72,49,115,10,"variableValues"],[72,63,115,24],[72,65,116,10,"runtimeType"],[72,76,116,21],[72,78,117,10,"selection"],[72,87,117,19],[72,88,117,20,"selectionSet"],[72,100,117,32],[72,102,118,10,"fields"],[72,108,118,16],[72,110,119,10,"visitedFragmentNames"],[72,130,120,8],[72,131,120,9],[73,12,121,8],[74,10,122,6],[75,8,124,6],[75,13,124,11,"Kind"],[75,30,124,15],[75,31,124,15,"Kind"],[75,35,124,15],[75,36,124,16,"FRAGMENT_SPREAD"],[75,51,124,31],[76,10,124,33],[77,12,125,8],[77,16,125,14,"fragName"],[77,24,125,22],[77,27,125,25,"selection"],[77,36,125,34],[77,37,125,35,"name"],[77,41,125,39],[77,42,125,40,"value"],[77,47,125,45],[78,12,127,8],[78,16,128,10,"visitedFragmentNames"],[78,36,128,30],[78,37,128,31,"has"],[78,40,128,34],[78,41,128,35,"fragName"],[78,49,128,43],[78,50,128,44],[78,54,129,10],[78,55,129,11,"shouldIncludeNode"],[78,72,129,28],[78,73,129,29,"variableValues"],[78,87,129,43],[78,89,129,45,"selection"],[78,98,129,54],[78,99,129,55],[78,101,130,10],[79,14,131,10],[80,12,132,8],[81,12,134,8,"visitedFragmentNames"],[81,32,134,28],[81,33,134,29,"add"],[81,36,134,32],[81,37,134,33,"fragName"],[81,45,134,41],[81,46,134,42],[82,12,135,8],[82,16,135,14,"fragment"],[82,24,135,22],[82,27,135,25,"fragments"],[82,36,135,34],[82,37,135,35,"fragName"],[82,45,135,43],[82,46,135,44],[83,12,137,8],[83,16,138,10],[83,17,138,11,"fragment"],[83,25,138,19],[83,29,139,10],[83,30,139,11,"doesFragmentConditionMatch"],[83,56,139,37],[83,57,139,38,"schema"],[83,63,139,44],[83,65,139,46,"fragment"],[83,73,139,54],[83,75,139,56,"runtimeType"],[83,86,139,67],[83,87,139,68],[83,89,140,10],[84,14,141,10],[85,12,142,8],[86,12,144,8,"collectFieldsImpl"],[86,29,144,25],[86,30,145,10,"schema"],[86,36,145,16],[86,38,146,10,"fragments"],[86,47,146,19],[86,49,147,10,"variableValues"],[86,63,147,24],[86,65,148,10,"runtimeType"],[86,76,148,21],[86,78,149,10,"fragment"],[86,86,149,18],[86,87,149,19,"selectionSet"],[86,99,149,31],[86,101,150,10,"fields"],[86,107,150,16],[86,109,151,10,"visitedFragmentNames"],[86,129,152,8],[86,130,152,9],[87,12,153,8],[88,10,154,6],[89,6,155,4],[90,4,156,2],[91,2,157,0],[92,2,158,0],[93,0,159,0],[94,0,160,0],[95,0,161,0],[97,2,163,0],[97,11,163,9,"shouldIncludeNode"],[97,28,163,26,"shouldIncludeNode"],[97,29,163,27,"variableValues"],[97,43,163,41],[97,45,163,43,"node"],[97,49,163,47],[97,51,163,49],[98,4,164,2],[98,8,164,8,"skip"],[98,12,164,12],[98,15,164,15],[98,19,164,15,"getDirectiveValues"],[98,29,164,33],[98,30,164,33,"getDirectiveValues"],[98,48,164,33],[98,50,164,34,"GraphQLSkipDirective"],[98,68,164,54],[98,69,164,54,"GraphQLSkipDirective"],[98,89,164,54],[98,91,164,56,"node"],[98,95,164,60],[98,97,164,62,"variableValues"],[98,111,164,76],[98,112,164,77],[99,4,166,2],[99,8,166,6],[99,9,166,7,"skip"],[99,13,166,11],[99,18,166,16],[99,22,166,20],[99,26,166,24,"skip"],[99,30,166,28],[99,35,166,33],[99,40,166,38],[99,41,166,39],[99,44,166,42],[99,49,166,47],[99,50,166,48],[99,53,166,51,"skip"],[99,57,166,55],[99,58,166,56,"if"],[99,60,166,58],[99,66,166,64],[99,70,166,68],[99,72,166,70],[100,6,167,4],[100,13,167,11],[100,18,167,16],[101,4,168,2],[102,4,170,2],[102,8,170,8,"include"],[102,15,170,15],[102,18,170,18],[102,22,170,18,"getDirectiveValues"],[102,32,170,36],[102,33,170,36,"getDirectiveValues"],[102,51,170,36],[102,53,171,4,"GraphQLIncludeDirective"],[102,71,171,27],[102,72,171,27,"GraphQLIncludeDirective"],[102,95,171,27],[102,97,172,4,"node"],[102,101,172,8],[102,103,173,4,"variableValues"],[102,117,174,2],[102,118,174,3],[103,4,176,2],[103,8,177,4],[103,9,177,5,"include"],[103,16,177,12],[103,21,177,17],[103,25,177,21],[103,29,177,25,"include"],[103,36,177,32],[103,41,177,37],[103,46,177,42],[103,47,177,43],[103,50,177,46],[103,55,177,51],[103,56,177,52],[103,59,177,55,"include"],[103,66,177,62],[103,67,177,63,"if"],[103,69,177,65],[103,75,177,71],[103,80,177,76],[103,82,178,4],[104,6,179,4],[104,13,179,11],[104,18,179,16],[105,4,180,2],[106,4,182,2],[106,11,182,9],[106,15,182,13],[107,2,183,0],[108,2,184,0],[109,0,185,0],[110,0,186,0],[112,2,188,0],[112,11,188,9,"doesFragmentConditionMatch"],[112,37,188,35,"doesFragmentConditionMatch"],[112,38,188,36,"schema"],[112,44,188,42],[112,46,188,44,"fragment"],[112,54,188,52],[112,56,188,54,"type"],[112,60,188,58],[112,62,188,60],[113,4,189,2],[113,8,189,8,"typeConditionNode"],[113,25,189,25],[113,28,189,28,"fragment"],[113,36,189,36],[113,37,189,37,"typeCondition"],[113,50,189,50],[114,4,191,2],[114,8,191,6],[114,9,191,7,"typeConditionNode"],[114,26,191,24],[114,28,191,26],[115,6,192,4],[115,13,192,11],[115,17,192,15],[116,4,193,2],[117,4,195,2],[117,8,195,8,"conditionalType"],[117,23,195,23],[117,26,195,26],[117,30,195,26,"typeFromAST"],[117,54,195,37],[117,55,195,37,"typeFromAST"],[117,66,195,37],[117,68,195,38,"schema"],[117,74,195,44],[117,76,195,46,"typeConditionNode"],[117,93,195,63],[117,94,195,64],[118,4,197,2],[118,8,197,6,"conditionalType"],[118,23,197,21],[118,28,197,26,"type"],[118,32,197,30],[118,34,197,32],[119,6,198,4],[119,13,198,11],[119,17,198,15],[120,4,199,2],[121,4,201,2],[121,8,201,6],[121,12,201,6,"isAbstractType"],[121,30,201,20],[121,31,201,20,"isAbstractType"],[121,45,201,20],[121,47,201,21,"conditionalType"],[121,62,201,36],[121,63,201,37],[121,65,201,39],[122,6,202,4],[122,13,202,11,"schema"],[122,19,202,17],[122,20,202,18,"isSubType"],[122,29,202,27],[122,30,202,28,"conditionalType"],[122,45,202,43],[122,47,202,45,"type"],[122,51,202,49],[122,52,202,50],[123,4,203,2],[124,4,205,2],[124,11,205,9],[124,16,205,14],[125,2,206,0],[126,2,207,0],[127,0,208,0],[128,0,209,0],[130,2,211,0],[130,11,211,9,"getFieldEntryKey"],[130,27,211,25,"getFieldEntryKey"],[130,28,211,26,"node"],[130,32,211,30],[130,34,211,32],[131,4,212,2],[131,11,212,9,"node"],[131,15,212,13],[131,16,212,14,"alias"],[131,21,212,19],[131,24,212,22,"node"],[131,28,212,26],[131,29,212,27,"alias"],[131,34,212,32],[131,35,212,33,"value"],[131,40,212,38],[131,43,212,41,"node"],[131,47,212,45],[131,48,212,46,"name"],[131,52,212,50],[131,53,212,51,"value"],[131,58,212,56],[132,2,213,0],[133,0,213,1],[133,3]],"functionMap":{"names":["<global>","collectFields","collectSubfields","collectFieldsImpl","shouldIncludeNode","doesFragmentConditionMatch","getFieldEntryKey"],"mappings":"AAA;OCkB;CDkB;OEY;CFyB;AGE;CHiF;AIM;CJoB;AKK;CLkB;AMK;CNE"},"hasCjsExports":false},"type":"js/module"}]}