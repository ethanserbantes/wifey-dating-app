{"dependencies":[{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useProfileSave = useProfileSave;\n  var _tanstackReactQuery = require(_dependencyMap[0], \"@tanstack/react-query\");\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  function useProfileSave({\n    data,\n    preferences,\n    displayName,\n    age,\n    gender,\n    bio,\n    photos,\n    location,\n    phoneNumber,\n    category,\n    basicHeight,\n    basicJobTitle,\n    basicCompany,\n    basicEducation,\n    basicLookingFor,\n    basicSexuality,\n    interests,\n    prompts,\n    voicePrompt,\n    videos,\n    normalizeVideoUrl\n  }) {\n    _s();\n    const queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    const saveMutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: async () => {\n        const userId = data?.user?.id;\n        if (!userId) {\n          throw new Error(\"Missing user id\");\n        }\n        const ageTrimmed = String(age || \"\").trim();\n        const ageNum = ageTrimmed ? Number(ageTrimmed) : null;\n        if (ageNum !== null) {\n          const invalid = !Number.isFinite(ageNum) || ageNum < 18 || ageNum > 99;\n          if (invalid) {\n            throw new Error(\"Please enter a valid age (18â€“99). \");\n          }\n        }\n        const locationTrimmed = String(location || \"\").trim();\n        const genderTrimmed = String(gender || \"\").trim();\n        const phoneTrimmed = String(phoneNumber || \"\").trim();\n        const prevBasics = preferences?.basics && typeof preferences.basics === \"object\" ? preferences.basics : {};\n        const jobTitleTrimmed = String(basicJobTitle || \"\").trim();\n        const companyTrimmed = String(basicCompany || \"\").trim();\n        const workCombined = jobTitleTrimmed && companyTrimmed ? `${jobTitleTrimmed} at ${companyTrimmed}` : jobTitleTrimmed ? jobTitleTrimmed : companyTrimmed ? `Works at ${companyTrimmed}` : \"\";\n        const nextBasics = {\n          ...prevBasics,\n          height: String(basicHeight || \"\").trim(),\n          jobTitle: jobTitleTrimmed,\n          company: companyTrimmed,\n          // keep `work` for backward-compat across older UI\n          work: workCombined,\n          education: String(basicEducation || \"\").trim(),\n          lookingFor: String(basicLookingFor || \"\").trim(),\n          sexuality: String(basicSexuality || \"\").trim()\n        };\n        const nextPreferences = {\n          ...preferences,\n          category: String(category || \"\").trim(),\n          basics: nextBasics,\n          interests,\n          prompts,\n          voicePrompt,\n          // IMPORTANT: store videos as string URLs for compatibility across the app\n          videos: (Array.isArray(videos) ? videos : []).map(normalizeVideoUrl).filter(x => typeof x === \"string\" && x.length > 0).slice(0, 1)\n        };\n        const response = await fetch(\"/api/profile/me\", {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            userId,\n            displayName,\n            age: ageNum,\n            gender: genderTrimmed ? genderTrimmed : null,\n            bio,\n            photos,\n            location: locationTrimmed ? locationTrimmed : null,\n            phoneNumber: phoneTrimmed ? phoneTrimmed : null,\n            preferences: nextPreferences\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`When updating /api/profile/me, the response was [${response.status}] ${response.statusText}`);\n        }\n        return response.json();\n      },\n      onSuccess: async () => {\n        await queryClient.invalidateQueries({\n          queryKey: [\"profile\", \"me\"]\n        });\n      },\n      onError: e => {\n        console.error(e);\n        Alert.default.alert(\"Could not save\", e?.message || \"Something went wrong saving your profile.\");\n      }\n    });\n    return saveMutation;\n  }\n  _s(useProfileSave, \"i8GuWBj/IOx1KW/0UC3S/0jssoc=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useMutation];\n  });\n});","lineCount":121,"map":[[13,2,4,0,"exports"],[13,9,4,0],[13,10,4,0,"useProfileSave"],[13,24,4,0],[13,27,4,0,"useProfileSave"],[13,41,4,0],[14,2,1,0],[14,6,1,0,"_tanstackReactQuery"],[14,25,1,0],[14,28,1,0,"require"],[14,35,1,0],[14,36,1,0,"_dependencyMap"],[14,50,1,0],[15,2,1,68],[15,6,1,68,"_reactNativeWebDistExportsAlert"],[15,37,1,68],[15,40,1,68,"require"],[15,47,1,68],[15,48,1,68,"_dependencyMap"],[15,62,1,68],[16,2,1,68],[16,6,1,68,"Alert"],[16,11,1,68],[16,14,1,68,"_interopDefault"],[16,29,1,68],[16,30,1,68,"_reactNativeWebDistExportsAlert"],[16,61,1,68],[17,2,4,7],[17,11,4,16,"useProfileSave"],[17,25,4,30,"useProfileSave"],[17,26,4,31],[18,4,5,2,"data"],[18,8,5,6],[19,4,6,2,"preferences"],[19,15,6,13],[20,4,7,2,"displayName"],[20,15,7,13],[21,4,8,2,"age"],[21,7,8,5],[22,4,9,2,"gender"],[22,10,9,8],[23,4,10,2,"bio"],[23,7,10,5],[24,4,11,2,"photos"],[24,10,11,8],[25,4,12,2,"location"],[25,12,12,10],[26,4,13,2,"phoneNumber"],[26,15,13,13],[27,4,14,2,"category"],[27,12,14,10],[28,4,15,2,"basicHeight"],[28,15,15,13],[29,4,16,2,"basicJobTitle"],[29,17,16,15],[30,4,17,2,"basicCompany"],[30,16,17,14],[31,4,18,2,"basicEducation"],[31,18,18,16],[32,4,19,2,"basicLookingFor"],[32,19,19,17],[33,4,20,2,"basicSexuality"],[33,18,20,16],[34,4,21,2,"interests"],[34,13,21,11],[35,4,22,2,"prompts"],[35,11,22,9],[36,4,23,2,"voicePrompt"],[36,15,23,13],[37,4,24,2,"videos"],[37,10,24,8],[38,4,25,2,"normalizeVideoUrl"],[39,2,26,0],[39,3,26,1],[39,5,26,3],[40,4,26,3,"_s"],[40,6,26,3],[41,4,27,2],[41,10,27,8,"queryClient"],[41,21,27,19],[41,24,27,22],[41,28,27,22,"useQueryClient"],[41,47,27,36],[41,48,27,36,"useQueryClient"],[41,62,27,36],[41,64,27,37],[41,65,27,38],[42,4,29,2],[42,10,29,8,"saveMutation"],[42,22,29,20],[42,25,29,23],[42,29,29,23,"useMutation"],[42,48,29,34],[42,49,29,34,"useMutation"],[42,60,29,34],[42,62,29,35],[43,6,30,4,"mutationFn"],[43,16,30,14],[43,18,30,16],[43,24,30,16,"mutationFn"],[43,25,30,16],[43,30,30,28],[44,8,31,6],[44,14,31,12,"userId"],[44,20,31,18],[44,23,31,21,"data"],[44,27,31,25],[44,29,31,27,"user"],[44,33,31,31],[44,35,31,33,"id"],[44,37,31,35],[45,8,32,6],[45,12,32,10],[45,13,32,11,"userId"],[45,19,32,17],[45,21,32,19],[46,10,33,8],[46,16,33,14],[46,20,33,18,"Error"],[46,25,33,23],[46,26,33,24],[46,43,33,41],[46,44,33,42],[47,8,34,6],[48,8,36,6],[48,14,36,12,"ageTrimmed"],[48,24,36,22],[48,27,36,25,"String"],[48,33,36,31],[48,34,36,32,"age"],[48,37,36,35],[48,41,36,39],[48,43,36,41],[48,44,36,42],[48,45,36,43,"trim"],[48,49,36,47],[48,50,36,48],[48,51,36,49],[49,8,37,6],[49,14,37,12,"ageNum"],[49,20,37,18],[49,23,37,21,"ageTrimmed"],[49,33,37,31],[49,36,37,34,"Number"],[49,42,37,40],[49,43,37,41,"ageTrimmed"],[49,53,37,51],[49,54,37,52],[49,57,37,55],[49,61,37,59],[50,8,38,6],[50,12,38,10,"ageNum"],[50,18,38,16],[50,23,38,21],[50,27,38,25],[50,29,38,27],[51,10,39,8],[51,16,39,14,"invalid"],[51,23,39,21],[51,26,39,24],[51,27,39,25,"Number"],[51,33,39,31],[51,34,39,32,"isFinite"],[51,42,39,40],[51,43,39,41,"ageNum"],[51,49,39,47],[51,50,39,48],[51,54,39,52,"ageNum"],[51,60,39,58],[51,63,39,61],[51,65,39,63],[51,69,39,67,"ageNum"],[51,75,39,73],[51,78,39,76],[51,80,39,78],[52,10,40,8],[52,14,40,12,"invalid"],[52,21,40,19],[52,23,40,21],[53,12,41,10],[53,18,41,16],[53,22,41,20,"Error"],[53,27,41,25],[53,28,41,26],[53,64,41,62],[53,65,41,63],[54,10,42,8],[55,8,43,6],[56,8,45,6],[56,14,45,12,"locationTrimmed"],[56,29,45,27],[56,32,45,30,"String"],[56,38,45,36],[56,39,45,37,"location"],[56,47,45,45],[56,51,45,49],[56,53,45,51],[56,54,45,52],[56,55,45,53,"trim"],[56,59,45,57],[56,60,45,58],[56,61,45,59],[57,8,46,6],[57,14,46,12,"genderTrimmed"],[57,27,46,25],[57,30,46,28,"String"],[57,36,46,34],[57,37,46,35,"gender"],[57,43,46,41],[57,47,46,45],[57,49,46,47],[57,50,46,48],[57,51,46,49,"trim"],[57,55,46,53],[57,56,46,54],[57,57,46,55],[58,8,47,6],[58,14,47,12,"phoneTrimmed"],[58,26,47,24],[58,29,47,27,"String"],[58,35,47,33],[58,36,47,34,"phoneNumber"],[58,47,47,45],[58,51,47,49],[58,53,47,51],[58,54,47,52],[58,55,47,53,"trim"],[58,59,47,57],[58,60,47,58],[58,61,47,59],[59,8,49,6],[59,14,49,12,"prevBasics"],[59,24,49,22],[59,27,50,8,"preferences"],[59,38,50,19],[59,40,50,21,"basics"],[59,46,50,27],[59,50,50,31],[59,57,50,38,"preferences"],[59,68,50,49],[59,69,50,50,"basics"],[59,75,50,56],[59,80,50,61],[59,88,50,69],[59,91,51,12,"preferences"],[59,102,51,23],[59,103,51,24,"basics"],[59,109,51,30],[59,112,52,12],[59,113,52,13],[59,114,52,14],[60,8,54,6],[60,14,54,12,"jobTitleTrimmed"],[60,29,54,27],[60,32,54,30,"String"],[60,38,54,36],[60,39,54,37,"basicJobTitle"],[60,52,54,50],[60,56,54,54],[60,58,54,56],[60,59,54,57],[60,60,54,58,"trim"],[60,64,54,62],[60,65,54,63],[60,66,54,64],[61,8,55,6],[61,14,55,12,"companyTrimmed"],[61,28,55,26],[61,31,55,29,"String"],[61,37,55,35],[61,38,55,36,"basicCompany"],[61,50,55,48],[61,54,55,52],[61,56,55,54],[61,57,55,55],[61,58,55,56,"trim"],[61,62,55,60],[61,63,55,61],[61,64,55,62],[62,8,56,6],[62,14,56,12,"workCombined"],[62,26,56,24],[62,29,57,8,"jobTitleTrimmed"],[62,44,57,23],[62,48,57,27,"companyTrimmed"],[62,62,57,41],[62,65,58,12],[62,68,58,15,"jobTitleTrimmed"],[62,83,58,30],[62,90,58,37,"companyTrimmed"],[62,104,58,51],[62,106,58,53],[62,109,59,12,"jobTitleTrimmed"],[62,124,59,27],[62,127,60,14,"jobTitleTrimmed"],[62,142,60,29],[62,145,61,14,"companyTrimmed"],[62,159,61,28],[62,162,62,16],[62,174,62,28,"companyTrimmed"],[62,188,62,42],[62,190,62,44],[62,193,63,16],[62,195,63,18],[63,8,65,6],[63,14,65,12,"nextBasics"],[63,24,65,22],[63,27,65,25],[64,10,66,8],[64,13,66,11,"prevBasics"],[64,23,66,21],[65,10,67,8,"height"],[65,16,67,14],[65,18,67,16,"String"],[65,24,67,22],[65,25,67,23,"basicHeight"],[65,36,67,34],[65,40,67,38],[65,42,67,40],[65,43,67,41],[65,44,67,42,"trim"],[65,48,67,46],[65,49,67,47],[65,50,67,48],[66,10,68,8,"jobTitle"],[66,18,68,16],[66,20,68,18,"jobTitleTrimmed"],[66,35,68,33],[67,10,69,8,"company"],[67,17,69,15],[67,19,69,17,"companyTrimmed"],[67,33,69,31],[68,10,70,8],[69,10,71,8,"work"],[69,14,71,12],[69,16,71,14,"workCombined"],[69,28,71,26],[70,10,72,8,"education"],[70,19,72,17],[70,21,72,19,"String"],[70,27,72,25],[70,28,72,26,"basicEducation"],[70,42,72,40],[70,46,72,44],[70,48,72,46],[70,49,72,47],[70,50,72,48,"trim"],[70,54,72,52],[70,55,72,53],[70,56,72,54],[71,10,73,8,"lookingFor"],[71,20,73,18],[71,22,73,20,"String"],[71,28,73,26],[71,29,73,27,"basicLookingFor"],[71,44,73,42],[71,48,73,46],[71,50,73,48],[71,51,73,49],[71,52,73,50,"trim"],[71,56,73,54],[71,57,73,55],[71,58,73,56],[72,10,74,8,"sexuality"],[72,19,74,17],[72,21,74,19,"String"],[72,27,74,25],[72,28,74,26,"basicSexuality"],[72,42,74,40],[72,46,74,44],[72,48,74,46],[72,49,74,47],[72,50,74,48,"trim"],[72,54,74,52],[72,55,74,53],[73,8,75,6],[73,9,75,7],[74,8,77,6],[74,14,77,12,"nextPreferences"],[74,29,77,27],[74,32,77,30],[75,10,78,8],[75,13,78,11,"preferences"],[75,24,78,22],[76,10,79,8,"category"],[76,18,79,16],[76,20,79,18,"String"],[76,26,79,24],[76,27,79,25,"category"],[76,35,79,33],[76,39,79,37],[76,41,79,39],[76,42,79,40],[76,43,79,41,"trim"],[76,47,79,45],[76,48,79,46],[76,49,79,47],[77,10,80,8,"basics"],[77,16,80,14],[77,18,80,16,"nextBasics"],[77,28,80,26],[78,10,81,8,"interests"],[78,19,81,17],[79,10,82,8,"prompts"],[79,17,82,15],[80,10,83,8,"voicePrompt"],[80,21,83,19],[81,10,84,8],[82,10,85,8,"videos"],[82,16,85,14],[82,18,85,16],[82,19,85,17,"Array"],[82,24,85,22],[82,25,85,23,"isArray"],[82,32,85,30],[82,33,85,31,"videos"],[82,39,85,37],[82,40,85,38],[82,43,85,41,"videos"],[82,49,85,47],[82,52,85,50],[82,54,85,52],[82,56,86,11,"map"],[82,59,86,14],[82,60,86,15,"normalizeVideoUrl"],[82,77,86,32],[82,78,86,33],[82,79,87,11,"filter"],[82,85,87,17],[82,86,87,19,"x"],[82,87,87,20],[82,91,87,25],[82,98,87,32,"x"],[82,99,87,33],[82,104,87,38],[82,112,87,46],[82,116,87,50,"x"],[82,117,87,51],[82,118,87,52,"length"],[82,124,87,58],[82,127,87,61],[82,128,87,62],[82,129,87,63],[82,130,88,11,"slice"],[82,135,88,16],[82,136,88,17],[82,137,88,18],[82,139,88,20],[82,140,88,21],[83,8,89,6],[83,9,89,7],[84,8,91,6],[84,14,91,12,"response"],[84,22,91,20],[84,25,91,23],[84,31,91,29,"fetch"],[84,36,91,34],[84,37,91,35],[84,54,91,52],[84,56,91,54],[85,10,92,8,"method"],[85,16,92,14],[85,18,92,16],[85,23,92,21],[86,10,93,8,"headers"],[86,17,93,15],[86,19,93,17],[87,12,93,19],[87,26,93,33],[87,28,93,35],[88,10,93,54],[88,11,93,55],[89,10,94,8,"body"],[89,14,94,12],[89,16,94,14,"JSON"],[89,20,94,18],[89,21,94,19,"stringify"],[89,30,94,28],[89,31,94,29],[90,12,95,10,"userId"],[90,18,95,16],[91,12,96,10,"displayName"],[91,23,96,21],[92,12,97,10,"age"],[92,15,97,13],[92,17,97,15,"ageNum"],[92,23,97,21],[93,12,98,10,"gender"],[93,18,98,16],[93,20,98,18,"genderTrimmed"],[93,33,98,31],[93,36,98,34,"genderTrimmed"],[93,49,98,47],[93,52,98,50],[93,56,98,54],[94,12,99,10,"bio"],[94,15,99,13],[95,12,100,10,"photos"],[95,18,100,16],[96,12,101,10,"location"],[96,20,101,18],[96,22,101,20,"locationTrimmed"],[96,37,101,35],[96,40,101,38,"locationTrimmed"],[96,55,101,53],[96,58,101,56],[96,62,101,60],[97,12,102,10,"phoneNumber"],[97,23,102,21],[97,25,102,23,"phoneTrimmed"],[97,37,102,35],[97,40,102,38,"phoneTrimmed"],[97,52,102,50],[97,55,102,53],[97,59,102,57],[98,12,103,10,"preferences"],[98,23,103,21],[98,25,103,23,"nextPreferences"],[99,10,104,8],[99,11,104,9],[100,8,105,6],[100,9,105,7],[100,10,105,8],[101,8,107,6],[101,12,107,10],[101,13,107,11,"response"],[101,21,107,19],[101,22,107,20,"ok"],[101,24,107,22],[101,26,107,24],[102,10,108,8],[102,16,108,14],[102,20,108,18,"Error"],[102,25,108,23],[102,26,109,10],[102,78,109,62,"response"],[102,86,109,70],[102,87,109,71,"status"],[102,93,109,77],[102,98,109,82,"response"],[102,106,109,90],[102,107,109,91,"statusText"],[102,117,109,101],[102,119,110,8],[102,120,110,9],[103,8,111,6],[104,8,112,6],[104,15,112,13,"response"],[104,23,112,21],[104,24,112,22,"json"],[104,28,112,26],[104,29,112,27],[104,30,112,28],[105,6,113,4],[105,7,113,5],[106,6,114,4,"onSuccess"],[106,15,114,13],[106,17,114,15],[106,23,114,15,"onSuccess"],[106,24,114,15],[106,29,114,27],[107,8,115,6],[107,14,115,12,"queryClient"],[107,25,115,23],[107,26,115,24,"invalidateQueries"],[107,43,115,41],[107,44,115,42],[108,10,115,44,"queryKey"],[108,18,115,52],[108,20,115,54],[108,21,115,55],[108,30,115,64],[108,32,115,66],[108,36,115,70],[109,8,115,72],[109,9,115,73],[109,10,115,74],[110,6,116,4],[110,7,116,5],[111,6,117,4,"onError"],[111,13,117,11],[111,15,117,14,"e"],[111,16,117,15],[111,20,117,20],[112,8,118,6,"console"],[112,15,118,13],[112,16,118,14,"error"],[112,21,118,19],[112,22,118,20,"e"],[112,23,118,21],[112,24,118,22],[113,8,119,6,"Alert"],[113,13,119,11],[113,14,119,11,"default"],[113,21,119,11],[113,22,119,12,"alert"],[113,27,119,17],[113,28,120,8],[113,44,120,24],[113,46,121,8,"e"],[113,47,121,9],[113,49,121,11,"message"],[113,56,121,18],[113,60,121,22],[113,103,122,6],[113,104,122,7],[114,6,123,4],[115,4,124,2],[115,5,124,3],[115,6,124,4],[116,4,126,2],[116,11,126,9,"saveMutation"],[116,23,126,21],[117,2,127,0],[118,2,127,1,"_s"],[118,4,127,1],[118,5,4,16,"useProfileSave"],[118,19,4,30],[119,4,4,30],[119,12,27,22,"useQueryClient"],[119,31,27,36],[119,32,27,36,"useQueryClient"],[119,46,27,36],[119,48,29,23,"useMutation"],[119,67,29,34],[119,68,29,34,"useMutation"],[119,79,29,34],[120,2,29,34],[121,0,29,34],[121,3]],"functionMap":{"names":["<global>","useProfileSave","useMutation$argument_0.mutationFn","map.filter$argument_0","useMutation$argument_0.onSuccess","useMutation$argument_0.onError"],"mappings":"AAA;OCG;gBC0B;kBCyD,4CD;KD0B;eGC;KHE;aIC;KJM;CDI"},"hasCjsExports":false},"type":"js/module"}]}