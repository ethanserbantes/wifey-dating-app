{"dependencies":[{"name":"@babel/runtime/helpers/awaitAsyncGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"WZI4BLbsoFmfGv92jc0fZy7RWkQ=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/wrapAsyncGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"NV7M0GAEWUGvIKMnZy5Y7CrLwN8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncIterator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"iAa+RToycgxigMSWyQzterF69/I=","exportNames":["*"],"imports":1}},{"name":"../../exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"EZPmsHt7bn9JJ4Y0grXw/CrOow0=","exportNames":["*"],"imports":1}},{"name":"../spanstatus.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":53,"index":106}}],"key":"oo3PNTzeCFGehsy4DLcuUh8qvTg=","exportNames":["*"],"imports":1}},{"name":"../ai/gen-ai-attributes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":368,"index":475}}],"key":"nKHaXfEjIYF1icPUCGJgR0o1cZ8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"instrumentStream\", {\n    enumerable: true,\n    get: function () {\n      return instrumentStream;\n    }\n  });\n  var _babelRuntimeHelpersAwaitAsyncGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/awaitAsyncGenerator\");\n  var _awaitAsyncGenerator = _interopDefault(_babelRuntimeHelpersAwaitAsyncGenerator);\n  var _babelRuntimeHelpersWrapAsyncGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/wrapAsyncGenerator\");\n  var _wrapAsyncGenerator = _interopDefault(_babelRuntimeHelpersWrapAsyncGenerator);\n  var _babelRuntimeHelpersAsyncIterator = require(_dependencyMap[2], \"@babel/runtime/helpers/asyncIterator\");\n  var _asyncIterator = _interopDefault(_babelRuntimeHelpersAsyncIterator);\n  var _exportsJs = require(_dependencyMap[3], \"../../exports.js\");\n  var _spanstatusJs = require(_dependencyMap[4], \"../spanstatus.js\");\n  var _aiGenAiAttributesJs = require(_dependencyMap[5], \"../ai/gen-ai-attributes.js\");\n  /**\n   * State object used to accumulate information from a stream of Google GenAI events.\n   */\n\n  /**\n   * Checks if a response chunk contains an error\n   * @param chunk - The response chunk to check\n   * @param span - The span to update if error is found\n   * @returns Whether an error occurred\n   */\n  function isErrorChunk(chunk, span) {\n    var feedback = chunk?.promptFeedback;\n    if (feedback?.blockReason) {\n      var message = feedback.blockReasonMessage ?? feedback.blockReason;\n      span.setStatus({\n        code: _spanstatusJs.SPAN_STATUS_ERROR,\n        message: `Content blocked: ${message}`\n      });\n      (0, _exportsJs.captureException)(`Content blocked: ${message}`, {\n        mechanism: {\n          handled: false,\n          type: 'auto.ai.google_genai'\n        }\n      });\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Processes response metadata from a chunk\n   * @param chunk - The response chunk to process\n   * @param state - The state of the streaming process\n   */\n  function handleResponseMetadata(chunk, state) {\n    if (typeof chunk.responseId === 'string') state.responseId = chunk.responseId;\n    if (typeof chunk.modelVersion === 'string') state.responseModel = chunk.modelVersion;\n    var usage = chunk.usageMetadata;\n    if (usage) {\n      if (typeof usage.promptTokenCount === 'number') state.promptTokens = usage.promptTokenCount;\n      if (typeof usage.candidatesTokenCount === 'number') state.completionTokens = usage.candidatesTokenCount;\n      if (typeof usage.totalTokenCount === 'number') state.totalTokens = usage.totalTokenCount;\n    }\n  }\n\n  /**\n   * Processes candidate content from a response chunk\n   * @param chunk - The response chunk to process\n   * @param state - The state of the streaming process\n   * @param recordOutputs - Whether to record outputs\n   */\n  function handleCandidateContent(chunk, state, recordOutputs) {\n    if (Array.isArray(chunk.functionCalls)) {\n      state.toolCalls.push(...chunk.functionCalls);\n    }\n    for (var candidate of chunk.candidates ?? []) {\n      if (candidate?.finishReason && !state.finishReasons.includes(candidate.finishReason)) {\n        state.finishReasons.push(candidate.finishReason);\n      }\n      for (var part of candidate?.content?.parts ?? []) {\n        if (recordOutputs && part.text) state.responseTexts.push(part.text);\n        if (part.functionCall) {\n          state.toolCalls.push({\n            type: 'function',\n            id: part.functionCall.id,\n            name: part.functionCall.name,\n            arguments: part.functionCall.args\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * Processes a single chunk from the Google GenAI stream\n   * @param chunk - The chunk to process\n   * @param state - The state of the streaming process\n   * @param recordOutputs - Whether to record outputs\n   * @param span - The span to update\n   */\n  function processChunk(chunk, state, recordOutputs, span) {\n    if (!chunk || isErrorChunk(chunk, span)) return;\n    handleResponseMetadata(chunk, state);\n    handleCandidateContent(chunk, state, recordOutputs);\n  }\n\n  /**\n   * Instruments an async iterable stream of Google GenAI response chunks, updates the span with\n   * streaming attributes and (optionally) the aggregated output text, and yields\n   * each chunk from the input stream unchanged.\n   */\n  function instrumentStream(_x, _x2, _x3) {\n    return _instrumentStream.apply(this, arguments);\n  }\n  function _instrumentStream() {\n    _instrumentStream = (0, _wrapAsyncGenerator.default)(function* (stream, span, recordOutputs) {\n      var state = {\n        responseTexts: [],\n        finishReasons: [],\n        toolCalls: []\n      };\n      try {\n        var _iteratorAbruptCompletion = false;\n        var _didIteratorError = false;\n        var _iteratorError;\n        try {\n          for (var _iterator = (0, _asyncIterator.default)(stream), _step; _iteratorAbruptCompletion = !(_step = yield (0, _awaitAsyncGenerator.default)(_iterator.next())).done; _iteratorAbruptCompletion = false) {\n            var chunk = _step.value;\n            {\n              processChunk(chunk, state, recordOutputs, span);\n              yield chunk;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (_iteratorAbruptCompletion && _iterator.return != null) {\n              yield (0, _awaitAsyncGenerator.default)(_iterator.return());\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } finally {\n        var attrs = {\n          [_aiGenAiAttributesJs.GEN_AI_RESPONSE_STREAMING_ATTRIBUTE]: true\n        };\n        if (state.responseId) attrs[_aiGenAiAttributesJs.GEN_AI_RESPONSE_ID_ATTRIBUTE] = state.responseId;\n        if (state.responseModel) attrs[_aiGenAiAttributesJs.GEN_AI_RESPONSE_MODEL_ATTRIBUTE] = state.responseModel;\n        if (state.promptTokens !== undefined) attrs[_aiGenAiAttributesJs.GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE] = state.promptTokens;\n        if (state.completionTokens !== undefined) attrs[_aiGenAiAttributesJs.GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE] = state.completionTokens;\n        if (state.totalTokens !== undefined) attrs[_aiGenAiAttributesJs.GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE] = state.totalTokens;\n        if (state.finishReasons.length) {\n          attrs[_aiGenAiAttributesJs.GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE] = JSON.stringify(state.finishReasons);\n        }\n        if (recordOutputs && state.responseTexts.length) {\n          attrs[_aiGenAiAttributesJs.GEN_AI_RESPONSE_TEXT_ATTRIBUTE] = state.responseTexts.join('');\n        }\n        if (recordOutputs && state.toolCalls.length) {\n          attrs[_aiGenAiAttributesJs.GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE] = JSON.stringify(state.toolCalls);\n        }\n        span.setAttributes(attrs);\n        span.end();\n      }\n    });\n    return _instrumentStream.apply(this, arguments);\n  }\n});","lineCount":178,"map":[[12,2,135,0,"Object"],[12,8,135,0],[12,9,135,0,"defineProperty"],[12,23,135,0],[12,24,135,0,"exports"],[12,31,135,0],[13,4,135,0,"enumerable"],[13,14,135,0],[14,4,135,0,"get"],[14,7,135,0],[14,18,135,0,"get"],[14,19,135,0],[15,6,135,0],[15,13,135,9,"instrumentStream"],[15,29,135,25],[16,4,135,25],[17,2,135,25],[18,2,135,28],[18,6,135,28,"_babelRuntimeHelpersAwaitAsyncGenerator"],[18,45,135,28],[18,48,135,28,"require"],[18,55,135,28],[18,56,135,28,"_dependencyMap"],[18,70,135,28],[19,2,135,28],[19,6,135,28,"_awaitAsyncGenerator"],[19,26,135,28],[19,29,135,28,"_interopDefault"],[19,44,135,28],[19,45,135,28,"_babelRuntimeHelpersAwaitAsyncGenerator"],[19,84,135,28],[20,2,135,28],[20,6,135,28,"_babelRuntimeHelpersWrapAsyncGenerator"],[20,44,135,28],[20,47,135,28,"require"],[20,54,135,28],[20,55,135,28,"_dependencyMap"],[20,69,135,28],[21,2,135,28],[21,6,135,28,"_wrapAsyncGenerator"],[21,25,135,28],[21,28,135,28,"_interopDefault"],[21,43,135,28],[21,44,135,28,"_babelRuntimeHelpersWrapAsyncGenerator"],[21,82,135,28],[22,2,135,28],[22,6,135,28,"_babelRuntimeHelpersAsyncIterator"],[22,39,135,28],[22,42,135,28,"require"],[22,49,135,28],[22,50,135,28,"_dependencyMap"],[22,64,135,28],[23,2,135,28],[23,6,135,28,"_asyncIterator"],[23,20,135,28],[23,23,135,28,"_interopDefault"],[23,38,135,28],[23,39,135,28,"_babelRuntimeHelpersAsyncIterator"],[23,72,135,28],[24,2,1,0],[24,6,1,0,"_exportsJs"],[24,16,1,0],[24,19,1,0,"require"],[24,26,1,0],[24,27,1,0,"_dependencyMap"],[24,41,1,0],[25,2,2,0],[25,6,2,0,"_spanstatusJs"],[25,19,2,0],[25,22,2,0,"require"],[25,29,2,0],[25,30,2,0,"_dependencyMap"],[25,44,2,0],[26,2,3,0],[26,6,3,0,"_aiGenAiAttributesJs"],[26,26,3,0],[26,29,3,0,"require"],[26,36,3,0],[26,37,3,0,"_dependencyMap"],[26,51,3,0],[27,2,5,0],[28,0,6,0],[29,0,7,0],[31,2,9,0],[32,0,10,0],[33,0,11,0],[34,0,12,0],[35,0,13,0],[36,0,14,0],[37,2,15,0],[37,11,15,9,"isErrorChunk"],[37,23,15,21,"isErrorChunk"],[37,24,15,22,"chunk"],[37,29,15,27],[37,31,15,29,"span"],[37,35,15,33],[37,37,15,35],[38,4,16,2],[38,8,16,8,"feedback"],[38,16,16,16],[38,19,16,19,"chunk"],[38,24,16,24],[38,26,16,26,"promptFeedback"],[38,40,16,40],[39,4,17,2],[39,8,17,6,"feedback"],[39,16,17,14],[39,18,17,16,"blockReason"],[39,29,17,27],[39,31,17,29],[40,6,18,4],[40,10,18,10,"message"],[40,17,18,17],[40,20,18,20,"feedback"],[40,28,18,28],[40,29,18,29,"blockReasonMessage"],[40,47,18,47],[40,51,18,51,"feedback"],[40,59,18,59],[40,60,18,60,"blockReason"],[40,71,18,71],[41,6,19,4,"span"],[41,10,19,8],[41,11,19,9,"setStatus"],[41,20,19,18],[41,21,19,19],[42,8,19,21,"code"],[42,12,19,25],[42,14,19,27,"SPAN_STATUS_ERROR"],[42,27,19,44],[42,28,19,44,"SPAN_STATUS_ERROR"],[42,45,19,44],[43,8,19,46,"message"],[43,15,19,53],[43,17,19,55],[43,37,19,75,"message"],[43,44,19,82],[44,6,19,85],[44,7,19,86],[44,8,19,87],[45,6,20,4],[45,10,20,4,"captureException"],[45,20,20,20],[45,21,20,20,"captureException"],[45,37,20,20],[45,39,20,21],[45,59,20,41,"message"],[45,66,20,48],[45,68,20,50],[45,70,20,52],[46,8,21,6,"mechanism"],[46,17,21,15],[46,19,21,17],[47,10,21,19,"handled"],[47,17,21,26],[47,19,21,28],[47,24,21,33],[48,10,21,35,"type"],[48,14,21,39],[48,16,21,41],[49,8,21,64],[50,6,22,4],[50,7,22,5],[50,8,22,6],[51,6,23,4],[51,13,23,11],[51,17,23,15],[52,4,24,2],[53,4,25,2],[53,11,25,9],[53,16,25,14],[54,2,26,0],[56,2,28,0],[57,0,29,0],[58,0,30,0],[59,0,31,0],[60,0,32,0],[61,2,33,0],[61,11,33,9,"handleResponseMetadata"],[61,33,33,31,"handleResponseMetadata"],[61,34,33,32,"chunk"],[61,39,33,37],[61,41,33,39,"state"],[61,46,33,44],[61,48,33,46],[62,4,34,2],[62,8,34,6],[62,15,34,13,"chunk"],[62,20,34,18],[62,21,34,19,"responseId"],[62,31,34,29],[62,36,34,34],[62,44,34,42],[62,46,34,44,"state"],[62,51,34,49],[62,52,34,50,"responseId"],[62,62,34,60],[62,65,34,63,"chunk"],[62,70,34,68],[62,71,34,69,"responseId"],[62,81,34,79],[63,4,35,2],[63,8,35,6],[63,15,35,13,"chunk"],[63,20,35,18],[63,21,35,19,"modelVersion"],[63,33,35,31],[63,38,35,36],[63,46,35,44],[63,48,35,46,"state"],[63,53,35,51],[63,54,35,52,"responseModel"],[63,67,35,65],[63,70,35,68,"chunk"],[63,75,35,73],[63,76,35,74,"modelVersion"],[63,88,35,86],[64,4,37,2],[64,8,37,8,"usage"],[64,13,37,13],[64,16,37,16,"chunk"],[64,21,37,21],[64,22,37,22,"usageMetadata"],[64,35,37,35],[65,4,38,2],[65,8,38,6,"usage"],[65,13,38,11],[65,15,38,13],[66,6,39,4],[66,10,39,8],[66,17,39,15,"usage"],[66,22,39,20],[66,23,39,21,"promptTokenCount"],[66,39,39,37],[66,44,39,42],[66,52,39,50],[66,54,39,52,"state"],[66,59,39,57],[66,60,39,58,"promptTokens"],[66,72,39,70],[66,75,39,73,"usage"],[66,80,39,78],[66,81,39,79,"promptTokenCount"],[66,97,39,95],[67,6,40,4],[67,10,40,8],[67,17,40,15,"usage"],[67,22,40,20],[67,23,40,21,"candidatesTokenCount"],[67,43,40,41],[67,48,40,46],[67,56,40,54],[67,58,40,56,"state"],[67,63,40,61],[67,64,40,62,"completionTokens"],[67,80,40,78],[67,83,40,81,"usage"],[67,88,40,86],[67,89,40,87,"candidatesTokenCount"],[67,109,40,107],[68,6,41,4],[68,10,41,8],[68,17,41,15,"usage"],[68,22,41,20],[68,23,41,21,"totalTokenCount"],[68,38,41,36],[68,43,41,41],[68,51,41,49],[68,53,41,51,"state"],[68,58,41,56],[68,59,41,57,"totalTokens"],[68,70,41,68],[68,73,41,71,"usage"],[68,78,41,76],[68,79,41,77,"totalTokenCount"],[68,94,41,92],[69,4,42,2],[70,2,43,0],[72,2,45,0],[73,0,46,0],[74,0,47,0],[75,0,48,0],[76,0,49,0],[77,0,50,0],[78,2,51,0],[78,11,51,9,"handleCandidateContent"],[78,33,51,31,"handleCandidateContent"],[78,34,51,32,"chunk"],[78,39,51,37],[78,41,51,39,"state"],[78,46,51,44],[78,48,51,46,"recordOutputs"],[78,61,51,59],[78,63,51,61],[79,4,52,2],[79,8,52,6,"Array"],[79,13,52,11],[79,14,52,12,"isArray"],[79,21,52,19],[79,22,52,20,"chunk"],[79,27,52,25],[79,28,52,26,"functionCalls"],[79,41,52,39],[79,42,52,40],[79,44,52,42],[80,6,53,4,"state"],[80,11,53,9],[80,12,53,10,"toolCalls"],[80,21,53,19],[80,22,53,20,"push"],[80,26,53,24],[80,27,53,25],[80,30,53,28,"chunk"],[80,35,53,33],[80,36,53,34,"functionCalls"],[80,49,53,47],[80,50,53,48],[81,4,54,2],[82,4,56,2],[82,9,56,7],[82,13,56,13,"candidate"],[82,22,56,22],[82,26,56,26,"chunk"],[82,31,56,31],[82,32,56,32,"candidates"],[82,42,56,42],[82,46,56,46],[82,48,56,48],[82,50,56,50],[83,6,57,4],[83,10,57,8,"candidate"],[83,19,57,17],[83,21,57,19,"finishReason"],[83,33,57,31],[83,37,57,35],[83,38,57,36,"state"],[83,43,57,41],[83,44,57,42,"finishReasons"],[83,57,57,55],[83,58,57,56,"includes"],[83,66,57,64],[83,67,57,65,"candidate"],[83,76,57,74],[83,77,57,75,"finishReason"],[83,89,57,87],[83,90,57,88],[83,92,57,90],[84,8,58,6,"state"],[84,13,58,11],[84,14,58,12,"finishReasons"],[84,27,58,25],[84,28,58,26,"push"],[84,32,58,30],[84,33,58,31,"candidate"],[84,42,58,40],[84,43,58,41,"finishReason"],[84,55,58,53],[84,56,58,54],[85,6,59,4],[86,6,61,4],[86,11,61,9],[86,15,61,15,"part"],[86,19,61,19],[86,23,61,23,"candidate"],[86,32,61,32],[86,34,61,34,"content"],[86,41,61,41],[86,43,61,43,"parts"],[86,48,61,48],[86,52,61,52],[86,54,61,54],[86,56,61,56],[87,8,62,6],[87,12,62,10,"recordOutputs"],[87,25,62,23],[87,29,62,27,"part"],[87,33,62,31],[87,34,62,32,"text"],[87,38,62,36],[87,40,62,38,"state"],[87,45,62,43],[87,46,62,44,"responseTexts"],[87,59,62,57],[87,60,62,58,"push"],[87,64,62,62],[87,65,62,63,"part"],[87,69,62,67],[87,70,62,68,"text"],[87,74,62,72],[87,75,62,73],[88,8,63,6],[88,12,63,10,"part"],[88,16,63,14],[88,17,63,15,"functionCall"],[88,29,63,27],[88,31,63,29],[89,10,64,8,"state"],[89,15,64,13],[89,16,64,14,"toolCalls"],[89,25,64,23],[89,26,64,24,"push"],[89,30,64,28],[89,31,64,29],[90,12,65,10,"type"],[90,16,65,14],[90,18,65,16],[90,28,65,26],[91,12,66,10,"id"],[91,14,66,12],[91,16,66,14,"part"],[91,20,66,18],[91,21,66,19,"functionCall"],[91,33,66,31],[91,34,66,32,"id"],[91,36,66,34],[92,12,67,10,"name"],[92,16,67,14],[92,18,67,16,"part"],[92,22,67,20],[92,23,67,21,"functionCall"],[92,35,67,33],[92,36,67,34,"name"],[92,40,67,38],[93,12,68,10,"arguments"],[93,21,68,19],[93,23,68,21,"part"],[93,27,68,25],[93,28,68,26,"functionCall"],[93,40,68,38],[93,41,68,39,"args"],[94,10,69,8],[94,11,69,9],[94,12,69,10],[95,8,70,6],[96,6,71,4],[97,4,72,2],[98,2,73,0],[100,2,75,0],[101,0,76,0],[102,0,77,0],[103,0,78,0],[104,0,79,0],[105,0,80,0],[106,0,81,0],[107,2,82,0],[107,11,82,9,"processChunk"],[107,23,82,21,"processChunk"],[107,24,82,22,"chunk"],[107,29,82,27],[107,31,82,29,"state"],[107,36,82,34],[107,38,82,36,"recordOutputs"],[107,51,82,49],[107,53,82,51,"span"],[107,57,82,55],[107,59,82,57],[108,4,83,2],[108,8,83,6],[108,9,83,7,"chunk"],[108,14,83,12],[108,18,83,16,"isErrorChunk"],[108,30,83,28],[108,31,83,29,"chunk"],[108,36,83,34],[108,38,83,36,"span"],[108,42,83,40],[108,43,83,41],[108,45,83,43],[109,4,84,2,"handleResponseMetadata"],[109,26,84,24],[109,27,84,25,"chunk"],[109,32,84,30],[109,34,84,32,"state"],[109,39,84,37],[109,40,84,38],[110,4,85,2,"handleCandidateContent"],[110,26,85,24],[110,27,85,25,"chunk"],[110,32,85,30],[110,34,85,32,"state"],[110,39,85,37],[110,41,85,39,"recordOutputs"],[110,54,85,52],[110,55,85,53],[111,2,86,0],[113,2,88,0],[114,0,89,0],[115,0,90,0],[116,0,91,0],[117,0,92,0],[118,2,88,0],[118,11,93,16,"instrumentStream"],[118,27,93,32,"instrumentStream"],[118,28,93,32,"_x"],[118,30,93,32],[118,32,93,32,"_x2"],[118,35,93,32],[118,37,93,32,"_x3"],[118,40,93,32],[119,4,93,32],[119,11,93,32,"_instrumentStream"],[119,28,93,32],[119,29,93,32,"apply"],[119,34,93,32],[119,41,93,32,"arguments"],[119,50,93,32],[120,2,93,32],[121,2,93,32],[121,11,93,32,"_instrumentStream"],[121,29,93,32],[122,4,93,32,"_instrumentStream"],[122,21,93,32],[122,28,93,32,"_wrapAsyncGenerator"],[122,47,93,32],[122,48,93,32,"default"],[122,55,93,32],[122,57,93,0],[122,68,94,2,"stream"],[122,74,94,8],[122,76,95,2,"span"],[122,80,95,6],[122,82,96,2,"recordOutputs"],[122,95,96,15],[122,97,97,2],[123,6,98,2],[123,10,98,8,"state"],[123,15,98,13],[123,18,98,16],[124,8,99,4,"responseTexts"],[124,21,99,17],[124,23,99,19],[124,25,99,21],[125,8,100,4,"finishReasons"],[125,21,100,17],[125,23,100,19],[125,25,100,21],[126,8,101,4,"toolCalls"],[126,17,101,13],[126,19,101,15],[127,6,102,2],[127,7,102,3],[128,6,104,2],[128,10,104,6],[129,8,104,6],[129,12,104,6,"_iteratorAbruptCompletion"],[129,37,104,6],[130,8,104,6],[130,12,104,6,"_didIteratorError"],[130,29,104,6],[131,8,104,6],[131,12,104,6,"_iteratorError"],[131,26,104,6],[132,8,104,6],[133,10,105,4],[133,19,105,4,"_iterator"],[133,28,105,4],[133,35,105,4,"_asyncIterator"],[133,49,105,4],[133,50,105,4,"default"],[133,57,105,4],[133,59,105,30,"stream"],[133,65,105,36],[133,68,105,36,"_step"],[133,73,105,36],[133,75,105,36,"_iteratorAbruptCompletion"],[133,100,105,36],[133,105,105,36,"_step"],[133,110,105,36],[133,123,105,36,"_awaitAsyncGenerator"],[133,143,105,36],[133,144,105,36,"default"],[133,151,105,36],[133,153,105,36,"_iterator"],[133,162,105,36],[133,163,105,36,"next"],[133,167,105,36],[133,172,105,36,"done"],[133,176,105,36],[133,178,105,36,"_iteratorAbruptCompletion"],[133,203,105,36],[133,213,105,38],[134,12,105,38],[134,16,105,21,"chunk"],[134,21,105,26],[134,24,105,26,"_step"],[134,29,105,26],[134,30,105,26,"value"],[134,35,105,26],[135,12,105,26],[136,14,106,6,"processChunk"],[136,26,106,18],[136,27,106,19,"chunk"],[136,32,106,24],[136,34,106,26,"state"],[136,39,106,31],[136,41,106,33,"recordOutputs"],[136,54,106,46],[136,56,106,48,"span"],[136,60,106,52],[136,61,106,53],[137,14,107,6],[137,20,107,12,"chunk"],[137,25,107,17],[138,12,107,18],[139,10,108,4],[140,8,108,5],[140,17,108,5,"err"],[140,20,108,5],[141,10,108,5,"_didIteratorError"],[141,27,108,5],[142,10,108,5,"_iteratorError"],[142,24,108,5],[142,27,108,5,"err"],[142,30,108,5],[143,8,108,5],[144,10,108,5],[145,12,108,5],[145,16,108,5,"_iteratorAbruptCompletion"],[145,41,108,5],[145,45,108,5,"_iterator"],[145,54,108,5],[145,55,108,5,"return"],[145,61,108,5],[146,14,108,5],[146,24,108,5,"_awaitAsyncGenerator"],[146,44,108,5],[146,45,108,5,"default"],[146,52,108,5],[146,54,108,5,"_iterator"],[146,63,108,5],[146,64,108,5,"return"],[146,70,108,5],[147,12,108,5],[148,10,108,5],[149,12,108,5],[149,16,108,5,"_didIteratorError"],[149,33,108,5],[150,14,108,5],[150,20,108,5,"_iteratorError"],[150,34,108,5],[151,12,108,5],[152,10,108,5],[153,8,108,5],[154,6,109,2],[154,7,109,3],[154,16,109,12],[155,8,110,4],[155,12,110,10,"attrs"],[155,17,110,15],[155,20,110,18],[156,10,111,6],[156,11,111,7,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[156,31,111,42],[156,32,111,42,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[156,67,111,42],[156,70,111,45],[157,8,112,4],[157,9,112,5],[158,8,114,4],[158,12,114,8,"state"],[158,17,114,13],[158,18,114,14,"responseId"],[158,28,114,24],[158,30,114,26,"attrs"],[158,35,114,31],[158,36,114,32,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[158,56,114,60],[158,57,114,60,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[158,85,114,60],[158,86,114,61],[158,89,114,64,"state"],[158,94,114,69],[158,95,114,70,"responseId"],[158,105,114,80],[159,8,115,4],[159,12,115,8,"state"],[159,17,115,13],[159,18,115,14,"responseModel"],[159,31,115,27],[159,33,115,29,"attrs"],[159,38,115,34],[159,39,115,35,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[159,59,115,66],[159,60,115,66,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[159,91,115,66],[159,92,115,67],[159,95,115,70,"state"],[159,100,115,75],[159,101,115,76,"responseModel"],[159,114,115,89],[160,8,116,4],[160,12,116,8,"state"],[160,17,116,13],[160,18,116,14,"promptTokens"],[160,30,116,26],[160,35,116,31,"undefined"],[160,44,116,40],[160,46,116,42,"attrs"],[160,51,116,47],[160,52,116,48,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[160,72,116,83],[160,73,116,83,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[160,108,116,83],[160,109,116,84],[160,112,116,87,"state"],[160,117,116,92],[160,118,116,93,"promptTokens"],[160,130,116,105],[161,8,117,4],[161,12,117,8,"state"],[161,17,117,13],[161,18,117,14,"completionTokens"],[161,34,117,30],[161,39,117,35,"undefined"],[161,48,117,44],[161,50,117,46,"attrs"],[161,55,117,51],[161,56,117,52,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[161,76,117,88],[161,77,117,88,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[161,113,117,88],[161,114,117,89],[161,117,117,92,"state"],[161,122,117,97],[161,123,117,98,"completionTokens"],[161,139,117,114],[162,8,118,4],[162,12,118,8,"state"],[162,17,118,13],[162,18,118,14,"totalTokens"],[162,29,118,25],[162,34,118,30,"undefined"],[162,43,118,39],[162,45,118,41,"attrs"],[162,50,118,46],[162,51,118,47,"GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE"],[162,71,118,82],[162,72,118,82,"GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE"],[162,107,118,82],[162,108,118,83],[162,111,118,86,"state"],[162,116,118,91],[162,117,118,92,"totalTokens"],[162,128,118,103],[163,8,120,4],[163,12,120,8,"state"],[163,17,120,13],[163,18,120,14,"finishReasons"],[163,31,120,27],[163,32,120,28,"length"],[163,38,120,34],[163,40,120,36],[164,10,121,6,"attrs"],[164,15,121,11],[164,16,121,12,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[164,36,121,52],[164,37,121,52,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[164,77,121,52],[164,78,121,53],[164,81,121,56,"JSON"],[164,85,121,60],[164,86,121,61,"stringify"],[164,95,121,70],[164,96,121,71,"state"],[164,101,121,76],[164,102,121,77,"finishReasons"],[164,115,121,90],[164,116,121,91],[165,8,122,4],[166,8,123,4],[166,12,123,8,"recordOutputs"],[166,25,123,21],[166,29,123,25,"state"],[166,34,123,30],[166,35,123,31,"responseTexts"],[166,48,123,44],[166,49,123,45,"length"],[166,55,123,51],[166,57,123,53],[167,10,124,6,"attrs"],[167,15,124,11],[167,16,124,12,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[167,36,124,42],[167,37,124,42,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[167,67,124,42],[167,68,124,43],[167,71,124,46,"state"],[167,76,124,51],[167,77,124,52,"responseTexts"],[167,90,124,65],[167,91,124,66,"join"],[167,95,124,70],[167,96,124,71],[167,98,124,73],[167,99,124,74],[168,8,125,4],[169,8,126,4],[169,12,126,8,"recordOutputs"],[169,25,126,21],[169,29,126,25,"state"],[169,34,126,30],[169,35,126,31,"toolCalls"],[169,44,126,40],[169,45,126,41,"length"],[169,51,126,47],[169,53,126,49],[170,10,127,6,"attrs"],[170,15,127,11],[170,16,127,12,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[170,36,127,48],[170,37,127,48,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[170,73,127,48],[170,74,127,49],[170,77,127,52,"JSON"],[170,81,127,56],[170,82,127,57,"stringify"],[170,91,127,66],[170,92,127,67,"state"],[170,97,127,72],[170,98,127,73,"toolCalls"],[170,107,127,82],[170,108,127,83],[171,8,128,4],[172,8,130,4,"span"],[172,12,130,8],[172,13,130,9,"setAttributes"],[172,26,130,22],[172,27,130,23,"attrs"],[172,32,130,28],[172,33,130,29],[173,8,131,4,"span"],[173,12,131,8],[173,13,131,9,"end"],[173,16,131,12],[173,17,131,13],[173,18,131,14],[174,6,132,2],[175,4,133,0],[175,5,133,1],[176,4,133,1],[176,11,133,1,"_instrumentStream"],[176,28,133,1],[176,29,133,1,"apply"],[176,34,133,1],[176,41,133,1,"arguments"],[176,50,133,1],[177,2,133,1],[178,0,133,1],[178,3]],"functionMap":{"names":["<global>","isErrorChunk","handleResponseMetadata","handleCandidateContent","processChunk","instrumentStream"],"mappings":"AAA;ACc;CDW;AEO;CFU;AGQ;CHsB;AIS;CJI;AKO;CLwC"},"hasCjsExports":false},"type":"js/module"}]}