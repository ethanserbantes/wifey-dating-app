{"dependencies":[{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"],"imports":1}},{"name":"../utils/path.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":54,"index":109}}],"key":"Sa82m734Od8MEqL/BO7LVp0/eR0=","exportNames":["*"],"imports":1}},{"name":"../utils/worldwide.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":110},"end":{"line":3,"column":51,"index":161}}],"key":"P+UFfr1ne09dGLmc90iZCFaYonQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"generateIteratee\", {\n    enumerable: true,\n    get: function () {\n      return generateIteratee;\n    }\n  });\n  Object.defineProperty(exports, \"rewriteFramesIntegration\", {\n    enumerable: true,\n    get: function () {\n      return rewriteFramesIntegration;\n    }\n  });\n  var _integrationJs = require(_dependencyMap[0], \"../integration.js\");\n  var _utilsPathJs = require(_dependencyMap[1], \"../utils/path.js\");\n  var _utilsWorldwideJs = require(_dependencyMap[2], \"../utils/worldwide.js\");\n  var INTEGRATION_NAME = 'RewriteFrames';\n\n  /**\n   * Rewrite event frames paths.\n   */\n  var rewriteFramesIntegration = (0, _integrationJs.defineIntegration)(function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var root = options.root;\n    var prefix = options.prefix || 'app:///';\n    var isBrowser = 'window' in _utilsWorldwideJs.GLOBAL_OBJ && !!_utilsWorldwideJs.GLOBAL_OBJ.window;\n    var iteratee = options.iteratee || generateIteratee({\n      isBrowser,\n      root,\n      prefix\n    });\n\n    /** Process an exception event. */\n    function _processExceptionsEvent(event) {\n      try {\n        return {\n          ...event,\n          exception: {\n            ...event.exception,\n            // The check for this is performed inside `process` call itself, safe to skip here\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            values: event.exception.values.map(value => ({\n              ...value,\n              ...(value.stacktrace && {\n                stacktrace: _processStacktrace(value.stacktrace)\n              })\n            }))\n          }\n        };\n      } catch {\n        return event;\n      }\n    }\n\n    /** Process a stack trace. */\n    function _processStacktrace(stacktrace) {\n      return {\n        ...stacktrace,\n        frames: stacktrace?.frames?.map(f => iteratee(f))\n      };\n    }\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(originalEvent) {\n        var processedEvent = originalEvent;\n        if (originalEvent.exception && Array.isArray(originalEvent.exception.values)) {\n          processedEvent = _processExceptionsEvent(processedEvent);\n        }\n        return processedEvent;\n      }\n    };\n  });\n\n  /**\n   * Exported only for tests.\n   */\n  function generateIteratee(_ref) {\n    var isBrowser = _ref.isBrowser,\n      root = _ref.root,\n      prefix = _ref.prefix;\n    return frame => {\n      if (!frame.filename) {\n        return frame;\n      }\n\n      // Determine if this is a Windows frame by checking for a Windows-style prefix such as `C:\\`\n      var isWindowsFrame = /^[a-zA-Z]:\\\\/.test(frame.filename) ||\n      // or the presence of a backslash without a forward slash (which are not allowed on Windows)\n      frame.filename.includes('\\\\') && !frame.filename.includes('/');\n\n      // Check if the frame filename begins with `/`\n      var startsWithSlash = /^\\//.test(frame.filename);\n      if (isBrowser) {\n        if (root) {\n          var oldFilename = frame.filename;\n          if (oldFilename.indexOf(root) === 0) {\n            frame.filename = oldFilename.replace(root, prefix);\n          }\n        }\n      } else {\n        if (isWindowsFrame || startsWithSlash) {\n          var filename = isWindowsFrame ? frame.filename.replace(/^[a-zA-Z]:/, '') // remove Windows-style prefix\n          .replace(/\\\\/g, '/') // replace all `\\\\` instances with `/`\n          : frame.filename;\n          var base = root ? (0, _utilsPathJs.relative)(root, filename) : (0, _utilsPathJs.basename)(filename);\n          frame.filename = `${prefix}${base}`;\n        }\n      }\n      return frame;\n    };\n  }\n});","lineCount":117,"map":[[7,2,107,0,"Object"],[7,8,107,0],[7,9,107,0,"defineProperty"],[7,23,107,0],[7,24,107,0,"exports"],[7,31,107,0],[8,4,107,0,"enumerable"],[8,14,107,0],[9,4,107,0,"get"],[9,7,107,0],[9,18,107,0,"get"],[9,19,107,0],[10,6,107,0],[10,13,107,9,"generateIteratee"],[10,29,107,25],[11,4,107,25],[12,2,107,25],[13,2,107,0,"Object"],[13,8,107,0],[13,9,107,0,"defineProperty"],[13,23,107,0],[13,24,107,0,"exports"],[13,31,107,0],[14,4,107,0,"enumerable"],[14,14,107,0],[15,4,107,0,"get"],[15,7,107,0],[15,18,107,0,"get"],[15,19,107,0],[16,6,107,0],[16,13,107,27,"rewriteFramesIntegration"],[16,37,107,51],[17,4,107,51],[18,2,107,51],[19,2,1,0],[19,6,1,0,"_integrationJs"],[19,20,1,0],[19,23,1,0,"require"],[19,30,1,0],[19,31,1,0,"_dependencyMap"],[19,45,1,0],[20,2,2,0],[20,6,2,0,"_utilsPathJs"],[20,18,2,0],[20,21,2,0,"require"],[20,28,2,0],[20,29,2,0,"_dependencyMap"],[20,43,2,0],[21,2,3,0],[21,6,3,0,"_utilsWorldwideJs"],[21,23,3,0],[21,26,3,0,"require"],[21,33,3,0],[21,34,3,0,"_dependencyMap"],[21,48,3,0],[22,2,5,0],[22,6,5,6,"INTEGRATION_NAME"],[22,22,5,22],[22,25,5,25],[22,40,5,40],[24,2,7,0],[25,0,8,0],[26,0,9,0],[27,2,10,0],[27,6,10,6,"rewriteFramesIntegration"],[27,30,10,30],[27,33,10,33],[27,37,10,33,"defineIntegration"],[27,51,10,50],[27,52,10,50,"defineIntegration"],[27,69,10,50],[27,71,10,51],[27,83,10,69],[28,4,10,69],[28,8,10,52,"options"],[28,15,10,59],[28,18,10,59,"arguments"],[28,27,10,59],[28,28,10,59,"length"],[28,34,10,59],[28,42,10,59,"arguments"],[28,51,10,59],[28,59,10,59,"undefined"],[28,68,10,59],[28,71,10,59,"arguments"],[28,80,10,59],[28,86,10,62],[28,87,10,63],[28,88,10,64],[29,4,11,2],[29,8,11,8,"root"],[29,12,11,12],[29,15,11,15,"options"],[29,22,11,22],[29,23,11,23,"root"],[29,27,11,27],[30,4,12,2],[30,8,12,8,"prefix"],[30,14,12,14],[30,17,12,17,"options"],[30,24,12,24],[30,25,12,25,"prefix"],[30,31,12,31],[30,35,12,35],[30,44,12,44],[31,4,14,2],[31,8,14,8,"isBrowser"],[31,17,14,17],[31,20,14,20],[31,28,14,28],[31,32,14,32,"GLOBAL_OBJ"],[31,49,14,42],[31,50,14,42,"GLOBAL_OBJ"],[31,60,14,42],[31,64,14,46],[31,65,14,47],[31,66,14,48,"GLOBAL_OBJ"],[31,83,14,58],[31,84,14,58,"GLOBAL_OBJ"],[31,94,14,58],[31,95,14,59,"window"],[31,101,14,65],[32,4,16,2],[32,8,16,8,"iteratee"],[32,16,16,16],[32,19,16,19,"options"],[32,26,16,26],[32,27,16,27,"iteratee"],[32,35,16,35],[32,39,16,39,"generateIteratee"],[32,55,16,55],[32,56,16,56],[33,6,16,58,"isBrowser"],[33,15,16,67],[34,6,16,69,"root"],[34,10,16,73],[35,6,16,75,"prefix"],[36,4,16,82],[36,5,16,83],[36,6,16,84],[38,4,18,2],[39,4,19,2],[39,13,19,11,"_processExceptionsEvent"],[39,36,19,34,"_processExceptionsEvent"],[39,37,19,35,"event"],[39,42,19,40],[39,44,19,42],[40,6,20,4],[40,10,20,8],[41,8,21,6],[41,15,21,13],[42,10,22,8],[42,13,22,11,"event"],[42,18,22,16],[43,10,23,8,"exception"],[43,19,23,17],[43,21,23,19],[44,12,24,10],[44,15,24,13,"event"],[44,20,24,18],[44,21,24,19,"exception"],[44,30,24,28],[45,12,25,10],[46,12,26,10],[47,12,27,10,"values"],[47,18,27,16],[47,20,27,18,"event"],[47,25,27,23],[47,26,27,24,"exception"],[47,35,27,33],[47,36,27,34,"values"],[47,42,27,40],[47,43,27,41,"map"],[47,46,27,44],[47,47,27,45,"value"],[47,52,27,50],[47,57,27,55],[48,14,28,12],[48,17,28,15,"value"],[48,22,28,20],[49,14,29,12],[49,18,29,16,"value"],[49,23,29,21],[49,24,29,22,"stacktrace"],[49,34,29,32],[49,38,29,36],[50,16,29,38,"stacktrace"],[50,26,29,48],[50,28,29,50,"_processStacktrace"],[50,46,29,68],[50,47,29,69,"value"],[50,52,29,74],[50,53,29,75,"stacktrace"],[50,63,29,85],[51,14,29,87],[51,15,29,88],[52,12,30,10],[52,13,30,11],[52,14,30,12],[53,10,31,8],[54,8,32,6],[54,9,32,7],[55,6,33,4],[55,7,33,5],[55,8,33,6],[55,14,33,12],[56,8,34,6],[56,15,34,13,"event"],[56,20,34,18],[57,6,35,4],[58,4,36,2],[60,4,38,2],[61,4,39,2],[61,13,39,11,"_processStacktrace"],[61,31,39,29,"_processStacktrace"],[61,32,39,30,"stacktrace"],[61,42,39,40],[61,44,39,42],[62,6,40,4],[62,13,40,11],[63,8,41,6],[63,11,41,9,"stacktrace"],[63,21,41,19],[64,8,42,6,"frames"],[64,14,42,12],[64,16,42,14,"stacktrace"],[64,26,42,24],[64,28,42,26,"frames"],[64,34,42,32],[64,36,42,34,"map"],[64,39,42,37],[64,40,42,38,"f"],[64,41,42,39],[64,45,42,43,"iteratee"],[64,53,42,51],[64,54,42,52,"f"],[64,55,42,53],[64,56,42,54],[65,6,43,4],[65,7,43,5],[66,4,44,2],[67,4,46,2],[67,11,46,9],[68,6,47,4,"name"],[68,10,47,8],[68,12,47,10,"INTEGRATION_NAME"],[68,28,47,26],[69,6,48,4,"processEvent"],[69,18,48,16,"processEvent"],[69,19,48,17,"originalEvent"],[69,32,48,30],[69,34,48,32],[70,8,49,6],[70,12,49,10,"processedEvent"],[70,26,49,24],[70,29,49,27,"originalEvent"],[70,42,49,40],[71,8,51,6],[71,12,51,10,"originalEvent"],[71,25,51,23],[71,26,51,24,"exception"],[71,35,51,33],[71,39,51,37,"Array"],[71,44,51,42],[71,45,51,43,"isArray"],[71,52,51,50],[71,53,51,51,"originalEvent"],[71,66,51,64],[71,67,51,65,"exception"],[71,76,51,74],[71,77,51,75,"values"],[71,83,51,81],[71,84,51,82],[71,86,51,84],[72,10,52,8,"processedEvent"],[72,24,52,22],[72,27,52,25,"_processExceptionsEvent"],[72,50,52,48],[72,51,52,49,"processedEvent"],[72,65,52,63],[72,66,52,64],[73,8,53,6],[74,8,55,6],[74,15,55,13,"processedEvent"],[74,29,55,27],[75,6,56,4],[76,4,57,2],[76,5,57,3],[77,2,58,0],[77,3,58,1],[77,4,58,2],[79,2,60,0],[80,0,61,0],[81,0,62,0],[82,2,63,0],[82,11,63,9,"generateIteratee"],[82,27,63,25,"generateIteratee"],[82,28,63,25,"_ref"],[82,32,63,25],[82,34,69,2],[83,4,69,2],[83,8,64,2,"isBrowser"],[83,17,64,11],[83,20,64,11,"_ref"],[83,24,64,11],[83,25,64,2,"isBrowser"],[83,34,64,11],[84,6,65,2,"root"],[84,10,65,6],[84,13,65,6,"_ref"],[84,17,65,6],[84,18,65,2,"root"],[84,22,65,6],[85,6,66,2,"prefix"],[85,12,66,8],[85,15,66,8,"_ref"],[85,19,66,8],[85,20,66,2,"prefix"],[85,26,66,8],[86,4,70,2],[86,11,70,10,"frame"],[86,16,70,15],[86,20,70,20],[87,6,71,4],[87,10,71,8],[87,11,71,9,"frame"],[87,16,71,14],[87,17,71,15,"filename"],[87,25,71,23],[87,27,71,25],[88,8,72,6],[88,15,72,13,"frame"],[88,20,72,18],[89,6,73,4],[91,6,75,4],[92,6,76,4],[92,10,76,10,"isWindowsFrame"],[92,24,76,24],[92,27,77,6],[92,41,77,20],[92,42,77,21,"test"],[92,46,77,25],[92,47,77,26,"frame"],[92,52,77,31],[92,53,77,32,"filename"],[92,61,77,40],[92,62,77,41],[93,6,78,6],[94,6,79,7,"frame"],[94,11,79,12],[94,12,79,13,"filename"],[94,20,79,21],[94,21,79,22,"includes"],[94,29,79,30],[94,30,79,31],[94,34,79,35],[94,35,79,36],[94,39,79,40],[94,40,79,41,"frame"],[94,45,79,46],[94,46,79,47,"filename"],[94,54,79,55],[94,55,79,56,"includes"],[94,63,79,64],[94,64,79,65],[94,67,79,68],[94,68,79,70],[96,6,81,4],[97,6,82,4],[97,10,82,10,"startsWithSlash"],[97,25,82,25],[97,28,82,28],[97,33,82,33],[97,34,82,34,"test"],[97,38,82,38],[97,39,82,39,"frame"],[97,44,82,44],[97,45,82,45,"filename"],[97,53,82,53],[97,54,82,54],[98,6,84,4],[98,10,84,8,"isBrowser"],[98,19,84,17],[98,21,84,19],[99,8,85,6],[99,12,85,10,"root"],[99,16,85,14],[99,18,85,16],[100,10,86,8],[100,14,86,14,"oldFilename"],[100,25,86,25],[100,28,86,28,"frame"],[100,33,86,33],[100,34,86,34,"filename"],[100,42,86,42],[101,10,87,8],[101,14,87,12,"oldFilename"],[101,25,87,23],[101,26,87,24,"indexOf"],[101,33,87,31],[101,34,87,32,"root"],[101,38,87,36],[101,39,87,37],[101,44,87,42],[101,45,87,43],[101,47,87,45],[102,12,88,10,"frame"],[102,17,88,15],[102,18,88,16,"filename"],[102,26,88,24],[102,29,88,27,"oldFilename"],[102,40,88,38],[102,41,88,39,"replace"],[102,48,88,46],[102,49,88,47,"root"],[102,53,88,51],[102,55,88,53,"prefix"],[102,61,88,59],[102,62,88,60],[103,10,89,8],[104,8,90,6],[105,6,91,4],[105,7,91,5],[105,13,91,11],[106,8,92,6],[106,12,92,10,"isWindowsFrame"],[106,26,92,24],[106,30,92,28,"startsWithSlash"],[106,45,92,43],[106,47,92,45],[107,10,93,8],[107,14,93,14,"filename"],[107,22,93,22],[107,25,93,25,"isWindowsFrame"],[107,39,93,39],[107,42,94,12,"frame"],[107,47,94,17],[107,48,94,18,"filename"],[107,56,94,26],[107,57,95,15,"replace"],[107,64,95,22],[107,65,95,23],[107,77,95,35],[107,79,95,37],[107,81,95,39],[107,82,95,40],[107,83,95,41],[108,10,95,41],[108,11,96,15,"replace"],[108,18,96,22],[108,19,96,23],[108,24,96,28],[108,26,96,30],[108,29,96,33],[108,30,96,34],[108,31,96,35],[109,10,96,35],[109,12,97,12,"frame"],[109,17,97,17],[109,18,97,18,"filename"],[109,26,97,26],[110,10,98,8],[110,14,98,14,"base"],[110,18,98,18],[110,21,98,21,"root"],[110,25,98,25],[110,28,98,28],[110,32,98,28,"relative"],[110,44,98,36],[110,45,98,36,"relative"],[110,53,98,36],[110,55,98,37,"root"],[110,59,98,41],[110,61,98,43,"filename"],[110,69,98,51],[110,70,98,52],[110,73,98,55],[110,77,98,55,"basename"],[110,89,98,63],[110,90,98,63,"basename"],[110,98,98,63],[110,100,98,64,"filename"],[110,108,98,72],[110,109,98,73],[111,10,99,8,"frame"],[111,15,99,13],[111,16,99,14,"filename"],[111,24,99,22],[111,27,99,25],[111,30,99,28,"prefix"],[111,36,99,34],[111,39,99,37,"base"],[111,43,99,41],[111,45,99,43],[112,8,100,6],[113,6,101,4],[114,6,103,4],[114,13,103,11,"frame"],[114,18,103,16],[115,4,104,2],[115,5,104,3],[116,2,105,0],[117,0,105,1],[117,3]],"functionMap":{"names":["<global>","defineIntegration$argument_0","_processExceptionsEvent","event.exception.values.map$argument_0","_processStacktrace","stacktrace.frames.map$argument_0","processEvent","generateIteratee","<anonymous>"],"mappings":"AAA;mDCS;ECS;6CCQ;YDG;GDM;EGG;sCCG,gBD;GHE;IKI;KLQ;CDE;AOK;SCO;GDkC;CPC"},"hasCjsExports":false},"type":"js/module"}]}