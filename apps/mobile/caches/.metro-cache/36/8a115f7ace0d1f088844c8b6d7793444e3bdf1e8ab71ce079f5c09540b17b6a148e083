{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":78,"index":139}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"resourceTimingToSpanAttributes\", {\n    enumerable: true,\n    get: function () {\n      return resourceTimingToSpanAttributes;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _sentryCore = require(_dependencyMap[1], \"@sentry/core\");\n  var _utilsJs = require(_dependencyMap[2], \"./utils.js\");\n  function getAbsoluteTime(time) {\n    // falsy values should be preserved so that we can later on drop undefined values and\n    // preserve 0 vals for cross-origin resources without proper `Timing-Allow-Origin` header.\n    return time ? (((0, _sentryCore.browserPerformanceTimeOrigin)() || performance.timeOrigin) + time) / 1000 : time;\n  }\n\n  /**\n   * Converts a PerformanceResourceTiming entry to span data for the resource span. Most importantly,\n   * it converts the timing values from timestamps relative to the `performance.timeOrigin` to absolute timestamps\n   * in seconds.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming#timestamps\n   *\n   * @param resourceTiming\n   * @returns An array where the first element is the attribute name and the second element is the attribute value.\n   */\n  function resourceTimingToSpanAttributes(resourceTiming) {\n    var timingSpanData = {};\n    // Checking for only `undefined` and `null` is intentional because it's\n    // valid for `nextHopProtocol` to be an empty string.\n    if (resourceTiming.nextHopProtocol != undefined) {\n      var _extractNetworkProtoc = (0, _utilsJs.extractNetworkProtocol)(resourceTiming.nextHopProtocol),\n        name = _extractNetworkProtoc.name,\n        version = _extractNetworkProtoc.version;\n      timingSpanData['network.protocol.version'] = version;\n      timingSpanData['network.protocol.name'] = name;\n    }\n    if (!((0, _sentryCore.browserPerformanceTimeOrigin)() || (0, _utilsJs.getBrowserPerformanceAPI)()?.timeOrigin)) {\n      return timingSpanData;\n    }\n    return dropUndefinedKeysFromObject({\n      ...timingSpanData,\n      'http.request.redirect_start': getAbsoluteTime(resourceTiming.redirectStart),\n      'http.request.redirect_end': getAbsoluteTime(resourceTiming.redirectEnd),\n      'http.request.worker_start': getAbsoluteTime(resourceTiming.workerStart),\n      'http.request.fetch_start': getAbsoluteTime(resourceTiming.fetchStart),\n      'http.request.domain_lookup_start': getAbsoluteTime(resourceTiming.domainLookupStart),\n      'http.request.domain_lookup_end': getAbsoluteTime(resourceTiming.domainLookupEnd),\n      'http.request.connect_start': getAbsoluteTime(resourceTiming.connectStart),\n      'http.request.secure_connection_start': getAbsoluteTime(resourceTiming.secureConnectionStart),\n      'http.request.connection_end': getAbsoluteTime(resourceTiming.connectEnd),\n      'http.request.request_start': getAbsoluteTime(resourceTiming.requestStart),\n      'http.request.response_start': getAbsoluteTime(resourceTiming.responseStart),\n      'http.request.response_end': getAbsoluteTime(resourceTiming.responseEnd),\n      // For TTFB we actually want the relative time from timeOrigin to responseStart\n      // This way, TTFB always measures the \"first page load\" experience.\n      // see: https://web.dev/articles/ttfb#measure-resource-requests\n      'http.request.time_to_first_byte': resourceTiming.responseStart != null ? resourceTiming.responseStart / 1000 : undefined\n    });\n  }\n\n  /**\n   * Remove properties with `undefined` as value from an object.\n   * In contrast to `dropUndefinedKeys` in core this funciton only works on first-level\n   * key-value objects and does not recursively go into object properties or arrays.\n   */\n  function dropUndefinedKeysFromObject(attrs) {\n    return Object.fromEntries(Object.entries(attrs).filter(_ref => {\n      var _ref2 = (0, _slicedToArray.default)(_ref, 2),\n        value = _ref2[1];\n      return value != null;\n    }));\n  }\n});","lineCount":85,"map":[[12,2,73,0,"Object"],[12,8,73,0],[12,9,73,0,"defineProperty"],[12,23,73,0],[12,24,73,0,"exports"],[12,31,73,0],[13,4,73,0,"enumerable"],[13,14,73,0],[14,4,73,0,"get"],[14,7,73,0],[14,18,73,0,"get"],[14,19,73,0],[15,6,73,0],[15,13,73,9,"resourceTimingToSpanAttributes"],[15,43,73,39],[16,4,73,39],[17,2,73,39],[18,2,73,42],[18,6,73,42,"_babelRuntimeHelpersSlicedToArray"],[18,39,73,42],[18,42,73,42,"require"],[18,49,73,42],[18,50,73,42,"_dependencyMap"],[18,64,73,42],[19,2,73,42],[19,6,73,42,"_slicedToArray"],[19,20,73,42],[19,23,73,42,"_interopDefault"],[19,38,73,42],[19,39,73,42,"_babelRuntimeHelpersSlicedToArray"],[19,72,73,42],[20,2,1,0],[20,6,1,0,"_sentryCore"],[20,17,1,0],[20,20,1,0,"require"],[20,27,1,0],[20,28,1,0,"_dependencyMap"],[20,42,1,0],[21,2,2,0],[21,6,2,0,"_utilsJs"],[21,14,2,0],[21,17,2,0,"require"],[21,24,2,0],[21,25,2,0,"_dependencyMap"],[21,39,2,0],[22,2,4,0],[22,11,4,9,"getAbsoluteTime"],[22,26,4,24,"getAbsoluteTime"],[22,27,4,25,"time"],[22,31,4,29],[22,33,4,31],[23,4,5,2],[24,4,6,2],[25,4,7,2],[25,11,7,9,"time"],[25,15,7,13],[25,18,7,16],[25,19,7,17],[25,20,7,18],[25,24,7,18,"browserPerformanceTimeOrigin"],[25,35,7,46],[25,36,7,46,"browserPerformanceTimeOrigin"],[25,64,7,46],[25,66,7,47],[25,67,7,48],[25,71,7,52,"performance"],[25,82,7,63],[25,83,7,64,"timeOrigin"],[25,93,7,74],[25,97,7,78,"time"],[25,101,7,82],[25,105,7,86],[25,109,7,90],[25,112,7,93,"time"],[25,116,7,97],[26,2,8,0],[28,2,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[35,0,17,0],[36,0,18,0],[37,0,19,0],[38,2,20,0],[38,11,20,9,"resourceTimingToSpanAttributes"],[38,41,20,39,"resourceTimingToSpanAttributes"],[38,42,20,40,"resourceTiming"],[38,56,20,54],[38,58,20,56],[39,4,21,2],[39,8,21,8,"timingSpanData"],[39,22,21,22],[39,25,21,25],[39,26,21,26],[39,27,21,27],[40,4,22,2],[41,4,23,2],[42,4,24,2],[42,8,24,6,"resourceTiming"],[42,22,24,20],[42,23,24,21,"nextHopProtocol"],[42,38,24,36],[42,42,24,40,"undefined"],[42,51,24,49],[42,53,24,51],[43,6,25,4],[43,10,25,4,"_extractNetworkProtoc"],[43,31,25,4],[43,34,25,30],[43,38,25,30,"extractNetworkProtocol"],[43,46,25,52],[43,47,25,52,"extractNetworkProtocol"],[43,69,25,52],[43,71,25,53,"resourceTiming"],[43,85,25,67],[43,86,25,68,"nextHopProtocol"],[43,101,25,83],[43,102,25,84],[44,8,25,12,"name"],[44,12,25,16],[44,15,25,16,"_extractNetworkProtoc"],[44,36,25,16],[44,37,25,12,"name"],[44,41,25,16],[45,8,25,18,"version"],[45,15,25,25],[45,18,25,25,"_extractNetworkProtoc"],[45,39,25,25],[45,40,25,18,"version"],[45,47,25,25],[46,6,26,4,"timingSpanData"],[46,20,26,18],[46,21,26,19],[46,47,26,45],[46,48,26,46],[46,51,26,49,"version"],[46,58,26,56],[47,6,27,4,"timingSpanData"],[47,20,27,18],[47,21,27,19],[47,44,27,42],[47,45,27,43],[47,48,27,46,"name"],[47,52,27,50],[48,4,28,2],[49,4,30,2],[49,8,30,6],[49,10,30,8],[49,14,30,8,"browserPerformanceTimeOrigin"],[49,25,30,36],[49,26,30,36,"browserPerformanceTimeOrigin"],[49,54,30,36],[49,56,30,37],[49,57,30,38],[49,61,30,42],[49,65,30,42,"getBrowserPerformanceAPI"],[49,73,30,66],[49,74,30,66,"getBrowserPerformanceAPI"],[49,98,30,66],[49,100,30,67],[49,101,30,68],[49,103,30,70,"timeOrigin"],[49,113,30,80],[49,114,30,81],[49,116,30,83],[50,6,31,4],[50,13,31,11,"timingSpanData"],[50,27,31,25],[51,4,32,2],[52,4,34,2],[52,11,34,9,"dropUndefinedKeysFromObject"],[52,38,34,36],[52,39,34,37],[53,6,35,4],[53,9,35,7,"timingSpanData"],[53,23,35,21],[54,6,37,4],[54,35,37,33],[54,37,37,35,"getAbsoluteTime"],[54,52,37,50],[54,53,37,51,"resourceTiming"],[54,67,37,65],[54,68,37,66,"redirectStart"],[54,81,37,79],[54,82,37,80],[55,6,38,4],[55,33,38,31],[55,35,38,33,"getAbsoluteTime"],[55,50,38,48],[55,51,38,49,"resourceTiming"],[55,65,38,63],[55,66,38,64,"redirectEnd"],[55,77,38,75],[55,78,38,76],[56,6,40,4],[56,33,40,31],[56,35,40,33,"getAbsoluteTime"],[56,50,40,48],[56,51,40,49,"resourceTiming"],[56,65,40,63],[56,66,40,64,"workerStart"],[56,77,40,75],[56,78,40,76],[57,6,42,4],[57,32,42,30],[57,34,42,32,"getAbsoluteTime"],[57,49,42,47],[57,50,42,48,"resourceTiming"],[57,64,42,62],[57,65,42,63,"fetchStart"],[57,75,42,73],[57,76,42,74],[58,6,44,4],[58,40,44,38],[58,42,44,40,"getAbsoluteTime"],[58,57,44,55],[58,58,44,56,"resourceTiming"],[58,72,44,70],[58,73,44,71,"domainLookupStart"],[58,90,44,88],[58,91,44,89],[59,6,45,4],[59,38,45,36],[59,40,45,38,"getAbsoluteTime"],[59,55,45,53],[59,56,45,54,"resourceTiming"],[59,70,45,68],[59,71,45,69,"domainLookupEnd"],[59,86,45,84],[59,87,45,85],[60,6,47,4],[60,34,47,32],[60,36,47,34,"getAbsoluteTime"],[60,51,47,49],[60,52,47,50,"resourceTiming"],[60,66,47,64],[60,67,47,65,"connectStart"],[60,79,47,77],[60,80,47,78],[61,6,48,4],[61,44,48,42],[61,46,48,44,"getAbsoluteTime"],[61,61,48,59],[61,62,48,60,"resourceTiming"],[61,76,48,74],[61,77,48,75,"secureConnectionStart"],[61,98,48,96],[61,99,48,97],[62,6,49,4],[62,35,49,33],[62,37,49,35,"getAbsoluteTime"],[62,52,49,50],[62,53,49,51,"resourceTiming"],[62,67,49,65],[62,68,49,66,"connectEnd"],[62,78,49,76],[62,79,49,77],[63,6,51,4],[63,34,51,32],[63,36,51,34,"getAbsoluteTime"],[63,51,51,49],[63,52,51,50,"resourceTiming"],[63,66,51,64],[63,67,51,65,"requestStart"],[63,79,51,77],[63,80,51,78],[64,6,53,4],[64,35,53,33],[64,37,53,35,"getAbsoluteTime"],[64,52,53,50],[64,53,53,51,"resourceTiming"],[64,67,53,65],[64,68,53,66,"responseStart"],[64,81,53,79],[64,82,53,80],[65,6,54,4],[65,33,54,31],[65,35,54,33,"getAbsoluteTime"],[65,50,54,48],[65,51,54,49,"resourceTiming"],[65,65,54,63],[65,66,54,64,"responseEnd"],[65,77,54,75],[65,78,54,76],[66,6,56,4],[67,6,57,4],[68,6,58,4],[69,6,59,4],[69,39,59,37],[69,41,60,6,"resourceTiming"],[69,55,60,20],[69,56,60,21,"responseStart"],[69,69,60,34],[69,73,60,38],[69,77,60,42],[69,80,60,45,"resourceTiming"],[69,94,60,59],[69,95,60,60,"responseStart"],[69,108,60,73],[69,111,60,76],[69,115,60,80],[69,118,60,83,"undefined"],[70,4,61,2],[70,5,61,3],[70,6,61,4],[71,2,62,0],[73,2,64,0],[74,0,65,0],[75,0,66,0],[76,0,67,0],[77,0,68,0],[78,2,69,0],[78,11,69,9,"dropUndefinedKeysFromObject"],[78,38,69,36,"dropUndefinedKeysFromObject"],[78,39,69,37,"attrs"],[78,44,69,42],[78,46,69,44],[79,4,70,2],[79,11,70,9,"Object"],[79,17,70,15],[79,18,70,16,"fromEntries"],[79,29,70,27],[79,30,70,28,"Object"],[79,36,70,34],[79,37,70,35,"entries"],[79,44,70,42],[79,45,70,43,"attrs"],[79,50,70,48],[79,51,70,49],[79,52,70,50,"filter"],[79,58,70,56],[79,59,70,57,"_ref"],[79,63,70,57],[80,6,70,57],[80,10,70,57,"_ref2"],[80,15,70,57],[80,22,70,57,"_slicedToArray"],[80,36,70,57],[80,37,70,57,"default"],[80,44,70,57],[80,46,70,57,"_ref"],[80,50,70,57],[81,8,70,61,"value"],[81,13,70,66],[81,16,70,66,"_ref2"],[81,21,70,66],[82,6,70,66],[82,13,70,72,"value"],[82,18,70,77],[82,22,70,81],[82,26,70,85],[83,4,70,85],[83,6,70,86],[83,7,70,87],[84,2,71,0],[85,0,71,1],[85,3]],"functionMap":{"names":["<global>","getAbsoluteTime","resourceTimingToSpanAttributes","dropUndefinedKeysFromObject","Object.entries.filter$argument_0"],"mappings":"AAA;ACG;CDI;AEY;CF0C;AGO;yDCC,4BD;CHC"},"hasCjsExports":false},"type":"js/module"}]}