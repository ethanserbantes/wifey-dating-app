{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-audio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":47,"index":113}}],"key":"GHpNh+2in6lWH3tZa8Mq2h9os0E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useVoiceMemoPlayer = useVoiceMemoPlayer;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAudio = require(_dependencyMap[1], \"expo-audio\");\n  function useVoiceMemoPlayer() {\n    _s();\n    const [playingMessageId, setPlayingMessageId] = (0, _react.useState)(null);\n    const playerRef = (0, _react.useRef)(null);\n    const stopPlayer = (0, _react.useCallback)(() => {\n      const p = playerRef.current;\n      if (!p) return;\n      try {\n        p.pause();\n        p.remove();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        playerRef.current = null;\n        setPlayingMessageId(null);\n      }\n    }, []);\n    const togglePlayVoiceMemo = (0, _react.useCallback)(message => {\n      const url = String(message?.audio_url || \"\").trim();\n      if (!url) return;\n      const id = message?.id;\n      if (playingMessageId && id === playingMessageId) {\n        stopPlayer();\n        return;\n      }\n      stopPlayer();\n      try {\n        const next = (0, _expoAudio.createAudioPlayer)(url);\n        playerRef.current = next;\n        setPlayingMessageId(id);\n        next.play();\n      } catch (e) {\n        console.error(e);\n      }\n    }, [playingMessageId, stopPlayer]);\n    (0, _react.useEffect)(() => {\n      const interval = setInterval(() => {\n        const p = playerRef.current;\n        if (!p) return;\n        const finished = !p.playing && Number(p.currentTime) > 0;\n        if (finished) {\n          stopPlayer();\n        }\n      }, 250);\n      return () => {\n        clearInterval(interval);\n        stopPlayer();\n      };\n    }, [stopPlayer]);\n    return {\n      playingMessageId,\n      togglePlayVoiceMemo\n    };\n  }\n  _s(useVoiceMemoPlayer, \"WJRGCXX9affBH7r4tcopRLIa/I4=\");\n});","lineCount":66,"map":[[8,2,4,0,"exports"],[8,9,4,0],[8,10,4,0,"useVoiceMemoPlayer"],[8,28,4,0],[8,31,4,0,"useVoiceMemoPlayer"],[8,49,4,0],[9,2,1,0],[9,6,1,0,"_react"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,6,2,0,"_expoAudio"],[10,16,2,0],[10,19,2,0,"require"],[10,26,2,0],[10,27,2,0,"_dependencyMap"],[10,41,2,0],[11,2,4,7],[11,11,4,16,"useVoiceMemoPlayer"],[11,29,4,34,"useVoiceMemoPlayer"],[11,30,4,34],[11,32,4,37],[12,4,4,37,"_s"],[12,6,4,37],[13,4,5,2],[13,10,5,8],[13,11,5,9,"playingMessageId"],[13,27,5,25],[13,29,5,27,"setPlayingMessageId"],[13,48,5,46],[13,49,5,47],[13,52,5,50],[13,56,5,50,"useState"],[13,62,5,58],[13,63,5,58,"useState"],[13,71,5,58],[13,73,5,59],[13,77,5,63],[13,78,5,64],[14,4,6,2],[14,10,6,8,"playerRef"],[14,19,6,17],[14,22,6,20],[14,26,6,20,"useRef"],[14,32,6,26],[14,33,6,26,"useRef"],[14,39,6,26],[14,41,6,27],[14,45,6,31],[14,46,6,32],[15,4,8,2],[15,10,8,8,"stopPlayer"],[15,20,8,18],[15,23,8,21],[15,27,8,21,"useCallback"],[15,33,8,32],[15,34,8,32,"useCallback"],[15,45,8,32],[15,47,8,33],[15,53,8,39],[16,6,9,4],[16,12,9,10,"p"],[16,13,9,11],[16,16,9,14,"playerRef"],[16,25,9,23],[16,26,9,24,"current"],[16,33,9,31],[17,6,10,4],[17,10,10,8],[17,11,10,9,"p"],[17,12,10,10],[17,14,10,12],[18,6,11,4],[18,10,11,8],[19,8,12,6,"p"],[19,9,12,7],[19,10,12,8,"pause"],[19,15,12,13],[19,16,12,14],[19,17,12,15],[20,8,13,6,"p"],[20,9,13,7],[20,10,13,8,"remove"],[20,16,13,14],[20,17,13,15],[20,18,13,16],[21,6,14,4],[21,7,14,5],[21,8,14,6],[21,15,14,13,"e"],[21,16,14,14],[21,18,14,16],[22,8,15,6,"console"],[22,15,15,13],[22,16,15,14,"error"],[22,21,15,19],[22,22,15,20,"e"],[22,23,15,21],[22,24,15,22],[23,6,16,4],[23,7,16,5],[23,16,16,14],[24,8,17,6,"playerRef"],[24,17,17,15],[24,18,17,16,"current"],[24,25,17,23],[24,28,17,26],[24,32,17,30],[25,8,18,6,"setPlayingMessageId"],[25,27,18,25],[25,28,18,26],[25,32,18,30],[25,33,18,31],[26,6,19,4],[27,4,20,2],[27,5,20,3],[27,7,20,5],[27,9,20,7],[27,10,20,8],[28,4,22,2],[28,10,22,8,"togglePlayVoiceMemo"],[28,29,22,27],[28,32,22,30],[28,36,22,30,"useCallback"],[28,42,22,41],[28,43,22,41,"useCallback"],[28,54,22,41],[28,56,23,5,"message"],[28,63,23,12],[28,67,23,17],[29,6,24,6],[29,12,24,12,"url"],[29,15,24,15],[29,18,24,18,"String"],[29,24,24,24],[29,25,24,25,"message"],[29,32,24,32],[29,34,24,34,"audio_url"],[29,43,24,43],[29,47,24,47],[29,49,24,49],[29,50,24,50],[29,51,24,51,"trim"],[29,55,24,55],[29,56,24,56],[29,57,24,57],[30,6,25,6],[30,10,25,10],[30,11,25,11,"url"],[30,14,25,14],[30,16,25,16],[31,6,27,6],[31,12,27,12,"id"],[31,14,27,14],[31,17,27,17,"message"],[31,24,27,24],[31,26,27,26,"id"],[31,28,27,28],[32,6,28,6],[32,10,28,10,"playingMessageId"],[32,26,28,26],[32,30,28,30,"id"],[32,32,28,32],[32,37,28,37,"playingMessageId"],[32,53,28,53],[32,55,28,55],[33,8,29,8,"stopPlayer"],[33,18,29,18],[33,19,29,19],[33,20,29,20],[34,8,30,8],[35,6,31,6],[36,6,33,6,"stopPlayer"],[36,16,33,16],[36,17,33,17],[36,18,33,18],[37,6,35,6],[37,10,35,10],[38,8,36,8],[38,14,36,14,"next"],[38,18,36,18],[38,21,36,21],[38,25,36,21,"createAudioPlayer"],[38,35,36,38],[38,36,36,38,"createAudioPlayer"],[38,53,36,38],[38,55,36,39,"url"],[38,58,36,42],[38,59,36,43],[39,8,37,8,"playerRef"],[39,17,37,17],[39,18,37,18,"current"],[39,25,37,25],[39,28,37,28,"next"],[39,32,37,32],[40,8,38,8,"setPlayingMessageId"],[40,27,38,27],[40,28,38,28,"id"],[40,30,38,30],[40,31,38,31],[41,8,39,8,"next"],[41,12,39,12],[41,13,39,13,"play"],[41,17,39,17],[41,18,39,18],[41,19,39,19],[42,6,40,6],[42,7,40,7],[42,8,40,8],[42,15,40,15,"e"],[42,16,40,16],[42,18,40,18],[43,8,41,8,"console"],[43,15,41,15],[43,16,41,16,"error"],[43,21,41,21],[43,22,41,22,"e"],[43,23,41,23],[43,24,41,24],[44,6,42,6],[45,4,43,4],[45,5,43,5],[45,7,44,4],[45,8,44,5,"playingMessageId"],[45,24,44,21],[45,26,44,23,"stopPlayer"],[45,36,44,33],[45,37,45,2],[45,38,45,3],[46,4,47,2],[46,8,47,2,"useEffect"],[46,14,47,11],[46,15,47,11,"useEffect"],[46,24,47,11],[46,26,47,12],[46,32,47,18],[47,6,48,4],[47,12,48,10,"interval"],[47,20,48,18],[47,23,48,21,"setInterval"],[47,34,48,32],[47,35,48,33],[47,41,48,39],[48,8,49,6],[48,14,49,12,"p"],[48,15,49,13],[48,18,49,16,"playerRef"],[48,27,49,25],[48,28,49,26,"current"],[48,35,49,33],[49,8,50,6],[49,12,50,10],[49,13,50,11,"p"],[49,14,50,12],[49,16,50,14],[50,8,52,6],[50,14,52,12,"finished"],[50,22,52,20],[50,25,52,23],[50,26,52,24,"p"],[50,27,52,25],[50,28,52,26,"playing"],[50,35,52,33],[50,39,52,37,"Number"],[50,45,52,43],[50,46,52,44,"p"],[50,47,52,45],[50,48,52,46,"currentTime"],[50,59,52,57],[50,60,52,58],[50,63,52,61],[50,64,52,62],[51,8,53,6],[51,12,53,10,"finished"],[51,20,53,18],[51,22,53,20],[52,10,54,8,"stopPlayer"],[52,20,54,18],[52,21,54,19],[52,22,54,20],[53,8,55,6],[54,6,56,4],[54,7,56,5],[54,9,56,7],[54,12,56,10],[54,13,56,11],[55,6,58,4],[55,13,58,11],[55,19,58,17],[56,8,59,6,"clearInterval"],[56,21,59,19],[56,22,59,20,"interval"],[56,30,59,28],[56,31,59,29],[57,8,60,6,"stopPlayer"],[57,18,60,16],[57,19,60,17],[57,20,60,18],[58,6,61,4],[58,7,61,5],[59,4,62,2],[59,5,62,3],[59,7,62,5],[59,8,62,6,"stopPlayer"],[59,18,62,16],[59,19,62,17],[59,20,62,18],[60,4,64,2],[60,11,64,9],[61,6,65,4,"playingMessageId"],[61,22,65,20],[62,6,66,4,"togglePlayVoiceMemo"],[63,4,67,2],[63,5,67,3],[64,2,68,0],[65,2,68,1,"_s"],[65,4,68,1],[65,5,4,16,"useVoiceMemoPlayer"],[65,23,4,34],[66,0,4,34],[66,3]],"functionMap":{"names":["<global>","useVoiceMemoPlayer","stopPlayer","togglePlayVoiceMemo","useEffect$argument_0","setInterval$argument_0","<anonymous>"],"mappings":"AAA;OCG;iCCI;GDY;IEG;KFoB;YGI;iCCC;KDQ;WEE;KFG;GHC;CDM"},"hasCjsExports":false},"type":"js/module"}]}