{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":74,"index":74}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":75},"end":{"line":2,"column":69,"index":144}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@react-navigation/native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":3,"column":58,"index":203}}],"key":"yKhyWCfwa1gXEwEbMKnWHykYbZ4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesTutorial = useMessagesTutorial;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNavigationNative = require(_dependencyMap[2], \"@react-navigation/native\");\n  function useMessagesTutorial(user, matches, insets) {\n    const [tutorialStep, setTutorialStep] = (0, _react.useState)(-1);\n    const firstMatchRef = (0, _react.useRef)(null);\n    const [firstMatchRect, setFirstMatchRect] = (0, _react.useState)(null);\n    const tutorialSteps = (0, _react.useMemo)(() => {\n      return [{\n        title: \"Chats\",\n        body: \"When you match, your chats show up here. Tap a match to open the conversation.\",\n        placement: {\n          type: \"bottom\"\n        },\n        targetKey: \"firstMatch\"\n      }];\n    }, []);\n    const tutorialKey = (0, _react.useMemo)(() => {\n      return \"wifey:tutorial:v1:messages\";\n    }, []);\n    const maybeShowTutorial = (0, _react.useCallback)(async () => {\n      try {\n        if (!user?.id) return;\n        if (user?.status !== \"APPROVED\") return;\n        const seen = await AsyncStorage.default.getItem(tutorialKey);\n        if (!seen) {\n          setTutorialStep(0);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }, [tutorialKey, user?.id, user?.status]);\n    (0, _react.useEffect)(() => {\n      maybeShowTutorial();\n    }, [maybeShowTutorial]);\n    (0, _reactNavigationNative.useFocusEffect)((0, _react.useCallback)(() => {\n      maybeShowTutorial();\n    }, [maybeShowTutorial]));\n    const dismissTutorial = (0, _react.useCallback)(async () => {\n      try {\n        setTutorialStep(-1);\n        await AsyncStorage.default.setItem(tutorialKey, \"1\");\n      } catch (e) {\n        console.error(e);\n        setTutorialStep(-1);\n      }\n    }, [tutorialKey]);\n    const advanceTutorial = (0, _react.useCallback)(() => {\n      setTutorialStep(s => {\n        const next = s + 1;\n        if (next >= tutorialSteps.length) {\n          dismissTutorial();\n          return -1;\n        }\n        return next;\n      });\n    }, [dismissTutorial, tutorialSteps.length]);\n    const tutorial = tutorialStep >= 0 ? tutorialSteps[tutorialStep] : null;\n    const tutorialPlacement = (0, _react.useMemo)(() => {\n      if (!tutorial) return null;\n      return {\n        type: \"bottom\",\n        inset: insets.bottom + 140\n      };\n    }, [insets.bottom, tutorial]);\n    (0, _react.useEffect)(() => {\n      let cancelled = false;\n      const shouldMeasure = tutorialStep >= 0 && tutorialSteps[tutorialStep]?.targetKey === \"firstMatch\" && Array.isArray(matches) && matches.length > 0;\n      if (!shouldMeasure) {\n        setFirstMatchRect(null);\n        return;\n      }\n      const measure = () => {\n        try {\n          const node = firstMatchRef.current;\n          if (!node || typeof node.measureInWindow !== \"function\") {\n            return;\n          }\n          node.measureInWindow((x, y, width, height) => {\n            if (cancelled) return;\n            if (![x, y, width, height].every(Number.isFinite)) return;\n            setFirstMatchRect({\n              x,\n              y,\n              width,\n              height\n            });\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      };\n      const t = setTimeout(measure, 60);\n      return () => {\n        cancelled = true;\n        clearTimeout(t);\n      };\n    }, [matches, tutorialStep, tutorialSteps]);\n    return {\n      tutorialStep,\n      tutorial,\n      tutorialPlacement,\n      firstMatchRef,\n      firstMatchRect,\n      advanceTutorial\n    };\n  }\n});","lineCount":121,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useMessagesTutorial"],[12,29,5,0],[12,32,5,0,"useMessagesTutorial"],[12,51,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[14,42,2,0],[14,45,2,0,"require"],[14,52,2,0],[14,53,2,0,"_dependencyMap"],[14,67,2,0],[15,2,2,0],[15,6,2,0,"AsyncStorage"],[15,18,2,0],[15,21,2,0,"_interopDefault"],[15,36,2,0],[15,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[15,73,2,0],[16,2,3,0],[16,6,3,0,"_reactNavigationNative"],[16,28,3,0],[16,31,3,0,"require"],[16,38,3,0],[16,39,3,0,"_dependencyMap"],[16,53,3,0],[17,2,5,7],[17,11,5,16,"useMessagesTutorial"],[17,30,5,35,"useMessagesTutorial"],[17,31,5,36,"user"],[17,35,5,40],[17,37,5,42,"matches"],[17,44,5,49],[17,46,5,51,"insets"],[17,52,5,57],[17,54,5,59],[18,4,6,2],[18,10,6,8],[18,11,6,9,"tutorialStep"],[18,23,6,21],[18,25,6,23,"setTutorialStep"],[18,40,6,38],[18,41,6,39],[18,44,6,42],[18,48,6,42,"useState"],[18,54,6,50],[18,55,6,50,"useState"],[18,63,6,50],[18,65,6,51],[18,66,6,52],[18,67,6,53],[18,68,6,54],[19,4,7,2],[19,10,7,8,"firstMatchRef"],[19,23,7,21],[19,26,7,24],[19,30,7,24,"useRef"],[19,36,7,30],[19,37,7,30,"useRef"],[19,43,7,30],[19,45,7,31],[19,49,7,35],[19,50,7,36],[20,4,8,2],[20,10,8,8],[20,11,8,9,"firstMatchRect"],[20,25,8,23],[20,27,8,25,"setFirstMatchRect"],[20,44,8,42],[20,45,8,43],[20,48,8,46],[20,52,8,46,"useState"],[20,58,8,54],[20,59,8,54,"useState"],[20,67,8,54],[20,69,8,55],[20,73,8,59],[20,74,8,60],[21,4,10,2],[21,10,10,8,"tutorialSteps"],[21,23,10,21],[21,26,10,24],[21,30,10,24,"useMemo"],[21,36,10,31],[21,37,10,31,"useMemo"],[21,44,10,31],[21,46,10,32],[21,52,10,38],[22,6,11,4],[22,13,11,11],[22,14,12,6],[23,8,13,8,"title"],[23,13,13,13],[23,15,13,15],[23,22,13,22],[24,8,14,8,"body"],[24,12,14,12],[24,14,14,14],[24,94,14,94],[25,8,15,8,"placement"],[25,17,15,17],[25,19,15,19],[26,10,15,21,"type"],[26,14,15,25],[26,16,15,27],[27,8,15,36],[27,9,15,37],[28,8,16,8,"targetKey"],[28,17,16,17],[28,19,16,19],[29,6,17,6],[29,7,17,7],[29,8,18,5],[30,4,19,2],[30,5,19,3],[30,7,19,5],[30,9,19,7],[30,10,19,8],[31,4,21,2],[31,10,21,8,"tutorialKey"],[31,21,21,19],[31,24,21,22],[31,28,21,22,"useMemo"],[31,34,21,29],[31,35,21,29,"useMemo"],[31,42,21,29],[31,44,21,30],[31,50,21,36],[32,6,22,4],[32,13,22,11],[32,41,22,39],[33,4,23,2],[33,5,23,3],[33,7,23,5],[33,9,23,7],[33,10,23,8],[34,4,25,2],[34,10,25,8,"maybeShowTutorial"],[34,27,25,25],[34,30,25,28],[34,34,25,28,"useCallback"],[34,40,25,39],[34,41,25,39,"useCallback"],[34,52,25,39],[34,54,25,40],[34,66,25,52],[35,6,26,4],[35,10,26,8],[36,8,27,6],[36,12,27,10],[36,13,27,11,"user"],[36,17,27,15],[36,19,27,17,"id"],[36,21,27,19],[36,23,27,21],[37,8,28,6],[37,12,28,10,"user"],[37,16,28,14],[37,18,28,16,"status"],[37,24,28,22],[37,29,28,27],[37,39,28,37],[37,41,28,39],[38,8,30,6],[38,14,30,12,"seen"],[38,18,30,16],[38,21,30,19],[38,27,30,25,"AsyncStorage"],[38,39,30,37],[38,40,30,37,"default"],[38,47,30,37],[38,48,30,38,"getItem"],[38,55,30,45],[38,56,30,46,"tutorialKey"],[38,67,30,57],[38,68,30,58],[39,8,31,6],[39,12,31,10],[39,13,31,11,"seen"],[39,17,31,15],[39,19,31,17],[40,10,32,8,"setTutorialStep"],[40,25,32,23],[40,26,32,24],[40,27,32,25],[40,28,32,26],[41,8,33,6],[42,6,34,4],[42,7,34,5],[42,8,34,6],[42,15,34,13,"e"],[42,16,34,14],[42,18,34,16],[43,8,35,6,"console"],[43,15,35,13],[43,16,35,14,"error"],[43,21,35,19],[43,22,35,20,"e"],[43,23,35,21],[43,24,35,22],[44,6,36,4],[45,4,37,2],[45,5,37,3],[45,7,37,5],[45,8,37,6,"tutorialKey"],[45,19,37,17],[45,21,37,19,"user"],[45,25,37,23],[45,27,37,25,"id"],[45,29,37,27],[45,31,37,29,"user"],[45,35,37,33],[45,37,37,35,"status"],[45,43,37,41],[45,44,37,42],[45,45,37,43],[46,4,39,2],[46,8,39,2,"useEffect"],[46,14,39,11],[46,15,39,11,"useEffect"],[46,24,39,11],[46,26,39,12],[46,32,39,18],[47,6,40,4,"maybeShowTutorial"],[47,23,40,21],[47,24,40,22],[47,25,40,23],[48,4,41,2],[48,5,41,3],[48,7,41,5],[48,8,41,6,"maybeShowTutorial"],[48,25,41,23],[48,26,41,24],[48,27,41,25],[49,4,43,2],[49,8,43,2,"useFocusEffect"],[49,30,43,16],[49,31,43,16,"useFocusEffect"],[49,45,43,16],[49,47,44,4],[49,51,44,4,"useCallback"],[49,57,44,15],[49,58,44,15,"useCallback"],[49,69,44,15],[49,71,44,16],[49,77,44,22],[50,6,45,6,"maybeShowTutorial"],[50,23,45,23],[50,24,45,24],[50,25,45,25],[51,4,46,4],[51,5,46,5],[51,7,46,7],[51,8,46,8,"maybeShowTutorial"],[51,25,46,25],[51,26,46,26],[51,27,47,2],[51,28,47,3],[52,4,49,2],[52,10,49,8,"dismissTutorial"],[52,25,49,23],[52,28,49,26],[52,32,49,26,"useCallback"],[52,38,49,37],[52,39,49,37,"useCallback"],[52,50,49,37],[52,52,49,38],[52,64,49,50],[53,6,50,4],[53,10,50,8],[54,8,51,6,"setTutorialStep"],[54,23,51,21],[54,24,51,22],[54,25,51,23],[54,26,51,24],[54,27,51,25],[55,8,52,6],[55,14,52,12,"AsyncStorage"],[55,26,52,24],[55,27,52,24,"default"],[55,34,52,24],[55,35,52,25,"setItem"],[55,42,52,32],[55,43,52,33,"tutorialKey"],[55,54,52,44],[55,56,52,46],[55,59,52,49],[55,60,52,50],[56,6,53,4],[56,7,53,5],[56,8,53,6],[56,15,53,13,"e"],[56,16,53,14],[56,18,53,16],[57,8,54,6,"console"],[57,15,54,13],[57,16,54,14,"error"],[57,21,54,19],[57,22,54,20,"e"],[57,23,54,21],[57,24,54,22],[58,8,55,6,"setTutorialStep"],[58,23,55,21],[58,24,55,22],[58,25,55,23],[58,26,55,24],[58,27,55,25],[59,6,56,4],[60,4,57,2],[60,5,57,3],[60,7,57,5],[60,8,57,6,"tutorialKey"],[60,19,57,17],[60,20,57,18],[60,21,57,19],[61,4,59,2],[61,10,59,8,"advanceTutorial"],[61,25,59,23],[61,28,59,26],[61,32,59,26,"useCallback"],[61,38,59,37],[61,39,59,37,"useCallback"],[61,50,59,37],[61,52,59,38],[61,58,59,44],[62,6,60,4,"setTutorialStep"],[62,21,60,19],[62,22,60,21,"s"],[62,23,60,22],[62,27,60,27],[63,8,61,6],[63,14,61,12,"next"],[63,18,61,16],[63,21,61,19,"s"],[63,22,61,20],[63,25,61,23],[63,26,61,24],[64,8,62,6],[64,12,62,10,"next"],[64,16,62,14],[64,20,62,18,"tutorialSteps"],[64,33,62,31],[64,34,62,32,"length"],[64,40,62,38],[64,42,62,40],[65,10,63,8,"dismissTutorial"],[65,25,63,23],[65,26,63,24],[65,27,63,25],[66,10,64,8],[66,17,64,15],[66,18,64,16],[66,19,64,17],[67,8,65,6],[68,8,66,6],[68,15,66,13,"next"],[68,19,66,17],[69,6,67,4],[69,7,67,5],[69,8,67,6],[70,4,68,2],[70,5,68,3],[70,7,68,5],[70,8,68,6,"dismissTutorial"],[70,23,68,21],[70,25,68,23,"tutorialSteps"],[70,38,68,36],[70,39,68,37,"length"],[70,45,68,43],[70,46,68,44],[70,47,68,45],[71,4,70,2],[71,10,70,8,"tutorial"],[71,18,70,16],[71,21,70,19,"tutorialStep"],[71,33,70,31],[71,37,70,35],[71,38,70,36],[71,41,70,39,"tutorialSteps"],[71,54,70,52],[71,55,70,53,"tutorialStep"],[71,67,70,65],[71,68,70,66],[71,71,70,69],[71,75,70,73],[72,4,72,2],[72,10,72,8,"tutorialPlacement"],[72,27,72,25],[72,30,72,28],[72,34,72,28,"useMemo"],[72,40,72,35],[72,41,72,35,"useMemo"],[72,48,72,35],[72,50,72,36],[72,56,72,42],[73,6,73,4],[73,10,73,8],[73,11,73,9,"tutorial"],[73,19,73,17],[73,21,73,19],[73,28,73,26],[73,32,73,30],[74,6,74,4],[74,13,74,11],[75,8,74,13,"type"],[75,12,74,17],[75,14,74,19],[75,22,74,27],[76,8,74,29,"inset"],[76,13,74,34],[76,15,74,36,"insets"],[76,21,74,42],[76,22,74,43,"bottom"],[76,28,74,49],[76,31,74,52],[77,6,74,56],[77,7,74,57],[78,4,75,2],[78,5,75,3],[78,7,75,5],[78,8,75,6,"insets"],[78,14,75,12],[78,15,75,13,"bottom"],[78,21,75,19],[78,23,75,21,"tutorial"],[78,31,75,29],[78,32,75,30],[78,33,75,31],[79,4,77,2],[79,8,77,2,"useEffect"],[79,14,77,11],[79,15,77,11,"useEffect"],[79,24,77,11],[79,26,77,12],[79,32,77,18],[80,6,78,4],[80,10,78,8,"cancelled"],[80,19,78,17],[80,22,78,20],[80,27,78,25],[81,6,80,4],[81,12,80,10,"shouldMeasure"],[81,25,80,23],[81,28,81,6,"tutorialStep"],[81,40,81,18],[81,44,81,22],[81,45,81,23],[81,49,82,6,"tutorialSteps"],[81,62,82,19],[81,63,82,20,"tutorialStep"],[81,75,82,32],[81,76,82,33],[81,78,82,35,"targetKey"],[81,87,82,44],[81,92,82,49],[81,104,82,61],[81,108,83,6,"Array"],[81,113,83,11],[81,114,83,12,"isArray"],[81,121,83,19],[81,122,83,20,"matches"],[81,129,83,27],[81,130,83,28],[81,134,84,6,"matches"],[81,141,84,13],[81,142,84,14,"length"],[81,148,84,20],[81,151,84,23],[81,152,84,24],[82,6,86,4],[82,10,86,8],[82,11,86,9,"shouldMeasure"],[82,24,86,22],[82,26,86,24],[83,8,87,6,"setFirstMatchRect"],[83,25,87,23],[83,26,87,24],[83,30,87,28],[83,31,87,29],[84,8,88,6],[85,6,89,4],[86,6,91,4],[86,12,91,10,"measure"],[86,19,91,17],[86,22,91,20,"measure"],[86,23,91,20],[86,28,91,26],[87,8,92,6],[87,12,92,10],[88,10,93,8],[88,16,93,14,"node"],[88,20,93,18],[88,23,93,21,"firstMatchRef"],[88,36,93,34],[88,37,93,35,"current"],[88,44,93,42],[89,10,94,8],[89,14,94,12],[89,15,94,13,"node"],[89,19,94,17],[89,23,94,21],[89,30,94,28,"node"],[89,34,94,32],[89,35,94,33,"measureInWindow"],[89,50,94,48],[89,55,94,53],[89,65,94,63],[89,67,94,65],[90,12,95,10],[91,10,96,8],[92,10,98,8,"node"],[92,14,98,12],[92,15,98,13,"measureInWindow"],[92,30,98,28],[92,31,98,29],[92,32,98,30,"x"],[92,33,98,31],[92,35,98,33,"y"],[92,36,98,34],[92,38,98,36,"width"],[92,43,98,41],[92,45,98,43,"height"],[92,51,98,49],[92,56,98,54],[93,12,99,10],[93,16,99,14,"cancelled"],[93,25,99,23],[93,27,99,25],[94,12,100,10],[94,16,100,14],[94,17,100,15],[94,18,100,16,"x"],[94,19,100,17],[94,21,100,19,"y"],[94,22,100,20],[94,24,100,22,"width"],[94,29,100,27],[94,31,100,29,"height"],[94,37,100,35],[94,38,100,36],[94,39,100,37,"every"],[94,44,100,42],[94,45,100,43,"Number"],[94,51,100,49],[94,52,100,50,"isFinite"],[94,60,100,58],[94,61,100,59],[94,63,100,61],[95,12,101,10,"setFirstMatchRect"],[95,29,101,27],[95,30,101,28],[96,14,101,30,"x"],[96,15,101,31],[97,14,101,33,"y"],[97,15,101,34],[98,14,101,36,"width"],[98,19,101,41],[99,14,101,43,"height"],[100,12,101,50],[100,13,101,51],[100,14,101,52],[101,10,102,8],[101,11,102,9],[101,12,102,10],[102,8,103,6],[102,9,103,7],[102,10,103,8],[102,17,103,15,"e"],[102,18,103,16],[102,20,103,18],[103,10,104,8,"console"],[103,17,104,15],[103,18,104,16,"error"],[103,23,104,21],[103,24,104,22,"e"],[103,25,104,23],[103,26,104,24],[104,8,105,6],[105,6,106,4],[105,7,106,5],[106,6,108,4],[106,12,108,10,"t"],[106,13,108,11],[106,16,108,14,"setTimeout"],[106,26,108,24],[106,27,108,25,"measure"],[106,34,108,32],[106,36,108,34],[106,38,108,36],[106,39,108,37],[107,6,110,4],[107,13,110,11],[107,19,110,17],[108,8,111,6,"cancelled"],[108,17,111,15],[108,20,111,18],[108,24,111,22],[109,8,112,6,"clearTimeout"],[109,20,112,18],[109,21,112,19,"t"],[109,22,112,20],[109,23,112,21],[110,6,113,4],[110,7,113,5],[111,4,114,2],[111,5,114,3],[111,7,114,5],[111,8,114,6,"matches"],[111,15,114,13],[111,17,114,15,"tutorialStep"],[111,29,114,27],[111,31,114,29,"tutorialSteps"],[111,44,114,42],[111,45,114,43],[111,46,114,44],[112,4,116,2],[112,11,116,9],[113,6,117,4,"tutorialStep"],[113,18,117,16],[114,6,118,4,"tutorial"],[114,14,118,12],[115,6,119,4,"tutorialPlacement"],[115,23,119,21],[116,6,120,4,"firstMatchRef"],[116,19,120,17],[117,6,121,4,"firstMatchRect"],[117,20,121,18],[118,6,122,4,"advanceTutorial"],[119,4,123,2],[119,5,123,3],[120,2,124,0],[121,0,124,1],[121,3]],"functionMap":{"names":["<global>","useMessagesTutorial","useMemo$argument_0","maybeShowTutorial","useEffect$argument_0","useFocusEffect$argument_0","dismissTutorial","advanceTutorial","setTutorialStep$argument_0","measure","node.measureInWindow$argument_0","<anonymous>"],"mappings":"AAA;OCI;gCCK;GDS;8BCE;GDE;wCEE;GFY;YGE;GHE;gBIG;KJE;sCKG;GLQ;sCME;oBCC;KDO;GNC;oCCI;GDG;YGE;oBKc;6BCO;SDI;KLI;WOI;KPG;GHC;CDU"},"hasCjsExports":false},"type":"js/module"}]}