{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":74,"index":74}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":75},"end":{"line":2,"column":69,"index":144}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@react-navigation/native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":3,"column":58,"index":203}}],"key":"yKhyWCfwa1gXEwEbMKnWHykYbZ4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesTutorial = useMessagesTutorial;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNavigationNative = require(_dependencyMap[2], \"@react-navigation/native\");\n  function useMessagesTutorial(user, matches, insets) {\n    _s();\n    const [tutorialStep, setTutorialStep] = (0, _react.useState)(-1);\n    const firstMatchRef = (0, _react.useRef)(null);\n    const [firstMatchRect, setFirstMatchRect] = (0, _react.useState)(null);\n    const tutorialSteps = (0, _react.useMemo)(() => {\n      return [{\n        title: \"Chats\",\n        body: \"When you match, your chats show up here. Tap a match to open the conversation.\",\n        placement: {\n          type: \"bottom\"\n        },\n        targetKey: \"firstMatch\"\n      }];\n    }, []);\n    const tutorialKey = (0, _react.useMemo)(() => {\n      return \"wifey:tutorial:v1:messages\";\n    }, []);\n    const maybeShowTutorial = (0, _react.useCallback)(async () => {\n      try {\n        if (!user?.id) return;\n        if (user?.status !== \"APPROVED\") return;\n        const seen = await AsyncStorage.default.getItem(tutorialKey);\n        if (!seen) {\n          setTutorialStep(0);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }, [tutorialKey, user?.id, user?.status]);\n    (0, _react.useEffect)(() => {\n      maybeShowTutorial();\n    }, [maybeShowTutorial]);\n    (0, _reactNavigationNative.useFocusEffect)((0, _react.useCallback)(() => {\n      maybeShowTutorial();\n    }, [maybeShowTutorial]));\n    const dismissTutorial = (0, _react.useCallback)(async () => {\n      try {\n        setTutorialStep(-1);\n        await AsyncStorage.default.setItem(tutorialKey, \"1\");\n      } catch (e) {\n        console.error(e);\n        setTutorialStep(-1);\n      }\n    }, [tutorialKey]);\n    const advanceTutorial = (0, _react.useCallback)(() => {\n      setTutorialStep(s => {\n        const next = s + 1;\n        if (next >= tutorialSteps.length) {\n          dismissTutorial();\n          return -1;\n        }\n        return next;\n      });\n    }, [dismissTutorial, tutorialSteps.length]);\n    const tutorial = tutorialStep >= 0 ? tutorialSteps[tutorialStep] : null;\n    const tutorialPlacement = (0, _react.useMemo)(() => {\n      if (!tutorial) return null;\n      return {\n        type: \"bottom\",\n        inset: insets.bottom + 140\n      };\n    }, [insets.bottom, tutorial]);\n    (0, _react.useEffect)(() => {\n      let cancelled = false;\n      const shouldMeasure = tutorialStep >= 0 && tutorialSteps[tutorialStep]?.targetKey === \"firstMatch\" && Array.isArray(matches) && matches.length > 0;\n      if (!shouldMeasure) {\n        setFirstMatchRect(null);\n        return;\n      }\n      const measure = () => {\n        try {\n          const node = firstMatchRef.current;\n          if (!node || typeof node.measureInWindow !== \"function\") {\n            return;\n          }\n          node.measureInWindow((x, y, width, height) => {\n            if (cancelled) return;\n            if (![x, y, width, height].every(Number.isFinite)) return;\n            setFirstMatchRect({\n              x,\n              y,\n              width,\n              height\n            });\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      };\n      const t = setTimeout(measure, 60);\n      return () => {\n        cancelled = true;\n        clearTimeout(t);\n      };\n    }, [matches, tutorialStep, tutorialSteps]);\n    return {\n      tutorialStep,\n      tutorial,\n      tutorialPlacement,\n      firstMatchRef,\n      firstMatchRect,\n      advanceTutorial\n    };\n  }\n  _s(useMessagesTutorial, \"okCCX3vAqlsZLiqDDAXewYKwZx0=\", false, function () {\n    return [_reactNavigationNative.useFocusEffect];\n  });\n});","lineCount":126,"map":[[13,2,5,0,"exports"],[13,9,5,0],[13,10,5,0,"useMessagesTutorial"],[13,29,5,0],[13,32,5,0,"useMessagesTutorial"],[13,51,5,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[15,42,2,0],[15,45,2,0,"require"],[15,52,2,0],[15,53,2,0,"_dependencyMap"],[15,67,2,0],[16,2,2,0],[16,6,2,0,"AsyncStorage"],[16,18,2,0],[16,21,2,0,"_interopDefault"],[16,36,2,0],[16,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,73,2,0],[17,2,3,0],[17,6,3,0,"_reactNavigationNative"],[17,28,3,0],[17,31,3,0,"require"],[17,38,3,0],[17,39,3,0,"_dependencyMap"],[17,53,3,0],[18,2,5,7],[18,11,5,16,"useMessagesTutorial"],[18,30,5,35,"useMessagesTutorial"],[18,31,5,36,"user"],[18,35,5,40],[18,37,5,42,"matches"],[18,44,5,49],[18,46,5,51,"insets"],[18,52,5,57],[18,54,5,59],[19,4,5,59,"_s"],[19,6,5,59],[20,4,6,2],[20,10,6,8],[20,11,6,9,"tutorialStep"],[20,23,6,21],[20,25,6,23,"setTutorialStep"],[20,40,6,38],[20,41,6,39],[20,44,6,42],[20,48,6,42,"useState"],[20,54,6,50],[20,55,6,50,"useState"],[20,63,6,50],[20,65,6,51],[20,66,6,52],[20,67,6,53],[20,68,6,54],[21,4,7,2],[21,10,7,8,"firstMatchRef"],[21,23,7,21],[21,26,7,24],[21,30,7,24,"useRef"],[21,36,7,30],[21,37,7,30,"useRef"],[21,43,7,30],[21,45,7,31],[21,49,7,35],[21,50,7,36],[22,4,8,2],[22,10,8,8],[22,11,8,9,"firstMatchRect"],[22,25,8,23],[22,27,8,25,"setFirstMatchRect"],[22,44,8,42],[22,45,8,43],[22,48,8,46],[22,52,8,46,"useState"],[22,58,8,54],[22,59,8,54,"useState"],[22,67,8,54],[22,69,8,55],[22,73,8,59],[22,74,8,60],[23,4,10,2],[23,10,10,8,"tutorialSteps"],[23,23,10,21],[23,26,10,24],[23,30,10,24,"useMemo"],[23,36,10,31],[23,37,10,31,"useMemo"],[23,44,10,31],[23,46,10,32],[23,52,10,38],[24,6,11,4],[24,13,11,11],[24,14,12,6],[25,8,13,8,"title"],[25,13,13,13],[25,15,13,15],[25,22,13,22],[26,8,14,8,"body"],[26,12,14,12],[26,14,14,14],[26,94,14,94],[27,8,15,8,"placement"],[27,17,15,17],[27,19,15,19],[28,10,15,21,"type"],[28,14,15,25],[28,16,15,27],[29,8,15,36],[29,9,15,37],[30,8,16,8,"targetKey"],[30,17,16,17],[30,19,16,19],[31,6,17,6],[31,7,17,7],[31,8,18,5],[32,4,19,2],[32,5,19,3],[32,7,19,5],[32,9,19,7],[32,10,19,8],[33,4,21,2],[33,10,21,8,"tutorialKey"],[33,21,21,19],[33,24,21,22],[33,28,21,22,"useMemo"],[33,34,21,29],[33,35,21,29,"useMemo"],[33,42,21,29],[33,44,21,30],[33,50,21,36],[34,6,22,4],[34,13,22,11],[34,41,22,39],[35,4,23,2],[35,5,23,3],[35,7,23,5],[35,9,23,7],[35,10,23,8],[36,4,25,2],[36,10,25,8,"maybeShowTutorial"],[36,27,25,25],[36,30,25,28],[36,34,25,28,"useCallback"],[36,40,25,39],[36,41,25,39,"useCallback"],[36,52,25,39],[36,54,25,40],[36,66,25,52],[37,6,26,4],[37,10,26,8],[38,8,27,6],[38,12,27,10],[38,13,27,11,"user"],[38,17,27,15],[38,19,27,17,"id"],[38,21,27,19],[38,23,27,21],[39,8,28,6],[39,12,28,10,"user"],[39,16,28,14],[39,18,28,16,"status"],[39,24,28,22],[39,29,28,27],[39,39,28,37],[39,41,28,39],[40,8,30,6],[40,14,30,12,"seen"],[40,18,30,16],[40,21,30,19],[40,27,30,25,"AsyncStorage"],[40,39,30,37],[40,40,30,37,"default"],[40,47,30,37],[40,48,30,38,"getItem"],[40,55,30,45],[40,56,30,46,"tutorialKey"],[40,67,30,57],[40,68,30,58],[41,8,31,6],[41,12,31,10],[41,13,31,11,"seen"],[41,17,31,15],[41,19,31,17],[42,10,32,8,"setTutorialStep"],[42,25,32,23],[42,26,32,24],[42,27,32,25],[42,28,32,26],[43,8,33,6],[44,6,34,4],[44,7,34,5],[44,8,34,6],[44,15,34,13,"e"],[44,16,34,14],[44,18,34,16],[45,8,35,6,"console"],[45,15,35,13],[45,16,35,14,"error"],[45,21,35,19],[45,22,35,20,"e"],[45,23,35,21],[45,24,35,22],[46,6,36,4],[47,4,37,2],[47,5,37,3],[47,7,37,5],[47,8,37,6,"tutorialKey"],[47,19,37,17],[47,21,37,19,"user"],[47,25,37,23],[47,27,37,25,"id"],[47,29,37,27],[47,31,37,29,"user"],[47,35,37,33],[47,37,37,35,"status"],[47,43,37,41],[47,44,37,42],[47,45,37,43],[48,4,39,2],[48,8,39,2,"useEffect"],[48,14,39,11],[48,15,39,11,"useEffect"],[48,24,39,11],[48,26,39,12],[48,32,39,18],[49,6,40,4,"maybeShowTutorial"],[49,23,40,21],[49,24,40,22],[49,25,40,23],[50,4,41,2],[50,5,41,3],[50,7,41,5],[50,8,41,6,"maybeShowTutorial"],[50,25,41,23],[50,26,41,24],[50,27,41,25],[51,4,43,2],[51,8,43,2,"useFocusEffect"],[51,30,43,16],[51,31,43,16,"useFocusEffect"],[51,45,43,16],[51,47,44,4],[51,51,44,4,"useCallback"],[51,57,44,15],[51,58,44,15,"useCallback"],[51,69,44,15],[51,71,44,16],[51,77,44,22],[52,6,45,6,"maybeShowTutorial"],[52,23,45,23],[52,24,45,24],[52,25,45,25],[53,4,46,4],[53,5,46,5],[53,7,46,7],[53,8,46,8,"maybeShowTutorial"],[53,25,46,25],[53,26,46,26],[53,27,47,2],[53,28,47,3],[54,4,49,2],[54,10,49,8,"dismissTutorial"],[54,25,49,23],[54,28,49,26],[54,32,49,26,"useCallback"],[54,38,49,37],[54,39,49,37,"useCallback"],[54,50,49,37],[54,52,49,38],[54,64,49,50],[55,6,50,4],[55,10,50,8],[56,8,51,6,"setTutorialStep"],[56,23,51,21],[56,24,51,22],[56,25,51,23],[56,26,51,24],[56,27,51,25],[57,8,52,6],[57,14,52,12,"AsyncStorage"],[57,26,52,24],[57,27,52,24,"default"],[57,34,52,24],[57,35,52,25,"setItem"],[57,42,52,32],[57,43,52,33,"tutorialKey"],[57,54,52,44],[57,56,52,46],[57,59,52,49],[57,60,52,50],[58,6,53,4],[58,7,53,5],[58,8,53,6],[58,15,53,13,"e"],[58,16,53,14],[58,18,53,16],[59,8,54,6,"console"],[59,15,54,13],[59,16,54,14,"error"],[59,21,54,19],[59,22,54,20,"e"],[59,23,54,21],[59,24,54,22],[60,8,55,6,"setTutorialStep"],[60,23,55,21],[60,24,55,22],[60,25,55,23],[60,26,55,24],[60,27,55,25],[61,6,56,4],[62,4,57,2],[62,5,57,3],[62,7,57,5],[62,8,57,6,"tutorialKey"],[62,19,57,17],[62,20,57,18],[62,21,57,19],[63,4,59,2],[63,10,59,8,"advanceTutorial"],[63,25,59,23],[63,28,59,26],[63,32,59,26,"useCallback"],[63,38,59,37],[63,39,59,37,"useCallback"],[63,50,59,37],[63,52,59,38],[63,58,59,44],[64,6,60,4,"setTutorialStep"],[64,21,60,19],[64,22,60,21,"s"],[64,23,60,22],[64,27,60,27],[65,8,61,6],[65,14,61,12,"next"],[65,18,61,16],[65,21,61,19,"s"],[65,22,61,20],[65,25,61,23],[65,26,61,24],[66,8,62,6],[66,12,62,10,"next"],[66,16,62,14],[66,20,62,18,"tutorialSteps"],[66,33,62,31],[66,34,62,32,"length"],[66,40,62,38],[66,42,62,40],[67,10,63,8,"dismissTutorial"],[67,25,63,23],[67,26,63,24],[67,27,63,25],[68,10,64,8],[68,17,64,15],[68,18,64,16],[68,19,64,17],[69,8,65,6],[70,8,66,6],[70,15,66,13,"next"],[70,19,66,17],[71,6,67,4],[71,7,67,5],[71,8,67,6],[72,4,68,2],[72,5,68,3],[72,7,68,5],[72,8,68,6,"dismissTutorial"],[72,23,68,21],[72,25,68,23,"tutorialSteps"],[72,38,68,36],[72,39,68,37,"length"],[72,45,68,43],[72,46,68,44],[72,47,68,45],[73,4,70,2],[73,10,70,8,"tutorial"],[73,18,70,16],[73,21,70,19,"tutorialStep"],[73,33,70,31],[73,37,70,35],[73,38,70,36],[73,41,70,39,"tutorialSteps"],[73,54,70,52],[73,55,70,53,"tutorialStep"],[73,67,70,65],[73,68,70,66],[73,71,70,69],[73,75,70,73],[74,4,72,2],[74,10,72,8,"tutorialPlacement"],[74,27,72,25],[74,30,72,28],[74,34,72,28,"useMemo"],[74,40,72,35],[74,41,72,35,"useMemo"],[74,48,72,35],[74,50,72,36],[74,56,72,42],[75,6,73,4],[75,10,73,8],[75,11,73,9,"tutorial"],[75,19,73,17],[75,21,73,19],[75,28,73,26],[75,32,73,30],[76,6,74,4],[76,13,74,11],[77,8,74,13,"type"],[77,12,74,17],[77,14,74,19],[77,22,74,27],[78,8,74,29,"inset"],[78,13,74,34],[78,15,74,36,"insets"],[78,21,74,42],[78,22,74,43,"bottom"],[78,28,74,49],[78,31,74,52],[79,6,74,56],[79,7,74,57],[80,4,75,2],[80,5,75,3],[80,7,75,5],[80,8,75,6,"insets"],[80,14,75,12],[80,15,75,13,"bottom"],[80,21,75,19],[80,23,75,21,"tutorial"],[80,31,75,29],[80,32,75,30],[80,33,75,31],[81,4,77,2],[81,8,77,2,"useEffect"],[81,14,77,11],[81,15,77,11,"useEffect"],[81,24,77,11],[81,26,77,12],[81,32,77,18],[82,6,78,4],[82,10,78,8,"cancelled"],[82,19,78,17],[82,22,78,20],[82,27,78,25],[83,6,80,4],[83,12,80,10,"shouldMeasure"],[83,25,80,23],[83,28,81,6,"tutorialStep"],[83,40,81,18],[83,44,81,22],[83,45,81,23],[83,49,82,6,"tutorialSteps"],[83,62,82,19],[83,63,82,20,"tutorialStep"],[83,75,82,32],[83,76,82,33],[83,78,82,35,"targetKey"],[83,87,82,44],[83,92,82,49],[83,104,82,61],[83,108,83,6,"Array"],[83,113,83,11],[83,114,83,12,"isArray"],[83,121,83,19],[83,122,83,20,"matches"],[83,129,83,27],[83,130,83,28],[83,134,84,6,"matches"],[83,141,84,13],[83,142,84,14,"length"],[83,148,84,20],[83,151,84,23],[83,152,84,24],[84,6,86,4],[84,10,86,8],[84,11,86,9,"shouldMeasure"],[84,24,86,22],[84,26,86,24],[85,8,87,6,"setFirstMatchRect"],[85,25,87,23],[85,26,87,24],[85,30,87,28],[85,31,87,29],[86,8,88,6],[87,6,89,4],[88,6,91,4],[88,12,91,10,"measure"],[88,19,91,17],[88,22,91,20,"measure"],[88,23,91,20],[88,28,91,26],[89,8,92,6],[89,12,92,10],[90,10,93,8],[90,16,93,14,"node"],[90,20,93,18],[90,23,93,21,"firstMatchRef"],[90,36,93,34],[90,37,93,35,"current"],[90,44,93,42],[91,10,94,8],[91,14,94,12],[91,15,94,13,"node"],[91,19,94,17],[91,23,94,21],[91,30,94,28,"node"],[91,34,94,32],[91,35,94,33,"measureInWindow"],[91,50,94,48],[91,55,94,53],[91,65,94,63],[91,67,94,65],[92,12,95,10],[93,10,96,8],[94,10,98,8,"node"],[94,14,98,12],[94,15,98,13,"measureInWindow"],[94,30,98,28],[94,31,98,29],[94,32,98,30,"x"],[94,33,98,31],[94,35,98,33,"y"],[94,36,98,34],[94,38,98,36,"width"],[94,43,98,41],[94,45,98,43,"height"],[94,51,98,49],[94,56,98,54],[95,12,99,10],[95,16,99,14,"cancelled"],[95,25,99,23],[95,27,99,25],[96,12,100,10],[96,16,100,14],[96,17,100,15],[96,18,100,16,"x"],[96,19,100,17],[96,21,100,19,"y"],[96,22,100,20],[96,24,100,22,"width"],[96,29,100,27],[96,31,100,29,"height"],[96,37,100,35],[96,38,100,36],[96,39,100,37,"every"],[96,44,100,42],[96,45,100,43,"Number"],[96,51,100,49],[96,52,100,50,"isFinite"],[96,60,100,58],[96,61,100,59],[96,63,100,61],[97,12,101,10,"setFirstMatchRect"],[97,29,101,27],[97,30,101,28],[98,14,101,30,"x"],[98,15,101,31],[99,14,101,33,"y"],[99,15,101,34],[100,14,101,36,"width"],[100,19,101,41],[101,14,101,43,"height"],[102,12,101,50],[102,13,101,51],[102,14,101,52],[103,10,102,8],[103,11,102,9],[103,12,102,10],[104,8,103,6],[104,9,103,7],[104,10,103,8],[104,17,103,15,"e"],[104,18,103,16],[104,20,103,18],[105,10,104,8,"console"],[105,17,104,15],[105,18,104,16,"error"],[105,23,104,21],[105,24,104,22,"e"],[105,25,104,23],[105,26,104,24],[106,8,105,6],[107,6,106,4],[107,7,106,5],[108,6,108,4],[108,12,108,10,"t"],[108,13,108,11],[108,16,108,14,"setTimeout"],[108,26,108,24],[108,27,108,25,"measure"],[108,34,108,32],[108,36,108,34],[108,38,108,36],[108,39,108,37],[109,6,110,4],[109,13,110,11],[109,19,110,17],[110,8,111,6,"cancelled"],[110,17,111,15],[110,20,111,18],[110,24,111,22],[111,8,112,6,"clearTimeout"],[111,20,112,18],[111,21,112,19,"t"],[111,22,112,20],[111,23,112,21],[112,6,113,4],[112,7,113,5],[113,4,114,2],[113,5,114,3],[113,7,114,5],[113,8,114,6,"matches"],[113,15,114,13],[113,17,114,15,"tutorialStep"],[113,29,114,27],[113,31,114,29,"tutorialSteps"],[113,44,114,42],[113,45,114,43],[113,46,114,44],[114,4,116,2],[114,11,116,9],[115,6,117,4,"tutorialStep"],[115,18,117,16],[116,6,118,4,"tutorial"],[116,14,118,12],[117,6,119,4,"tutorialPlacement"],[117,23,119,21],[118,6,120,4,"firstMatchRef"],[118,19,120,17],[119,6,121,4,"firstMatchRect"],[119,20,121,18],[120,6,122,4,"advanceTutorial"],[121,4,123,2],[121,5,123,3],[122,2,124,0],[123,2,124,1,"_s"],[123,4,124,1],[123,5,5,16,"useMessagesTutorial"],[123,24,5,35],[124,4,5,35],[124,12,43,2,"useFocusEffect"],[124,34,43,16],[124,35,43,16,"useFocusEffect"],[124,49,43,16],[125,2,43,16],[126,0,43,16],[126,3]],"functionMap":{"names":["<global>","useMessagesTutorial","useMemo$argument_0","maybeShowTutorial","useEffect$argument_0","useFocusEffect$argument_0","dismissTutorial","advanceTutorial","setTutorialStep$argument_0","measure","node.measureInWindow$argument_0","<anonymous>"],"mappings":"AAA;OCI;gCCK;GDS;8BCE;GDE;wCEE;GFY;YGE;GHE;gBIG;KJE;sCKG;GLQ;sCME;oBCC;KDO;GNC;oCCI;GDG;YGE;oBKc;6BCO;SDI;KLI;WOI;KPG;GHC;CDU"},"hasCjsExports":false},"type":"js/module"}]}