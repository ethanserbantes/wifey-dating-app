{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useDatingInsights = useDatingInsights;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  function useDatingInsights(profile, showDatingInsights) {\n    _s();\n    var targetUserId = (0, _react.useMemo)(() => {\n      var n1 = Number(profile?.user_id);\n      if (Number.isFinite(n1) && n1 > 0) return Math.trunc(n1);\n      var n2 = Number(profile?.id);\n      if (Number.isFinite(n2) && n2 > 0) return Math.trunc(n2);\n      return null;\n    }, [profile?.id, profile?.user_id]);\n    var shouldFetchInsights = showDatingInsights && Number.isFinite(targetUserId);\n    var insightsQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"datingInsights\", \"profile\", targetUserId],\n      enabled: shouldFetchInsights,\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var resp = yield fetch(`/api/dating-insights?userId=${encodeURIComponent(String(targetUserId))}`);\n          if (!resp.ok) {\n            throw new Error(`When fetching /api/dating-insights, the response was [${resp.status}] ${resp.statusText}`);\n          }\n          return resp.json();\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      staleTime: 30_000\n    });\n    var dateHistoryLabel = typeof insightsQuery.data?.dateHistoryLabel === \"string\" ? insightsQuery.data.dateHistoryLabel : null;\n    var followThroughLabel = typeof insightsQuery.data?.followThroughLabel === \"string\" ? insightsQuery.data.followThroughLabel : null;\n    var dateHistoryLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return dateHistoryLabel || \"0 dates on Wifey\";\n    }, [dateHistoryLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    var followThroughLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return followThroughLabel || \"Not enough data yet\";\n    }, [followThroughLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    return {\n      shouldFetchInsights,\n      insightsQuery,\n      dateHistoryLine,\n      followThroughLine\n    };\n  }\n  _s(useDatingInsights, \"gY+50s9uyD8P2AZHQ3zgW6ZKq0s=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n});","lineCount":79,"map":[[13,2,4,0,"exports"],[13,9,4,0],[13,10,4,0,"useDatingInsights"],[13,27,4,0],[13,30,4,0,"useDatingInsights"],[13,47,4,0],[14,2,93,1],[14,6,93,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,93,1],[14,45,93,1,"require"],[14,52,93,1],[14,53,93,1,"_dependencyMap"],[14,67,93,1],[15,2,93,1],[15,6,93,1,"_asyncToGenerator"],[15,23,93,1],[15,26,93,1,"_interopDefault"],[15,41,93,1],[15,42,93,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,93,1],[16,2,1,0],[16,6,1,0,"_react"],[16,12,1,0],[16,15,1,0,"require"],[16,22,1,0],[16,23,1,0,"_dependencyMap"],[16,37,1,0],[17,2,2,0],[17,6,2,0,"_tanstackReactQuery"],[17,25,2,0],[17,28,2,0,"require"],[17,35,2,0],[17,36,2,0,"_dependencyMap"],[17,50,2,0],[18,2,4,7],[18,11,4,16,"useDatingInsights"],[18,28,4,33,"useDatingInsights"],[18,29,4,34,"profile"],[18,36,4,41],[18,38,4,43,"showDatingInsights"],[18,56,4,61],[18,58,4,63],[19,4,4,63,"_s"],[19,6,4,63],[20,4,5,2],[20,8,5,8,"targetUserId"],[20,20,5,20],[20,23,5,23],[20,27,5,23,"useMemo"],[20,33,5,30],[20,34,5,30,"useMemo"],[20,41,5,30],[20,43,5,31],[20,49,5,37],[21,6,6,4],[21,10,6,10,"n1"],[21,12,6,12],[21,15,6,15,"Number"],[21,21,6,21],[21,22,6,22,"profile"],[21,29,6,29],[21,31,6,31,"user_id"],[21,38,6,38],[21,39,6,39],[22,6,7,4],[22,10,7,8,"Number"],[22,16,7,14],[22,17,7,15,"isFinite"],[22,25,7,23],[22,26,7,24,"n1"],[22,28,7,26],[22,29,7,27],[22,33,7,31,"n1"],[22,35,7,33],[22,38,7,36],[22,39,7,37],[22,41,7,39],[22,48,7,46,"Math"],[22,52,7,50],[22,53,7,51,"trunc"],[22,58,7,56],[22,59,7,57,"n1"],[22,61,7,59],[22,62,7,60],[23,6,9,4],[23,10,9,10,"n2"],[23,12,9,12],[23,15,9,15,"Number"],[23,21,9,21],[23,22,9,22,"profile"],[23,29,9,29],[23,31,9,31,"id"],[23,33,9,33],[23,34,9,34],[24,6,10,4],[24,10,10,8,"Number"],[24,16,10,14],[24,17,10,15,"isFinite"],[24,25,10,23],[24,26,10,24,"n2"],[24,28,10,26],[24,29,10,27],[24,33,10,31,"n2"],[24,35,10,33],[24,38,10,36],[24,39,10,37],[24,41,10,39],[24,48,10,46,"Math"],[24,52,10,50],[24,53,10,51,"trunc"],[24,58,10,56],[24,59,10,57,"n2"],[24,61,10,59],[24,62,10,60],[25,6,12,4],[25,13,12,11],[25,17,12,15],[26,4,13,2],[26,5,13,3],[26,7,13,5],[26,8,13,6,"profile"],[26,15,13,13],[26,17,13,15,"id"],[26,19,13,17],[26,21,13,19,"profile"],[26,28,13,26],[26,30,13,28,"user_id"],[26,37,13,35],[26,38,13,36],[26,39,13,37],[27,4,15,2],[27,8,15,8,"shouldFetchInsights"],[27,27,15,27],[27,30,16,4,"showDatingInsights"],[27,48,16,22],[27,52,16,26,"Number"],[27,58,16,32],[27,59,16,33,"isFinite"],[27,67,16,41],[27,68,16,42,"targetUserId"],[27,80,16,54],[27,81,16,55],[28,4,18,2],[28,8,18,8,"insightsQuery"],[28,21,18,21],[28,24,18,24],[28,28,18,24,"useQuery"],[28,47,18,32],[28,48,18,32,"useQuery"],[28,56,18,32],[28,58,18,33],[29,6,19,4,"queryKey"],[29,14,19,12],[29,16,19,14],[29,17,19,15],[29,33,19,31],[29,35,19,33],[29,44,19,42],[29,46,19,44,"targetUserId"],[29,58,19,56],[29,59,19,57],[30,6,20,4,"enabled"],[30,13,20,11],[30,15,20,13,"shouldFetchInsights"],[30,34,20,32],[31,6,21,4,"queryFn"],[31,13,21,11],[32,8,21,11],[32,12,21,11,"_ref"],[32,16,21,11],[32,23,21,11,"_asyncToGenerator"],[32,40,21,11],[32,41,21,11,"default"],[32,48,21,11],[32,50,21,13],[32,63,21,25],[33,10,22,6],[33,14,22,12,"resp"],[33,18,22,16],[33,27,22,25,"fetch"],[33,32,22,30],[33,33,23,8],[33,64,23,39,"encodeURIComponent"],[33,82,23,57],[33,83,23,58,"String"],[33,89,23,64],[33,90,23,65,"targetUserId"],[33,102,23,77],[33,103,23,78],[33,104,23,79],[33,106,24,6],[33,107,24,7],[34,10,25,6],[34,14,25,10],[34,15,25,11,"resp"],[34,19,25,15],[34,20,25,16,"ok"],[34,22,25,18],[34,24,25,20],[35,12,26,8],[35,18,26,14],[35,22,26,18,"Error"],[35,27,26,23],[35,28,27,10],[35,85,27,67,"resp"],[35,89,27,71],[35,90,27,72,"status"],[35,96,27,78],[35,101,27,83,"resp"],[35,105,27,87],[35,106,27,88,"statusText"],[35,116,27,98],[35,118,28,8],[35,119,28,9],[36,10,29,6],[37,10,30,6],[37,17,30,13,"resp"],[37,21,30,17],[37,22,30,18,"json"],[37,26,30,22],[37,27,30,23],[37,28,30,24],[38,8,31,4],[38,9,31,5],[39,8,31,5],[39,24,21,4,"queryFn"],[39,31,21,11,"queryFn"],[39,32,21,11],[40,10,21,11],[40,17,21,11,"_ref"],[40,21,21,11],[40,22,21,11,"apply"],[40,27,21,11],[40,34,21,11,"arguments"],[40,43,21,11],[41,8,21,11],[42,6,21,11],[42,9,31,5],[43,6,32,4,"staleTime"],[43,15,32,13],[43,17,32,15],[44,4,33,2],[44,5,33,3],[44,6,33,4],[45,4,35,2],[45,8,35,8,"dateHistoryLabel"],[45,24,35,24],[45,27,36,4],[45,34,36,11,"insightsQuery"],[45,47,36,24],[45,48,36,25,"data"],[45,52,36,29],[45,54,36,31,"dateHistoryLabel"],[45,70,36,47],[45,75,36,52],[45,83,36,60],[45,86,37,8,"insightsQuery"],[45,99,37,21],[45,100,37,22,"data"],[45,104,37,26],[45,105,37,27,"dateHistoryLabel"],[45,121,37,43],[45,124,38,8],[45,128,38,12],[46,4,40,2],[46,8,40,8,"followThroughLabel"],[46,26,40,26],[46,29,41,4],[46,36,41,11,"insightsQuery"],[46,49,41,24],[46,50,41,25,"data"],[46,54,41,29],[46,56,41,31,"followThroughLabel"],[46,74,41,49],[46,79,41,54],[46,87,41,62],[46,90,42,8,"insightsQuery"],[46,103,42,21],[46,104,42,22,"data"],[46,108,42,26],[46,109,42,27,"followThroughLabel"],[46,127,42,45],[46,130,43,8],[46,134,43,12],[47,4,45,2],[47,8,45,8,"dateHistoryLine"],[47,23,45,23],[47,26,45,26],[47,30,45,26,"useMemo"],[47,36,45,33],[47,37,45,33,"useMemo"],[47,44,45,33],[47,46,45,34],[47,52,45,40],[48,6,46,4],[48,10,46,8],[48,11,46,9,"showDatingInsights"],[48,29,46,27],[48,31,46,29],[48,38,46,36],[48,42,46,40],[49,6,47,4],[49,10,47,8],[49,11,47,9,"shouldFetchInsights"],[49,30,47,28],[49,32,47,30],[49,39,47,37],[49,43,47,41],[50,6,49,4],[50,10,49,8,"insightsQuery"],[50,23,49,21],[50,24,49,22,"isLoading"],[50,33,49,31],[50,35,49,33],[51,8,50,6],[51,15,50,13],[51,25,50,23],[52,6,51,4],[53,6,53,4],[53,10,53,8,"insightsQuery"],[53,23,53,21],[53,24,53,22,"isError"],[53,31,53,29],[53,33,53,31],[54,8,54,6],[54,15,54,13],[54,28,54,26],[55,6,55,4],[56,6,57,4],[56,13,57,11,"dateHistoryLabel"],[56,29,57,27],[56,33,57,31],[56,51,57,49],[57,4,58,2],[57,5,58,3],[57,7,58,5],[57,8,59,4,"dateHistoryLabel"],[57,24,59,20],[57,26,60,4,"insightsQuery"],[57,39,60,17],[57,40,60,18,"isError"],[57,47,60,25],[57,49,61,4,"insightsQuery"],[57,62,61,17],[57,63,61,18,"isLoading"],[57,72,61,27],[57,74,62,4,"shouldFetchInsights"],[57,93,62,23],[57,95,63,4,"showDatingInsights"],[57,113,63,22],[57,114,64,3],[57,115,64,4],[58,4,66,2],[58,8,66,8,"followThroughLine"],[58,25,66,25],[58,28,66,28],[58,32,66,28,"useMemo"],[58,38,66,35],[58,39,66,35,"useMemo"],[58,46,66,35],[58,48,66,36],[58,54,66,42],[59,6,67,4],[59,10,67,8],[59,11,67,9,"showDatingInsights"],[59,29,67,27],[59,31,67,29],[59,38,67,36],[59,42,67,40],[60,6,68,4],[60,10,68,8],[60,11,68,9,"shouldFetchInsights"],[60,30,68,28],[60,32,68,30],[60,39,68,37],[60,43,68,41],[61,6,70,4],[61,10,70,8,"insightsQuery"],[61,23,70,21],[61,24,70,22,"isLoading"],[61,33,70,31],[61,35,70,33],[62,8,71,6],[62,15,71,13],[62,25,71,23],[63,6,72,4],[64,6,74,4],[64,10,74,8,"insightsQuery"],[64,23,74,21],[64,24,74,22,"isError"],[64,31,74,29],[64,33,74,31],[65,8,75,6],[65,15,75,13],[65,28,75,26],[66,6,76,4],[67,6,78,4],[67,13,78,11,"followThroughLabel"],[67,31,78,29],[67,35,78,33],[67,56,78,54],[68,4,79,2],[68,5,79,3],[68,7,79,5],[68,8,80,4,"followThroughLabel"],[68,26,80,22],[68,28,81,4,"insightsQuery"],[68,41,81,17],[68,42,81,18,"isError"],[68,49,81,25],[68,51,82,4,"insightsQuery"],[68,64,82,17],[68,65,82,18,"isLoading"],[68,74,82,27],[68,76,83,4,"shouldFetchInsights"],[68,95,83,23],[68,97,84,4,"showDatingInsights"],[68,115,84,22],[68,116,85,3],[68,117,85,4],[69,4,87,2],[69,11,87,9],[70,6,88,4,"shouldFetchInsights"],[70,25,88,23],[71,6,89,4,"insightsQuery"],[71,19,89,17],[72,6,90,4,"dateHistoryLine"],[72,21,90,19],[73,6,91,4,"followThroughLine"],[74,4,92,2],[74,5,92,3],[75,2,93,0],[76,2,93,1,"_s"],[76,4,93,1],[76,5,4,16,"useDatingInsights"],[76,22,4,33],[77,4,4,33],[77,12,18,24,"useQuery"],[77,31,18,32],[77,32,18,32,"useQuery"],[77,40,18,32],[78,2,18,32],[79,0,18,32],[79,3]],"functionMap":{"names":["<global>","useDatingInsights","useMemo$argument_0","useQuery$argument_0.queryFn"],"mappings":"AAA;OCG;+BCC;GDQ;aEQ;KFU;kCCc;GDa;oCCQ;GDa;CDc"},"hasCjsExports":false},"type":"js/module"}]}