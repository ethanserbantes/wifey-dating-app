{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":68,"index":129}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"./AvailabilityPrompt","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":130},"end":{"line":3,"column":58,"index":188}}],"key":"b59yZJ/gYMroWuQgaDEJURPp0Ew=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AvailabilityModal;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _reactNative = require(_dependencyMap[1]);\n  var _tanstackReactQuery = require(_dependencyMap[2]);\n  var _AvailabilityPrompt = require(_dependencyMap[3]);\n  var _reactJsxRuntime = require(_dependencyMap[4]);\n  function AvailabilityModal(_ref) {\n    var open = _ref.open,\n      matchId = _ref.matchId,\n      userId = _ref.userId,\n      triggerSource = _ref.triggerSource,\n      onSaved = _ref.onSaved,\n      onSkipped = _ref.onSkipped,\n      insets = _ref.insets;\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    var skipMutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: function () {\n        var _ref2 = (0, _asyncToGenerator.default)(function* () {\n          var resp = yield fetch(`/api/matches/${matchId}/availability/skip`, {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              userId: Number(userId)\n            })\n          });\n          if (!resp.ok) {\n            var text = yield resp.text();\n            throw new Error(`When posting /api/matches/${matchId}/availability/skip, the response was [${resp.status}] ${resp.statusText}. ${text}`);\n          }\n          return resp.json();\n        });\n        return function mutationFn() {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSuccess: () => {\n        queryClient.invalidateQueries({\n          queryKey: [\"matchAvailability\", String(matchId), Number(userId)]\n        });\n        if (onSkipped) onSkipped();\n      },\n      onError: e => {\n        console.error(e);\n        if (onSkipped) onSkipped();\n      }\n    });\n    var handleRequestClose = () => {\n      // If the user dismisses the modal (back button), treat it as Skip.\n      if (skipMutation.isPending) return;\n      skipMutation.mutate();\n    };\n    return /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.Modal, {\n      visible: open,\n      transparent: true,\n      animationType: \"fade\",\n      onRequestClose: handleRequestClose,\n      children: /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.Pressable, {\n        onPress: handleRequestClose,\n        style: {\n          flex: 1,\n          backgroundColor: \"rgba(0,0,0,0.35)\",\n          justifyContent: \"flex-end\"\n        },\n        children: /*#__PURE__*/(0, _reactJsxRuntime.jsxs)(_reactNative.Pressable, {\n          onPress: () => {},\n          style: {\n            backgroundColor: \"#F5F5F5\",\n            paddingBottom: (insets?.bottom || 0) + 14,\n            paddingTop: 10,\n            borderTopLeftRadius: 16,\n            borderTopRightRadius: 16\n          },\n          children: [/*#__PURE__*/(0, _reactJsxRuntime.jsxs)(_reactNative.View, {\n            style: {\n              paddingHorizontal: 16,\n              paddingBottom: 10\n            },\n            children: [/*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.Text, {\n              style: {\n                fontSize: 14,\n                fontWeight: \"900\",\n                color: \"#111\"\n              },\n              children: \"Wifey can help lock this in faster \\uD83C\\uDF78\"\n            }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.Text, {\n              style: {\n                fontSize: 12,\n                color: \"#6B7280\",\n                marginTop: 6\n              },\n              children: \"Pick up to 3 days. You can skip for now.\"\n            })]\n          }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_reactNative.View, {\n            style: {\n              paddingHorizontal: 16\n            },\n            children: /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_AvailabilityPrompt.AvailabilityPrompt, {\n              matchId: matchId,\n              userId: userId,\n              triggerSource: triggerSource,\n              onSaved: onSaved,\n              onSkipped: onSkipped,\n              showSkip: true,\n              showNotSure: true // ensure \"Not sure yet\" only exists on this chat-triggered modal\n            })\n          })]\n        })\n      })\n    });\n  }\n});","lineCount":130,"map":[[12,2,5,15,"Object"],[12,8,5,15],[12,9,5,15,"defineProperty"],[12,23,5,15],[12,24,5,15,"exports"],[12,31,5,15],[13,4,5,15,"enumerable"],[13,14,5,15],[14,4,5,15,"get"],[14,7,5,15],[14,18,5,15,"get"],[14,19,5,15],[15,6,5,15],[15,13,5,15,"AvailabilityModal"],[15,30,5,15],[16,4,5,15],[17,2,5,15],[18,2,98,1],[18,6,98,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,98,1],[18,45,98,1,"require"],[18,52,98,1],[18,53,98,1,"_dependencyMap"],[18,67,98,1],[19,2,98,1],[19,6,98,1,"_asyncToGenerator"],[19,23,98,1],[19,26,98,1,"_interopDefault"],[19,41,98,1],[19,42,98,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,98,1],[20,2,1,0],[20,6,1,0,"_reactNative"],[20,18,1,0],[20,21,1,0,"require"],[20,28,1,0],[20,29,1,0,"_dependencyMap"],[20,43,1,0],[21,2,2,0],[21,6,2,0,"_tanstackReactQuery"],[21,25,2,0],[21,28,2,0,"require"],[21,35,2,0],[21,36,2,0,"_dependencyMap"],[21,50,2,0],[22,2,3,0],[22,6,3,0,"_AvailabilityPrompt"],[22,25,3,0],[22,28,3,0,"require"],[22,35,3,0],[22,36,3,0,"_dependencyMap"],[22,50,3,0],[23,2,3,58],[23,6,3,58,"_reactJsxRuntime"],[23,22,3,58],[23,25,3,58,"require"],[23,32,3,58],[23,33,3,58,"_dependencyMap"],[23,47,3,58],[24,2,5,15],[24,11,5,24,"AvailabilityModal"],[24,28,5,41,"AvailabilityModal"],[24,29,5,41,"_ref"],[24,33,5,41],[24,35,13,3],[25,4,13,3],[25,8,6,2,"open"],[25,12,6,6],[25,15,6,6,"_ref"],[25,19,6,6],[25,20,6,2,"open"],[25,24,6,6],[26,6,7,2,"matchId"],[26,13,7,9],[26,16,7,9,"_ref"],[26,20,7,9],[26,21,7,2,"matchId"],[26,28,7,9],[27,6,8,2,"userId"],[27,12,8,8],[27,15,8,8,"_ref"],[27,19,8,8],[27,20,8,2,"userId"],[27,26,8,8],[28,6,9,2,"triggerSource"],[28,19,9,15],[28,22,9,15,"_ref"],[28,26,9,15],[28,27,9,2,"triggerSource"],[28,40,9,15],[29,6,10,2,"onSaved"],[29,13,10,9],[29,16,10,9,"_ref"],[29,20,10,9],[29,21,10,2,"onSaved"],[29,28,10,9],[30,6,11,2,"onSkipped"],[30,15,11,11],[30,18,11,11,"_ref"],[30,22,11,11],[30,23,11,2,"onSkipped"],[30,32,11,11],[31,6,12,2,"insets"],[31,12,12,8],[31,15,12,8,"_ref"],[31,19,12,8],[31,20,12,2,"insets"],[31,26,12,8],[32,4,14,2],[32,8,14,8,"queryClient"],[32,19,14,19],[32,22,14,22],[32,26,14,22,"useQueryClient"],[32,45,14,36],[32,46,14,36,"useQueryClient"],[32,60,14,36],[32,62,14,37],[32,63,14,38],[33,4,16,2],[33,8,16,8,"skipMutation"],[33,20,16,20],[33,23,16,23],[33,27,16,23,"useMutation"],[33,46,16,34],[33,47,16,34,"useMutation"],[33,58,16,34],[33,60,16,35],[34,6,17,4,"mutationFn"],[34,16,17,14],[35,8,17,14],[35,12,17,14,"_ref2"],[35,17,17,14],[35,24,17,14,"_asyncToGenerator"],[35,41,17,14],[35,42,17,14,"default"],[35,49,17,14],[35,51,17,16],[35,64,17,28],[36,10,18,6],[36,14,18,12,"resp"],[36,18,18,16],[36,27,18,25,"fetch"],[36,32,18,30],[36,33,18,31],[36,49,18,47,"matchId"],[36,56,18,54],[36,76,18,74],[36,78,18,76],[37,12,19,8,"method"],[37,18,19,14],[37,20,19,16],[37,26,19,22],[38,12,20,8,"headers"],[38,19,20,15],[38,21,20,17],[39,14,20,19],[39,28,20,33],[39,30,20,35],[40,12,20,54],[40,13,20,55],[41,12,21,8,"body"],[41,16,21,12],[41,18,21,14,"JSON"],[41,22,21,18],[41,23,21,19,"stringify"],[41,32,21,28],[41,33,21,29],[42,14,21,31,"userId"],[42,20,21,37],[42,22,21,39,"Number"],[42,28,21,45],[42,29,21,46,"userId"],[42,35,21,52],[43,12,21,54],[43,13,21,55],[44,10,22,6],[44,11,22,7],[44,12,22,8],[45,10,23,6],[45,14,23,10],[45,15,23,11,"resp"],[45,19,23,15],[45,20,23,16,"ok"],[45,22,23,18],[45,24,23,20],[46,12,24,8],[46,16,24,14,"text"],[46,20,24,18],[46,29,24,27,"resp"],[46,33,24,31],[46,34,24,32,"text"],[46,38,24,36],[46,39,24,37],[46,40,24,38],[47,12,25,8],[47,18,25,14],[47,22,25,18,"Error"],[47,27,25,23],[47,28,26,10],[47,57,26,39,"matchId"],[47,64,26,46],[47,105,26,87,"resp"],[47,109,26,91],[47,110,26,92,"status"],[47,116,26,98],[47,121,26,103,"resp"],[47,125,26,107],[47,126,26,108,"statusText"],[47,136,26,118],[47,141,26,123,"text"],[47,145,26,127],[47,147,27,8],[47,148,27,9],[48,10,28,6],[49,10,29,6],[49,17,29,13,"resp"],[49,21,29,17],[49,22,29,18,"json"],[49,26,29,22],[49,27,29,23],[49,28,29,24],[50,8,30,4],[50,9,30,5],[51,8,30,5],[51,24,17,4,"mutationFn"],[51,34,17,14,"mutationFn"],[51,35,17,14],[52,10,17,14],[52,17,17,14,"_ref2"],[52,22,17,14],[52,23,17,14,"apply"],[52,28,17,14],[52,35,17,14,"arguments"],[52,44,17,14],[53,8,17,14],[54,6,17,14],[54,9,30,5],[55,6,31,4,"onSuccess"],[55,15,31,13],[55,17,31,15,"onSuccess"],[55,18,31,15],[55,23,31,21],[56,8,32,6,"queryClient"],[56,19,32,17],[56,20,32,18,"invalidateQueries"],[56,37,32,35],[56,38,32,36],[57,10,33,8,"queryKey"],[57,18,33,16],[57,20,33,18],[57,21,33,19],[57,40,33,38],[57,42,33,40,"String"],[57,48,33,46],[57,49,33,47,"matchId"],[57,56,33,54],[57,57,33,55],[57,59,33,57,"Number"],[57,65,33,63],[57,66,33,64,"userId"],[57,72,33,70],[57,73,33,71],[58,8,34,6],[58,9,34,7],[58,10,34,8],[59,8,35,6],[59,12,35,10,"onSkipped"],[59,21,35,19],[59,23,35,21,"onSkipped"],[59,32,35,30],[59,33,35,31],[59,34,35,32],[60,6,36,4],[60,7,36,5],[61,6,37,4,"onError"],[61,13,37,11],[61,15,37,14,"e"],[61,16,37,15],[61,20,37,20],[62,8,38,6,"console"],[62,15,38,13],[62,16,38,14,"error"],[62,21,38,19],[62,22,38,20,"e"],[62,23,38,21],[62,24,38,22],[63,8,39,6],[63,12,39,10,"onSkipped"],[63,21,39,19],[63,23,39,21,"onSkipped"],[63,32,39,30],[63,33,39,31],[63,34,39,32],[64,6,40,4],[65,4,41,2],[65,5,41,3],[65,6,41,4],[66,4,43,2],[66,8,43,8,"handleRequestClose"],[66,26,43,26],[66,29,43,29,"handleRequestClose"],[66,30,43,29],[66,35,43,35],[67,6,44,4],[68,6,45,4],[68,10,45,8,"skipMutation"],[68,22,45,20],[68,23,45,21,"isPending"],[68,32,45,30],[68,34,45,32],[69,6,46,4,"skipMutation"],[69,18,46,16],[69,19,46,17,"mutate"],[69,25,46,23],[69,26,46,24],[69,27,46,25],[70,4,47,2],[70,5,47,3],[71,4,49,2],[71,24,50,4],[71,28,50,4,"_reactJsxRuntime"],[71,44,50,4],[71,45,50,4,"jsx"],[71,48,50,4],[71,50,50,5,"_reactNative"],[71,62,50,10],[71,63,50,10,"Modal"],[71,68,50,10],[72,6,51,6,"visible"],[72,13,51,13],[72,15,51,15,"open"],[72,19,51,20],[73,6,52,6,"transparent"],[73,17,52,17],[74,6,53,6,"animationType"],[74,19,53,19],[74,21,53,20],[74,27,53,26],[75,6,54,6,"onRequestClose"],[75,20,54,20],[75,22,54,22,"handleRequestClose"],[75,40,54,41],[76,6,54,41,"children"],[76,14,54,41],[76,29,56,6],[76,33,56,6,"_reactJsxRuntime"],[76,49,56,6],[76,50,56,6,"jsx"],[76,53,56,6],[76,55,56,7,"_reactNative"],[76,67,56,16],[76,68,56,16,"Pressable"],[76,77,56,16],[77,8,57,8,"onPress"],[77,15,57,15],[77,17,57,17,"handleRequestClose"],[77,35,57,36],[78,8,58,8,"style"],[78,13,58,13],[78,15,58,15],[79,10,59,10,"flex"],[79,14,59,14],[79,16,59,16],[79,17,59,17],[80,10,60,10,"backgroundColor"],[80,25,60,25],[80,27,60,27],[80,45,60,45],[81,10,61,10,"justifyContent"],[81,24,61,24],[81,26,61,26],[82,8,62,8],[82,9,62,10],[83,8,62,10,"children"],[83,16,62,10],[83,31,64,8],[83,35,64,8,"_reactJsxRuntime"],[83,51,64,8],[83,52,64,8,"jsxs"],[83,56,64,8],[83,58,64,9,"_reactNative"],[83,70,64,18],[83,71,64,18,"Pressable"],[83,80,64,18],[84,10,65,10,"onPress"],[84,17,65,17],[84,19,65,19,"onPress"],[84,20,65,19],[84,25,65,25],[84,26,65,26],[84,27,65,28],[85,10,66,10,"style"],[85,15,66,15],[85,17,66,17],[86,12,67,12,"backgroundColor"],[86,27,67,27],[86,29,67,29],[86,38,67,38],[87,12,68,12,"paddingBottom"],[87,25,68,25],[87,27,68,27],[87,28,68,28,"insets"],[87,34,68,34],[87,36,68,36,"bottom"],[87,42,68,42],[87,46,68,46],[87,47,68,47],[87,51,68,51],[87,53,68,53],[88,12,69,12,"paddingTop"],[88,22,69,22],[88,24,69,24],[88,26,69,26],[89,12,70,12,"borderTopLeftRadius"],[89,31,70,31],[89,33,70,33],[89,35,70,35],[90,12,71,12,"borderTopRightRadius"],[90,32,71,32],[90,34,71,34],[91,10,72,10],[91,11,72,12],[92,10,72,12,"children"],[92,18,72,12],[92,34,74,10],[92,38,74,10,"_reactJsxRuntime"],[92,54,74,10],[92,55,74,10,"jsxs"],[92,59,74,10],[92,61,74,11,"_reactNative"],[92,73,74,15],[92,74,74,15,"View"],[92,78,74,15],[93,12,74,16,"style"],[93,17,74,21],[93,19,74,23],[94,14,74,25,"paddingHorizontal"],[94,31,74,42],[94,33,74,44],[94,35,74,46],[95,14,74,48,"paddingBottom"],[95,27,74,61],[95,29,74,63],[96,12,74,66],[96,13,74,68],[97,12,74,68,"children"],[97,20,74,68],[97,36,75,12],[97,40,75,12,"_reactJsxRuntime"],[97,56,75,12],[97,57,75,12,"jsx"],[97,60,75,12],[97,62,75,13,"_reactNative"],[97,74,75,17],[97,75,75,17,"Text"],[97,79,75,17],[98,14,75,18,"style"],[98,19,75,23],[98,21,75,25],[99,16,75,27,"fontSize"],[99,24,75,35],[99,26,75,37],[99,28,75,39],[100,16,75,41,"fontWeight"],[100,26,75,51],[100,28,75,53],[100,33,75,58],[101,16,75,60,"color"],[101,21,75,65],[101,23,75,67],[102,14,75,74],[102,15,75,76],[103,14,75,76,"children"],[103,22,75,76],[103,24,75,77],[104,12,77,12],[104,13,77,18],[104,14,77,19],[104,29,78,12],[104,33,78,12,"_reactJsxRuntime"],[104,49,78,12],[104,50,78,12,"jsx"],[104,53,78,12],[104,55,78,13,"_reactNative"],[104,67,78,17],[104,68,78,17,"Text"],[104,72,78,17],[105,14,78,18,"style"],[105,19,78,23],[105,21,78,25],[106,16,78,27,"fontSize"],[106,24,78,35],[106,26,78,37],[106,28,78,39],[107,16,78,41,"color"],[107,21,78,46],[107,23,78,48],[107,32,78,57],[108,16,78,59,"marginTop"],[108,25,78,68],[108,27,78,70],[109,14,78,72],[109,15,78,74],[110,14,78,74,"children"],[110,22,78,74],[110,24,78,75],[111,12,80,12],[111,13,80,18],[111,14,80,19],[112,10,80,19],[112,11,81,16],[112,12,81,17],[112,27,83,10],[112,31,83,10,"_reactJsxRuntime"],[112,47,83,10],[112,48,83,10,"jsx"],[112,51,83,10],[112,53,83,11,"_reactNative"],[112,65,83,15],[112,66,83,15,"View"],[112,70,83,15],[113,12,83,16,"style"],[113,17,83,21],[113,19,83,23],[114,14,83,25,"paddingHorizontal"],[114,31,83,42],[114,33,83,44],[115,12,83,47],[115,13,83,49],[116,12,83,49,"children"],[116,20,83,49],[116,35,84,12],[116,39,84,12,"_reactJsxRuntime"],[116,55,84,12],[116,56,84,12,"jsx"],[116,59,84,12],[116,61,84,13,"_AvailabilityPrompt"],[116,80,84,31],[116,81,84,31,"AvailabilityPrompt"],[116,99,84,31],[117,14,85,14,"matchId"],[117,21,85,21],[117,23,85,23,"matchId"],[117,30,85,31],[118,14,86,14,"userId"],[118,20,86,20],[118,22,86,22,"userId"],[118,28,86,29],[119,14,87,14,"triggerSource"],[119,27,87,27],[119,29,87,29,"triggerSource"],[119,42,87,43],[120,14,88,14,"onSaved"],[120,21,88,21],[120,23,88,23,"onSaved"],[120,30,88,31],[121,14,89,14,"onSkipped"],[121,23,89,23],[121,25,89,25,"onSkipped"],[121,34,89,35],[122,14,90,14,"showSkip"],[122,22,90,22],[123,14,91,14,"showNotSure"],[123,25,91,25],[123,27,91,27],[123,31,91,32],[123,32,91,33],[124,12,91,33],[124,13,92,13],[125,10,92,14],[125,11,93,16],[125,12,93,17],[126,8,93,17],[126,9,94,19],[127,6,94,20],[127,7,95,17],[128,4,95,18],[128,5,96,11],[128,6,96,12],[129,2,98,0],[130,0,98,1],[130,3]],"functionMap":{"names":["<global>","AvailabilityModal","useMutation$argument_0.mutationFn","useMutation$argument_0.onSuccess","useMutation$argument_0.onError","handleRequestClose","Pressable.props.onPress"],"mappings":"AAA;eCI;gBCY;KDa;eEC;KFK;aGC;KHG;6BIG;GJI;mBKkB,QL;CDiC"},"hasCjsExports":false},"type":"js/module"}]}