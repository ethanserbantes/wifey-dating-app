{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useReportUser = useReportUser;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  function useReportUser(matchInfo, user) {\n    const [reportOpen, setReportOpen] = (0, _react.useState)(false);\n    const [reportType, setReportType] = (0, _react.useState)(\"HARASSMENT\");\n    const [reportDesc, setReportDesc] = (0, _react.useState)(\"\");\n    const [reportSending, setReportSending] = (0, _react.useState)(false);\n    const submitReport = (0, _react.useCallback)(async () => {\n      if (!user?.id) return;\n      const reportedUserId = matchInfo?.otherUser?.id;\n      if (!reportedUserId) {\n        Alert.default.alert(\"Report failed\", \"Could not find the other user.\");\n        return;\n      }\n      const description = reportDesc.trim();\n      if (!description) {\n        Alert.default.alert(\"Add details\", \"Please add a short description.\");\n        return;\n      }\n      try {\n        setReportSending(true);\n        const resp = await fetch(\"/api/reports\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            reporterUserId: user.id,\n            reportedUserId,\n            reportType,\n            description\n          })\n        });\n        if (!resp.ok) {\n          const text = await resp.text();\n          throw new Error(`When posting /api/reports, the response was [${resp.status}] ${resp.statusText}. ${text}`);\n        }\n        setReportOpen(false);\n        setReportDesc(\"\");\n        Alert.default.alert(\"Report sent\", \"Thanks â€” our team will review it. You can also block this user from the menu.\");\n      } catch (e) {\n        console.error(\"Could not report user\", e);\n        Alert.default.alert(\"Report failed\", \"Could not send your report right now.\");\n      } finally {\n        setReportSending(false);\n      }\n    }, [matchInfo?.otherUser?.id, reportDesc, reportType, user?.id]);\n    return {\n      reportOpen,\n      setReportOpen,\n      reportType,\n      setReportType,\n      reportDesc,\n      setReportDesc,\n      reportSending,\n      submitReport\n    };\n  }\n});","lineCount":72,"map":[[12,2,4,0,"exports"],[12,9,4,0],[12,10,4,0,"useReportUser"],[12,23,4,0],[12,26,4,0,"useReportUser"],[12,39,4,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,1,46],[14,6,1,46,"_reactNativeWebDistExportsAlert"],[14,37,1,46],[14,40,1,46,"require"],[14,47,1,46],[14,48,1,46,"_dependencyMap"],[14,62,1,46],[15,2,1,46],[15,6,1,46,"Alert"],[15,11,1,46],[15,14,1,46,"_interopDefault"],[15,29,1,46],[15,30,1,46,"_reactNativeWebDistExportsAlert"],[15,61,1,46],[16,2,4,7],[16,11,4,16,"useReportUser"],[16,24,4,29,"useReportUser"],[16,25,4,30,"matchInfo"],[16,34,4,39],[16,36,4,41,"user"],[16,40,4,45],[16,42,4,47],[17,4,5,2],[17,10,5,8],[17,11,5,9,"reportOpen"],[17,21,5,19],[17,23,5,21,"setReportOpen"],[17,36,5,34],[17,37,5,35],[17,40,5,38],[17,44,5,38,"useState"],[17,50,5,46],[17,51,5,46,"useState"],[17,59,5,46],[17,61,5,47],[17,66,5,52],[17,67,5,53],[18,4,6,2],[18,10,6,8],[18,11,6,9,"reportType"],[18,21,6,19],[18,23,6,21,"setReportType"],[18,36,6,34],[18,37,6,35],[18,40,6,38],[18,44,6,38,"useState"],[18,50,6,46],[18,51,6,46,"useState"],[18,59,6,46],[18,61,6,47],[18,73,6,59],[18,74,6,60],[19,4,7,2],[19,10,7,8],[19,11,7,9,"reportDesc"],[19,21,7,19],[19,23,7,21,"setReportDesc"],[19,36,7,34],[19,37,7,35],[19,40,7,38],[19,44,7,38,"useState"],[19,50,7,46],[19,51,7,46,"useState"],[19,59,7,46],[19,61,7,47],[19,63,7,49],[19,64,7,50],[20,4,8,2],[20,10,8,8],[20,11,8,9,"reportSending"],[20,24,8,22],[20,26,8,24,"setReportSending"],[20,42,8,40],[20,43,8,41],[20,46,8,44],[20,50,8,44,"useState"],[20,56,8,52],[20,57,8,52,"useState"],[20,65,8,52],[20,67,8,53],[20,72,8,58],[20,73,8,59],[21,4,10,2],[21,10,10,8,"submitReport"],[21,22,10,20],[21,25,10,23],[21,29,10,23,"useCallback"],[21,35,10,34],[21,36,10,34,"useCallback"],[21,47,10,34],[21,49,10,35],[21,61,10,47],[22,6,11,4],[22,10,11,8],[22,11,11,9,"user"],[22,15,11,13],[22,17,11,15,"id"],[22,19,11,17],[22,21,11,19],[23,6,12,4],[23,12,12,10,"reportedUserId"],[23,26,12,24],[23,29,12,27,"matchInfo"],[23,38,12,36],[23,40,12,38,"otherUser"],[23,49,12,47],[23,51,12,49,"id"],[23,53,12,51],[24,6,13,4],[24,10,13,8],[24,11,13,9,"reportedUserId"],[24,25,13,23],[24,27,13,25],[25,8,14,6,"Alert"],[25,13,14,11],[25,14,14,11,"default"],[25,21,14,11],[25,22,14,12,"alert"],[25,27,14,17],[25,28,14,18],[25,43,14,33],[25,45,14,35],[25,77,14,67],[25,78,14,68],[26,8,15,6],[27,6,16,4],[28,6,18,4],[28,12,18,10,"description"],[28,23,18,21],[28,26,18,24,"reportDesc"],[28,36,18,34],[28,37,18,35,"trim"],[28,41,18,39],[28,42,18,40],[28,43,18,41],[29,6,19,4],[29,10,19,8],[29,11,19,9,"description"],[29,22,19,20],[29,24,19,22],[30,8,20,6,"Alert"],[30,13,20,11],[30,14,20,11,"default"],[30,21,20,11],[30,22,20,12,"alert"],[30,27,20,17],[30,28,20,18],[30,41,20,31],[30,43,20,33],[30,76,20,66],[30,77,20,67],[31,8,21,6],[32,6,22,4],[33,6,24,4],[33,10,24,8],[34,8,25,6,"setReportSending"],[34,24,25,22],[34,25,25,23],[34,29,25,27],[34,30,25,28],[35,8,26,6],[35,14,26,12,"resp"],[35,18,26,16],[35,21,26,19],[35,27,26,25,"fetch"],[35,32,26,30],[35,33,26,31],[35,47,26,45],[35,49,26,47],[36,10,27,8,"method"],[36,16,27,14],[36,18,27,16],[36,24,27,22],[37,10,28,8,"headers"],[37,17,28,15],[37,19,28,17],[38,12,28,19],[38,26,28,33],[38,28,28,35],[39,10,28,54],[39,11,28,55],[40,10,29,8,"body"],[40,14,29,12],[40,16,29,14,"JSON"],[40,20,29,18],[40,21,29,19,"stringify"],[40,30,29,28],[40,31,29,29],[41,12,30,10,"reporterUserId"],[41,26,30,24],[41,28,30,26,"user"],[41,32,30,30],[41,33,30,31,"id"],[41,35,30,33],[42,12,31,10,"reportedUserId"],[42,26,31,24],[43,12,32,10,"reportType"],[43,22,32,20],[44,12,33,10,"description"],[45,10,34,8],[45,11,34,9],[46,8,35,6],[46,9,35,7],[46,10,35,8],[47,8,37,6],[47,12,37,10],[47,13,37,11,"resp"],[47,17,37,15],[47,18,37,16,"ok"],[47,20,37,18],[47,22,37,20],[48,10,38,8],[48,16,38,14,"text"],[48,20,38,18],[48,23,38,21],[48,29,38,27,"resp"],[48,33,38,31],[48,34,38,32,"text"],[48,38,38,36],[48,39,38,37],[48,40,38,38],[49,10,39,8],[49,16,39,14],[49,20,39,18,"Error"],[49,25,39,23],[49,26,40,10],[49,74,40,58,"resp"],[49,78,40,62],[49,79,40,63,"status"],[49,85,40,69],[49,90,40,74,"resp"],[49,94,40,78],[49,95,40,79,"statusText"],[49,105,40,89],[49,110,40,94,"text"],[49,114,40,98],[49,116,41,8],[49,117,41,9],[50,8,42,6],[51,8,44,6,"setReportOpen"],[51,21,44,19],[51,22,44,20],[51,27,44,25],[51,28,44,26],[52,8,45,6,"setReportDesc"],[52,21,45,19],[52,22,45,20],[52,24,45,22],[52,25,45,23],[53,8,46,6,"Alert"],[53,13,46,11],[53,14,46,11,"default"],[53,21,46,11],[53,22,46,12,"alert"],[53,27,46,17],[53,28,47,8],[53,41,47,21],[53,43,48,8],[53,122,49,6],[53,123,49,7],[54,6,50,4],[54,7,50,5],[54,8,50,6],[54,15,50,13,"e"],[54,16,50,14],[54,18,50,16],[55,8,51,6,"console"],[55,15,51,13],[55,16,51,14,"error"],[55,21,51,19],[55,22,51,20],[55,45,51,43],[55,47,51,45,"e"],[55,48,51,46],[55,49,51,47],[56,8,52,6,"Alert"],[56,13,52,11],[56,14,52,11,"default"],[56,21,52,11],[56,22,52,12,"alert"],[56,27,52,17],[56,28,52,18],[56,43,52,33],[56,45,52,35],[56,84,52,74],[56,85,52,75],[57,6,53,4],[57,7,53,5],[57,16,53,14],[58,8,54,6,"setReportSending"],[58,24,54,22],[58,25,54,23],[58,30,54,28],[58,31,54,29],[59,6,55,4],[60,4,56,2],[60,5,56,3],[60,7,56,5],[60,8,56,6,"matchInfo"],[60,17,56,15],[60,19,56,17,"otherUser"],[60,28,56,26],[60,30,56,28,"id"],[60,32,56,30],[60,34,56,32,"reportDesc"],[60,44,56,42],[60,46,56,44,"reportType"],[60,56,56,54],[60,58,56,56,"user"],[60,62,56,60],[60,64,56,62,"id"],[60,66,56,64],[60,67,56,65],[60,68,56,66],[61,4,58,2],[61,11,58,9],[62,6,59,4,"reportOpen"],[62,16,59,14],[63,6,60,4,"setReportOpen"],[63,19,60,17],[64,6,61,4,"reportType"],[64,16,61,14],[65,6,62,4,"setReportType"],[65,19,62,17],[66,6,63,4,"reportDesc"],[66,16,63,14],[67,6,64,4,"setReportDesc"],[67,19,64,17],[68,6,65,4,"reportSending"],[68,19,65,17],[69,6,66,4,"submitReport"],[70,4,67,2],[70,5,67,3],[71,2,68,0],[72,0,68,1],[72,3]],"functionMap":{"names":["<global>","useReportUser","submitReport"],"mappings":"AAA;OCG;mCCM;GD8C;CDY"},"hasCjsExports":false},"type":"js/module"}]}