{"dependencies":[{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":31,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _uploadcareUploadClient = require(_dependencyMap[0], \"@uploadcare/upload-client\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  const client = new _uploadcareUploadClient.UploadClient({\n    publicKey: process.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    const [loading, setLoading] = React.useState(false);\n    const upload = React.useCallback(async input => {\n      try {\n        setLoading(true);\n        const baseURL = process.env.EXPO_PUBLIC_BASE_URL || \"\";\n        let response;\n        if ('reactNativeAsset' in input && input.reactNativeAsset) {\n          if (input.reactNativeAsset.file) {\n            const formData = new FormData();\n            formData.append('file', input.reactNativeAsset.file);\n            const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n            response = await fetch(uploadUrl, {\n              method: 'POST',\n              body: formData\n            });\n          } else {\n            const presignUrl = baseURL ? `${baseURL}/_create/api/upload/presign/` : \"/_create/api/upload/presign/\";\n            const response = await fetch(presignUrl, {\n              method: 'POST'\n            });\n            const {\n              secureSignature,\n              secureExpire\n            } = await response.json();\n            const result = await client.uploadFile(input.reactNativeAsset, {\n              fileName: input.reactNativeAsset.name ?? input.reactNativeAsset.uri.split('/').pop(),\n              contentType: input.reactNativeAsset.mimeType,\n              secureSignature,\n              secureExpire\n            });\n            return {\n              url: `${process.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n              mimeType: result.mimeType || null\n            };\n          }\n        } else if ('url' in input) {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              url: input.url\n            })\n          });\n        } else if ('base64' in input) {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              base64: input.base64\n            })\n          });\n        } else {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/octet-stream'\n            },\n            body: input.buffer\n          });\n        }\n        if (!response.ok) {\n          if (response.status === 413) {\n            throw new Error('Upload failed: File too large.');\n          }\n          throw new Error('Upload failed');\n        }\n        const data = await response.json();\n        return {\n          url: data.url,\n          mimeType: data.mimeType || null\n        };\n      } catch (uploadError) {\n        if (uploadError instanceof Error) {\n          return {\n            error: uploadError.message\n          };\n        }\n        if (typeof uploadError === 'string') {\n          return {\n            error: uploadError\n          };\n        }\n        return {\n          error: 'Upload failed'\n        };\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n    return [upload, {\n      loading\n    }];\n  }\n  var _default = useUpload;\n});","lineCount":142,"map":[[22,2,92,0,"Object"],[22,8,92,0],[22,9,92,0,"defineProperty"],[22,23,92,0],[22,24,92,0,"exports"],[22,31,92,0],[23,4,92,0,"enumerable"],[23,14,92,0],[24,4,92,0,"get"],[24,7,92,0],[24,18,92,0,"get"],[24,19,92,0],[25,6,92,0],[25,13,92,0,"_default"],[25,21,92,0],[26,4,92,0],[27,2,92,0],[28,2,91,0,"Object"],[28,8,91,0],[28,9,91,0,"defineProperty"],[28,23,91,0],[28,24,91,0,"exports"],[28,31,91,0],[29,4,91,0,"enumerable"],[29,14,91,0],[30,4,91,0,"get"],[30,7,91,0],[30,18,91,0,"get"],[30,19,91,0],[31,6,91,0],[31,13,91,9,"useUpload"],[31,22,91,18],[32,4,91,18],[33,2,91,18],[34,2,1,0],[34,6,1,0,"_uploadcareUploadClient"],[34,29,1,0],[34,32,1,0,"require"],[34,39,1,0],[34,40,1,0,"_dependencyMap"],[34,54,1,0],[35,2,2,0],[35,6,2,0,"_react"],[35,12,2,0],[35,15,2,0,"require"],[35,22,2,0],[35,23,2,0,"_dependencyMap"],[35,37,2,0],[36,2,2,0],[36,6,2,0,"React"],[36,11,2,0],[36,14,2,0,"_interopNamespace"],[36,31,2,0],[36,32,2,0,"_react"],[36,38,2,0],[37,2,3,0],[37,8,3,6,"client"],[37,14,3,12],[37,17,3,15],[37,21,3,19,"UploadClient"],[37,44,3,31],[37,45,3,31,"UploadClient"],[37,57,3,31],[37,58,3,32],[38,4,3,34,"publicKey"],[38,13,3,43],[38,15,3,45,"process"],[38,22,3,52],[38,23,3,53,"env"],[38,26,3,56],[38,27,3,57,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[39,2,3,91],[39,3,3,92],[39,4,3,93],[40,2,5,0],[40,11,5,9,"useUpload"],[40,20,5,18,"useUpload"],[40,21,5,18],[40,23,5,21],[41,4,6,2],[41,10,6,8],[41,11,6,9,"loading"],[41,18,6,16],[41,20,6,18,"setLoading"],[41,30,6,28],[41,31,6,29],[41,34,6,32,"React"],[41,39,6,37],[41,40,6,38,"useState"],[41,48,6,46],[41,49,6,47],[41,54,6,52],[41,55,6,53],[42,4,7,2],[42,10,7,8,"upload"],[42,16,7,14],[42,19,7,17,"React"],[42,24,7,22],[42,25,7,23,"useCallback"],[42,36,7,34],[42,37,7,35],[42,43,7,42,"input"],[42,48,7,47],[42,52,7,52],[43,6,8,4],[43,10,8,8],[44,8,9,6,"setLoading"],[44,18,9,16],[44,19,9,17],[44,23,9,21],[44,24,9,22],[45,8,10,6],[45,14,10,12,"baseURL"],[45,21,10,19],[45,24,10,22,"process"],[45,31,10,29],[45,32,10,30,"env"],[45,35,10,33],[45,36,10,34,"EXPO_PUBLIC_BASE_URL"],[45,56,10,54],[45,60,10,58],[45,62,10,60],[46,8,11,6],[46,12,11,10,"response"],[46,20,11,18],[47,8,12,6],[47,12,12,10],[47,30,12,28],[47,34,12,32,"input"],[47,39,12,37],[47,43,12,41,"input"],[47,48,12,46],[47,49,12,47,"reactNativeAsset"],[47,65,12,63],[47,67,12,65],[48,10,13,8],[48,14,13,12,"input"],[48,19,13,17],[48,20,13,18,"reactNativeAsset"],[48,36,13,34],[48,37,13,35,"file"],[48,41,13,39],[48,43,13,41],[49,12,14,10],[49,18,14,16,"formData"],[49,26,14,24],[49,29,14,27],[49,33,14,31,"FormData"],[49,41,14,39],[49,42,14,40],[49,43,14,41],[50,12,15,10,"formData"],[50,20,15,18],[50,21,15,19,"append"],[50,27,15,25],[50,28,15,26],[50,34,15,32],[50,36,15,34,"input"],[50,41,15,39],[50,42,15,40,"reactNativeAsset"],[50,58,15,56],[50,59,15,57,"file"],[50,63,15,61],[50,64,15,62],[51,12,16,10],[51,18,16,16,"uploadUrl"],[51,27,16,25],[51,30,16,28,"baseURL"],[51,37,16,35],[51,40,16,38],[51,43,16,41,"baseURL"],[51,50,16,48],[51,72,16,70],[51,75,16,73],[51,97,16,95],[52,12,17,10,"response"],[52,20,17,18],[52,23,17,21],[52,29,17,27,"fetch"],[52,34,17,32],[52,35,17,33,"uploadUrl"],[52,44,17,42],[52,46,17,44],[53,14,18,12,"method"],[53,20,18,18],[53,22,18,20],[53,28,18,26],[54,14,19,12,"body"],[54,18,19,16],[54,20,19,18,"formData"],[55,12,20,10],[55,13,20,11],[55,14,20,12],[56,10,21,8],[56,11,21,9],[56,17,21,15],[57,12,22,10],[57,18,22,16,"presignUrl"],[57,28,22,26],[57,31,22,29,"baseURL"],[57,38,22,36],[57,41,22,39],[57,44,22,42,"baseURL"],[57,51,22,49],[57,81,22,79],[57,84,22,82],[57,114,22,112],[58,12,24,10],[58,18,24,16,"response"],[58,26,24,24],[58,29,24,27],[58,35,24,33,"fetch"],[58,40,24,38],[58,41,24,39,"presignUrl"],[58,51,24,49],[58,53,24,51],[59,14,25,12,"method"],[59,20,25,18],[59,22,25,20],[60,12,26,10],[60,13,26,11],[60,14,26,12],[61,12,27,10],[61,18,27,16],[62,14,27,18,"secureSignature"],[62,29,27,33],[63,14,27,35,"secureExpire"],[64,12,27,48],[64,13,27,49],[64,16,27,52],[64,22,27,58,"response"],[64,30,27,66],[64,31,27,67,"json"],[64,35,27,71],[64,36,27,72],[64,37,27,73],[65,12,28,10],[65,18,28,16,"result"],[65,24,28,22],[65,27,28,25],[65,33,28,31,"client"],[65,39,28,37],[65,40,28,38,"uploadFile"],[65,50,28,48],[65,51,28,49,"input"],[65,56,28,54],[65,57,28,55,"reactNativeAsset"],[65,73,28,71],[65,75,28,73],[66,14,29,12,"fileName"],[66,22,29,20],[66,24,29,22,"input"],[66,29,29,27],[66,30,29,28,"reactNativeAsset"],[66,46,29,44],[66,47,29,45,"name"],[66,51,29,49],[66,55,29,53,"input"],[66,60,29,58],[66,61,29,59,"reactNativeAsset"],[66,77,29,75],[66,78,29,76,"uri"],[66,81,29,79],[66,82,29,80,"split"],[66,87,29,85],[66,88,29,86],[66,91,29,89],[66,92,29,90],[66,93,29,91,"pop"],[66,96,29,94],[66,97,29,95],[66,98,29,96],[67,14,30,12,"contentType"],[67,25,30,23],[67,27,30,25,"input"],[67,32,30,30],[67,33,30,31,"reactNativeAsset"],[67,49,30,47],[67,50,30,48,"mimeType"],[67,58,30,56],[68,14,31,12,"secureSignature"],[68,29,31,27],[69,14,32,12,"secureExpire"],[70,12,33,10],[70,13,33,11],[70,14,33,12],[71,12,34,10],[71,19,34,17],[72,14,35,12,"url"],[72,17,35,15],[72,19,35,17],[72,22,35,20,"process"],[72,29,35,27],[72,30,35,28,"env"],[72,33,35,31],[72,34,35,32,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[72,74,35,72],[72,78,35,76,"result"],[72,84,35,82],[72,85,35,83,"uuid"],[72,89,35,87],[72,92,35,90],[73,14,36,12,"mimeType"],[73,22,36,20],[73,24,36,22,"result"],[73,30,36,28],[73,31,36,29,"mimeType"],[73,39,36,37],[73,43,36,41],[74,12,37,10],[74,13,37,11],[75,10,38,8],[76,8,39,6],[76,9,39,7],[76,15,39,13],[76,19,39,17],[76,24,39,22],[76,28,39,26,"input"],[76,33,39,31],[76,35,39,33],[77,10,40,8],[77,16,40,14,"uploadUrl"],[77,25,40,23],[77,28,40,26,"baseURL"],[77,35,40,33],[77,38,40,36],[77,41,40,39,"baseURL"],[77,48,40,46],[77,70,40,68],[77,73,40,71],[77,95,40,93],[78,10,41,8,"response"],[78,18,41,16],[78,21,41,19],[78,27,41,25,"fetch"],[78,32,41,30],[78,33,41,31,"uploadUrl"],[78,42,41,40],[78,44,41,42],[79,12,42,10,"method"],[79,18,42,16],[79,20,42,18],[79,26,42,24],[80,12,43,10,"headers"],[80,19,43,17],[80,21,43,19],[81,14,44,12],[81,28,44,26],[81,30,44,28],[82,12,45,10],[82,13,45,11],[83,12,46,10,"body"],[83,16,46,14],[83,18,46,16,"JSON"],[83,22,46,20],[83,23,46,21,"stringify"],[83,32,46,30],[83,33,46,31],[84,14,46,33,"url"],[84,17,46,36],[84,19,46,38,"input"],[84,24,46,43],[84,25,46,44,"url"],[85,12,46,48],[85,13,46,49],[86,10,47,8],[86,11,47,9],[86,12,47,10],[87,8,48,6],[87,9,48,7],[87,15,48,13],[87,19,48,17],[87,27,48,25],[87,31,48,29,"input"],[87,36,48,34],[87,38,48,36],[88,10,49,8],[88,16,49,14,"uploadUrl"],[88,25,49,23],[88,28,49,26,"baseURL"],[88,35,49,33],[88,38,49,36],[88,41,49,39,"baseURL"],[88,48,49,46],[88,70,49,68],[88,73,49,71],[88,95,49,93],[89,10,50,8,"response"],[89,18,50,16],[89,21,50,19],[89,27,50,25,"fetch"],[89,32,50,30],[89,33,50,31,"uploadUrl"],[89,42,50,40],[89,44,50,42],[90,12,51,10,"method"],[90,18,51,16],[90,20,51,18],[90,26,51,24],[91,12,52,10,"headers"],[91,19,52,17],[91,21,52,19],[92,14,53,12],[92,28,53,26],[92,30,53,28],[93,12,54,10],[93,13,54,11],[94,12,55,10,"body"],[94,16,55,14],[94,18,55,16,"JSON"],[94,22,55,20],[94,23,55,21,"stringify"],[94,32,55,30],[94,33,55,31],[95,14,55,33,"base64"],[95,20,55,39],[95,22,55,41,"input"],[95,27,55,46],[95,28,55,47,"base64"],[96,12,55,54],[96,13,55,55],[97,10,56,8],[97,11,56,9],[97,12,56,10],[98,8,57,6],[98,9,57,7],[98,15,57,13],[99,10,58,8],[99,16,58,14,"uploadUrl"],[99,25,58,23],[99,28,58,26,"baseURL"],[99,35,58,33],[99,38,58,36],[99,41,58,39,"baseURL"],[99,48,58,46],[99,70,58,68],[99,73,58,71],[99,95,58,93],[100,10,59,8,"response"],[100,18,59,16],[100,21,59,19],[100,27,59,25,"fetch"],[100,32,59,30],[100,33,59,31,"uploadUrl"],[100,42,59,40],[100,44,59,42],[101,12,60,10,"method"],[101,18,60,16],[101,20,60,18],[101,26,60,24],[102,12,61,10,"headers"],[102,19,61,17],[102,21,61,19],[103,14,62,12],[103,28,62,26],[103,30,62,28],[104,12,63,10],[104,13,63,11],[105,12,64,10,"body"],[105,16,64,14],[105,18,64,16,"input"],[105,23,64,21],[105,24,64,22,"buffer"],[106,10,65,8],[106,11,65,9],[106,12,65,10],[107,8,66,6],[108,8,67,6],[108,12,67,10],[108,13,67,11,"response"],[108,21,67,19],[108,22,67,20,"ok"],[108,24,67,22],[108,26,67,24],[109,10,68,8],[109,14,68,12,"response"],[109,22,68,20],[109,23,68,21,"status"],[109,29,68,27],[109,34,68,32],[109,37,68,35],[109,39,68,37],[110,12,69,10],[110,18,69,16],[110,22,69,20,"Error"],[110,27,69,25],[110,28,69,26],[110,60,69,58],[110,61,69,59],[111,10,70,8],[112,10,71,8],[112,16,71,14],[112,20,71,18,"Error"],[112,25,71,23],[112,26,71,24],[112,41,71,39],[112,42,71,40],[113,8,72,6],[114,8,73,6],[114,14,73,12,"data"],[114,18,73,16],[114,21,73,19],[114,27,73,25,"response"],[114,35,73,33],[114,36,73,34,"json"],[114,40,73,38],[114,41,73,39],[114,42,73,40],[115,8,74,6],[115,15,74,13],[116,10,74,15,"url"],[116,13,74,18],[116,15,74,20,"data"],[116,19,74,24],[116,20,74,25,"url"],[116,23,74,28],[117,10,74,30,"mimeType"],[117,18,74,38],[117,20,74,40,"data"],[117,24,74,44],[117,25,74,45,"mimeType"],[117,33,74,53],[117,37,74,57],[118,8,74,62],[118,9,74,63],[119,6,75,4],[119,7,75,5],[119,8,75,6],[119,15,75,13,"uploadError"],[119,26,75,24],[119,28,75,26],[120,8,76,6],[120,12,76,10,"uploadError"],[120,23,76,21],[120,35,76,33,"Error"],[120,40,76,38],[120,42,76,40],[121,10,77,8],[121,17,77,15],[122,12,77,17,"error"],[122,17,77,22],[122,19,77,24,"uploadError"],[122,30,77,35],[122,31,77,36,"message"],[123,10,77,44],[123,11,77,45],[124,8,78,6],[125,8,79,6],[125,12,79,10],[125,19,79,17,"uploadError"],[125,30,79,28],[125,35,79,33],[125,43,79,41],[125,45,79,43],[126,10,80,8],[126,17,80,15],[127,12,80,17,"error"],[127,17,80,22],[127,19,80,24,"uploadError"],[128,10,80,36],[128,11,80,37],[129,8,81,6],[130,8,82,6],[130,15,82,13],[131,10,82,15,"error"],[131,15,82,20],[131,17,82,22],[132,8,82,38],[132,9,82,39],[133,6,83,4],[133,7,83,5],[133,16,83,14],[134,8,84,6,"setLoading"],[134,18,84,16],[134,19,84,17],[134,24,84,22],[134,25,84,23],[135,6,85,4],[136,4,86,2],[136,5,86,3],[136,7,86,5],[136,9,86,7],[136,10,86,8],[137,4,88,2],[137,11,88,9],[137,12,88,10,"upload"],[137,18,88,16],[137,20,88,18],[138,6,88,20,"loading"],[139,4,88,28],[139,5,88,29],[139,6,88,30],[140,2,89,0],[141,2,92,0],[141,6,92,0,"_default"],[141,14,92,0],[141,17,92,15,"useUpload"],[141,26,92,24],[142,0,92,25],[142,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GD+E;CDG"},"hasCjsExports":false},"type":"js/module"}]}