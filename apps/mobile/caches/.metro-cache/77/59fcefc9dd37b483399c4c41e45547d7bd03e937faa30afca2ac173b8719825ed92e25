{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":78,"index":145}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":146},"end":{"line":3,"column":69,"index":215}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useLikesData = useLikesData;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  function useLikesData() {\n    _s();\n    const queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    const [isPullRefreshing, setIsPullRefreshing] = (0, _react.useState)(false);\n    const userQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"storedUser\"],\n      queryFn: async () => {\n        const raw = await AsyncStorage.default.getItem(\"user\");\n        if (!raw) {\n          return null;\n        }\n        try {\n          return JSON.parse(raw);\n        } catch (e) {\n          console.error(\"Invalid user JSON in AsyncStorage; clearing:\", e);\n          try {\n            await AsyncStorage.default.removeItem(\"user\");\n          } catch (err) {\n            console.error(err);\n          }\n          return null;\n        }\n      }\n    });\n    const user = userQuery.data;\n    const userId = user?.id;\n    const userEmail = user?.email;\n    const likesQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"likesMe\", userId || null, userEmail || null],\n      enabled: !!userId || !!userEmail,\n      queryFn: async () => {\n        const params = [];\n        if (userId) {\n          params.push(`userId=${encodeURIComponent(String(userId))}`);\n        }\n        if (userEmail) {\n          params.push(`email=${encodeURIComponent(String(userEmail))}`);\n        }\n        const queryString = params.length ? `?${params.join(\"&\")}` : \"\";\n        const response = await fetch(`/api/likes/me${queryString}`);\n        if (!response.ok) {\n          throw new Error(`When fetching /api/likes/me, the response was [${response.status}] ${response.statusText}`);\n        }\n        return response.json();\n      },\n      staleTime: 0,\n      refetchOnMount: true,\n      refetchInterval: false,\n      retry: 1\n    });\n    const effectiveUserId = (0, _react.useMemo)(() => {\n      // IMPORTANT: /api/likes/me can map email -> users.id.\n      // If AsyncStorage is stale (common after deleting/recreating accounts),\n      // actions like \"like back\" must use the resolved id or matches won't form.\n      const resolved = Number(likesQuery.data?.resolvedUserId);\n      if (Number.isFinite(resolved)) {\n        return resolved;\n      }\n      const stored = Number(userId);\n      return Number.isFinite(stored) ? stored : null;\n    }, [likesQuery.data?.resolvedUserId, userId]);\n\n    // Best-effort: if the backend resolved a different userId for this email,\n    // rewrite AsyncStorage so the rest of the app (feed, push registration, etc.) stays consistent.\n    (0, _react.useEffect)(() => {\n      const resolved = Number(likesQuery.data?.resolvedUserId);\n      const stored = Number(userId);\n      const shouldUpdate = Number.isFinite(resolved) && Number.isFinite(stored) && resolved !== stored && !!userEmail;\n      if (!shouldUpdate) {\n        return;\n      }\n      (async () => {\n        try {\n          const merged = {\n            ...(user || {}),\n            id: resolved,\n            email: userEmail\n          };\n          await AsyncStorage.default.setItem(\"user\", JSON.stringify(merged));\n          // Make sure any other screens that rely on the cached user reload quickly.\n          queryClient.invalidateQueries({\n            queryKey: [\"storedUser\"]\n          });\n        } catch (e) {\n          console.error(\"[LIKES] Could not update cached userId\", e);\n        }\n      })();\n    }, [likesQuery.data?.resolvedUserId, queryClient, user, userEmail, userId]);\n    const likes = likesQuery.data?.likes || [];\n    const likeBackMutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: async ({\n        profileId\n      }) => {\n        const fromUserId = Number(effectiveUserId);\n        if (!Number.isFinite(fromUserId)) {\n          throw new Error(\"User not loaded\");\n        }\n        const response = await fetch(\"/api/profiles/like\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            fromUserId,\n            toUserId: profileId\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`When fetching /api/profiles/like, the response was [${response.status}] ${response.statusText}`);\n        }\n        return response.json();\n      },\n      onMutate: async ({\n        profileId\n      }) => {\n        await queryClient.cancelQueries({\n          queryKey: [\"likesMe\", userId || null, userEmail || null]\n        });\n        const previous = queryClient.getQueryData([\"likesMe\", userId || null, userEmail || null]);\n        queryClient.setQueryData([\"likesMe\", userId || null, userEmail || null], old => {\n          const oldLikes = old?.likes || [];\n          const nextLikes = oldLikes.filter(x => x?.id !== profileId);\n          return {\n            ...(old || {}),\n            likes: nextLikes\n          };\n        });\n\n        // NEW: best-effort remove this profile from any cached Discover feed arrays\n        // so they don't pop up again after a like-back.\n        try {\n          if (effectiveUserId && typeof queryClient.setQueriesData === \"function\") {\n            queryClient.setQueriesData({\n              queryKey: [\"profileFeed\", Number(effectiveUserId)]\n            }, old => {\n              if (!Array.isArray(old)) return old;\n              const pid = Number(profileId);\n              return old.filter(p => Number(p?.id) !== pid);\n            });\n          }\n        } catch (e) {\n          console.error(e);\n        }\n        return {\n          previous\n        };\n      },\n      onError: (error, _variables, context) => {\n        console.error(\"Error liking back:\", error);\n        if (context?.previous) {\n          queryClient.setQueryData([\"likesMe\", userId || null, userEmail || null], context.previous);\n        }\n      },\n      onSettled: (_data, _error, variables) => {\n        queryClient.invalidateQueries({\n          queryKey: [\"likesMe\", userId || null, userEmail || null]\n        });\n        if (effectiveUserId) {\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesSummary\", Number(effectiveUserId)]\n          });\n          queryClient.invalidateQueries({\n            queryKey: [\"matches\", Number(effectiveUserId)]\n          });\n\n          // NEW: also invalidate the Discover feed so a matched/liked user doesn't\n          // linger in an existing cache.\n          queryClient.invalidateQueries({\n            queryKey: [\"profileFeed\", Number(effectiveUserId)]\n          });\n        }\n\n        // If we know who was liked back, remove from cached feed again after settle\n        // (covers cases where the feed was fetched after onMutate ran).\n        try {\n          const profileId = variables?.profileId;\n          if (effectiveUserId && profileId && typeof queryClient.setQueriesData === \"function\") {\n            queryClient.setQueriesData({\n              queryKey: [\"profileFeed\", Number(effectiveUserId)]\n            }, old => {\n              if (!Array.isArray(old)) return old;\n              const pid = Number(profileId);\n              return old.filter(p => Number(p?.id) !== pid);\n            });\n          }\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    });\n    const handleLikeBack = (0, _react.useCallback)(profile => {\n      if (!profile?.id) return;\n      return likeBackMutation.mutate({\n        profileId: profile.id,\n        profile\n      });\n    }, [likeBackMutation]);\n    const onPullToRefresh = (0, _react.useCallback)(async () => {\n      setIsPullRefreshing(true);\n      try {\n        await likesQuery.refetch();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        setIsPullRefreshing(false);\n      }\n    }, [likesQuery]);\n    return {\n      user,\n      userId: effectiveUserId,\n      userEmail,\n      likes,\n      userQuery,\n      likesQuery,\n      likeBackMutation,\n      handleLikeBack,\n      isPullRefreshing,\n      onPullToRefresh\n    };\n  }\n  _s(useLikesData, \"pUCHH9QS6m7m3lrzHt7gvgwhymc=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient, _tanstackReactQuery.useQuery, _tanstackReactQuery.useQuery, _tanstackReactQuery.useMutation];\n  });\n});","lineCount":241,"map":[[13,2,5,0,"exports"],[13,9,5,0],[13,10,5,0,"useLikesData"],[13,22,5,0],[13,25,5,0,"useLikesData"],[13,37,5,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_tanstackReactQuery"],[15,25,2,0],[15,28,2,0,"require"],[15,35,2,0],[15,36,2,0,"_dependencyMap"],[15,50,2,0],[16,2,3,0],[16,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,3,0],[16,45,3,0,"require"],[16,52,3,0],[16,53,3,0,"_dependencyMap"],[16,67,3,0],[17,2,3,0],[17,6,3,0,"AsyncStorage"],[17,18,3,0],[17,21,3,0,"_interopDefault"],[17,36,3,0],[17,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,3,0],[18,2,5,7],[18,11,5,16,"useLikesData"],[18,23,5,28,"useLikesData"],[18,24,5,28],[18,26,5,31],[19,4,5,31,"_s"],[19,6,5,31],[20,4,6,2],[20,10,6,8,"queryClient"],[20,21,6,19],[20,24,6,22],[20,28,6,22,"useQueryClient"],[20,47,6,36],[20,48,6,36,"useQueryClient"],[20,62,6,36],[20,64,6,37],[20,65,6,38],[21,4,7,2],[21,10,7,8],[21,11,7,9,"isPullRefreshing"],[21,27,7,25],[21,29,7,27,"setIsPullRefreshing"],[21,48,7,46],[21,49,7,47],[21,52,7,50],[21,56,7,50,"useState"],[21,62,7,58],[21,63,7,58,"useState"],[21,71,7,58],[21,73,7,59],[21,78,7,64],[21,79,7,65],[22,4,9,2],[22,10,9,8,"userQuery"],[22,19,9,17],[22,22,9,20],[22,26,9,20,"useQuery"],[22,45,9,28],[22,46,9,28,"useQuery"],[22,54,9,28],[22,56,9,29],[23,6,10,4,"queryKey"],[23,14,10,12],[23,16,10,14],[23,17,10,15],[23,29,10,27],[23,30,10,28],[24,6,11,4,"queryFn"],[24,13,11,11],[24,15,11,13],[24,21,11,13,"queryFn"],[24,22,11,13],[24,27,11,25],[25,8,12,6],[25,14,12,12,"raw"],[25,17,12,15],[25,20,12,18],[25,26,12,24,"AsyncStorage"],[25,38,12,36],[25,39,12,36,"default"],[25,46,12,36],[25,47,12,37,"getItem"],[25,54,12,44],[25,55,12,45],[25,61,12,51],[25,62,12,52],[26,8,13,6],[26,12,13,10],[26,13,13,11,"raw"],[26,16,13,14],[26,18,13,16],[27,10,14,8],[27,17,14,15],[27,21,14,19],[28,8,15,6],[29,8,17,6],[29,12,17,10],[30,10,18,8],[30,17,18,15,"JSON"],[30,21,18,19],[30,22,18,20,"parse"],[30,27,18,25],[30,28,18,26,"raw"],[30,31,18,29],[30,32,18,30],[31,8,19,6],[31,9,19,7],[31,10,19,8],[31,17,19,15,"e"],[31,18,19,16],[31,20,19,18],[32,10,20,8,"console"],[32,17,20,15],[32,18,20,16,"error"],[32,23,20,21],[32,24,20,22],[32,70,20,68],[32,72,20,70,"e"],[32,73,20,71],[32,74,20,72],[33,10,21,8],[33,14,21,12],[34,12,22,10],[34,18,22,16,"AsyncStorage"],[34,30,22,28],[34,31,22,28,"default"],[34,38,22,28],[34,39,22,29,"removeItem"],[34,49,22,39],[34,50,22,40],[34,56,22,46],[34,57,22,47],[35,10,23,8],[35,11,23,9],[35,12,23,10],[35,19,23,17,"err"],[35,22,23,20],[35,24,23,22],[36,12,24,10,"console"],[36,19,24,17],[36,20,24,18,"error"],[36,25,24,23],[36,26,24,24,"err"],[36,29,24,27],[36,30,24,28],[37,10,25,8],[38,10,26,8],[38,17,26,15],[38,21,26,19],[39,8,27,6],[40,6,28,4],[41,4,29,2],[41,5,29,3],[41,6,29,4],[42,4,31,2],[42,10,31,8,"user"],[42,14,31,12],[42,17,31,15,"userQuery"],[42,26,31,24],[42,27,31,25,"data"],[42,31,31,29],[43,4,32,2],[43,10,32,8,"userId"],[43,16,32,14],[43,19,32,17,"user"],[43,23,32,21],[43,25,32,23,"id"],[43,27,32,25],[44,4,33,2],[44,10,33,8,"userEmail"],[44,19,33,17],[44,22,33,20,"user"],[44,26,33,24],[44,28,33,26,"email"],[44,33,33,31],[45,4,35,2],[45,10,35,8,"likesQuery"],[45,20,35,18],[45,23,35,21],[45,27,35,21,"useQuery"],[45,46,35,29],[45,47,35,29,"useQuery"],[45,55,35,29],[45,57,35,30],[46,6,36,4,"queryKey"],[46,14,36,12],[46,16,36,14],[46,17,36,15],[46,26,36,24],[46,28,36,26,"userId"],[46,34,36,32],[46,38,36,36],[46,42,36,40],[46,44,36,42,"userEmail"],[46,53,36,51],[46,57,36,55],[46,61,36,59],[46,62,36,60],[47,6,37,4,"enabled"],[47,13,37,11],[47,15,37,13],[47,16,37,14],[47,17,37,15,"userId"],[47,23,37,21],[47,27,37,25],[47,28,37,26],[47,29,37,27,"userEmail"],[47,38,37,36],[48,6,38,4,"queryFn"],[48,13,38,11],[48,15,38,13],[48,21,38,13,"queryFn"],[48,22,38,13],[48,27,38,25],[49,8,39,6],[49,14,39,12,"params"],[49,20,39,18],[49,23,39,21],[49,25,39,23],[50,8,40,6],[50,12,40,10,"userId"],[50,18,40,16],[50,20,40,18],[51,10,41,8,"params"],[51,16,41,14],[51,17,41,15,"push"],[51,21,41,19],[51,22,41,20],[51,32,41,30,"encodeURIComponent"],[51,50,41,48],[51,51,41,49,"String"],[51,57,41,55],[51,58,41,56,"userId"],[51,64,41,62],[51,65,41,63],[51,66,41,64],[51,68,41,66],[51,69,41,67],[52,8,42,6],[53,8,43,6],[53,12,43,10,"userEmail"],[53,21,43,19],[53,23,43,21],[54,10,44,8,"params"],[54,16,44,14],[54,17,44,15,"push"],[54,21,44,19],[54,22,44,20],[54,31,44,29,"encodeURIComponent"],[54,49,44,47],[54,50,44,48,"String"],[54,56,44,54],[54,57,44,55,"userEmail"],[54,66,44,64],[54,67,44,65],[54,68,44,66],[54,70,44,68],[54,71,44,69],[55,8,45,6],[56,8,46,6],[56,14,46,12,"queryString"],[56,25,46,23],[56,28,46,26,"params"],[56,34,46,32],[56,35,46,33,"length"],[56,41,46,39],[56,44,46,42],[56,48,46,46,"params"],[56,54,46,52],[56,55,46,53,"join"],[56,59,46,57],[56,60,46,58],[56,63,46,61],[56,64,46,62],[56,66,46,64],[56,69,46,67],[56,71,46,69],[57,8,48,6],[57,14,48,12,"response"],[57,22,48,20],[57,25,48,23],[57,31,48,29,"fetch"],[57,36,48,34],[57,37,48,35],[57,53,48,51,"queryString"],[57,64,48,62],[57,66,48,64],[57,67,48,65],[58,8,49,6],[58,12,49,10],[58,13,49,11,"response"],[58,21,49,19],[58,22,49,20,"ok"],[58,24,49,22],[58,26,49,24],[59,10,50,8],[59,16,50,14],[59,20,50,18,"Error"],[59,25,50,23],[59,26,51,10],[59,76,51,60,"response"],[59,84,51,68],[59,85,51,69,"status"],[59,91,51,75],[59,96,51,80,"response"],[59,104,51,88],[59,105,51,89,"statusText"],[59,115,51,99],[59,117,52,8],[59,118,52,9],[60,8,53,6],[61,8,55,6],[61,15,55,13,"response"],[61,23,55,21],[61,24,55,22,"json"],[61,28,55,26],[61,29,55,27],[61,30,55,28],[62,6,56,4],[62,7,56,5],[63,6,57,4,"staleTime"],[63,15,57,13],[63,17,57,15],[63,18,57,16],[64,6,58,4,"refetchOnMount"],[64,20,58,18],[64,22,58,20],[64,26,58,24],[65,6,59,4,"refetchInterval"],[65,21,59,19],[65,23,59,21],[65,28,59,26],[66,6,60,4,"retry"],[66,11,60,9],[66,13,60,11],[67,4,61,2],[67,5,61,3],[67,6,61,4],[68,4,63,2],[68,10,63,8,"effectiveUserId"],[68,25,63,23],[68,28,63,26],[68,32,63,26,"useMemo"],[68,38,63,33],[68,39,63,33,"useMemo"],[68,46,63,33],[68,48,63,34],[68,54,63,40],[69,6,64,4],[70,6,65,4],[71,6,66,4],[72,6,67,4],[72,12,67,10,"resolved"],[72,20,67,18],[72,23,67,21,"Number"],[72,29,67,27],[72,30,67,28,"likesQuery"],[72,40,67,38],[72,41,67,39,"data"],[72,45,67,43],[72,47,67,45,"resolvedUserId"],[72,61,67,59],[72,62,67,60],[73,6,68,4],[73,10,68,8,"Number"],[73,16,68,14],[73,17,68,15,"isFinite"],[73,25,68,23],[73,26,68,24,"resolved"],[73,34,68,32],[73,35,68,33],[73,37,68,35],[74,8,69,6],[74,15,69,13,"resolved"],[74,23,69,21],[75,6,70,4],[76,6,72,4],[76,12,72,10,"stored"],[76,18,72,16],[76,21,72,19,"Number"],[76,27,72,25],[76,28,72,26,"userId"],[76,34,72,32],[76,35,72,33],[77,6,73,4],[77,13,73,11,"Number"],[77,19,73,17],[77,20,73,18,"isFinite"],[77,28,73,26],[77,29,73,27,"stored"],[77,35,73,33],[77,36,73,34],[77,39,73,37,"stored"],[77,45,73,43],[77,48,73,46],[77,52,73,50],[78,4,74,2],[78,5,74,3],[78,7,74,5],[78,8,74,6,"likesQuery"],[78,18,74,16],[78,19,74,17,"data"],[78,23,74,21],[78,25,74,23,"resolvedUserId"],[78,39,74,37],[78,41,74,39,"userId"],[78,47,74,45],[78,48,74,46],[78,49,74,47],[80,4,76,2],[81,4,77,2],[82,4,78,2],[82,8,78,2,"useEffect"],[82,14,78,11],[82,15,78,11,"useEffect"],[82,24,78,11],[82,26,78,12],[82,32,78,18],[83,6,79,4],[83,12,79,10,"resolved"],[83,20,79,18],[83,23,79,21,"Number"],[83,29,79,27],[83,30,79,28,"likesQuery"],[83,40,79,38],[83,41,79,39,"data"],[83,45,79,43],[83,47,79,45,"resolvedUserId"],[83,61,79,59],[83,62,79,60],[84,6,80,4],[84,12,80,10,"stored"],[84,18,80,16],[84,21,80,19,"Number"],[84,27,80,25],[84,28,80,26,"userId"],[84,34,80,32],[84,35,80,33],[85,6,82,4],[85,12,82,10,"shouldUpdate"],[85,24,82,22],[85,27,83,6,"Number"],[85,33,83,12],[85,34,83,13,"isFinite"],[85,42,83,21],[85,43,83,22,"resolved"],[85,51,83,30],[85,52,83,31],[85,56,84,6,"Number"],[85,62,84,12],[85,63,84,13,"isFinite"],[85,71,84,21],[85,72,84,22,"stored"],[85,78,84,28],[85,79,84,29],[85,83,85,6,"resolved"],[85,91,85,14],[85,96,85,19,"stored"],[85,102,85,25],[85,106,86,6],[85,107,86,7],[85,108,86,8,"userEmail"],[85,117,86,17],[86,6,88,4],[86,10,88,8],[86,11,88,9,"shouldUpdate"],[86,23,88,21],[86,25,88,23],[87,8,89,6],[88,6,90,4],[89,6,92,4],[89,7,92,5],[89,19,92,17],[90,8,93,6],[90,12,93,10],[91,10,94,8],[91,16,94,14,"merged"],[91,22,94,20],[91,25,94,23],[92,12,94,25],[92,16,94,29,"user"],[92,20,94,33],[92,24,94,37],[92,25,94,38],[92,26,94,39],[92,27,94,40],[93,12,94,42,"id"],[93,14,94,44],[93,16,94,46,"resolved"],[93,24,94,54],[94,12,94,56,"email"],[94,17,94,61],[94,19,94,63,"userEmail"],[95,10,94,73],[95,11,94,74],[96,10,95,8],[96,16,95,14,"AsyncStorage"],[96,28,95,26],[96,29,95,26,"default"],[96,36,95,26],[96,37,95,27,"setItem"],[96,44,95,34],[96,45,95,35],[96,51,95,41],[96,53,95,43,"JSON"],[96,57,95,47],[96,58,95,48,"stringify"],[96,67,95,57],[96,68,95,58,"merged"],[96,74,95,64],[96,75,95,65],[96,76,95,66],[97,10,96,8],[98,10,97,8,"queryClient"],[98,21,97,19],[98,22,97,20,"invalidateQueries"],[98,39,97,37],[98,40,97,38],[99,12,97,40,"queryKey"],[99,20,97,48],[99,22,97,50],[99,23,97,51],[99,35,97,63],[100,10,97,65],[100,11,97,66],[100,12,97,67],[101,8,98,6],[101,9,98,7],[101,10,98,8],[101,17,98,15,"e"],[101,18,98,16],[101,20,98,18],[102,10,99,8,"console"],[102,17,99,15],[102,18,99,16,"error"],[102,23,99,21],[102,24,99,22],[102,64,99,62],[102,66,99,64,"e"],[102,67,99,65],[102,68,99,66],[103,8,100,6],[104,6,101,4],[104,7,101,5],[104,9,101,7],[104,10,101,8],[105,4,102,2],[105,5,102,3],[105,7,102,5],[105,8,102,6,"likesQuery"],[105,18,102,16],[105,19,102,17,"data"],[105,23,102,21],[105,25,102,23,"resolvedUserId"],[105,39,102,37],[105,41,102,39,"queryClient"],[105,52,102,50],[105,54,102,52,"user"],[105,58,102,56],[105,60,102,58,"userEmail"],[105,69,102,67],[105,71,102,69,"userId"],[105,77,102,75],[105,78,102,76],[105,79,102,77],[106,4,104,2],[106,10,104,8,"likes"],[106,15,104,13],[106,18,104,16,"likesQuery"],[106,28,104,26],[106,29,104,27,"data"],[106,33,104,31],[106,35,104,33,"likes"],[106,40,104,38],[106,44,104,42],[106,46,104,44],[107,4,106,2],[107,10,106,8,"likeBackMutation"],[107,26,106,24],[107,29,106,27],[107,33,106,27,"useMutation"],[107,52,106,38],[107,53,106,38,"useMutation"],[107,64,106,38],[107,66,106,39],[108,6,107,4,"mutationFn"],[108,16,107,14],[108,18,107,16],[108,24,107,16,"mutationFn"],[108,25,107,23],[109,8,107,25,"profileId"],[110,6,107,35],[110,7,107,36],[110,12,107,41],[111,8,108,6],[111,14,108,12,"fromUserId"],[111,24,108,22],[111,27,108,25,"Number"],[111,33,108,31],[111,34,108,32,"effectiveUserId"],[111,49,108,47],[111,50,108,48],[112,8,109,6],[112,12,109,10],[112,13,109,11,"Number"],[112,19,109,17],[112,20,109,18,"isFinite"],[112,28,109,26],[112,29,109,27,"fromUserId"],[112,39,109,37],[112,40,109,38],[112,42,109,40],[113,10,110,8],[113,16,110,14],[113,20,110,18,"Error"],[113,25,110,23],[113,26,110,24],[113,43,110,41],[113,44,110,42],[114,8,111,6],[115,8,113,6],[115,14,113,12,"response"],[115,22,113,20],[115,25,113,23],[115,31,113,29,"fetch"],[115,36,113,34],[115,37,113,35],[115,57,113,55],[115,59,113,57],[116,10,114,8,"method"],[116,16,114,14],[116,18,114,16],[116,24,114,22],[117,10,115,8,"headers"],[117,17,115,15],[117,19,115,17],[118,12,115,19],[118,26,115,33],[118,28,115,35],[119,10,115,54],[119,11,115,55],[120,10,116,8,"body"],[120,14,116,12],[120,16,116,14,"JSON"],[120,20,116,18],[120,21,116,19,"stringify"],[120,30,116,28],[120,31,116,29],[121,12,116,31,"fromUserId"],[121,22,116,41],[122,12,116,43,"toUserId"],[122,20,116,51],[122,22,116,53,"profileId"],[123,10,116,63],[123,11,116,64],[124,8,117,6],[124,9,117,7],[124,10,117,8],[125,8,119,6],[125,12,119,10],[125,13,119,11,"response"],[125,21,119,19],[125,22,119,20,"ok"],[125,24,119,22],[125,26,119,24],[126,10,120,8],[126,16,120,14],[126,20,120,18,"Error"],[126,25,120,23],[126,26,121,10],[126,81,121,65,"response"],[126,89,121,73],[126,90,121,74,"status"],[126,96,121,80],[126,101,121,85,"response"],[126,109,121,93],[126,110,121,94,"statusText"],[126,120,121,104],[126,122,122,8],[126,123,122,9],[127,8,123,6],[128,8,125,6],[128,15,125,13,"response"],[128,23,125,21],[128,24,125,22,"json"],[128,28,125,26],[128,29,125,27],[128,30,125,28],[129,6,126,4],[129,7,126,5],[130,6,127,4,"onMutate"],[130,14,127,12],[130,16,127,14],[130,22,127,14,"onMutate"],[130,23,127,21],[131,8,127,23,"profileId"],[132,6,127,33],[132,7,127,34],[132,12,127,39],[133,8,128,6],[133,14,128,12,"queryClient"],[133,25,128,23],[133,26,128,24,"cancelQueries"],[133,39,128,37],[133,40,128,38],[134,10,129,8,"queryKey"],[134,18,129,16],[134,20,129,18],[134,21,129,19],[134,30,129,28],[134,32,129,30,"userId"],[134,38,129,36],[134,42,129,40],[134,46,129,44],[134,48,129,46,"userEmail"],[134,57,129,55],[134,61,129,59],[134,65,129,63],[135,8,130,6],[135,9,130,7],[135,10,130,8],[136,8,132,6],[136,14,132,12,"previous"],[136,22,132,20],[136,25,132,23,"queryClient"],[136,36,132,34],[136,37,132,35,"getQueryData"],[136,49,132,47],[136,50,132,48],[136,51,133,8],[136,60,133,17],[136,62,134,8,"userId"],[136,68,134,14],[136,72,134,18],[136,76,134,22],[136,78,135,8,"userEmail"],[136,87,135,17],[136,91,135,21],[136,95,135,25],[136,96,136,7],[136,97,136,8],[137,8,138,6,"queryClient"],[137,19,138,17],[137,20,138,18,"setQueryData"],[137,32,138,30],[137,33,139,8],[137,34,139,9],[137,43,139,18],[137,45,139,20,"userId"],[137,51,139,26],[137,55,139,30],[137,59,139,34],[137,61,139,36,"userEmail"],[137,70,139,45],[137,74,139,49],[137,78,139,53],[137,79,139,54],[137,81,140,9,"old"],[137,84,140,12],[137,88,140,17],[138,10,141,10],[138,16,141,16,"oldLikes"],[138,24,141,24],[138,27,141,27,"old"],[138,30,141,30],[138,32,141,32,"likes"],[138,37,141,37],[138,41,141,41],[138,43,141,43],[139,10,142,10],[139,16,142,16,"nextLikes"],[139,25,142,25],[139,28,142,28,"oldLikes"],[139,36,142,36],[139,37,142,37,"filter"],[139,43,142,43],[139,44,142,45,"x"],[139,45,142,46],[139,49,142,51,"x"],[139,50,142,52],[139,52,142,54,"id"],[139,54,142,56],[139,59,142,61,"profileId"],[139,68,142,70],[139,69,142,71],[140,10,143,10],[140,17,143,17],[141,12,143,19],[141,16,143,23,"old"],[141,19,143,26],[141,23,143,30],[141,24,143,31],[141,25,143,32],[141,26,143,33],[142,12,143,35,"likes"],[142,17,143,40],[142,19,143,42,"nextLikes"],[143,10,143,52],[143,11,143,53],[144,8,144,8],[144,9,145,6],[144,10,145,7],[146,8,147,6],[147,8,148,6],[148,8,149,6],[148,12,149,10],[149,10,150,8],[149,14,151,10,"effectiveUserId"],[149,29,151,25],[149,33,152,10],[149,40,152,17,"queryClient"],[149,51,152,28],[149,52,152,29,"setQueriesData"],[149,66,152,43],[149,71,152,48],[149,81,152,58],[149,83,153,10],[150,12,154,10,"queryClient"],[150,23,154,21],[150,24,154,22,"setQueriesData"],[150,38,154,36],[150,39,155,12],[151,14,155,14,"queryKey"],[151,22,155,22],[151,24,155,24],[151,25,155,25],[151,38,155,38],[151,40,155,40,"Number"],[151,46,155,46],[151,47,155,47,"effectiveUserId"],[151,62,155,62],[151,63,155,63],[152,12,155,65],[152,13,155,66],[152,15,156,13,"old"],[152,18,156,16],[152,22,156,21],[153,14,157,14],[153,18,157,18],[153,19,157,19,"Array"],[153,24,157,24],[153,25,157,25,"isArray"],[153,32,157,32],[153,33,157,33,"old"],[153,36,157,36],[153,37,157,37],[153,39,157,39],[153,46,157,46,"old"],[153,49,157,49],[154,14,158,14],[154,20,158,20,"pid"],[154,23,158,23],[154,26,158,26,"Number"],[154,32,158,32],[154,33,158,33,"profileId"],[154,42,158,42],[154,43,158,43],[155,14,159,14],[155,21,159,21,"old"],[155,24,159,24],[155,25,159,25,"filter"],[155,31,159,31],[155,32,159,33,"p"],[155,33,159,34],[155,37,159,39,"Number"],[155,43,159,45],[155,44,159,46,"p"],[155,45,159,47],[155,47,159,49,"id"],[155,49,159,51],[155,50,159,52],[155,55,159,57,"pid"],[155,58,159,60],[155,59,159,61],[156,12,160,12],[156,13,161,10],[156,14,161,11],[157,10,162,8],[158,8,163,6],[158,9,163,7],[158,10,163,8],[158,17,163,15,"e"],[158,18,163,16],[158,20,163,18],[159,10,164,8,"console"],[159,17,164,15],[159,18,164,16,"error"],[159,23,164,21],[159,24,164,22,"e"],[159,25,164,23],[159,26,164,24],[160,8,165,6],[161,8,167,6],[161,15,167,13],[162,10,167,15,"previous"],[163,8,167,24],[163,9,167,25],[164,6,168,4],[164,7,168,5],[165,6,169,4,"onError"],[165,13,169,11],[165,15,169,13,"onError"],[165,16,169,14,"error"],[165,21,169,19],[165,23,169,21,"_variables"],[165,33,169,31],[165,35,169,33,"context"],[165,42,169,40],[165,47,169,45],[166,8,170,6,"console"],[166,15,170,13],[166,16,170,14,"error"],[166,21,170,19],[166,22,170,20],[166,42,170,40],[166,44,170,42,"error"],[166,49,170,47],[166,50,170,48],[167,8,171,6],[167,12,171,10,"context"],[167,19,171,17],[167,21,171,19,"previous"],[167,29,171,27],[167,31,171,29],[168,10,172,8,"queryClient"],[168,21,172,19],[168,22,172,20,"setQueryData"],[168,34,172,32],[168,35,173,10],[168,36,173,11],[168,45,173,20],[168,47,173,22,"userId"],[168,53,173,28],[168,57,173,32],[168,61,173,36],[168,63,173,38,"userEmail"],[168,72,173,47],[168,76,173,51],[168,80,173,55],[168,81,173,56],[168,83,174,10,"context"],[168,90,174,17],[168,91,174,18,"previous"],[168,99,175,8],[168,100,175,9],[169,8,176,6],[170,6,177,4],[170,7,177,5],[171,6,178,4,"onSettled"],[171,15,178,13],[171,17,178,15,"onSettled"],[171,18,178,16,"_data"],[171,23,178,21],[171,25,178,23,"_error"],[171,31,178,29],[171,33,178,31,"variables"],[171,42,178,40],[171,47,178,45],[172,8,179,6,"queryClient"],[172,19,179,17],[172,20,179,18,"invalidateQueries"],[172,37,179,35],[172,38,179,36],[173,10,180,8,"queryKey"],[173,18,180,16],[173,20,180,18],[173,21,180,19],[173,30,180,28],[173,32,180,30,"userId"],[173,38,180,36],[173,42,180,40],[173,46,180,44],[173,48,180,46,"userEmail"],[173,57,180,55],[173,61,180,59],[173,65,180,63],[174,8,181,6],[174,9,181,7],[174,10,181,8],[175,8,183,6],[175,12,183,10,"effectiveUserId"],[175,27,183,25],[175,29,183,27],[176,10,184,8,"queryClient"],[176,21,184,19],[176,22,184,20,"invalidateQueries"],[176,39,184,37],[176,40,184,38],[177,12,185,10,"queryKey"],[177,20,185,18],[177,22,185,20],[177,23,185,21],[177,39,185,37],[177,41,185,39,"Number"],[177,47,185,45],[177,48,185,46,"effectiveUserId"],[177,63,185,61],[177,64,185,62],[178,10,186,8],[178,11,186,9],[178,12,186,10],[179,10,187,8,"queryClient"],[179,21,187,19],[179,22,187,20,"invalidateQueries"],[179,39,187,37],[179,40,187,38],[180,12,188,10,"queryKey"],[180,20,188,18],[180,22,188,20],[180,23,188,21],[180,32,188,30],[180,34,188,32,"Number"],[180,40,188,38],[180,41,188,39,"effectiveUserId"],[180,56,188,54],[180,57,188,55],[181,10,189,8],[181,11,189,9],[181,12,189,10],[183,10,191,8],[184,10,192,8],[185,10,193,8,"queryClient"],[185,21,193,19],[185,22,193,20,"invalidateQueries"],[185,39,193,37],[185,40,193,38],[186,12,194,10,"queryKey"],[186,20,194,18],[186,22,194,20],[186,23,194,21],[186,36,194,34],[186,38,194,36,"Number"],[186,44,194,42],[186,45,194,43,"effectiveUserId"],[186,60,194,58],[186,61,194,59],[187,10,195,8],[187,11,195,9],[187,12,195,10],[188,8,196,6],[190,8,198,6],[191,8,199,6],[192,8,200,6],[192,12,200,10],[193,10,201,8],[193,16,201,14,"profileId"],[193,25,201,23],[193,28,201,26,"variables"],[193,37,201,35],[193,39,201,37,"profileId"],[193,48,201,46],[194,10,202,8],[194,14,203,10,"effectiveUserId"],[194,29,203,25],[194,33,204,10,"profileId"],[194,42,204,19],[194,46,205,10],[194,53,205,17,"queryClient"],[194,64,205,28],[194,65,205,29,"setQueriesData"],[194,79,205,43],[194,84,205,48],[194,94,205,58],[194,96,206,10],[195,12,207,10,"queryClient"],[195,23,207,21],[195,24,207,22,"setQueriesData"],[195,38,207,36],[195,39,208,12],[196,14,208,14,"queryKey"],[196,22,208,22],[196,24,208,24],[196,25,208,25],[196,38,208,38],[196,40,208,40,"Number"],[196,46,208,46],[196,47,208,47,"effectiveUserId"],[196,62,208,62],[196,63,208,63],[197,12,208,65],[197,13,208,66],[197,15,209,13,"old"],[197,18,209,16],[197,22,209,21],[198,14,210,14],[198,18,210,18],[198,19,210,19,"Array"],[198,24,210,24],[198,25,210,25,"isArray"],[198,32,210,32],[198,33,210,33,"old"],[198,36,210,36],[198,37,210,37],[198,39,210,39],[198,46,210,46,"old"],[198,49,210,49],[199,14,211,14],[199,20,211,20,"pid"],[199,23,211,23],[199,26,211,26,"Number"],[199,32,211,32],[199,33,211,33,"profileId"],[199,42,211,42],[199,43,211,43],[200,14,212,14],[200,21,212,21,"old"],[200,24,212,24],[200,25,212,25,"filter"],[200,31,212,31],[200,32,212,33,"p"],[200,33,212,34],[200,37,212,39,"Number"],[200,43,212,45],[200,44,212,46,"p"],[200,45,212,47],[200,47,212,49,"id"],[200,49,212,51],[200,50,212,52],[200,55,212,57,"pid"],[200,58,212,60],[200,59,212,61],[201,12,213,12],[201,13,214,10],[201,14,214,11],[202,10,215,8],[203,8,216,6],[203,9,216,7],[203,10,216,8],[203,17,216,15,"e"],[203,18,216,16],[203,20,216,18],[204,10,217,8,"console"],[204,17,217,15],[204,18,217,16,"error"],[204,23,217,21],[204,24,217,22,"e"],[204,25,217,23],[204,26,217,24],[205,8,218,6],[206,6,219,4],[207,4,220,2],[207,5,220,3],[207,6,220,4],[208,4,222,2],[208,10,222,8,"handleLikeBack"],[208,24,222,22],[208,27,222,25],[208,31,222,25,"useCallback"],[208,37,222,36],[208,38,222,36,"useCallback"],[208,49,222,36],[208,51,223,5,"profile"],[208,58,223,12],[208,62,223,17],[209,6,224,6],[209,10,224,10],[209,11,224,11,"profile"],[209,18,224,18],[209,20,224,20,"id"],[209,22,224,22],[209,24,224,24],[210,6,225,6],[210,13,225,13,"likeBackMutation"],[210,29,225,29],[210,30,225,30,"mutate"],[210,36,225,36],[210,37,225,37],[211,8,225,39,"profileId"],[211,17,225,48],[211,19,225,50,"profile"],[211,26,225,57],[211,27,225,58,"id"],[211,29,225,60],[212,8,225,62,"profile"],[213,6,225,70],[213,7,225,71],[213,8,225,72],[214,4,226,4],[214,5,226,5],[214,7,227,4],[214,8,227,5,"likeBackMutation"],[214,24,227,21],[214,25,228,2],[214,26,228,3],[215,4,230,2],[215,10,230,8,"onPullToRefresh"],[215,25,230,23],[215,28,230,26],[215,32,230,26,"useCallback"],[215,38,230,37],[215,39,230,37,"useCallback"],[215,50,230,37],[215,52,230,38],[215,64,230,50],[216,6,231,4,"setIsPullRefreshing"],[216,25,231,23],[216,26,231,24],[216,30,231,28],[216,31,231,29],[217,6,232,4],[217,10,232,8],[218,8,233,6],[218,14,233,12,"likesQuery"],[218,24,233,22],[218,25,233,23,"refetch"],[218,32,233,30],[218,33,233,31],[218,34,233,32],[219,6,234,4],[219,7,234,5],[219,8,234,6],[219,15,234,13,"e"],[219,16,234,14],[219,18,234,16],[220,8,235,6,"console"],[220,15,235,13],[220,16,235,14,"error"],[220,21,235,19],[220,22,235,20,"e"],[220,23,235,21],[220,24,235,22],[221,6,236,4],[221,7,236,5],[221,16,236,14],[222,8,237,6,"setIsPullRefreshing"],[222,27,237,25],[222,28,237,26],[222,33,237,31],[222,34,237,32],[223,6,238,4],[224,4,239,2],[224,5,239,3],[224,7,239,5],[224,8,239,6,"likesQuery"],[224,18,239,16],[224,19,239,17],[224,20,239,18],[225,4,241,2],[225,11,241,9],[226,6,242,4,"user"],[226,10,242,8],[227,6,243,4,"userId"],[227,12,243,10],[227,14,243,12,"effectiveUserId"],[227,29,243,27],[228,6,244,4,"userEmail"],[228,15,244,13],[229,6,245,4,"likes"],[229,11,245,9],[230,6,246,4,"userQuery"],[230,15,246,13],[231,6,247,4,"likesQuery"],[231,16,247,14],[232,6,248,4,"likeBackMutation"],[232,22,248,20],[233,6,249,4,"handleLikeBack"],[233,20,249,18],[234,6,250,4,"isPullRefreshing"],[234,22,250,20],[235,6,251,4,"onPullToRefresh"],[236,4,252,2],[236,5,252,3],[237,2,253,0],[238,2,253,1,"_s"],[238,4,253,1],[238,5,5,16,"useLikesData"],[238,17,5,28],[239,4,5,28],[239,12,6,22,"useQueryClient"],[239,31,6,36],[239,32,6,36,"useQueryClient"],[239,46,6,36],[239,48,9,20,"useQuery"],[239,67,9,28],[239,68,9,28,"useQuery"],[239,76,9,28],[239,78,35,21,"useQuery"],[239,97,35,29],[239,98,35,29,"useQuery"],[239,106,35,29],[239,108,106,27,"useMutation"],[239,127,106,38],[239,128,106,38,"useMutation"],[239,139,106,38],[240,2,106,38],[241,0,106,38],[241,3]],"functionMap":{"names":["<global>","useLikesData","useQuery$argument_0.queryFn","useMemo$argument_0","useEffect$argument_0","<anonymous>","useMutation$argument_0.mutationFn","useMutation$argument_0.onMutate","queryClient.setQueryData$argument_1","oldLikes.filter$argument_0","queryClient.setQueriesData$argument_1","old.filter$argument_0","useMutation$argument_0.onError","useMutation$argument_0.onSettled","handleLikeBack","onPullToRefresh"],"mappings":"AAA;OCI;aCM;KDiB;aCU;KDkB;kCEO;GFW;YGI;KCc;KDS;GHC;gBKK;KLmB;cMC;QCa;4CCE,0BD;SDE;YGY;gCCG,4BD;aHC;KNQ;aWC;KXQ;eYC;YH+B;gCCG,4BD;aGC;KZM;IaI;KbG;sCcI;GdS;CDc"},"hasCjsExports":false},"type":"js/module"}]}