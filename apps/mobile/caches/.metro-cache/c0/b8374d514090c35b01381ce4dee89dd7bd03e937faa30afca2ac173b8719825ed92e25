{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":78,"index":145}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":146},"end":{"line":3,"column":69,"index":215}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useLikesData = useLikesData;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  function useLikesData() {\n    const queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    const [isPullRefreshing, setIsPullRefreshing] = (0, _react.useState)(false);\n    const userQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"storedUser\"],\n      queryFn: async () => {\n        const raw = await AsyncStorage.default.getItem(\"user\");\n        if (!raw) {\n          return null;\n        }\n        try {\n          return JSON.parse(raw);\n        } catch (e) {\n          console.error(\"Invalid user JSON in AsyncStorage; clearing:\", e);\n          try {\n            await AsyncStorage.default.removeItem(\"user\");\n          } catch (err) {\n            console.error(err);\n          }\n          return null;\n        }\n      }\n    });\n    const user = userQuery.data;\n    const userId = user?.id;\n    const userEmail = user?.email;\n    const likesQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"likesMe\", userId || null, userEmail || null],\n      enabled: !!userId || !!userEmail,\n      queryFn: async () => {\n        const params = [];\n        if (userId) {\n          params.push(`userId=${encodeURIComponent(String(userId))}`);\n        }\n        if (userEmail) {\n          params.push(`email=${encodeURIComponent(String(userEmail))}`);\n        }\n        const queryString = params.length ? `?${params.join(\"&\")}` : \"\";\n        const response = await fetch(`/api/likes/me${queryString}`);\n        if (!response.ok) {\n          throw new Error(`When fetching /api/likes/me, the response was [${response.status}] ${response.statusText}`);\n        }\n        return response.json();\n      },\n      staleTime: 0,\n      refetchOnMount: true,\n      refetchInterval: false,\n      retry: 1\n    });\n    const effectiveUserId = (0, _react.useMemo)(() => {\n      // IMPORTANT: /api/likes/me can map email -> users.id.\n      // If AsyncStorage is stale (common after deleting/recreating accounts),\n      // actions like \"like back\" must use the resolved id or matches won't form.\n      const resolved = Number(likesQuery.data?.resolvedUserId);\n      if (Number.isFinite(resolved)) {\n        return resolved;\n      }\n      const stored = Number(userId);\n      return Number.isFinite(stored) ? stored : null;\n    }, [likesQuery.data?.resolvedUserId, userId]);\n\n    // Best-effort: if the backend resolved a different userId for this email,\n    // rewrite AsyncStorage so the rest of the app (feed, push registration, etc.) stays consistent.\n    (0, _react.useEffect)(() => {\n      const resolved = Number(likesQuery.data?.resolvedUserId);\n      const stored = Number(userId);\n      const shouldUpdate = Number.isFinite(resolved) && Number.isFinite(stored) && resolved !== stored && !!userEmail;\n      if (!shouldUpdate) {\n        return;\n      }\n      (async () => {\n        try {\n          const merged = {\n            ...(user || {}),\n            id: resolved,\n            email: userEmail\n          };\n          await AsyncStorage.default.setItem(\"user\", JSON.stringify(merged));\n          // Make sure any other screens that rely on the cached user reload quickly.\n          queryClient.invalidateQueries({\n            queryKey: [\"storedUser\"]\n          });\n        } catch (e) {\n          console.error(\"[LIKES] Could not update cached userId\", e);\n        }\n      })();\n    }, [likesQuery.data?.resolvedUserId, queryClient, user, userEmail, userId]);\n    const likes = likesQuery.data?.likes || [];\n    const likeBackMutation = (0, _tanstackReactQuery.useMutation)({\n      mutationFn: async ({\n        profileId\n      }) => {\n        const fromUserId = Number(effectiveUserId);\n        if (!Number.isFinite(fromUserId)) {\n          throw new Error(\"User not loaded\");\n        }\n        const response = await fetch(\"/api/profiles/like\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            fromUserId,\n            toUserId: profileId\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`When fetching /api/profiles/like, the response was [${response.status}] ${response.statusText}`);\n        }\n        return response.json();\n      },\n      onMutate: async ({\n        profileId\n      }) => {\n        await queryClient.cancelQueries({\n          queryKey: [\"likesMe\", userId || null, userEmail || null]\n        });\n        const previous = queryClient.getQueryData([\"likesMe\", userId || null, userEmail || null]);\n        queryClient.setQueryData([\"likesMe\", userId || null, userEmail || null], old => {\n          const oldLikes = old?.likes || [];\n          const nextLikes = oldLikes.filter(x => x?.id !== profileId);\n          return {\n            ...(old || {}),\n            likes: nextLikes\n          };\n        });\n\n        // NEW: best-effort remove this profile from any cached Discover feed arrays\n        // so they don't pop up again after a like-back.\n        try {\n          if (effectiveUserId && typeof queryClient.setQueriesData === \"function\") {\n            queryClient.setQueriesData({\n              queryKey: [\"profileFeed\", Number(effectiveUserId)]\n            }, old => {\n              if (!Array.isArray(old)) return old;\n              const pid = Number(profileId);\n              return old.filter(p => Number(p?.id) !== pid);\n            });\n          }\n        } catch (e) {\n          console.error(e);\n        }\n        return {\n          previous\n        };\n      },\n      onError: (error, _variables, context) => {\n        console.error(\"Error liking back:\", error);\n        if (context?.previous) {\n          queryClient.setQueryData([\"likesMe\", userId || null, userEmail || null], context.previous);\n        }\n      },\n      onSettled: (_data, _error, variables) => {\n        queryClient.invalidateQueries({\n          queryKey: [\"likesMe\", userId || null, userEmail || null]\n        });\n        if (effectiveUserId) {\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesSummary\", Number(effectiveUserId)]\n          });\n          queryClient.invalidateQueries({\n            queryKey: [\"matches\", Number(effectiveUserId)]\n          });\n\n          // NEW: also invalidate the Discover feed so a matched/liked user doesn't\n          // linger in an existing cache.\n          queryClient.invalidateQueries({\n            queryKey: [\"profileFeed\", Number(effectiveUserId)]\n          });\n        }\n\n        // If we know who was liked back, remove from cached feed again after settle\n        // (covers cases where the feed was fetched after onMutate ran).\n        try {\n          const profileId = variables?.profileId;\n          if (effectiveUserId && profileId && typeof queryClient.setQueriesData === \"function\") {\n            queryClient.setQueriesData({\n              queryKey: [\"profileFeed\", Number(effectiveUserId)]\n            }, old => {\n              if (!Array.isArray(old)) return old;\n              const pid = Number(profileId);\n              return old.filter(p => Number(p?.id) !== pid);\n            });\n          }\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    });\n    const handleLikeBack = (0, _react.useCallback)(profile => {\n      if (!profile?.id) return;\n      return likeBackMutation.mutate({\n        profileId: profile.id,\n        profile\n      });\n    }, [likeBackMutation]);\n    const onPullToRefresh = (0, _react.useCallback)(async () => {\n      setIsPullRefreshing(true);\n      try {\n        await likesQuery.refetch();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        setIsPullRefreshing(false);\n      }\n    }, [likesQuery]);\n    return {\n      user,\n      userId: effectiveUserId,\n      userEmail,\n      likes,\n      userQuery,\n      likesQuery,\n      likeBackMutation,\n      handleLikeBack,\n      isPullRefreshing,\n      onPullToRefresh\n    };\n  }\n});","lineCount":236,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useLikesData"],[12,22,5,0],[12,25,5,0,"useLikesData"],[12,37,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_tanstackReactQuery"],[14,25,2,0],[14,28,2,0,"require"],[14,35,2,0],[14,36,2,0,"_dependencyMap"],[14,50,2,0],[15,2,3,0],[15,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[15,42,3,0],[15,45,3,0,"require"],[15,52,3,0],[15,53,3,0,"_dependencyMap"],[15,67,3,0],[16,2,3,0],[16,6,3,0,"AsyncStorage"],[16,18,3,0],[16,21,3,0,"_interopDefault"],[16,36,3,0],[16,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[16,73,3,0],[17,2,5,7],[17,11,5,16,"useLikesData"],[17,23,5,28,"useLikesData"],[17,24,5,28],[17,26,5,31],[18,4,6,2],[18,10,6,8,"queryClient"],[18,21,6,19],[18,24,6,22],[18,28,6,22,"useQueryClient"],[18,47,6,36],[18,48,6,36,"useQueryClient"],[18,62,6,36],[18,64,6,37],[18,65,6,38],[19,4,7,2],[19,10,7,8],[19,11,7,9,"isPullRefreshing"],[19,27,7,25],[19,29,7,27,"setIsPullRefreshing"],[19,48,7,46],[19,49,7,47],[19,52,7,50],[19,56,7,50,"useState"],[19,62,7,58],[19,63,7,58,"useState"],[19,71,7,58],[19,73,7,59],[19,78,7,64],[19,79,7,65],[20,4,9,2],[20,10,9,8,"userQuery"],[20,19,9,17],[20,22,9,20],[20,26,9,20,"useQuery"],[20,45,9,28],[20,46,9,28,"useQuery"],[20,54,9,28],[20,56,9,29],[21,6,10,4,"queryKey"],[21,14,10,12],[21,16,10,14],[21,17,10,15],[21,29,10,27],[21,30,10,28],[22,6,11,4,"queryFn"],[22,13,11,11],[22,15,11,13],[22,21,11,13,"queryFn"],[22,22,11,13],[22,27,11,25],[23,8,12,6],[23,14,12,12,"raw"],[23,17,12,15],[23,20,12,18],[23,26,12,24,"AsyncStorage"],[23,38,12,36],[23,39,12,36,"default"],[23,46,12,36],[23,47,12,37,"getItem"],[23,54,12,44],[23,55,12,45],[23,61,12,51],[23,62,12,52],[24,8,13,6],[24,12,13,10],[24,13,13,11,"raw"],[24,16,13,14],[24,18,13,16],[25,10,14,8],[25,17,14,15],[25,21,14,19],[26,8,15,6],[27,8,17,6],[27,12,17,10],[28,10,18,8],[28,17,18,15,"JSON"],[28,21,18,19],[28,22,18,20,"parse"],[28,27,18,25],[28,28,18,26,"raw"],[28,31,18,29],[28,32,18,30],[29,8,19,6],[29,9,19,7],[29,10,19,8],[29,17,19,15,"e"],[29,18,19,16],[29,20,19,18],[30,10,20,8,"console"],[30,17,20,15],[30,18,20,16,"error"],[30,23,20,21],[30,24,20,22],[30,70,20,68],[30,72,20,70,"e"],[30,73,20,71],[30,74,20,72],[31,10,21,8],[31,14,21,12],[32,12,22,10],[32,18,22,16,"AsyncStorage"],[32,30,22,28],[32,31,22,28,"default"],[32,38,22,28],[32,39,22,29,"removeItem"],[32,49,22,39],[32,50,22,40],[32,56,22,46],[32,57,22,47],[33,10,23,8],[33,11,23,9],[33,12,23,10],[33,19,23,17,"err"],[33,22,23,20],[33,24,23,22],[34,12,24,10,"console"],[34,19,24,17],[34,20,24,18,"error"],[34,25,24,23],[34,26,24,24,"err"],[34,29,24,27],[34,30,24,28],[35,10,25,8],[36,10,26,8],[36,17,26,15],[36,21,26,19],[37,8,27,6],[38,6,28,4],[39,4,29,2],[39,5,29,3],[39,6,29,4],[40,4,31,2],[40,10,31,8,"user"],[40,14,31,12],[40,17,31,15,"userQuery"],[40,26,31,24],[40,27,31,25,"data"],[40,31,31,29],[41,4,32,2],[41,10,32,8,"userId"],[41,16,32,14],[41,19,32,17,"user"],[41,23,32,21],[41,25,32,23,"id"],[41,27,32,25],[42,4,33,2],[42,10,33,8,"userEmail"],[42,19,33,17],[42,22,33,20,"user"],[42,26,33,24],[42,28,33,26,"email"],[42,33,33,31],[43,4,35,2],[43,10,35,8,"likesQuery"],[43,20,35,18],[43,23,35,21],[43,27,35,21,"useQuery"],[43,46,35,29],[43,47,35,29,"useQuery"],[43,55,35,29],[43,57,35,30],[44,6,36,4,"queryKey"],[44,14,36,12],[44,16,36,14],[44,17,36,15],[44,26,36,24],[44,28,36,26,"userId"],[44,34,36,32],[44,38,36,36],[44,42,36,40],[44,44,36,42,"userEmail"],[44,53,36,51],[44,57,36,55],[44,61,36,59],[44,62,36,60],[45,6,37,4,"enabled"],[45,13,37,11],[45,15,37,13],[45,16,37,14],[45,17,37,15,"userId"],[45,23,37,21],[45,27,37,25],[45,28,37,26],[45,29,37,27,"userEmail"],[45,38,37,36],[46,6,38,4,"queryFn"],[46,13,38,11],[46,15,38,13],[46,21,38,13,"queryFn"],[46,22,38,13],[46,27,38,25],[47,8,39,6],[47,14,39,12,"params"],[47,20,39,18],[47,23,39,21],[47,25,39,23],[48,8,40,6],[48,12,40,10,"userId"],[48,18,40,16],[48,20,40,18],[49,10,41,8,"params"],[49,16,41,14],[49,17,41,15,"push"],[49,21,41,19],[49,22,41,20],[49,32,41,30,"encodeURIComponent"],[49,50,41,48],[49,51,41,49,"String"],[49,57,41,55],[49,58,41,56,"userId"],[49,64,41,62],[49,65,41,63],[49,66,41,64],[49,68,41,66],[49,69,41,67],[50,8,42,6],[51,8,43,6],[51,12,43,10,"userEmail"],[51,21,43,19],[51,23,43,21],[52,10,44,8,"params"],[52,16,44,14],[52,17,44,15,"push"],[52,21,44,19],[52,22,44,20],[52,31,44,29,"encodeURIComponent"],[52,49,44,47],[52,50,44,48,"String"],[52,56,44,54],[52,57,44,55,"userEmail"],[52,66,44,64],[52,67,44,65],[52,68,44,66],[52,70,44,68],[52,71,44,69],[53,8,45,6],[54,8,46,6],[54,14,46,12,"queryString"],[54,25,46,23],[54,28,46,26,"params"],[54,34,46,32],[54,35,46,33,"length"],[54,41,46,39],[54,44,46,42],[54,48,46,46,"params"],[54,54,46,52],[54,55,46,53,"join"],[54,59,46,57],[54,60,46,58],[54,63,46,61],[54,64,46,62],[54,66,46,64],[54,69,46,67],[54,71,46,69],[55,8,48,6],[55,14,48,12,"response"],[55,22,48,20],[55,25,48,23],[55,31,48,29,"fetch"],[55,36,48,34],[55,37,48,35],[55,53,48,51,"queryString"],[55,64,48,62],[55,66,48,64],[55,67,48,65],[56,8,49,6],[56,12,49,10],[56,13,49,11,"response"],[56,21,49,19],[56,22,49,20,"ok"],[56,24,49,22],[56,26,49,24],[57,10,50,8],[57,16,50,14],[57,20,50,18,"Error"],[57,25,50,23],[57,26,51,10],[57,76,51,60,"response"],[57,84,51,68],[57,85,51,69,"status"],[57,91,51,75],[57,96,51,80,"response"],[57,104,51,88],[57,105,51,89,"statusText"],[57,115,51,99],[57,117,52,8],[57,118,52,9],[58,8,53,6],[59,8,55,6],[59,15,55,13,"response"],[59,23,55,21],[59,24,55,22,"json"],[59,28,55,26],[59,29,55,27],[59,30,55,28],[60,6,56,4],[60,7,56,5],[61,6,57,4,"staleTime"],[61,15,57,13],[61,17,57,15],[61,18,57,16],[62,6,58,4,"refetchOnMount"],[62,20,58,18],[62,22,58,20],[62,26,58,24],[63,6,59,4,"refetchInterval"],[63,21,59,19],[63,23,59,21],[63,28,59,26],[64,6,60,4,"retry"],[64,11,60,9],[64,13,60,11],[65,4,61,2],[65,5,61,3],[65,6,61,4],[66,4,63,2],[66,10,63,8,"effectiveUserId"],[66,25,63,23],[66,28,63,26],[66,32,63,26,"useMemo"],[66,38,63,33],[66,39,63,33,"useMemo"],[66,46,63,33],[66,48,63,34],[66,54,63,40],[67,6,64,4],[68,6,65,4],[69,6,66,4],[70,6,67,4],[70,12,67,10,"resolved"],[70,20,67,18],[70,23,67,21,"Number"],[70,29,67,27],[70,30,67,28,"likesQuery"],[70,40,67,38],[70,41,67,39,"data"],[70,45,67,43],[70,47,67,45,"resolvedUserId"],[70,61,67,59],[70,62,67,60],[71,6,68,4],[71,10,68,8,"Number"],[71,16,68,14],[71,17,68,15,"isFinite"],[71,25,68,23],[71,26,68,24,"resolved"],[71,34,68,32],[71,35,68,33],[71,37,68,35],[72,8,69,6],[72,15,69,13,"resolved"],[72,23,69,21],[73,6,70,4],[74,6,72,4],[74,12,72,10,"stored"],[74,18,72,16],[74,21,72,19,"Number"],[74,27,72,25],[74,28,72,26,"userId"],[74,34,72,32],[74,35,72,33],[75,6,73,4],[75,13,73,11,"Number"],[75,19,73,17],[75,20,73,18,"isFinite"],[75,28,73,26],[75,29,73,27,"stored"],[75,35,73,33],[75,36,73,34],[75,39,73,37,"stored"],[75,45,73,43],[75,48,73,46],[75,52,73,50],[76,4,74,2],[76,5,74,3],[76,7,74,5],[76,8,74,6,"likesQuery"],[76,18,74,16],[76,19,74,17,"data"],[76,23,74,21],[76,25,74,23,"resolvedUserId"],[76,39,74,37],[76,41,74,39,"userId"],[76,47,74,45],[76,48,74,46],[76,49,74,47],[78,4,76,2],[79,4,77,2],[80,4,78,2],[80,8,78,2,"useEffect"],[80,14,78,11],[80,15,78,11,"useEffect"],[80,24,78,11],[80,26,78,12],[80,32,78,18],[81,6,79,4],[81,12,79,10,"resolved"],[81,20,79,18],[81,23,79,21,"Number"],[81,29,79,27],[81,30,79,28,"likesQuery"],[81,40,79,38],[81,41,79,39,"data"],[81,45,79,43],[81,47,79,45,"resolvedUserId"],[81,61,79,59],[81,62,79,60],[82,6,80,4],[82,12,80,10,"stored"],[82,18,80,16],[82,21,80,19,"Number"],[82,27,80,25],[82,28,80,26,"userId"],[82,34,80,32],[82,35,80,33],[83,6,82,4],[83,12,82,10,"shouldUpdate"],[83,24,82,22],[83,27,83,6,"Number"],[83,33,83,12],[83,34,83,13,"isFinite"],[83,42,83,21],[83,43,83,22,"resolved"],[83,51,83,30],[83,52,83,31],[83,56,84,6,"Number"],[83,62,84,12],[83,63,84,13,"isFinite"],[83,71,84,21],[83,72,84,22,"stored"],[83,78,84,28],[83,79,84,29],[83,83,85,6,"resolved"],[83,91,85,14],[83,96,85,19,"stored"],[83,102,85,25],[83,106,86,6],[83,107,86,7],[83,108,86,8,"userEmail"],[83,117,86,17],[84,6,88,4],[84,10,88,8],[84,11,88,9,"shouldUpdate"],[84,23,88,21],[84,25,88,23],[85,8,89,6],[86,6,90,4],[87,6,92,4],[87,7,92,5],[87,19,92,17],[88,8,93,6],[88,12,93,10],[89,10,94,8],[89,16,94,14,"merged"],[89,22,94,20],[89,25,94,23],[90,12,94,25],[90,16,94,29,"user"],[90,20,94,33],[90,24,94,37],[90,25,94,38],[90,26,94,39],[90,27,94,40],[91,12,94,42,"id"],[91,14,94,44],[91,16,94,46,"resolved"],[91,24,94,54],[92,12,94,56,"email"],[92,17,94,61],[92,19,94,63,"userEmail"],[93,10,94,73],[93,11,94,74],[94,10,95,8],[94,16,95,14,"AsyncStorage"],[94,28,95,26],[94,29,95,26,"default"],[94,36,95,26],[94,37,95,27,"setItem"],[94,44,95,34],[94,45,95,35],[94,51,95,41],[94,53,95,43,"JSON"],[94,57,95,47],[94,58,95,48,"stringify"],[94,67,95,57],[94,68,95,58,"merged"],[94,74,95,64],[94,75,95,65],[94,76,95,66],[95,10,96,8],[96,10,97,8,"queryClient"],[96,21,97,19],[96,22,97,20,"invalidateQueries"],[96,39,97,37],[96,40,97,38],[97,12,97,40,"queryKey"],[97,20,97,48],[97,22,97,50],[97,23,97,51],[97,35,97,63],[98,10,97,65],[98,11,97,66],[98,12,97,67],[99,8,98,6],[99,9,98,7],[99,10,98,8],[99,17,98,15,"e"],[99,18,98,16],[99,20,98,18],[100,10,99,8,"console"],[100,17,99,15],[100,18,99,16,"error"],[100,23,99,21],[100,24,99,22],[100,64,99,62],[100,66,99,64,"e"],[100,67,99,65],[100,68,99,66],[101,8,100,6],[102,6,101,4],[102,7,101,5],[102,9,101,7],[102,10,101,8],[103,4,102,2],[103,5,102,3],[103,7,102,5],[103,8,102,6,"likesQuery"],[103,18,102,16],[103,19,102,17,"data"],[103,23,102,21],[103,25,102,23,"resolvedUserId"],[103,39,102,37],[103,41,102,39,"queryClient"],[103,52,102,50],[103,54,102,52,"user"],[103,58,102,56],[103,60,102,58,"userEmail"],[103,69,102,67],[103,71,102,69,"userId"],[103,77,102,75],[103,78,102,76],[103,79,102,77],[104,4,104,2],[104,10,104,8,"likes"],[104,15,104,13],[104,18,104,16,"likesQuery"],[104,28,104,26],[104,29,104,27,"data"],[104,33,104,31],[104,35,104,33,"likes"],[104,40,104,38],[104,44,104,42],[104,46,104,44],[105,4,106,2],[105,10,106,8,"likeBackMutation"],[105,26,106,24],[105,29,106,27],[105,33,106,27,"useMutation"],[105,52,106,38],[105,53,106,38,"useMutation"],[105,64,106,38],[105,66,106,39],[106,6,107,4,"mutationFn"],[106,16,107,14],[106,18,107,16],[106,24,107,16,"mutationFn"],[106,25,107,23],[107,8,107,25,"profileId"],[108,6,107,35],[108,7,107,36],[108,12,107,41],[109,8,108,6],[109,14,108,12,"fromUserId"],[109,24,108,22],[109,27,108,25,"Number"],[109,33,108,31],[109,34,108,32,"effectiveUserId"],[109,49,108,47],[109,50,108,48],[110,8,109,6],[110,12,109,10],[110,13,109,11,"Number"],[110,19,109,17],[110,20,109,18,"isFinite"],[110,28,109,26],[110,29,109,27,"fromUserId"],[110,39,109,37],[110,40,109,38],[110,42,109,40],[111,10,110,8],[111,16,110,14],[111,20,110,18,"Error"],[111,25,110,23],[111,26,110,24],[111,43,110,41],[111,44,110,42],[112,8,111,6],[113,8,113,6],[113,14,113,12,"response"],[113,22,113,20],[113,25,113,23],[113,31,113,29,"fetch"],[113,36,113,34],[113,37,113,35],[113,57,113,55],[113,59,113,57],[114,10,114,8,"method"],[114,16,114,14],[114,18,114,16],[114,24,114,22],[115,10,115,8,"headers"],[115,17,115,15],[115,19,115,17],[116,12,115,19],[116,26,115,33],[116,28,115,35],[117,10,115,54],[117,11,115,55],[118,10,116,8,"body"],[118,14,116,12],[118,16,116,14,"JSON"],[118,20,116,18],[118,21,116,19,"stringify"],[118,30,116,28],[118,31,116,29],[119,12,116,31,"fromUserId"],[119,22,116,41],[120,12,116,43,"toUserId"],[120,20,116,51],[120,22,116,53,"profileId"],[121,10,116,63],[121,11,116,64],[122,8,117,6],[122,9,117,7],[122,10,117,8],[123,8,119,6],[123,12,119,10],[123,13,119,11,"response"],[123,21,119,19],[123,22,119,20,"ok"],[123,24,119,22],[123,26,119,24],[124,10,120,8],[124,16,120,14],[124,20,120,18,"Error"],[124,25,120,23],[124,26,121,10],[124,81,121,65,"response"],[124,89,121,73],[124,90,121,74,"status"],[124,96,121,80],[124,101,121,85,"response"],[124,109,121,93],[124,110,121,94,"statusText"],[124,120,121,104],[124,122,122,8],[124,123,122,9],[125,8,123,6],[126,8,125,6],[126,15,125,13,"response"],[126,23,125,21],[126,24,125,22,"json"],[126,28,125,26],[126,29,125,27],[126,30,125,28],[127,6,126,4],[127,7,126,5],[128,6,127,4,"onMutate"],[128,14,127,12],[128,16,127,14],[128,22,127,14,"onMutate"],[128,23,127,21],[129,8,127,23,"profileId"],[130,6,127,33],[130,7,127,34],[130,12,127,39],[131,8,128,6],[131,14,128,12,"queryClient"],[131,25,128,23],[131,26,128,24,"cancelQueries"],[131,39,128,37],[131,40,128,38],[132,10,129,8,"queryKey"],[132,18,129,16],[132,20,129,18],[132,21,129,19],[132,30,129,28],[132,32,129,30,"userId"],[132,38,129,36],[132,42,129,40],[132,46,129,44],[132,48,129,46,"userEmail"],[132,57,129,55],[132,61,129,59],[132,65,129,63],[133,8,130,6],[133,9,130,7],[133,10,130,8],[134,8,132,6],[134,14,132,12,"previous"],[134,22,132,20],[134,25,132,23,"queryClient"],[134,36,132,34],[134,37,132,35,"getQueryData"],[134,49,132,47],[134,50,132,48],[134,51,133,8],[134,60,133,17],[134,62,134,8,"userId"],[134,68,134,14],[134,72,134,18],[134,76,134,22],[134,78,135,8,"userEmail"],[134,87,135,17],[134,91,135,21],[134,95,135,25],[134,96,136,7],[134,97,136,8],[135,8,138,6,"queryClient"],[135,19,138,17],[135,20,138,18,"setQueryData"],[135,32,138,30],[135,33,139,8],[135,34,139,9],[135,43,139,18],[135,45,139,20,"userId"],[135,51,139,26],[135,55,139,30],[135,59,139,34],[135,61,139,36,"userEmail"],[135,70,139,45],[135,74,139,49],[135,78,139,53],[135,79,139,54],[135,81,140,9,"old"],[135,84,140,12],[135,88,140,17],[136,10,141,10],[136,16,141,16,"oldLikes"],[136,24,141,24],[136,27,141,27,"old"],[136,30,141,30],[136,32,141,32,"likes"],[136,37,141,37],[136,41,141,41],[136,43,141,43],[137,10,142,10],[137,16,142,16,"nextLikes"],[137,25,142,25],[137,28,142,28,"oldLikes"],[137,36,142,36],[137,37,142,37,"filter"],[137,43,142,43],[137,44,142,45,"x"],[137,45,142,46],[137,49,142,51,"x"],[137,50,142,52],[137,52,142,54,"id"],[137,54,142,56],[137,59,142,61,"profileId"],[137,68,142,70],[137,69,142,71],[138,10,143,10],[138,17,143,17],[139,12,143,19],[139,16,143,23,"old"],[139,19,143,26],[139,23,143,30],[139,24,143,31],[139,25,143,32],[139,26,143,33],[140,12,143,35,"likes"],[140,17,143,40],[140,19,143,42,"nextLikes"],[141,10,143,52],[141,11,143,53],[142,8,144,8],[142,9,145,6],[142,10,145,7],[144,8,147,6],[145,8,148,6],[146,8,149,6],[146,12,149,10],[147,10,150,8],[147,14,151,10,"effectiveUserId"],[147,29,151,25],[147,33,152,10],[147,40,152,17,"queryClient"],[147,51,152,28],[147,52,152,29,"setQueriesData"],[147,66,152,43],[147,71,152,48],[147,81,152,58],[147,83,153,10],[148,12,154,10,"queryClient"],[148,23,154,21],[148,24,154,22,"setQueriesData"],[148,38,154,36],[148,39,155,12],[149,14,155,14,"queryKey"],[149,22,155,22],[149,24,155,24],[149,25,155,25],[149,38,155,38],[149,40,155,40,"Number"],[149,46,155,46],[149,47,155,47,"effectiveUserId"],[149,62,155,62],[149,63,155,63],[150,12,155,65],[150,13,155,66],[150,15,156,13,"old"],[150,18,156,16],[150,22,156,21],[151,14,157,14],[151,18,157,18],[151,19,157,19,"Array"],[151,24,157,24],[151,25,157,25,"isArray"],[151,32,157,32],[151,33,157,33,"old"],[151,36,157,36],[151,37,157,37],[151,39,157,39],[151,46,157,46,"old"],[151,49,157,49],[152,14,158,14],[152,20,158,20,"pid"],[152,23,158,23],[152,26,158,26,"Number"],[152,32,158,32],[152,33,158,33,"profileId"],[152,42,158,42],[152,43,158,43],[153,14,159,14],[153,21,159,21,"old"],[153,24,159,24],[153,25,159,25,"filter"],[153,31,159,31],[153,32,159,33,"p"],[153,33,159,34],[153,37,159,39,"Number"],[153,43,159,45],[153,44,159,46,"p"],[153,45,159,47],[153,47,159,49,"id"],[153,49,159,51],[153,50,159,52],[153,55,159,57,"pid"],[153,58,159,60],[153,59,159,61],[154,12,160,12],[154,13,161,10],[154,14,161,11],[155,10,162,8],[156,8,163,6],[156,9,163,7],[156,10,163,8],[156,17,163,15,"e"],[156,18,163,16],[156,20,163,18],[157,10,164,8,"console"],[157,17,164,15],[157,18,164,16,"error"],[157,23,164,21],[157,24,164,22,"e"],[157,25,164,23],[157,26,164,24],[158,8,165,6],[159,8,167,6],[159,15,167,13],[160,10,167,15,"previous"],[161,8,167,24],[161,9,167,25],[162,6,168,4],[162,7,168,5],[163,6,169,4,"onError"],[163,13,169,11],[163,15,169,13,"onError"],[163,16,169,14,"error"],[163,21,169,19],[163,23,169,21,"_variables"],[163,33,169,31],[163,35,169,33,"context"],[163,42,169,40],[163,47,169,45],[164,8,170,6,"console"],[164,15,170,13],[164,16,170,14,"error"],[164,21,170,19],[164,22,170,20],[164,42,170,40],[164,44,170,42,"error"],[164,49,170,47],[164,50,170,48],[165,8,171,6],[165,12,171,10,"context"],[165,19,171,17],[165,21,171,19,"previous"],[165,29,171,27],[165,31,171,29],[166,10,172,8,"queryClient"],[166,21,172,19],[166,22,172,20,"setQueryData"],[166,34,172,32],[166,35,173,10],[166,36,173,11],[166,45,173,20],[166,47,173,22,"userId"],[166,53,173,28],[166,57,173,32],[166,61,173,36],[166,63,173,38,"userEmail"],[166,72,173,47],[166,76,173,51],[166,80,173,55],[166,81,173,56],[166,83,174,10,"context"],[166,90,174,17],[166,91,174,18,"previous"],[166,99,175,8],[166,100,175,9],[167,8,176,6],[168,6,177,4],[168,7,177,5],[169,6,178,4,"onSettled"],[169,15,178,13],[169,17,178,15,"onSettled"],[169,18,178,16,"_data"],[169,23,178,21],[169,25,178,23,"_error"],[169,31,178,29],[169,33,178,31,"variables"],[169,42,178,40],[169,47,178,45],[170,8,179,6,"queryClient"],[170,19,179,17],[170,20,179,18,"invalidateQueries"],[170,37,179,35],[170,38,179,36],[171,10,180,8,"queryKey"],[171,18,180,16],[171,20,180,18],[171,21,180,19],[171,30,180,28],[171,32,180,30,"userId"],[171,38,180,36],[171,42,180,40],[171,46,180,44],[171,48,180,46,"userEmail"],[171,57,180,55],[171,61,180,59],[171,65,180,63],[172,8,181,6],[172,9,181,7],[172,10,181,8],[173,8,183,6],[173,12,183,10,"effectiveUserId"],[173,27,183,25],[173,29,183,27],[174,10,184,8,"queryClient"],[174,21,184,19],[174,22,184,20,"invalidateQueries"],[174,39,184,37],[174,40,184,38],[175,12,185,10,"queryKey"],[175,20,185,18],[175,22,185,20],[175,23,185,21],[175,39,185,37],[175,41,185,39,"Number"],[175,47,185,45],[175,48,185,46,"effectiveUserId"],[175,63,185,61],[175,64,185,62],[176,10,186,8],[176,11,186,9],[176,12,186,10],[177,10,187,8,"queryClient"],[177,21,187,19],[177,22,187,20,"invalidateQueries"],[177,39,187,37],[177,40,187,38],[178,12,188,10,"queryKey"],[178,20,188,18],[178,22,188,20],[178,23,188,21],[178,32,188,30],[178,34,188,32,"Number"],[178,40,188,38],[178,41,188,39,"effectiveUserId"],[178,56,188,54],[178,57,188,55],[179,10,189,8],[179,11,189,9],[179,12,189,10],[181,10,191,8],[182,10,192,8],[183,10,193,8,"queryClient"],[183,21,193,19],[183,22,193,20,"invalidateQueries"],[183,39,193,37],[183,40,193,38],[184,12,194,10,"queryKey"],[184,20,194,18],[184,22,194,20],[184,23,194,21],[184,36,194,34],[184,38,194,36,"Number"],[184,44,194,42],[184,45,194,43,"effectiveUserId"],[184,60,194,58],[184,61,194,59],[185,10,195,8],[185,11,195,9],[185,12,195,10],[186,8,196,6],[188,8,198,6],[189,8,199,6],[190,8,200,6],[190,12,200,10],[191,10,201,8],[191,16,201,14,"profileId"],[191,25,201,23],[191,28,201,26,"variables"],[191,37,201,35],[191,39,201,37,"profileId"],[191,48,201,46],[192,10,202,8],[192,14,203,10,"effectiveUserId"],[192,29,203,25],[192,33,204,10,"profileId"],[192,42,204,19],[192,46,205,10],[192,53,205,17,"queryClient"],[192,64,205,28],[192,65,205,29,"setQueriesData"],[192,79,205,43],[192,84,205,48],[192,94,205,58],[192,96,206,10],[193,12,207,10,"queryClient"],[193,23,207,21],[193,24,207,22,"setQueriesData"],[193,38,207,36],[193,39,208,12],[194,14,208,14,"queryKey"],[194,22,208,22],[194,24,208,24],[194,25,208,25],[194,38,208,38],[194,40,208,40,"Number"],[194,46,208,46],[194,47,208,47,"effectiveUserId"],[194,62,208,62],[194,63,208,63],[195,12,208,65],[195,13,208,66],[195,15,209,13,"old"],[195,18,209,16],[195,22,209,21],[196,14,210,14],[196,18,210,18],[196,19,210,19,"Array"],[196,24,210,24],[196,25,210,25,"isArray"],[196,32,210,32],[196,33,210,33,"old"],[196,36,210,36],[196,37,210,37],[196,39,210,39],[196,46,210,46,"old"],[196,49,210,49],[197,14,211,14],[197,20,211,20,"pid"],[197,23,211,23],[197,26,211,26,"Number"],[197,32,211,32],[197,33,211,33,"profileId"],[197,42,211,42],[197,43,211,43],[198,14,212,14],[198,21,212,21,"old"],[198,24,212,24],[198,25,212,25,"filter"],[198,31,212,31],[198,32,212,33,"p"],[198,33,212,34],[198,37,212,39,"Number"],[198,43,212,45],[198,44,212,46,"p"],[198,45,212,47],[198,47,212,49,"id"],[198,49,212,51],[198,50,212,52],[198,55,212,57,"pid"],[198,58,212,60],[198,59,212,61],[199,12,213,12],[199,13,214,10],[199,14,214,11],[200,10,215,8],[201,8,216,6],[201,9,216,7],[201,10,216,8],[201,17,216,15,"e"],[201,18,216,16],[201,20,216,18],[202,10,217,8,"console"],[202,17,217,15],[202,18,217,16,"error"],[202,23,217,21],[202,24,217,22,"e"],[202,25,217,23],[202,26,217,24],[203,8,218,6],[204,6,219,4],[205,4,220,2],[205,5,220,3],[205,6,220,4],[206,4,222,2],[206,10,222,8,"handleLikeBack"],[206,24,222,22],[206,27,222,25],[206,31,222,25,"useCallback"],[206,37,222,36],[206,38,222,36,"useCallback"],[206,49,222,36],[206,51,223,5,"profile"],[206,58,223,12],[206,62,223,17],[207,6,224,6],[207,10,224,10],[207,11,224,11,"profile"],[207,18,224,18],[207,20,224,20,"id"],[207,22,224,22],[207,24,224,24],[208,6,225,6],[208,13,225,13,"likeBackMutation"],[208,29,225,29],[208,30,225,30,"mutate"],[208,36,225,36],[208,37,225,37],[209,8,225,39,"profileId"],[209,17,225,48],[209,19,225,50,"profile"],[209,26,225,57],[209,27,225,58,"id"],[209,29,225,60],[210,8,225,62,"profile"],[211,6,225,70],[211,7,225,71],[211,8,225,72],[212,4,226,4],[212,5,226,5],[212,7,227,4],[212,8,227,5,"likeBackMutation"],[212,24,227,21],[212,25,228,2],[212,26,228,3],[213,4,230,2],[213,10,230,8,"onPullToRefresh"],[213,25,230,23],[213,28,230,26],[213,32,230,26,"useCallback"],[213,38,230,37],[213,39,230,37,"useCallback"],[213,50,230,37],[213,52,230,38],[213,64,230,50],[214,6,231,4,"setIsPullRefreshing"],[214,25,231,23],[214,26,231,24],[214,30,231,28],[214,31,231,29],[215,6,232,4],[215,10,232,8],[216,8,233,6],[216,14,233,12,"likesQuery"],[216,24,233,22],[216,25,233,23,"refetch"],[216,32,233,30],[216,33,233,31],[216,34,233,32],[217,6,234,4],[217,7,234,5],[217,8,234,6],[217,15,234,13,"e"],[217,16,234,14],[217,18,234,16],[218,8,235,6,"console"],[218,15,235,13],[218,16,235,14,"error"],[218,21,235,19],[218,22,235,20,"e"],[218,23,235,21],[218,24,235,22],[219,6,236,4],[219,7,236,5],[219,16,236,14],[220,8,237,6,"setIsPullRefreshing"],[220,27,237,25],[220,28,237,26],[220,33,237,31],[220,34,237,32],[221,6,238,4],[222,4,239,2],[222,5,239,3],[222,7,239,5],[222,8,239,6,"likesQuery"],[222,18,239,16],[222,19,239,17],[222,20,239,18],[223,4,241,2],[223,11,241,9],[224,6,242,4,"user"],[224,10,242,8],[225,6,243,4,"userId"],[225,12,243,10],[225,14,243,12,"effectiveUserId"],[225,29,243,27],[226,6,244,4,"userEmail"],[226,15,244,13],[227,6,245,4,"likes"],[227,11,245,9],[228,6,246,4,"userQuery"],[228,15,246,13],[229,6,247,4,"likesQuery"],[229,16,247,14],[230,6,248,4,"likeBackMutation"],[230,22,248,20],[231,6,249,4,"handleLikeBack"],[231,20,249,18],[232,6,250,4,"isPullRefreshing"],[232,22,250,20],[233,6,251,4,"onPullToRefresh"],[234,4,252,2],[234,5,252,3],[235,2,253,0],[236,0,253,1],[236,3]],"functionMap":{"names":["<global>","useLikesData","useQuery$argument_0.queryFn","useMemo$argument_0","useEffect$argument_0","<anonymous>","useMutation$argument_0.mutationFn","useMutation$argument_0.onMutate","queryClient.setQueryData$argument_1","oldLikes.filter$argument_0","queryClient.setQueriesData$argument_1","old.filter$argument_0","useMutation$argument_0.onError","useMutation$argument_0.onSettled","handleLikeBack","onPullToRefresh"],"mappings":"AAA;OCI;aCM;KDiB;aCU;KDkB;kCEO;GFW;YGI;KCc;KDS;GHC;gBKK;KLmB;cMC;QCa;4CCE,0BD;SDE;YGY;gCCG,4BD;aHC;KNQ;aWC;KXQ;eYC;YH+B;gCCG,4BD;aGC;KZM;IaI;KbG;sCcI;GdS;CDc"},"hasCjsExports":false},"type":"js/module"}]}