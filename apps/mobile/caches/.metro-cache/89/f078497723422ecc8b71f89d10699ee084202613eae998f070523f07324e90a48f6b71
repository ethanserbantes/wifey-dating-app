{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.prepareShareCardDataUrl = prepareShareCardDataUrl;\n  // Utilities for preparing a shareable *image item* for the native share sheet.\n  //\n  // IMPORTANT:\n  // - expo-image-manipulator only works with images stored on the local file system.\n  // - In this project we avoid adding new native packages.\n  //\n  // So we fetch the remote image and convert it into a data URL (base64).\n  // iOS treats a data:image/* URL as an image item more reliably than an http(s) URL.\n\n  function base64FromArrayBuffer(arrayBuffer) {\n    // Convert ArrayBuffer -> base64 without Buffer (works in RN/JS).\n    const bytes = new Uint8Array(arrayBuffer);\n    const alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    let base64 = \"\";\n    let i = 0;\n    for (; i + 2 < bytes.length; i += 3) {\n      const chunk = bytes[i] << 16 | bytes[i + 1] << 8 | bytes[i + 2];\n      base64 += alphabet[chunk >> 18 & 63];\n      base64 += alphabet[chunk >> 12 & 63];\n      base64 += alphabet[chunk >> 6 & 63];\n      base64 += alphabet[chunk & 63];\n    }\n    const remaining = bytes.length - i;\n    if (remaining === 1) {\n      const chunk = bytes[i] << 16;\n      base64 += alphabet[chunk >> 18 & 63];\n      base64 += alphabet[chunk >> 12 & 63];\n      base64 += \"==\";\n    } else if (remaining === 2) {\n      const chunk = bytes[i] << 16 | bytes[i + 1] << 8;\n      base64 += alphabet[chunk >> 18 & 63];\n      base64 += alphabet[chunk >> 12 & 63];\n      base64 += alphabet[chunk >> 6 & 63];\n      base64 += \"=\";\n    }\n    return base64;\n  }\n  async function prepareShareCardDataUrl(remoteUrl) {\n    if (!remoteUrl || typeof remoteUrl !== \"string\") {\n      throw new Error(\"Missing remoteUrl\");\n    }\n    const resp = await fetch(remoteUrl);\n    if (!resp.ok) {\n      throw new Error(`When fetching share image, the response was [${resp.status}] ${resp.statusText}`);\n    }\n    const contentType = resp.headers.get(\"content-type\") || \"image/png\";\n    const buf = await resp.arrayBuffer();\n    const base64 = base64FromArrayBuffer(buf);\n    return {\n      dataUrl: `data:${contentType};base64,${base64}`,\n      contentType\n    };\n  }\n});","lineCount":61,"map":[[7,2,44,0,"exports"],[7,9,44,0],[7,10,44,0,"prepareShareCardDataUrl"],[7,33,44,0],[7,36,44,0,"prepareShareCardDataUrl"],[7,59,44,0],[8,2,1,0],[9,2,2,0],[10,2,3,0],[11,2,4,0],[12,2,5,0],[13,2,6,0],[14,2,7,0],[15,2,8,0],[17,2,10,0],[17,11,10,9,"base64FromArrayBuffer"],[17,32,10,30,"base64FromArrayBuffer"],[17,33,10,31,"arrayBuffer"],[17,44,10,42],[17,46,10,44],[18,4,11,2],[19,4,12,2],[19,10,12,8,"bytes"],[19,15,12,13],[19,18,12,16],[19,22,12,20,"Uint8Array"],[19,32,12,30],[19,33,12,31,"arrayBuffer"],[19,44,12,42],[19,45,12,43],[20,4,13,2],[20,10,13,8,"alphabet"],[20,18,13,16],[20,21,14,4],[20,87,14,70],[21,4,16,2],[21,8,16,6,"base64"],[21,14,16,12],[21,17,16,15],[21,19,16,17],[22,4,17,2],[22,8,17,6,"i"],[22,9,17,7],[22,12,17,10],[22,13,17,11],[23,4,19,2],[23,11,19,9,"i"],[23,12,19,10],[23,15,19,13],[23,16,19,14],[23,19,19,17,"bytes"],[23,24,19,22],[23,25,19,23,"length"],[23,31,19,29],[23,33,19,31,"i"],[23,34,19,32],[23,38,19,36],[23,39,19,37],[23,41,19,39],[24,6,20,4],[24,12,20,10,"chunk"],[24,17,20,15],[24,20,20,19,"bytes"],[24,25,20,24],[24,26,20,25,"i"],[24,27,20,26],[24,28,20,27],[24,32,20,31],[24,34,20,33],[24,37,20,38,"bytes"],[24,42,20,43],[24,43,20,44,"i"],[24,44,20,45],[24,47,20,48],[24,48,20,49],[24,49,20,50],[24,53,20,54],[24,54,20,56],[24,57,20,59,"bytes"],[24,62,20,64],[24,63,20,65,"i"],[24,64,20,66],[24,67,20,69],[24,68,20,70],[24,69,20,71],[25,6,21,4,"base64"],[25,12,21,10],[25,16,21,14,"alphabet"],[25,24,21,22],[25,25,21,24,"chunk"],[25,30,21,29],[25,34,21,33],[25,36,21,35],[25,39,21,39],[25,41,21,41],[25,42,21,42],[26,6,22,4,"base64"],[26,12,22,10],[26,16,22,14,"alphabet"],[26,24,22,22],[26,25,22,24,"chunk"],[26,30,22,29],[26,34,22,33],[26,36,22,35],[26,39,22,39],[26,41,22,41],[26,42,22,42],[27,6,23,4,"base64"],[27,12,23,10],[27,16,23,14,"alphabet"],[27,24,23,22],[27,25,23,24,"chunk"],[27,30,23,29],[27,34,23,33],[27,35,23,34],[27,38,23,38],[27,40,23,40],[27,41,23,41],[28,6,24,4,"base64"],[28,12,24,10],[28,16,24,14,"alphabet"],[28,24,24,22],[28,25,24,23,"chunk"],[28,30,24,28],[28,33,24,31],[28,35,24,33],[28,36,24,34],[29,4,25,2],[30,4,27,2],[30,10,27,8,"remaining"],[30,19,27,17],[30,22,27,20,"bytes"],[30,27,27,25],[30,28,27,26,"length"],[30,34,27,32],[30,37,27,35,"i"],[30,38,27,36],[31,4,28,2],[31,8,28,6,"remaining"],[31,17,28,15],[31,22,28,20],[31,23,28,21],[31,25,28,23],[32,6,29,4],[32,12,29,10,"chunk"],[32,17,29,15],[32,20,29,18,"bytes"],[32,25,29,23],[32,26,29,24,"i"],[32,27,29,25],[32,28,29,26],[32,32,29,30],[32,34,29,32],[33,6,30,4,"base64"],[33,12,30,10],[33,16,30,14,"alphabet"],[33,24,30,22],[33,25,30,24,"chunk"],[33,30,30,29],[33,34,30,33],[33,36,30,35],[33,39,30,39],[33,41,30,41],[33,42,30,42],[34,6,31,4,"base64"],[34,12,31,10],[34,16,31,14,"alphabet"],[34,24,31,22],[34,25,31,24,"chunk"],[34,30,31,29],[34,34,31,33],[34,36,31,35],[34,39,31,39],[34,41,31,41],[34,42,31,42],[35,6,32,4,"base64"],[35,12,32,10],[35,16,32,14],[35,20,32,18],[36,4,33,2],[36,5,33,3],[36,11,33,9],[36,15,33,13,"remaining"],[36,24,33,22],[36,29,33,27],[36,30,33,28],[36,32,33,30],[37,6,34,4],[37,12,34,10,"chunk"],[37,17,34,15],[37,20,34,19,"bytes"],[37,25,34,24],[37,26,34,25,"i"],[37,27,34,26],[37,28,34,27],[37,32,34,31],[37,34,34,33],[37,37,34,38,"bytes"],[37,42,34,43],[37,43,34,44,"i"],[37,44,34,45],[37,47,34,48],[37,48,34,49],[37,49,34,50],[37,53,34,54],[37,54,34,56],[38,6,35,4,"base64"],[38,12,35,10],[38,16,35,14,"alphabet"],[38,24,35,22],[38,25,35,24,"chunk"],[38,30,35,29],[38,34,35,33],[38,36,35,35],[38,39,35,39],[38,41,35,41],[38,42,35,42],[39,6,36,4,"base64"],[39,12,36,10],[39,16,36,14,"alphabet"],[39,24,36,22],[39,25,36,24,"chunk"],[39,30,36,29],[39,34,36,33],[39,36,36,35],[39,39,36,39],[39,41,36,41],[39,42,36,42],[40,6,37,4,"base64"],[40,12,37,10],[40,16,37,14,"alphabet"],[40,24,37,22],[40,25,37,24,"chunk"],[40,30,37,29],[40,34,37,33],[40,35,37,34],[40,38,37,38],[40,40,37,40],[40,41,37,41],[41,6,38,4,"base64"],[41,12,38,10],[41,16,38,14],[41,19,38,17],[42,4,39,2],[43,4,41,2],[43,11,41,9,"base64"],[43,17,41,15],[44,2,42,0],[45,2,44,7],[45,17,44,22,"prepareShareCardDataUrl"],[45,40,44,45,"prepareShareCardDataUrl"],[45,41,44,46,"remoteUrl"],[45,50,44,55],[45,52,44,57],[46,4,45,2],[46,8,45,6],[46,9,45,7,"remoteUrl"],[46,18,45,16],[46,22,45,20],[46,29,45,27,"remoteUrl"],[46,38,45,36],[46,43,45,41],[46,51,45,49],[46,53,45,51],[47,6,46,4],[47,12,46,10],[47,16,46,14,"Error"],[47,21,46,19],[47,22,46,20],[47,41,46,39],[47,42,46,40],[48,4,47,2],[49,4,49,2],[49,10,49,8,"resp"],[49,14,49,12],[49,17,49,15],[49,23,49,21,"fetch"],[49,28,49,26],[49,29,49,27,"remoteUrl"],[49,38,49,36],[49,39,49,37],[50,4,50,2],[50,8,50,6],[50,9,50,7,"resp"],[50,13,50,11],[50,14,50,12,"ok"],[50,16,50,14],[50,18,50,16],[51,6,51,4],[51,12,51,10],[51,16,51,14,"Error"],[51,21,51,19],[51,22,52,6],[51,70,52,54,"resp"],[51,74,52,58],[51,75,52,59,"status"],[51,81,52,65],[51,86,52,70,"resp"],[51,90,52,74],[51,91,52,75,"statusText"],[51,101,52,85],[51,103,53,4],[51,104,53,5],[52,4,54,2],[53,4,56,2],[53,10,56,8,"contentType"],[53,21,56,19],[53,24,56,22,"resp"],[53,28,56,26],[53,29,56,27,"headers"],[53,36,56,34],[53,37,56,35,"get"],[53,40,56,38],[53,41,56,39],[53,55,56,53],[53,56,56,54],[53,60,56,58],[53,71,56,69],[54,4,57,2],[54,10,57,8,"buf"],[54,13,57,11],[54,16,57,14],[54,22,57,20,"resp"],[54,26,57,24],[54,27,57,25,"arrayBuffer"],[54,38,57,36],[54,39,57,37],[54,40,57,38],[55,4,58,2],[55,10,58,8,"base64"],[55,16,58,14],[55,19,58,17,"base64FromArrayBuffer"],[55,40,58,38],[55,41,58,39,"buf"],[55,44,58,42],[55,45,58,43],[56,4,60,2],[56,11,60,9],[57,6,61,4,"dataUrl"],[57,13,61,11],[57,15,61,13],[57,23,61,21,"contentType"],[57,34,61,32],[57,45,61,43,"base64"],[57,51,61,49],[57,53,61,51],[58,6,62,4,"contentType"],[59,4,63,2],[59,5,63,3],[60,2,64,0],[61,0,64,1],[61,3]],"functionMap":{"names":["<global>","base64FromArrayBuffer","prepareShareCardDataUrl"],"mappings":"AAA;ACS;CDgC;OEE;CFoB"},"hasCjsExports":false},"type":"js/module"}]}