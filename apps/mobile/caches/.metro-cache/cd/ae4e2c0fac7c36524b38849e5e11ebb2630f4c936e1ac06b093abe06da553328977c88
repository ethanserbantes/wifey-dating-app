{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":1}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":45,"index":81}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.resolveSource = resolveSource;\n  exports.resolveSourceWithDownload = resolveSourceWithDownload;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoAsset = require(_dependencyMap[1], \"expo-asset\");\n  var _expoModulesCore = require(_dependencyMap[2], \"expo-modules-core\");\n  function resolveSource(source) {\n    if (typeof source === 'string') {\n      return {\n        uri: source\n      };\n    }\n    if (typeof source === 'number') {\n      var asset = _expoAsset.Asset.fromModule(source);\n      return {\n        uri: asset.uri,\n        assetId: source\n      };\n    }\n    return source ?? null;\n  }\n  /**\n   * Resolves and optionally downloads an audio source before loading.\n   * Similar to expo-av's getNativeSourceAndFullInitialStatusForLoadAsync but simplified for expo-audio.\n   */\n  function resolveSourceWithDownload(_x) {\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n  function _resolveSourceWithDownload() {\n    _resolveSourceWithDownload = (0, _asyncToGenerator.default)(function* (source) {\n      var asset = null;\n      // Get asset from different source types\n      if (typeof source === 'number') {\n        asset = _expoAsset.Asset.fromModule(source);\n      } else if (source instanceof _expoAsset.Asset) {\n        asset = source;\n      } else if (typeof source === 'string') {\n        // For remote URLs, create an asset from URI\n        asset = _expoAsset.Asset.fromURI(source);\n      } else if (source && typeof source === 'object' && source.uri) {\n        // For source objects with URI\n        asset = _expoAsset.Asset.fromURI(source.uri);\n      } else if (source && typeof source === 'object' && source.assetId) {\n        // For source objects with assetId\n        asset = _expoAsset.Asset.fromModule(source.assetId);\n      }\n      if (asset) {\n        try {\n          // iOS AVPlayer fails to load the asset if the type is not set or can't be inferred\n          // since this is an audio asset, we can safely set the type to mp3 or any other audio type\n          // and iOS will be able to download and play the asset\n          // Since expo-asset caches, this will only run once per asset, as long as the asset is not deleted from the cache\n          if (!asset.type) {\n            asset = new _expoAsset.Asset({\n              name: asset.name,\n              type: 'mp3',\n              uri: asset.uri\n            });\n          }\n          // FYI: downloadAsync is a no-op on web and immediately returns a promise that resolves to the original url\n          // TODO(@hirbod): evaluate if we should implement downloadAsync for web instead\n          yield asset.downloadAsync();\n          // Use the local URI if available after download\n          if (asset.localUri) {\n            var finalUri = asset.localUri;\n            // On web, we need to fetch the audio file and create a blob URL\n            // this fully downloads the file to the user's device memory and makes it available for the user to play\n            // fetch() is subject to CORS restrictions, so we need to document this for the users on web\n            // TODO(@hirbod): evaluate if we should implement a downloadAsync for web instead of using fetch here\n            if (_expoModulesCore.Platform.OS === 'web') {\n              var response = yield fetch(asset.localUri);\n              var blob = yield response.blob();\n              finalUri = URL.createObjectURL(blob);\n            }\n            return {\n              uri: finalUri\n            };\n          } else {\n            console.warn('No localUri found, asset may not have downloaded properly, returning the original source');\n          }\n        } catch (error) {\n          // If download fails, fall back to original source\n          console.warn('expo-audio: Failed to download asset, falling back to original source:', error);\n        }\n      }\n      // Fallback to normal resolution\n      return resolveSource(source);\n    });\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n});","lineCount":102,"map":[[12,2,3,0,"exports"],[12,9,3,0],[12,10,3,0,"resolveSource"],[12,23,3,0],[12,26,3,0,"resolveSource"],[12,39,3,0],[13,2,17,0,"exports"],[13,9,17,0],[13,10,17,0,"resolveSourceWithDownload"],[13,35,17,0],[13,38,17,0,"resolveSourceWithDownload"],[13,63,17,0],[14,2,79,1],[14,6,79,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,79,1],[14,45,79,1,"require"],[14,52,79,1],[14,53,79,1,"_dependencyMap"],[14,67,79,1],[15,2,79,1],[15,6,79,1,"_asyncToGenerator"],[15,23,79,1],[15,26,79,1,"_interopDefault"],[15,41,79,1],[15,42,79,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,79,1],[16,2,1,0],[16,6,1,0,"_expoAsset"],[16,16,1,0],[16,19,1,0,"require"],[16,26,1,0],[16,27,1,0,"_dependencyMap"],[16,41,1,0],[17,2,2,0],[17,6,2,0,"_expoModulesCore"],[17,22,2,0],[17,25,2,0,"require"],[17,32,2,0],[17,33,2,0,"_dependencyMap"],[17,47,2,0],[18,2,3,7],[18,11,3,16,"resolveSource"],[18,24,3,29,"resolveSource"],[18,25,3,30,"source"],[18,31,3,36],[18,33,3,38],[19,4,4,4],[19,8,4,8],[19,15,4,15,"source"],[19,21,4,21],[19,26,4,26],[19,34,4,34],[19,36,4,36],[20,6,5,8],[20,13,5,15],[21,8,5,17,"uri"],[21,11,5,20],[21,13,5,22,"source"],[22,6,5,29],[22,7,5,30],[23,4,6,4],[24,4,7,4],[24,8,7,8],[24,15,7,15,"source"],[24,21,7,21],[24,26,7,26],[24,34,7,34],[24,36,7,36],[25,6,8,8],[25,10,8,14,"asset"],[25,15,8,19],[25,18,8,22,"Asset"],[25,28,8,27],[25,29,8,27,"Asset"],[25,34,8,27],[25,35,8,28,"fromModule"],[25,45,8,38],[25,46,8,39,"source"],[25,52,8,45],[25,53,8,46],[26,6,9,8],[26,13,9,15],[27,8,9,17,"uri"],[27,11,9,20],[27,13,9,22,"asset"],[27,18,9,27],[27,19,9,28,"uri"],[27,22,9,31],[28,8,9,33,"assetId"],[28,15,9,40],[28,17,9,42,"source"],[29,6,9,49],[29,7,9,50],[30,4,10,4],[31,4,11,4],[31,11,11,11,"source"],[31,17,11,17],[31,21,11,21],[31,25,11,25],[32,2,12,0],[33,2,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[37,2,13,0],[37,11,17,22,"resolveSourceWithDownload"],[37,36,17,47,"resolveSourceWithDownload"],[37,37,17,47,"_x"],[37,39,17,47],[38,4,17,47],[38,11,17,47,"_resolveSourceWithDownload"],[38,37,17,47],[38,38,17,47,"apply"],[38,43,17,47],[38,50,17,47,"arguments"],[38,59,17,47],[39,2,17,47],[40,2,17,47],[40,11,17,47,"_resolveSourceWithDownload"],[40,38,17,47],[41,4,17,47,"_resolveSourceWithDownload"],[41,30,17,47],[41,37,17,47,"_asyncToGenerator"],[41,54,17,47],[41,55,17,47,"default"],[41,62,17,47],[41,64,17,7],[41,75,17,48,"source"],[41,81,17,54],[41,83,17,56],[42,6,18,4],[42,10,18,8,"asset"],[42,15,18,13],[42,18,18,16],[42,22,18,20],[43,6,19,4],[44,6,20,4],[44,10,20,8],[44,17,20,15,"source"],[44,23,20,21],[44,28,20,26],[44,36,20,34],[44,38,20,36],[45,8,21,8,"asset"],[45,13,21,13],[45,16,21,16,"Asset"],[45,26,21,21],[45,27,21,21,"Asset"],[45,32,21,21],[45,33,21,22,"fromModule"],[45,43,21,32],[45,44,21,33,"source"],[45,50,21,39],[45,51,21,40],[46,6,22,4],[46,7,22,5],[46,13,23,9],[46,17,23,13,"source"],[46,23,23,19],[46,35,23,31,"Asset"],[46,45,23,36],[46,46,23,36,"Asset"],[46,51,23,36],[46,53,23,38],[47,8,24,8,"asset"],[47,13,24,13],[47,16,24,16,"source"],[47,22,24,22],[48,6,25,4],[48,7,25,5],[48,13,26,9],[48,17,26,13],[48,24,26,20,"source"],[48,30,26,26],[48,35,26,31],[48,43,26,39],[48,45,26,41],[49,8,27,8],[50,8,28,8,"asset"],[50,13,28,13],[50,16,28,16,"Asset"],[50,26,28,21],[50,27,28,21,"Asset"],[50,32,28,21],[50,33,28,22,"fromURI"],[50,40,28,29],[50,41,28,30,"source"],[50,47,28,36],[50,48,28,37],[51,6,29,4],[51,7,29,5],[51,13,30,9],[51,17,30,13,"source"],[51,23,30,19],[51,27,30,23],[51,34,30,30,"source"],[51,40,30,36],[51,45,30,41],[51,53,30,49],[51,57,30,53,"source"],[51,63,30,59],[51,64,30,60,"uri"],[51,67,30,63],[51,69,30,65],[52,8,31,8],[53,8,32,8,"asset"],[53,13,32,13],[53,16,32,16,"Asset"],[53,26,32,21],[53,27,32,21,"Asset"],[53,32,32,21],[53,33,32,22,"fromURI"],[53,40,32,29],[53,41,32,30,"source"],[53,47,32,36],[53,48,32,37,"uri"],[53,51,32,40],[53,52,32,41],[54,6,33,4],[54,7,33,5],[54,13,34,9],[54,17,34,13,"source"],[54,23,34,19],[54,27,34,23],[54,34,34,30,"source"],[54,40,34,36],[54,45,34,41],[54,53,34,49],[54,57,34,53,"source"],[54,63,34,59],[54,64,34,60,"assetId"],[54,71,34,67],[54,73,34,69],[55,8,35,8],[56,8,36,8,"asset"],[56,13,36,13],[56,16,36,16,"Asset"],[56,26,36,21],[56,27,36,21,"Asset"],[56,32,36,21],[56,33,36,22,"fromModule"],[56,43,36,32],[56,44,36,33,"source"],[56,50,36,39],[56,51,36,40,"assetId"],[56,58,36,47],[56,59,36,48],[57,6,37,4],[58,6,38,4],[58,10,38,8,"asset"],[58,15,38,13],[58,17,38,15],[59,8,39,8],[59,12,39,12],[60,10,40,12],[61,10,41,12],[62,10,42,12],[63,10,43,12],[64,10,44,12],[64,14,44,16],[64,15,44,17,"asset"],[64,20,44,22],[64,21,44,23,"type"],[64,25,44,27],[64,27,44,29],[65,12,45,16,"asset"],[65,17,45,21],[65,20,45,24],[65,24,45,28,"Asset"],[65,34,45,33],[65,35,45,33,"Asset"],[65,40,45,33],[65,41,45,34],[66,14,46,20,"name"],[66,18,46,24],[66,20,46,26,"asset"],[66,25,46,31],[66,26,46,32,"name"],[66,30,46,36],[67,14,47,20,"type"],[67,18,47,24],[67,20,47,26],[67,25,47,31],[68,14,48,20,"uri"],[68,17,48,23],[68,19,48,25,"asset"],[68,24,48,30],[68,25,48,31,"uri"],[69,12,49,16],[69,13,49,17],[69,14,49,18],[70,10,50,12],[71,10,51,12],[72,10,52,12],[73,10,53,12],[73,16,53,18,"asset"],[73,21,53,23],[73,22,53,24,"downloadAsync"],[73,35,53,37],[73,36,53,38],[73,37,53,39],[74,10,54,12],[75,10,55,12],[75,14,55,16,"asset"],[75,19,55,21],[75,20,55,22,"localUri"],[75,28,55,30],[75,30,55,32],[76,12,56,16],[76,16,56,20,"finalUri"],[76,24,56,28],[76,27,56,31,"asset"],[76,32,56,36],[76,33,56,37,"localUri"],[76,41,56,45],[77,12,57,16],[78,12,58,16],[79,12,59,16],[80,12,60,16],[81,12,61,16],[81,16,61,20,"Platform"],[81,32,61,28],[81,33,61,28,"Platform"],[81,41,61,28],[81,42,61,29,"OS"],[81,44,61,31],[81,49,61,36],[81,54,61,41],[81,56,61,43],[82,14,62,20],[82,18,62,26,"response"],[82,26,62,34],[82,35,62,43,"fetch"],[82,40,62,48],[82,41,62,49,"asset"],[82,46,62,54],[82,47,62,55,"localUri"],[82,55,62,63],[82,56,62,64],[83,14,63,20],[83,18,63,26,"blob"],[83,22,63,30],[83,31,63,39,"response"],[83,39,63,47],[83,40,63,48,"blob"],[83,44,63,52],[83,45,63,53],[83,46,63,54],[84,14,64,20,"finalUri"],[84,22,64,28],[84,25,64,31,"URL"],[84,28,64,34],[84,29,64,35,"createObjectURL"],[84,44,64,50],[84,45,64,51,"blob"],[84,49,64,55],[84,50,64,56],[85,12,65,16],[86,12,66,16],[86,19,66,23],[87,14,66,25,"uri"],[87,17,66,28],[87,19,66,30,"finalUri"],[88,12,66,39],[88,13,66,40],[89,10,67,12],[89,11,67,13],[89,17,68,17],[90,12,69,16,"console"],[90,19,69,23],[90,20,69,24,"warn"],[90,24,69,28],[90,25,69,29],[90,115,69,119],[90,116,69,120],[91,10,70,12],[92,8,71,8],[92,9,71,9],[92,10,72,8],[92,17,72,15,"error"],[92,22,72,20],[92,24,72,22],[93,10,73,12],[94,10,74,12,"console"],[94,17,74,19],[94,18,74,20,"warn"],[94,22,74,24],[94,23,74,25],[94,95,74,97],[94,97,74,99,"error"],[94,102,74,104],[94,103,74,105],[95,8,75,8],[96,6,76,4],[97,6,77,4],[98,6,78,4],[98,13,78,11,"resolveSource"],[98,26,78,24],[98,27,78,25,"source"],[98,33,78,31],[98,34,78,32],[99,4,79,0],[99,5,79,1],[100,4,79,1],[100,11,79,1,"_resolveSourceWithDownload"],[100,37,79,1],[100,38,79,1,"apply"],[100,43,79,1],[100,50,79,1,"arguments"],[100,59,79,1],[101,2,79,1],[102,0,79,1],[102,3]],"functionMap":{"names":["<global>","resolveSource","resolveSourceWithDownload"],"mappings":"AAA;OCE;CDS;OEK;CF8D"},"hasCjsExports":false},"type":"js/module"}]}