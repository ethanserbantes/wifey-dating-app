{"dependencies":[{"name":"@babel/runtime/helpers/awaitAsyncGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"WZI4BLbsoFmfGv92jc0fZy7RWkQ=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/wrapAsyncGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"NV7M0GAEWUGvIKMnZy5Y7CrLwN8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncIterator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"iAa+RToycgxigMSWyQzterF69/I=","exportNames":["*"],"imports":1}},{"name":"../../exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"EZPmsHt7bn9JJ4Y0grXw/CrOow0=","exportNames":["*"],"imports":1}},{"name":"../spanstatus.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":53,"index":106}}],"key":"oo3PNTzeCFGehsy4DLcuUh8qvTg=","exportNames":["*"],"imports":1}},{"name":"../ai/gen-ai-attributes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":256,"index":363}}],"key":"nKHaXfEjIYF1icPUCGJgR0o1cZ8=","exportNames":["*"],"imports":1}},{"name":"../ai/utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":364},"end":{"line":4,"column":57,"index":421}}],"key":"4ap/A8nGTkT0jtbnAG1G9kFBsuw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"instrumentAsyncIterableStream\", {\n    enumerable: true,\n    get: function () {\n      return instrumentAsyncIterableStream;\n    }\n  });\n  Object.defineProperty(exports, \"instrumentMessageStream\", {\n    enumerable: true,\n    get: function () {\n      return instrumentMessageStream;\n    }\n  });\n  var _babelRuntimeHelpersAwaitAsyncGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/awaitAsyncGenerator\");\n  var _awaitAsyncGenerator = _interopDefault(_babelRuntimeHelpersAwaitAsyncGenerator);\n  var _babelRuntimeHelpersWrapAsyncGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/wrapAsyncGenerator\");\n  var _wrapAsyncGenerator = _interopDefault(_babelRuntimeHelpersWrapAsyncGenerator);\n  var _babelRuntimeHelpersAsyncIterator = require(_dependencyMap[2], \"@babel/runtime/helpers/asyncIterator\");\n  var _asyncIterator = _interopDefault(_babelRuntimeHelpersAsyncIterator);\n  var _exportsJs = require(_dependencyMap[3], \"../../exports.js\");\n  var _spanstatusJs = require(_dependencyMap[4], \"../spanstatus.js\");\n  var _aiGenAiAttributesJs = require(_dependencyMap[5], \"../ai/gen-ai-attributes.js\");\n  var _aiUtilsJs = require(_dependencyMap[6], \"../ai/utils.js\");\n  /**\n   * State object used to accumulate information from a stream of Anthropic AI events.\n   */\n\n  /**\n   * Checks if an event is an error event\n   * @param event - The event to process\n   * @param state - The state of the streaming process\n   * @param recordOutputs - Whether to record outputs\n   * @param span - The span to update\n   * @returns Whether an error occurred\n   */\n\n  function isErrorEvent(event, span) {\n    if ('type' in event && typeof event.type === 'string') {\n      // If the event is an error, set the span status and capture the error\n      // These error events are not rejected by the API by default, but are sent as metadata of the response\n      if (event.type === 'error') {\n        span.setStatus({\n          code: _spanstatusJs.SPAN_STATUS_ERROR,\n          message: event.error?.type ?? 'internal_error'\n        });\n        (0, _exportsJs.captureException)(event.error, {\n          mechanism: {\n            handled: false,\n            type: 'auto.ai.anthropic.anthropic_error'\n          }\n        });\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Processes the message metadata of an event\n   * @param event - The event to process\n   * @param state - The state of the streaming process\n   */\n\n  function handleMessageMetadata(event, state) {\n    // The token counts shown in the usage field of the message_delta event are cumulative.\n    // @see https://docs.anthropic.com/en/docs/build-with-claude/streaming#event-types\n    if (event.type === 'message_delta' && event.usage) {\n      if ('output_tokens' in event.usage && typeof event.usage.output_tokens === 'number') {\n        state.completionTokens = event.usage.output_tokens;\n      }\n    }\n    if (event.message) {\n      var message = event.message;\n      if (message.id) state.responseId = message.id;\n      if (message.model) state.responseModel = message.model;\n      if (message.stop_reason) state.finishReasons.push(message.stop_reason);\n      if (message.usage) {\n        if (typeof message.usage.input_tokens === 'number') state.promptTokens = message.usage.input_tokens;\n        if (typeof message.usage.cache_creation_input_tokens === 'number') state.cacheCreationInputTokens = message.usage.cache_creation_input_tokens;\n        if (typeof message.usage.cache_read_input_tokens === 'number') state.cacheReadInputTokens = message.usage.cache_read_input_tokens;\n      }\n    }\n  }\n\n  /**\n   * Handle start of a content block (e.g., tool_use)\n   */\n  function handleContentBlockStart(event, state) {\n    if (event.type !== 'content_block_start' || typeof event.index !== 'number' || !event.content_block) return;\n    if (event.content_block.type === 'tool_use' || event.content_block.type === 'server_tool_use') {\n      state.activeToolBlocks[event.index] = {\n        id: event.content_block.id,\n        name: event.content_block.name,\n        inputJsonParts: []\n      };\n    }\n  }\n\n  /**\n   * Handle deltas of a content block, including input_json_delta for tool_use\n   */\n  function handleContentBlockDelta(event, state, recordOutputs) {\n    if (event.type !== 'content_block_delta' || !event.delta) return;\n\n    // Accumulate tool_use input JSON deltas only when we have an index and an active tool block\n    if (typeof event.index === 'number' && 'partial_json' in event.delta && typeof event.delta.partial_json === 'string') {\n      var active = state.activeToolBlocks[event.index];\n      if (active) {\n        active.inputJsonParts.push(event.delta.partial_json);\n      }\n    }\n\n    // Accumulate streamed response text regardless of index\n    if (recordOutputs && typeof event.delta.text === 'string') {\n      state.responseTexts.push(event.delta.text);\n    }\n  }\n\n  /**\n   * Handle stop of a content block; finalize tool_use entries\n   */\n  function handleContentBlockStop(event, state) {\n    if (event.type !== 'content_block_stop' || typeof event.index !== 'number') return;\n    var active = state.activeToolBlocks[event.index];\n    if (!active) return;\n    var raw = active.inputJsonParts.join('');\n    var parsedInput;\n    try {\n      parsedInput = raw ? JSON.parse(raw) : {};\n    } catch {\n      parsedInput = {\n        __unparsed: raw\n      };\n    }\n    state.toolCalls.push({\n      type: 'tool_use',\n      id: active.id,\n      name: active.name,\n      input: parsedInput\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n    delete state.activeToolBlocks[event.index];\n  }\n\n  /**\n   * Processes an event\n   * @param event - The event to process\n   * @param state - The state of the streaming process\n   * @param recordOutputs - Whether to record outputs\n   * @param span - The span to update\n   */\n  function processEvent(event, state, recordOutputs, span) {\n    if (!(event && typeof event === 'object')) {\n      return;\n    }\n    var isError = isErrorEvent(event, span);\n    if (isError) return;\n    handleMessageMetadata(event, state);\n\n    // Tool call events are sent via 3 separate events:\n    // - content_block_start (start of the tool call)\n    // - content_block_delta (delta aka input of the tool call)\n    // - content_block_stop (end of the tool call)\n    // We need to handle them all to capture the full tool call.\n    handleContentBlockStart(event, state);\n    handleContentBlockDelta(event, state, recordOutputs);\n    handleContentBlockStop(event, state);\n  }\n\n  /**\n   * Finalizes span attributes when stream processing completes\n   */\n  function finalizeStreamSpan(state, span, recordOutputs) {\n    if (!span.isRecording()) {\n      return;\n    }\n\n    // Set common response attributes if available\n    if (state.responseId) {\n      span.setAttributes({\n        [_aiGenAiAttributesJs.GEN_AI_RESPONSE_ID_ATTRIBUTE]: state.responseId\n      });\n    }\n    if (state.responseModel) {\n      span.setAttributes({\n        [_aiGenAiAttributesJs.GEN_AI_RESPONSE_MODEL_ATTRIBUTE]: state.responseModel\n      });\n    }\n    (0, _aiUtilsJs.setTokenUsageAttributes)(span, state.promptTokens, state.completionTokens, state.cacheCreationInputTokens, state.cacheReadInputTokens);\n    span.setAttributes({\n      [_aiGenAiAttributesJs.GEN_AI_RESPONSE_STREAMING_ATTRIBUTE]: true\n    });\n    if (state.finishReasons.length > 0) {\n      span.setAttributes({\n        [_aiGenAiAttributesJs.GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE]: JSON.stringify(state.finishReasons)\n      });\n    }\n    if (recordOutputs && state.responseTexts.length > 0) {\n      span.setAttributes({\n        [_aiGenAiAttributesJs.GEN_AI_RESPONSE_TEXT_ATTRIBUTE]: state.responseTexts.join('')\n      });\n    }\n\n    // Set tool calls if any were captured\n    if (recordOutputs && state.toolCalls.length > 0) {\n      span.setAttributes({\n        [_aiGenAiAttributesJs.GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE]: JSON.stringify(state.toolCalls)\n      });\n    }\n    span.end();\n  }\n\n  /**\n   * Instruments an async iterable stream of Anthropic events, updates the span with\n   * streaming attributes and (optionally) the aggregated output text, and yields\n   * each event from the input stream unchanged.\n   */\n  function instrumentAsyncIterableStream(_x, _x2, _x3) {\n    return _instrumentAsyncIterableStream.apply(this, arguments);\n  }\n  /**\n   * Instruments a MessageStream by registering event handlers and preserving the original stream API.\n   */\n  function _instrumentAsyncIterableStream() {\n    _instrumentAsyncIterableStream = (0, _wrapAsyncGenerator.default)(function* (stream, span, recordOutputs) {\n      var state = {\n        responseTexts: [],\n        finishReasons: [],\n        responseId: '',\n        responseModel: '',\n        promptTokens: undefined,\n        completionTokens: undefined,\n        cacheCreationInputTokens: undefined,\n        cacheReadInputTokens: undefined,\n        toolCalls: [],\n        activeToolBlocks: {}\n      };\n      try {\n        var _iteratorAbruptCompletion = false;\n        var _didIteratorError = false;\n        var _iteratorError;\n        try {\n          for (var _iterator = (0, _asyncIterator.default)(stream), _step; _iteratorAbruptCompletion = !(_step = yield (0, _awaitAsyncGenerator.default)(_iterator.next())).done; _iteratorAbruptCompletion = false) {\n            var event = _step.value;\n            {\n              processEvent(event, state, recordOutputs, span);\n              yield event;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (_iteratorAbruptCompletion && _iterator.return != null) {\n              yield (0, _awaitAsyncGenerator.default)(_iterator.return());\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } finally {\n        // Set common response attributes if available\n        if (state.responseId) {\n          span.setAttributes({\n            [_aiGenAiAttributesJs.GEN_AI_RESPONSE_ID_ATTRIBUTE]: state.responseId\n          });\n        }\n        if (state.responseModel) {\n          span.setAttributes({\n            [_aiGenAiAttributesJs.GEN_AI_RESPONSE_MODEL_ATTRIBUTE]: state.responseModel\n          });\n        }\n        (0, _aiUtilsJs.setTokenUsageAttributes)(span, state.promptTokens, state.completionTokens, state.cacheCreationInputTokens, state.cacheReadInputTokens);\n        span.setAttributes({\n          [_aiGenAiAttributesJs.GEN_AI_RESPONSE_STREAMING_ATTRIBUTE]: true\n        });\n        if (state.finishReasons.length > 0) {\n          span.setAttributes({\n            [_aiGenAiAttributesJs.GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE]: JSON.stringify(state.finishReasons)\n          });\n        }\n        if (recordOutputs && state.responseTexts.length > 0) {\n          span.setAttributes({\n            [_aiGenAiAttributesJs.GEN_AI_RESPONSE_TEXT_ATTRIBUTE]: state.responseTexts.join('')\n          });\n        }\n\n        // Set tool calls if any were captured\n        if (recordOutputs && state.toolCalls.length > 0) {\n          span.setAttributes({\n            [_aiGenAiAttributesJs.GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE]: JSON.stringify(state.toolCalls)\n          });\n        }\n        span.end();\n      }\n    });\n    return _instrumentAsyncIterableStream.apply(this, arguments);\n  }\n  function instrumentMessageStream(stream, span, recordOutputs) {\n    var state = {\n      responseTexts: [],\n      finishReasons: [],\n      responseId: '',\n      responseModel: '',\n      promptTokens: undefined,\n      completionTokens: undefined,\n      cacheCreationInputTokens: undefined,\n      cacheReadInputTokens: undefined,\n      toolCalls: [],\n      activeToolBlocks: {}\n    };\n    stream.on('streamEvent', event => {\n      processEvent(event, state, recordOutputs, span);\n    });\n\n    // The event fired when a message is done being streamed by the API. Corresponds to the message_stop SSE event.\n    // @see https://github.com/anthropics/anthropic-sdk-typescript/blob/d3be31f5a4e6ebb4c0a2f65dbb8f381ae73a9166/helpers.md?plain=1#L42-L44\n    stream.on('message', () => {\n      finalizeStreamSpan(state, span, recordOutputs);\n    });\n    stream.on('error', error => {\n      (0, _exportsJs.captureException)(error, {\n        mechanism: {\n          handled: false,\n          type: 'auto.ai.anthropic.stream_error'\n        }\n      });\n      if (span.isRecording()) {\n        span.setStatus({\n          code: _spanstatusJs.SPAN_STATUS_ERROR,\n          message: 'stream_error'\n        });\n        span.end();\n      }\n    });\n    return stream;\n  }\n});","lineCount":352,"map":[[12,2,350,0,"Object"],[12,8,350,0],[12,9,350,0,"defineProperty"],[12,23,350,0],[12,24,350,0,"exports"],[12,31,350,0],[13,4,350,0,"enumerable"],[13,14,350,0],[14,4,350,0,"get"],[14,7,350,0],[14,18,350,0,"get"],[14,19,350,0],[15,6,350,0],[15,13,350,9,"instrumentAsyncIterableStream"],[15,42,350,38],[16,4,350,38],[17,2,350,38],[18,2,350,0,"Object"],[18,8,350,0],[18,9,350,0,"defineProperty"],[18,23,350,0],[18,24,350,0,"exports"],[18,31,350,0],[19,4,350,0,"enumerable"],[19,14,350,0],[20,4,350,0,"get"],[20,7,350,0],[20,18,350,0,"get"],[20,19,350,0],[21,6,350,0],[21,13,350,40,"instrumentMessageStream"],[21,36,350,63],[22,4,350,63],[23,2,350,63],[24,2,350,66],[24,6,350,66,"_babelRuntimeHelpersAwaitAsyncGenerator"],[24,45,350,66],[24,48,350,66,"require"],[24,55,350,66],[24,56,350,66,"_dependencyMap"],[24,70,350,66],[25,2,350,66],[25,6,350,66,"_awaitAsyncGenerator"],[25,26,350,66],[25,29,350,66,"_interopDefault"],[25,44,350,66],[25,45,350,66,"_babelRuntimeHelpersAwaitAsyncGenerator"],[25,84,350,66],[26,2,350,66],[26,6,350,66,"_babelRuntimeHelpersWrapAsyncGenerator"],[26,44,350,66],[26,47,350,66,"require"],[26,54,350,66],[26,55,350,66,"_dependencyMap"],[26,69,350,66],[27,2,350,66],[27,6,350,66,"_wrapAsyncGenerator"],[27,25,350,66],[27,28,350,66,"_interopDefault"],[27,43,350,66],[27,44,350,66,"_babelRuntimeHelpersWrapAsyncGenerator"],[27,82,350,66],[28,2,350,66],[28,6,350,66,"_babelRuntimeHelpersAsyncIterator"],[28,39,350,66],[28,42,350,66,"require"],[28,49,350,66],[28,50,350,66,"_dependencyMap"],[28,64,350,66],[29,2,350,66],[29,6,350,66,"_asyncIterator"],[29,20,350,66],[29,23,350,66,"_interopDefault"],[29,38,350,66],[29,39,350,66,"_babelRuntimeHelpersAsyncIterator"],[29,72,350,66],[30,2,1,0],[30,6,1,0,"_exportsJs"],[30,16,1,0],[30,19,1,0,"require"],[30,26,1,0],[30,27,1,0,"_dependencyMap"],[30,41,1,0],[31,2,2,0],[31,6,2,0,"_spanstatusJs"],[31,19,2,0],[31,22,2,0,"require"],[31,29,2,0],[31,30,2,0,"_dependencyMap"],[31,44,2,0],[32,2,3,0],[32,6,3,0,"_aiGenAiAttributesJs"],[32,26,3,0],[32,29,3,0,"require"],[32,36,3,0],[32,37,3,0,"_dependencyMap"],[32,51,3,0],[33,2,4,0],[33,6,4,0,"_aiUtilsJs"],[33,16,4,0],[33,19,4,0,"require"],[33,26,4,0],[33,27,4,0,"_dependencyMap"],[33,41,4,0],[34,2,6,0],[35,0,7,0],[36,0,8,0],[38,2,10,0],[39,0,11,0],[40,0,12,0],[41,0,13,0],[42,0,14,0],[43,0,15,0],[44,0,16,0],[45,0,17,0],[47,2,19,0],[47,11,19,9,"isErrorEvent"],[47,23,19,21,"isErrorEvent"],[47,24,19,22,"event"],[47,29,19,27],[47,31,19,29,"span"],[47,35,19,33],[47,37,19,35],[48,4,20,2],[48,8,20,6],[48,14,20,12],[48,18,20,16,"event"],[48,23,20,21],[48,27,20,25],[48,34,20,32,"event"],[48,39,20,37],[48,40,20,38,"type"],[48,44,20,42],[48,49,20,47],[48,57,20,55],[48,59,20,57],[49,6,21,4],[50,6,22,4],[51,6,23,4],[51,10,23,8,"event"],[51,15,23,13],[51,16,23,14,"type"],[51,20,23,18],[51,25,23,23],[51,32,23,30],[51,34,23,32],[52,8,24,6,"span"],[52,12,24,10],[52,13,24,11,"setStatus"],[52,22,24,20],[52,23,24,21],[53,10,24,23,"code"],[53,14,24,27],[53,16,24,29,"SPAN_STATUS_ERROR"],[53,29,24,46],[53,30,24,46,"SPAN_STATUS_ERROR"],[53,47,24,46],[54,10,24,48,"message"],[54,17,24,55],[54,19,24,57,"event"],[54,24,24,62],[54,25,24,63,"error"],[54,30,24,68],[54,32,24,70,"type"],[54,36,24,74],[54,40,24,78],[55,8,24,95],[55,9,24,96],[55,10,24,97],[56,8,25,6],[56,12,25,6,"captureException"],[56,22,25,22],[56,23,25,22,"captureException"],[56,39,25,22],[56,41,25,23,"event"],[56,46,25,28],[56,47,25,29,"error"],[56,52,25,34],[56,54,25,36],[57,10,26,8,"mechanism"],[57,19,26,17],[57,21,26,19],[58,12,27,10,"handled"],[58,19,27,17],[58,21,27,19],[58,26,27,24],[59,12,28,10,"type"],[59,16,28,14],[59,18,28,16],[60,10,29,8],[61,8,30,6],[61,9,30,7],[61,10,30,8],[62,8,31,6],[62,15,31,13],[62,19,31,17],[63,6,32,4],[64,4,33,2],[65,4,34,2],[65,11,34,9],[65,16,34,14],[66,2,35,0],[68,2,37,0],[69,0,38,0],[70,0,39,0],[71,0,40,0],[72,0,41,0],[74,2,43,0],[74,11,43,9,"handleMessageMetadata"],[74,32,43,30,"handleMessageMetadata"],[74,33,43,31,"event"],[74,38,43,36],[74,40,43,38,"state"],[74,45,43,43],[74,47,43,45],[75,4,44,2],[76,4,45,2],[77,4,46,2],[77,8,46,6,"event"],[77,13,46,11],[77,14,46,12,"type"],[77,18,46,16],[77,23,46,21],[77,38,46,36],[77,42,46,40,"event"],[77,47,46,45],[77,48,46,46,"usage"],[77,53,46,51],[77,55,46,53],[78,6,47,4],[78,10,47,8],[78,25,47,23],[78,29,47,27,"event"],[78,34,47,32],[78,35,47,33,"usage"],[78,40,47,38],[78,44,47,42],[78,51,47,49,"event"],[78,56,47,54],[78,57,47,55,"usage"],[78,62,47,60],[78,63,47,61,"output_tokens"],[78,76,47,74],[78,81,47,79],[78,89,47,87],[78,91,47,89],[79,8,48,6,"state"],[79,13,48,11],[79,14,48,12,"completionTokens"],[79,30,48,28],[79,33,48,31,"event"],[79,38,48,36],[79,39,48,37,"usage"],[79,44,48,42],[79,45,48,43,"output_tokens"],[79,58,48,56],[80,6,49,4],[81,4,50,2],[82,4,52,2],[82,8,52,6,"event"],[82,13,52,11],[82,14,52,12,"message"],[82,21,52,19],[82,23,52,21],[83,6,53,4],[83,10,53,10,"message"],[83,17,53,17],[83,20,53,20,"event"],[83,25,53,25],[83,26,53,26,"message"],[83,33,53,33],[84,6,55,4],[84,10,55,8,"message"],[84,17,55,15],[84,18,55,16,"id"],[84,20,55,18],[84,22,55,20,"state"],[84,27,55,25],[84,28,55,26,"responseId"],[84,38,55,36],[84,41,55,39,"message"],[84,48,55,46],[84,49,55,47,"id"],[84,51,55,49],[85,6,56,4],[85,10,56,8,"message"],[85,17,56,15],[85,18,56,16,"model"],[85,23,56,21],[85,25,56,23,"state"],[85,30,56,28],[85,31,56,29,"responseModel"],[85,44,56,42],[85,47,56,45,"message"],[85,54,56,52],[85,55,56,53,"model"],[85,60,56,58],[86,6,57,4],[86,10,57,8,"message"],[86,17,57,15],[86,18,57,16,"stop_reason"],[86,29,57,27],[86,31,57,29,"state"],[86,36,57,34],[86,37,57,35,"finishReasons"],[86,50,57,48],[86,51,57,49,"push"],[86,55,57,53],[86,56,57,54,"message"],[86,63,57,61],[86,64,57,62,"stop_reason"],[86,75,57,73],[86,76,57,74],[87,6,59,4],[87,10,59,8,"message"],[87,17,59,15],[87,18,59,16,"usage"],[87,23,59,21],[87,25,59,23],[88,8,60,6],[88,12,60,10],[88,19,60,17,"message"],[88,26,60,24],[88,27,60,25,"usage"],[88,32,60,30],[88,33,60,31,"input_tokens"],[88,45,60,43],[88,50,60,48],[88,58,60,56],[88,60,60,58,"state"],[88,65,60,63],[88,66,60,64,"promptTokens"],[88,78,60,76],[88,81,60,79,"message"],[88,88,60,86],[88,89,60,87,"usage"],[88,94,60,92],[88,95,60,93,"input_tokens"],[88,107,60,105],[89,8,61,6],[89,12,61,10],[89,19,61,17,"message"],[89,26,61,24],[89,27,61,25,"usage"],[89,32,61,30],[89,33,61,31,"cache_creation_input_tokens"],[89,60,61,58],[89,65,61,63],[89,73,61,71],[89,75,62,8,"state"],[89,80,62,13],[89,81,62,14,"cacheCreationInputTokens"],[89,105,62,38],[89,108,62,41,"message"],[89,115,62,48],[89,116,62,49,"usage"],[89,121,62,54],[89,122,62,55,"cache_creation_input_tokens"],[89,149,62,82],[90,8,63,6],[90,12,63,10],[90,19,63,17,"message"],[90,26,63,24],[90,27,63,25,"usage"],[90,32,63,30],[90,33,63,31,"cache_read_input_tokens"],[90,56,63,54],[90,61,63,59],[90,69,63,67],[90,71,64,8,"state"],[90,76,64,13],[90,77,64,14,"cacheReadInputTokens"],[90,97,64,34],[90,100,64,37,"message"],[90,107,64,44],[90,108,64,45,"usage"],[90,113,64,50],[90,114,64,51,"cache_read_input_tokens"],[90,137,64,74],[91,6,65,4],[92,4,66,2],[93,2,67,0],[95,2,69,0],[96,0,70,0],[97,0,71,0],[98,2,72,0],[98,11,72,9,"handleContentBlockStart"],[98,34,72,32,"handleContentBlockStart"],[98,35,72,33,"event"],[98,40,72,38],[98,42,72,40,"state"],[98,47,72,45],[98,49,72,47],[99,4,73,2],[99,8,73,6,"event"],[99,13,73,11],[99,14,73,12,"type"],[99,18,73,16],[99,23,73,21],[99,44,73,42],[99,48,73,46],[99,55,73,53,"event"],[99,60,73,58],[99,61,73,59,"index"],[99,66,73,64],[99,71,73,69],[99,79,73,77],[99,83,73,81],[99,84,73,82,"event"],[99,89,73,87],[99,90,73,88,"content_block"],[99,103,73,101],[99,105,73,103],[100,4,74,2],[100,8,74,6,"event"],[100,13,74,11],[100,14,74,12,"content_block"],[100,27,74,25],[100,28,74,26,"type"],[100,32,74,30],[100,37,74,35],[100,47,74,45],[100,51,74,49,"event"],[100,56,74,54],[100,57,74,55,"content_block"],[100,70,74,68],[100,71,74,69,"type"],[100,75,74,73],[100,80,74,78],[100,97,74,95],[100,99,74,97],[101,6,75,4,"state"],[101,11,75,9],[101,12,75,10,"activeToolBlocks"],[101,28,75,26],[101,29,75,27,"event"],[101,34,75,32],[101,35,75,33,"index"],[101,40,75,38],[101,41,75,39],[101,44,75,42],[102,8,76,6,"id"],[102,10,76,8],[102,12,76,10,"event"],[102,17,76,15],[102,18,76,16,"content_block"],[102,31,76,29],[102,32,76,30,"id"],[102,34,76,32],[103,8,77,6,"name"],[103,12,77,10],[103,14,77,12,"event"],[103,19,77,17],[103,20,77,18,"content_block"],[103,33,77,31],[103,34,77,32,"name"],[103,38,77,36],[104,8,78,6,"inputJsonParts"],[104,22,78,20],[104,24,78,22],[105,6,79,4],[105,7,79,5],[106,4,80,2],[107,2,81,0],[109,2,83,0],[110,0,84,0],[111,0,85,0],[112,2,86,0],[112,11,86,9,"handleContentBlockDelta"],[112,34,86,32,"handleContentBlockDelta"],[112,35,87,2,"event"],[112,40,87,7],[112,42,88,2,"state"],[112,47,88,7],[112,49,89,2,"recordOutputs"],[112,62,89,15],[112,64,90,2],[113,4,91,2],[113,8,91,6,"event"],[113,13,91,11],[113,14,91,12,"type"],[113,18,91,16],[113,23,91,21],[113,44,91,42],[113,48,91,46],[113,49,91,47,"event"],[113,54,91,52],[113,55,91,53,"delta"],[113,60,91,58],[113,62,91,60],[115,4,93,2],[116,4,94,2],[116,8,95,4],[116,15,95,11,"event"],[116,20,95,16],[116,21,95,17,"index"],[116,26,95,22],[116,31,95,27],[116,39,95,35],[116,43,96,4],[116,57,96,18],[116,61,96,22,"event"],[116,66,96,27],[116,67,96,28,"delta"],[116,72,96,33],[116,76,97,4],[116,83,97,11,"event"],[116,88,97,16],[116,89,97,17,"delta"],[116,94,97,22],[116,95,97,23,"partial_json"],[116,107,97,35],[116,112,97,40],[116,120,97,48],[116,122,98,4],[117,6,99,4],[117,10,99,10,"active"],[117,16,99,16],[117,19,99,19,"state"],[117,24,99,24],[117,25,99,25,"activeToolBlocks"],[117,41,99,41],[117,42,99,42,"event"],[117,47,99,47],[117,48,99,48,"index"],[117,53,99,53],[117,54,99,54],[118,6,100,4],[118,10,100,8,"active"],[118,16,100,14],[118,18,100,16],[119,8,101,6,"active"],[119,14,101,12],[119,15,101,13,"inputJsonParts"],[119,29,101,27],[119,30,101,28,"push"],[119,34,101,32],[119,35,101,33,"event"],[119,40,101,38],[119,41,101,39,"delta"],[119,46,101,44],[119,47,101,45,"partial_json"],[119,59,101,57],[119,60,101,58],[120,6,102,4],[121,4,103,2],[123,4,105,2],[124,4,106,2],[124,8,106,6,"recordOutputs"],[124,21,106,19],[124,25,106,23],[124,32,106,30,"event"],[124,37,106,35],[124,38,106,36,"delta"],[124,43,106,41],[124,44,106,42,"text"],[124,48,106,46],[124,53,106,51],[124,61,106,59],[124,63,106,61],[125,6,107,4,"state"],[125,11,107,9],[125,12,107,10,"responseTexts"],[125,25,107,23],[125,26,107,24,"push"],[125,30,107,28],[125,31,107,29,"event"],[125,36,107,34],[125,37,107,35,"delta"],[125,42,107,40],[125,43,107,41,"text"],[125,47,107,45],[125,48,107,46],[126,4,108,2],[127,2,109,0],[129,2,111,0],[130,0,112,0],[131,0,113,0],[132,2,114,0],[132,11,114,9,"handleContentBlockStop"],[132,33,114,31,"handleContentBlockStop"],[132,34,114,32,"event"],[132,39,114,37],[132,41,114,39,"state"],[132,46,114,44],[132,48,114,46],[133,4,115,2],[133,8,115,6,"event"],[133,13,115,11],[133,14,115,12,"type"],[133,18,115,16],[133,23,115,21],[133,43,115,41],[133,47,115,45],[133,54,115,52,"event"],[133,59,115,57],[133,60,115,58,"index"],[133,65,115,63],[133,70,115,68],[133,78,115,76],[133,80,115,78],[134,4,117,2],[134,8,117,8,"active"],[134,14,117,14],[134,17,117,17,"state"],[134,22,117,22],[134,23,117,23,"activeToolBlocks"],[134,39,117,39],[134,40,117,40,"event"],[134,45,117,45],[134,46,117,46,"index"],[134,51,117,51],[134,52,117,52],[135,4,118,2],[135,8,118,6],[135,9,118,7,"active"],[135,15,118,13],[135,17,118,15],[136,4,120,2],[136,8,120,8,"raw"],[136,11,120,11],[136,14,120,14,"active"],[136,20,120,20],[136,21,120,21,"inputJsonParts"],[136,35,120,35],[136,36,120,36,"join"],[136,40,120,40],[136,41,120,41],[136,43,120,43],[136,44,120,44],[137,4,121,2],[137,8,121,6,"parsedInput"],[137,19,121,17],[138,4,123,2],[138,8,123,6],[139,6,124,4,"parsedInput"],[139,17,124,15],[139,20,124,18,"raw"],[139,23,124,21],[139,26,124,24,"JSON"],[139,30,124,28],[139,31,124,29,"parse"],[139,36,124,34],[139,37,124,35,"raw"],[139,40,124,38],[139,41,124,39],[139,44,124,42],[139,45,124,43],[139,46,124,44],[140,4,125,2],[140,5,125,3],[140,6,125,4],[140,12,125,10],[141,6,126,4,"parsedInput"],[141,17,126,15],[141,20,126,18],[142,8,126,20,"__unparsed"],[142,18,126,30],[142,20,126,32,"raw"],[143,6,126,36],[143,7,126,37],[144,4,127,2],[145,4,129,2,"state"],[145,9,129,7],[145,10,129,8,"toolCalls"],[145,19,129,17],[145,20,129,18,"push"],[145,24,129,22],[145,25,129,23],[146,6,130,4,"type"],[146,10,130,8],[146,12,130,10],[146,22,130,20],[147,6,131,4,"id"],[147,8,131,6],[147,10,131,8,"active"],[147,16,131,14],[147,17,131,15,"id"],[147,19,131,17],[148,6,132,4,"name"],[148,10,132,8],[148,12,132,10,"active"],[148,18,132,16],[148,19,132,17,"name"],[148,23,132,21],[149,6,133,4,"input"],[149,11,133,9],[149,13,133,11,"parsedInput"],[150,4,134,2],[150,5,134,3],[150,6,134,4],[152,4,136,2],[153,4,137,2],[153,11,137,9,"state"],[153,16,137,14],[153,17,137,15,"activeToolBlocks"],[153,33,137,31],[153,34,137,32,"event"],[153,39,137,37],[153,40,137,38,"index"],[153,45,137,43],[153,46,137,44],[154,2,138,0],[156,2,140,0],[157,0,141,0],[158,0,142,0],[159,0,143,0],[160,0,144,0],[161,0,145,0],[162,0,146,0],[163,2,147,0],[163,11,147,9,"processEvent"],[163,23,147,21,"processEvent"],[163,24,148,2,"event"],[163,29,148,7],[163,31,149,2,"state"],[163,36,149,7],[163,38,150,2,"recordOutputs"],[163,51,150,15],[163,53,151,2,"span"],[163,57,151,6],[163,59,152,2],[164,4,153,2],[164,8,153,6],[164,10,153,8,"event"],[164,15,153,13],[164,19,153,17],[164,26,153,24,"event"],[164,31,153,29],[164,36,153,34],[164,44,153,42],[164,45,153,43],[164,47,153,45],[165,6,154,4],[166,4,155,2],[167,4,157,2],[167,8,157,8,"isError"],[167,15,157,15],[167,18,157,18,"isErrorEvent"],[167,30,157,30],[167,31,157,31,"event"],[167,36,157,36],[167,38,157,38,"span"],[167,42,157,42],[167,43,157,43],[168,4,158,2],[168,8,158,6,"isError"],[168,15,158,13],[168,17,158,15],[169,4,160,2,"handleMessageMetadata"],[169,25,160,23],[169,26,160,24,"event"],[169,31,160,29],[169,33,160,31,"state"],[169,38,160,36],[169,39,160,37],[171,4,162,2],[172,4,163,2],[173,4,164,2],[174,4,165,2],[175,4,166,2],[176,4,167,2,"handleContentBlockStart"],[176,27,167,25],[176,28,167,26,"event"],[176,33,167,31],[176,35,167,33,"state"],[176,40,167,38],[176,41,167,39],[177,4,168,2,"handleContentBlockDelta"],[177,27,168,25],[177,28,168,26,"event"],[177,33,168,31],[177,35,168,33,"state"],[177,40,168,38],[177,42,168,40,"recordOutputs"],[177,55,168,53],[177,56,168,54],[178,4,169,2,"handleContentBlockStop"],[178,26,169,24],[178,27,169,25,"event"],[178,32,169,30],[178,34,169,32,"state"],[178,39,169,37],[178,40,169,38],[179,2,170,0],[181,2,172,0],[182,0,173,0],[183,0,174,0],[184,2,175,0],[184,11,175,9,"finalizeStreamSpan"],[184,29,175,27,"finalizeStreamSpan"],[184,30,175,28,"state"],[184,35,175,33],[184,37,175,35,"span"],[184,41,175,39],[184,43,175,41,"recordOutputs"],[184,56,175,54],[184,58,175,56],[185,4,176,2],[185,8,176,6],[185,9,176,7,"span"],[185,13,176,11],[185,14,176,12,"isRecording"],[185,25,176,23],[185,26,176,24],[185,27,176,25],[185,29,176,27],[186,6,177,4],[187,4,178,2],[189,4,180,2],[190,4,181,2],[190,8,181,6,"state"],[190,13,181,11],[190,14,181,12,"responseId"],[190,24,181,22],[190,26,181,24],[191,6,182,4,"span"],[191,10,182,8],[191,11,182,9,"setAttributes"],[191,24,182,22],[191,25,182,23],[192,8,183,6],[192,9,183,7,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[192,29,183,35],[192,30,183,35,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[192,58,183,35],[192,61,183,38,"state"],[192,66,183,43],[192,67,183,44,"responseId"],[193,6,184,4],[193,7,184,5],[193,8,184,6],[194,4,185,2],[195,4,186,2],[195,8,186,6,"state"],[195,13,186,11],[195,14,186,12,"responseModel"],[195,27,186,25],[195,29,186,27],[196,6,187,4,"span"],[196,10,187,8],[196,11,187,9,"setAttributes"],[196,24,187,22],[196,25,187,23],[197,8,188,6],[197,9,188,7,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[197,29,188,38],[197,30,188,38,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[197,61,188,38],[197,64,188,41,"state"],[197,69,188,46],[197,70,188,47,"responseModel"],[198,6,189,4],[198,7,189,5],[198,8,189,6],[199,4,190,2],[200,4,192,2],[200,8,192,2,"setTokenUsageAttributes"],[200,18,192,25],[200,19,192,25,"setTokenUsageAttributes"],[200,42,192,25],[200,44,193,4,"span"],[200,48,193,8],[200,50,194,4,"state"],[200,55,194,9],[200,56,194,10,"promptTokens"],[200,68,194,22],[200,70,195,4,"state"],[200,75,195,9],[200,76,195,10,"completionTokens"],[200,92,195,26],[200,94,196,4,"state"],[200,99,196,9],[200,100,196,10,"cacheCreationInputTokens"],[200,124,196,34],[200,126,197,4,"state"],[200,131,197,9],[200,132,197,10,"cacheReadInputTokens"],[200,152,198,2],[200,153,198,3],[201,4,200,2,"span"],[201,8,200,6],[201,9,200,7,"setAttributes"],[201,22,200,20],[201,23,200,21],[202,6,201,4],[202,7,201,5,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[202,27,201,40],[202,28,201,40,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[202,63,201,40],[202,66,201,43],[203,4,202,2],[203,5,202,3],[203,6,202,4],[204,4,204,2],[204,8,204,6,"state"],[204,13,204,11],[204,14,204,12,"finishReasons"],[204,27,204,25],[204,28,204,26,"length"],[204,34,204,32],[204,37,204,35],[204,38,204,36],[204,40,204,38],[205,6,205,4,"span"],[205,10,205,8],[205,11,205,9,"setAttributes"],[205,24,205,22],[205,25,205,23],[206,8,206,6],[206,9,206,7,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[206,29,206,47],[206,30,206,47,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[206,70,206,47],[206,73,206,50,"JSON"],[206,77,206,54],[206,78,206,55,"stringify"],[206,87,206,64],[206,88,206,65,"state"],[206,93,206,70],[206,94,206,71,"finishReasons"],[206,107,206,84],[207,6,207,4],[207,7,207,5],[207,8,207,6],[208,4,208,2],[209,4,210,2],[209,8,210,6,"recordOutputs"],[209,21,210,19],[209,25,210,23,"state"],[209,30,210,28],[209,31,210,29,"responseTexts"],[209,44,210,42],[209,45,210,43,"length"],[209,51,210,49],[209,54,210,52],[209,55,210,53],[209,57,210,55],[210,6,211,4,"span"],[210,10,211,8],[210,11,211,9,"setAttributes"],[210,24,211,22],[210,25,211,23],[211,8,212,6],[211,9,212,7,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[211,29,212,37],[211,30,212,37,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[211,60,212,37],[211,63,212,40,"state"],[211,68,212,45],[211,69,212,46,"responseTexts"],[211,82,212,59],[211,83,212,60,"join"],[211,87,212,64],[211,88,212,65],[211,90,212,67],[212,6,213,4],[212,7,213,5],[212,8,213,6],[213,4,214,2],[215,4,216,2],[216,4,217,2],[216,8,217,6,"recordOutputs"],[216,21,217,19],[216,25,217,23,"state"],[216,30,217,28],[216,31,217,29,"toolCalls"],[216,40,217,38],[216,41,217,39,"length"],[216,47,217,45],[216,50,217,48],[216,51,217,49],[216,53,217,51],[217,6,218,4,"span"],[217,10,218,8],[217,11,218,9,"setAttributes"],[217,24,218,22],[217,25,218,23],[218,8,219,6],[218,9,219,7,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[218,29,219,43],[218,30,219,43,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[218,66,219,43],[218,69,219,46,"JSON"],[218,73,219,50],[218,74,219,51,"stringify"],[218,83,219,60],[218,84,219,61,"state"],[218,89,219,66],[218,90,219,67,"toolCalls"],[218,99,219,76],[219,6,220,4],[219,7,220,5],[219,8,220,6],[220,4,221,2],[221,4,223,2,"span"],[221,8,223,6],[221,9,223,7,"end"],[221,12,223,10],[221,13,223,11],[221,14,223,12],[222,2,224,0],[224,2,226,0],[225,0,227,0],[226,0,228,0],[227,0,229,0],[228,0,230,0],[229,2,226,0],[229,11,231,16,"instrumentAsyncIterableStream"],[229,40,231,45,"instrumentAsyncIterableStream"],[229,41,231,45,"_x"],[229,43,231,45],[229,45,231,45,"_x2"],[229,48,231,45],[229,50,231,45,"_x3"],[229,53,231,45],[230,4,231,45],[230,11,231,45,"_instrumentAsyncIterableStream"],[230,41,231,45],[230,42,231,45,"apply"],[230,47,231,45],[230,54,231,45,"arguments"],[230,63,231,45],[231,2,231,45],[232,2,302,0],[233,0,303,0],[234,0,304,0],[235,2,302,0],[235,11,302,0,"_instrumentAsyncIterableStream"],[235,42,302,0],[236,4,302,0,"_instrumentAsyncIterableStream"],[236,34,302,0],[236,41,302,0,"_wrapAsyncGenerator"],[236,60,302,0],[236,61,302,0,"default"],[236,68,302,0],[236,70,231,0],[236,81,232,2,"stream"],[236,87,232,8],[236,89,233,2,"span"],[236,93,233,6],[236,95,234,2,"recordOutputs"],[236,108,234,15],[236,110,235,2],[237,6,236,2],[237,10,236,8,"state"],[237,15,236,13],[237,18,236,16],[238,8,237,4,"responseTexts"],[238,21,237,17],[238,23,237,19],[238,25,237,21],[239,8,238,4,"finishReasons"],[239,21,238,17],[239,23,238,19],[239,25,238,21],[240,8,239,4,"responseId"],[240,18,239,14],[240,20,239,16],[240,22,239,18],[241,8,240,4,"responseModel"],[241,21,240,17],[241,23,240,19],[241,25,240,21],[242,8,241,4,"promptTokens"],[242,20,241,16],[242,22,241,18,"undefined"],[242,31,241,27],[243,8,242,4,"completionTokens"],[243,24,242,20],[243,26,242,22,"undefined"],[243,35,242,31],[244,8,243,4,"cacheCreationInputTokens"],[244,32,243,28],[244,34,243,30,"undefined"],[244,43,243,39],[245,8,244,4,"cacheReadInputTokens"],[245,28,244,24],[245,30,244,26,"undefined"],[245,39,244,35],[246,8,245,4,"toolCalls"],[246,17,245,13],[246,19,245,15],[246,21,245,17],[247,8,246,4,"activeToolBlocks"],[247,24,246,20],[247,26,246,22],[247,27,246,23],[248,6,247,2],[248,7,247,3],[249,6,249,2],[249,10,249,6],[250,8,249,6],[250,12,249,6,"_iteratorAbruptCompletion"],[250,37,249,6],[251,8,249,6],[251,12,249,6,"_didIteratorError"],[251,29,249,6],[252,8,249,6],[252,12,249,6,"_iteratorError"],[252,26,249,6],[253,8,249,6],[254,10,250,4],[254,19,250,4,"_iterator"],[254,28,250,4],[254,35,250,4,"_asyncIterator"],[254,49,250,4],[254,50,250,4,"default"],[254,57,250,4],[254,59,250,30,"stream"],[254,65,250,36],[254,68,250,36,"_step"],[254,73,250,36],[254,75,250,36,"_iteratorAbruptCompletion"],[254,100,250,36],[254,105,250,36,"_step"],[254,110,250,36],[254,123,250,36,"_awaitAsyncGenerator"],[254,143,250,36],[254,144,250,36,"default"],[254,151,250,36],[254,153,250,36,"_iterator"],[254,162,250,36],[254,163,250,36,"next"],[254,167,250,36],[254,172,250,36,"done"],[254,176,250,36],[254,178,250,36,"_iteratorAbruptCompletion"],[254,203,250,36],[254,213,250,38],[255,12,250,38],[255,16,250,21,"event"],[255,21,250,26],[255,24,250,26,"_step"],[255,29,250,26],[255,30,250,26,"value"],[255,35,250,26],[256,12,250,26],[257,14,251,6,"processEvent"],[257,26,251,18],[257,27,251,19,"event"],[257,32,251,24],[257,34,251,26,"state"],[257,39,251,31],[257,41,251,33,"recordOutputs"],[257,54,251,46],[257,56,251,48,"span"],[257,60,251,52],[257,61,251,53],[258,14,252,6],[258,20,252,12,"event"],[258,25,252,17],[259,12,252,18],[260,10,253,4],[261,8,253,5],[261,17,253,5,"err"],[261,20,253,5],[262,10,253,5,"_didIteratorError"],[262,27,253,5],[263,10,253,5,"_iteratorError"],[263,24,253,5],[263,27,253,5,"err"],[263,30,253,5],[264,8,253,5],[265,10,253,5],[266,12,253,5],[266,16,253,5,"_iteratorAbruptCompletion"],[266,41,253,5],[266,45,253,5,"_iterator"],[266,54,253,5],[266,55,253,5,"return"],[266,61,253,5],[267,14,253,5],[267,24,253,5,"_awaitAsyncGenerator"],[267,44,253,5],[267,45,253,5,"default"],[267,52,253,5],[267,54,253,5,"_iterator"],[267,63,253,5],[267,64,253,5,"return"],[267,70,253,5],[268,12,253,5],[269,10,253,5],[270,12,253,5],[270,16,253,5,"_didIteratorError"],[270,33,253,5],[271,14,253,5],[271,20,253,5,"_iteratorError"],[271,34,253,5],[272,12,253,5],[273,10,253,5],[274,8,253,5],[275,6,254,2],[275,7,254,3],[275,16,254,12],[276,8,255,4],[277,8,256,4],[277,12,256,8,"state"],[277,17,256,13],[277,18,256,14,"responseId"],[277,28,256,24],[277,30,256,26],[278,10,257,6,"span"],[278,14,257,10],[278,15,257,11,"setAttributes"],[278,28,257,24],[278,29,257,25],[279,12,258,8],[279,13,258,9,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[279,33,258,37],[279,34,258,37,"GEN_AI_RESPONSE_ID_ATTRIBUTE"],[279,62,258,37],[279,65,258,40,"state"],[279,70,258,45],[279,71,258,46,"responseId"],[280,10,259,6],[280,11,259,7],[280,12,259,8],[281,8,260,4],[282,8,261,4],[282,12,261,8,"state"],[282,17,261,13],[282,18,261,14,"responseModel"],[282,31,261,27],[282,33,261,29],[283,10,262,6,"span"],[283,14,262,10],[283,15,262,11,"setAttributes"],[283,28,262,24],[283,29,262,25],[284,12,263,8],[284,13,263,9,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[284,33,263,40],[284,34,263,40,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[284,65,263,40],[284,68,263,43,"state"],[284,73,263,48],[284,74,263,49,"responseModel"],[285,10,264,6],[285,11,264,7],[285,12,264,8],[286,8,265,4],[287,8,267,4],[287,12,267,4,"setTokenUsageAttributes"],[287,22,267,27],[287,23,267,27,"setTokenUsageAttributes"],[287,46,267,27],[287,48,268,6,"span"],[287,52,268,10],[287,54,269,6,"state"],[287,59,269,11],[287,60,269,12,"promptTokens"],[287,72,269,24],[287,74,270,6,"state"],[287,79,270,11],[287,80,270,12,"completionTokens"],[287,96,270,28],[287,98,271,6,"state"],[287,103,271,11],[287,104,271,12,"cacheCreationInputTokens"],[287,128,271,36],[287,130,272,6,"state"],[287,135,272,11],[287,136,272,12,"cacheReadInputTokens"],[287,156,273,4],[287,157,273,5],[288,8,275,4,"span"],[288,12,275,8],[288,13,275,9,"setAttributes"],[288,26,275,22],[288,27,275,23],[289,10,276,6],[289,11,276,7,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[289,31,276,42],[289,32,276,42,"GEN_AI_RESPONSE_STREAMING_ATTRIBUTE"],[289,67,276,42],[289,70,276,45],[290,8,277,4],[290,9,277,5],[290,10,277,6],[291,8,279,4],[291,12,279,8,"state"],[291,17,279,13],[291,18,279,14,"finishReasons"],[291,31,279,27],[291,32,279,28,"length"],[291,38,279,34],[291,41,279,37],[291,42,279,38],[291,44,279,40],[292,10,280,6,"span"],[292,14,280,10],[292,15,280,11,"setAttributes"],[292,28,280,24],[292,29,280,25],[293,12,281,8],[293,13,281,9,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[293,33,281,49],[293,34,281,49,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[293,74,281,49],[293,77,281,52,"JSON"],[293,81,281,56],[293,82,281,57,"stringify"],[293,91,281,66],[293,92,281,67,"state"],[293,97,281,72],[293,98,281,73,"finishReasons"],[293,111,281,86],[294,10,282,6],[294,11,282,7],[294,12,282,8],[295,8,283,4],[296,8,285,4],[296,12,285,8,"recordOutputs"],[296,25,285,21],[296,29,285,25,"state"],[296,34,285,30],[296,35,285,31,"responseTexts"],[296,48,285,44],[296,49,285,45,"length"],[296,55,285,51],[296,58,285,54],[296,59,285,55],[296,61,285,57],[297,10,286,6,"span"],[297,14,286,10],[297,15,286,11,"setAttributes"],[297,28,286,24],[297,29,286,25],[298,12,287,8],[298,13,287,9,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[298,33,287,39],[298,34,287,39,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[298,64,287,39],[298,67,287,42,"state"],[298,72,287,47],[298,73,287,48,"responseTexts"],[298,86,287,61],[298,87,287,62,"join"],[298,91,287,66],[298,92,287,67],[298,94,287,69],[299,10,288,6],[299,11,288,7],[299,12,288,8],[300,8,289,4],[302,8,291,4],[303,8,292,4],[303,12,292,8,"recordOutputs"],[303,25,292,21],[303,29,292,25,"state"],[303,34,292,30],[303,35,292,31,"toolCalls"],[303,44,292,40],[303,45,292,41,"length"],[303,51,292,47],[303,54,292,50],[303,55,292,51],[303,57,292,53],[304,10,293,6,"span"],[304,14,293,10],[304,15,293,11,"setAttributes"],[304,28,293,24],[304,29,293,25],[305,12,294,8],[305,13,294,9,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[305,33,294,45],[305,34,294,45,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[305,70,294,45],[305,73,294,48,"JSON"],[305,77,294,52],[305,78,294,53,"stringify"],[305,87,294,62],[305,88,294,63,"state"],[305,93,294,68],[305,94,294,69,"toolCalls"],[305,103,294,78],[306,10,295,6],[306,11,295,7],[306,12,295,8],[307,8,296,4],[308,8,298,4,"span"],[308,12,298,8],[308,13,298,9,"end"],[308,16,298,12],[308,17,298,13],[308,18,298,14],[309,6,299,2],[310,4,300,0],[310,5,300,1],[311,4,300,1],[311,11,300,1,"_instrumentAsyncIterableStream"],[311,41,300,1],[311,42,300,1,"apply"],[311,47,300,1],[311,54,300,1,"arguments"],[311,63,300,1],[312,2,300,1],[313,2,305,0],[313,11,305,9,"instrumentMessageStream"],[313,34,305,32,"instrumentMessageStream"],[313,35,306,2,"stream"],[313,41,306,8],[313,43,307,2,"span"],[313,47,307,6],[313,49,308,2,"recordOutputs"],[313,62,308,15],[313,64,309,2],[314,4,310,2],[314,8,310,8,"state"],[314,13,310,13],[314,16,310,16],[315,6,311,4,"responseTexts"],[315,19,311,17],[315,21,311,19],[315,23,311,21],[316,6,312,4,"finishReasons"],[316,19,312,17],[316,21,312,19],[316,23,312,21],[317,6,313,4,"responseId"],[317,16,313,14],[317,18,313,16],[317,20,313,18],[318,6,314,4,"responseModel"],[318,19,314,17],[318,21,314,19],[318,23,314,21],[319,6,315,4,"promptTokens"],[319,18,315,16],[319,20,315,18,"undefined"],[319,29,315,27],[320,6,316,4,"completionTokens"],[320,22,316,20],[320,24,316,22,"undefined"],[320,33,316,31],[321,6,317,4,"cacheCreationInputTokens"],[321,30,317,28],[321,32,317,30,"undefined"],[321,41,317,39],[322,6,318,4,"cacheReadInputTokens"],[322,26,318,24],[322,28,318,26,"undefined"],[322,37,318,35],[323,6,319,4,"toolCalls"],[323,15,319,13],[323,17,319,15],[323,19,319,17],[324,6,320,4,"activeToolBlocks"],[324,22,320,20],[324,24,320,22],[324,25,320,23],[325,4,321,2],[325,5,321,3],[326,4,323,2,"stream"],[326,10,323,8],[326,11,323,9,"on"],[326,13,323,11],[326,14,323,12],[326,27,323,25],[326,29,323,28,"event"],[326,34,323,33],[326,38,323,38],[327,6,324,4,"processEvent"],[327,18,324,16],[327,19,324,17,"event"],[327,24,324,22],[327,26,324,25,"state"],[327,31,324,30],[327,33,324,32,"recordOutputs"],[327,46,324,45],[327,48,324,47,"span"],[327,52,324,51],[327,53,324,52],[328,4,325,2],[328,5,325,3],[328,6,325,4],[330,4,327,2],[331,4,328,2],[332,4,329,2,"stream"],[332,10,329,8],[332,11,329,9,"on"],[332,13,329,11],[332,14,329,12],[332,23,329,21],[332,25,329,23],[332,31,329,29],[333,6,330,4,"finalizeStreamSpan"],[333,24,330,22],[333,25,330,23,"state"],[333,30,330,28],[333,32,330,30,"span"],[333,36,330,34],[333,38,330,36,"recordOutputs"],[333,51,330,49],[333,52,330,50],[334,4,331,2],[334,5,331,3],[334,6,331,4],[335,4,333,2,"stream"],[335,10,333,8],[335,11,333,9,"on"],[335,13,333,11],[335,14,333,12],[335,21,333,19],[335,23,333,22,"error"],[335,28,333,27],[335,32,333,32],[336,6,334,4],[336,10,334,4,"captureException"],[336,20,334,20],[336,21,334,20,"captureException"],[336,37,334,20],[336,39,334,21,"error"],[336,44,334,26],[336,46,334,28],[337,8,335,6,"mechanism"],[337,17,335,15],[337,19,335,17],[338,10,336,8,"handled"],[338,17,336,15],[338,19,336,17],[338,24,336,22],[339,10,337,8,"type"],[339,14,337,12],[339,16,337,14],[340,8,338,6],[341,6,339,4],[341,7,339,5],[341,8,339,6],[342,6,341,4],[342,10,341,8,"span"],[342,14,341,12],[342,15,341,13,"isRecording"],[342,26,341,24],[342,27,341,25],[342,28,341,26],[342,30,341,28],[343,8,342,6,"span"],[343,12,342,10],[343,13,342,11,"setStatus"],[343,22,342,20],[343,23,342,21],[344,10,342,23,"code"],[344,14,342,27],[344,16,342,29,"SPAN_STATUS_ERROR"],[344,29,342,46],[344,30,342,46,"SPAN_STATUS_ERROR"],[344,47,342,46],[345,10,342,48,"message"],[345,17,342,55],[345,19,342,57],[346,8,342,72],[346,9,342,73],[346,10,342,74],[347,8,343,6,"span"],[347,12,343,10],[347,13,343,11,"end"],[347,16,343,14],[347,17,343,15],[347,18,343,16],[348,6,344,4],[349,4,345,2],[349,5,345,3],[349,6,345,4],[350,4,347,2],[350,11,347,9,"stream"],[350,17,347,15],[351,2,348,0],[352,0,348,1],[352,3]],"functionMap":{"names":["<global>","isErrorEvent","handleMessageMetadata","handleContentBlockStart","handleContentBlockDelta","handleContentBlockStop","processEvent","finalizeStreamSpan","instrumentAsyncIterableStream","instrumentMessageStream","stream.on$argument_1"],"mappings":"AAA;ACkB;CDgB;AEQ;CFwB;AGK;CHS;AIK;CJuB;AKK;CLwB;AMS;CNuB;AOK;CPiD;AQO;CRqE;ASK;2BCkB;GDE;uBCI;GDE;qBCE;GDY;CTG"},"hasCjsExports":false},"type":"js/module"}]}