{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useProfileHydration = useProfileHydration;\n  var _react = require(_dependencyMap[0], \"react\");\n  function useProfileHydration({\n    data,\n    serverProfile,\n    preferences,\n    setDisplayName,\n    setBio,\n    setPhotos,\n    setAge,\n    setGender,\n    setLocation,\n    setPhoneNumber,\n    setCategory,\n    setBasicHeight,\n    setBasicJobTitle,\n    setBasicCompany,\n    setBasicEducation,\n    setBasicLookingFor,\n    setBasicSexuality,\n    setVideos,\n    setInterests,\n    setPrompts,\n    setVoicePrompt,\n    normalizeVideoUrl\n  }) {\n    (0, _react.useEffect)(() => {\n      if (!serverProfile && data?.user) {\n        // No server profile yet; set some nice defaults.\n        const email = data.user?.email;\n        const name = typeof email === \"string\" ? email.split(\"@\")[0] : \"\";\n        setDisplayName(name || \"\");\n        return;\n      }\n      if (serverProfile) {\n        setDisplayName(serverProfile.display_name || \"\");\n        setBio(serverProfile.bio || \"\");\n        setPhotos(Array.isArray(serverProfile.photos) ? serverProfile.photos : []);\n        setAge(serverProfile.age ? String(serverProfile.age) : \"\");\n        setGender(serverProfile.gender || \"\");\n        setLocation(serverProfile.location || \"\");\n        setPhoneNumber(serverProfile.phone_number || \"\");\n\n        // Category is stored in preferences\n        setCategory(String(preferences?.category || \"\"));\n        const rawBasics = preferences?.basics && typeof preferences.basics === \"object\" ? preferences.basics : {};\n        setBasicHeight(String(rawBasics.height || preferences.height || \"\"));\n\n        // Work fields (support old `work` plus new `jobTitle` + `company`)\n        const fallbackWork = String(rawBasics.work || preferences.work || \"\");\n        const jobTitleRaw = String(rawBasics.jobTitle || \"\");\n        const companyRaw = String(rawBasics.company || \"\");\n        if (!jobTitleRaw && !companyRaw && fallbackWork.includes(\" at \")) {\n          const parts = fallbackWork.split(\" at \");\n          const jt = String(parts[0] || \"\").trim();\n          const co = String(parts.slice(1).join(\" at \") || \"\").trim();\n          setBasicJobTitle(jt);\n          setBasicCompany(co);\n        } else {\n          setBasicJobTitle(jobTitleRaw);\n          setBasicCompany(companyRaw);\n        }\n        setBasicEducation(String(rawBasics.education || preferences.education || \"\"));\n        setBasicLookingFor(String(rawBasics.lookingFor || preferences.lookingFor || \"\"));\n        setBasicSexuality(String(rawBasics.sexuality || rawBasics.orientation || \"\"));\n        const prefVideosRaw = Array.isArray(preferences.videos) ? preferences.videos : [];\n        const prefVideos = prefVideosRaw.map(normalizeVideoUrl).filter(x => typeof x === \"string\" && x.length > 0);\n\n        // Only 1 video supported in the product.\n        setVideos(prefVideos.slice(0, 1));\n        const prefInterests = Array.isArray(preferences.interests) ? preferences.interests : [];\n        setInterests(prefInterests);\n        const prefPrompts = Array.isArray(preferences.prompts) ? preferences.prompts : [];\n        const normalized = [0, 1, 2].map(i => {\n          const p = prefPrompts[i];\n          return {\n            question: p?.question || \"\",\n            answer: p?.answer || \"\"\n          };\n        });\n        setPrompts(normalized);\n        const vp = preferences.voicePrompt || {};\n        setVoicePrompt({\n          question: vp?.question || \"\",\n          audioUrl: vp?.audioUrl || \"\",\n          fileName: vp?.fileName || \"\",\n          waveform: Array.isArray(vp?.waveform) ? vp.waveform : []\n        });\n      }\n    }, [data?.user, preferences, serverProfile, preferences.interests, preferences.prompts, preferences.voicePrompt, preferences.videos, normalizeVideoUrl, setDisplayName, setBio, setPhotos, setAge, setGender, setLocation, setPhoneNumber, setCategory, setBasicHeight, setBasicJobTitle, setBasicCompany, setBasicEducation, setBasicLookingFor, setBasicSexuality, setVideos, setInterests, setPrompts, setVoicePrompt]);\n  }\n});","lineCount":98,"map":[[7,2,3,0,"exports"],[7,9,3,0],[7,10,3,0,"useProfileHydration"],[7,29,3,0],[7,32,3,0,"useProfileHydration"],[7,51,3,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,3,7],[9,11,3,16,"useProfileHydration"],[9,30,3,35,"useProfileHydration"],[9,31,3,36],[10,4,4,2,"data"],[10,8,4,6],[11,4,5,2,"serverProfile"],[11,17,5,15],[12,4,6,2,"preferences"],[12,15,6,13],[13,4,7,2,"setDisplayName"],[13,18,7,16],[14,4,8,2,"setBio"],[14,10,8,8],[15,4,9,2,"setPhotos"],[15,13,9,11],[16,4,10,2,"setAge"],[16,10,10,8],[17,4,11,2,"setGender"],[17,13,11,11],[18,4,12,2,"setLocation"],[18,15,12,13],[19,4,13,2,"setPhoneNumber"],[19,18,13,16],[20,4,14,2,"setCategory"],[20,15,14,13],[21,4,15,2,"setBasicHeight"],[21,18,15,16],[22,4,16,2,"setBasicJobTitle"],[22,20,16,18],[23,4,17,2,"setBasicCompany"],[23,19,17,17],[24,4,18,2,"setBasicEducation"],[24,21,18,19],[25,4,19,2,"setBasicLookingFor"],[25,22,19,20],[26,4,20,2,"setBasicSexuality"],[26,21,20,19],[27,4,21,2,"setVideos"],[27,13,21,11],[28,4,22,2,"setInterests"],[28,16,22,14],[29,4,23,2,"setPrompts"],[29,14,23,12],[30,4,24,2,"setVoicePrompt"],[30,18,24,16],[31,4,25,2,"normalizeVideoUrl"],[32,2,26,0],[32,3,26,1],[32,5,26,3],[33,4,27,2],[33,8,27,2,"useEffect"],[33,14,27,11],[33,15,27,11,"useEffect"],[33,24,27,11],[33,26,27,12],[33,32,27,18],[34,6,28,4],[34,10,28,8],[34,11,28,9,"serverProfile"],[34,24,28,22],[34,28,28,26,"data"],[34,32,28,30],[34,34,28,32,"user"],[34,38,28,36],[34,40,28,38],[35,8,29,6],[36,8,30,6],[36,14,30,12,"email"],[36,19,30,17],[36,22,30,20,"data"],[36,26,30,24],[36,27,30,25,"user"],[36,31,30,29],[36,33,30,31,"email"],[36,38,30,36],[37,8,31,6],[37,14,31,12,"name"],[37,18,31,16],[37,21,31,19],[37,28,31,26,"email"],[37,33,31,31],[37,38,31,36],[37,46,31,44],[37,49,31,47,"email"],[37,54,31,52],[37,55,31,53,"split"],[37,60,31,58],[37,61,31,59],[37,64,31,62],[37,65,31,63],[37,66,31,64],[37,67,31,65],[37,68,31,66],[37,71,31,69],[37,73,31,71],[38,8,32,6,"setDisplayName"],[38,22,32,20],[38,23,32,21,"name"],[38,27,32,25],[38,31,32,29],[38,33,32,31],[38,34,32,32],[39,8,33,6],[40,6,34,4],[41,6,36,4],[41,10,36,8,"serverProfile"],[41,23,36,21],[41,25,36,23],[42,8,37,6,"setDisplayName"],[42,22,37,20],[42,23,37,21,"serverProfile"],[42,36,37,34],[42,37,37,35,"display_name"],[42,49,37,47],[42,53,37,51],[42,55,37,53],[42,56,37,54],[43,8,38,6,"setBio"],[43,14,38,12],[43,15,38,13,"serverProfile"],[43,28,38,26],[43,29,38,27,"bio"],[43,32,38,30],[43,36,38,34],[43,38,38,36],[43,39,38,37],[44,8,39,6,"setPhotos"],[44,17,39,15],[44,18,40,8,"Array"],[44,23,40,13],[44,24,40,14,"isArray"],[44,31,40,21],[44,32,40,22,"serverProfile"],[44,45,40,35],[44,46,40,36,"photos"],[44,52,40,42],[44,53,40,43],[44,56,40,46,"serverProfile"],[44,69,40,59],[44,70,40,60,"photos"],[44,76,40,66],[44,79,40,69],[44,81,41,6],[44,82,41,7],[45,8,43,6,"setAge"],[45,14,43,12],[45,15,43,13,"serverProfile"],[45,28,43,26],[45,29,43,27,"age"],[45,32,43,30],[45,35,43,33,"String"],[45,41,43,39],[45,42,43,40,"serverProfile"],[45,55,43,53],[45,56,43,54,"age"],[45,59,43,57],[45,60,43,58],[45,63,43,61],[45,65,43,63],[45,66,43,64],[46,8,44,6,"setGender"],[46,17,44,15],[46,18,44,16,"serverProfile"],[46,31,44,29],[46,32,44,30,"gender"],[46,38,44,36],[46,42,44,40],[46,44,44,42],[46,45,44,43],[47,8,45,6,"setLocation"],[47,19,45,17],[47,20,45,18,"serverProfile"],[47,33,45,31],[47,34,45,32,"location"],[47,42,45,40],[47,46,45,44],[47,48,45,46],[47,49,45,47],[48,8,46,6,"setPhoneNumber"],[48,22,46,20],[48,23,46,21,"serverProfile"],[48,36,46,34],[48,37,46,35,"phone_number"],[48,49,46,47],[48,53,46,51],[48,55,46,53],[48,56,46,54],[50,8,48,6],[51,8,49,6,"setCategory"],[51,19,49,17],[51,20,49,18,"String"],[51,26,49,24],[51,27,49,25,"preferences"],[51,38,49,36],[51,40,49,38,"category"],[51,48,49,46],[51,52,49,50],[51,54,49,52],[51,55,49,53],[51,56,49,54],[52,8,51,6],[52,14,51,12,"rawBasics"],[52,23,51,21],[52,26,52,8,"preferences"],[52,37,52,19],[52,39,52,21,"basics"],[52,45,52,27],[52,49,52,31],[52,56,52,38,"preferences"],[52,67,52,49],[52,68,52,50,"basics"],[52,74,52,56],[52,79,52,61],[52,87,52,69],[52,90,53,12,"preferences"],[52,101,53,23],[52,102,53,24,"basics"],[52,108,53,30],[52,111,54,12],[52,112,54,13],[52,113,54,14],[53,8,56,6,"setBasicHeight"],[53,22,56,20],[53,23,56,21,"String"],[53,29,56,27],[53,30,56,28,"rawBasics"],[53,39,56,37],[53,40,56,38,"height"],[53,46,56,44],[53,50,56,48,"preferences"],[53,61,56,59],[53,62,56,60,"height"],[53,68,56,66],[53,72,56,70],[53,74,56,72],[53,75,56,73],[53,76,56,74],[55,8,58,6],[56,8,59,6],[56,14,59,12,"fallbackWork"],[56,26,59,24],[56,29,59,27,"String"],[56,35,59,33],[56,36,59,34,"rawBasics"],[56,45,59,43],[56,46,59,44,"work"],[56,50,59,48],[56,54,59,52,"preferences"],[56,65,59,63],[56,66,59,64,"work"],[56,70,59,68],[56,74,59,72],[56,76,59,74],[56,77,59,75],[57,8,60,6],[57,14,60,12,"jobTitleRaw"],[57,25,60,23],[57,28,60,26,"String"],[57,34,60,32],[57,35,60,33,"rawBasics"],[57,44,60,42],[57,45,60,43,"jobTitle"],[57,53,60,51],[57,57,60,55],[57,59,60,57],[57,60,60,58],[58,8,61,6],[58,14,61,12,"companyRaw"],[58,24,61,22],[58,27,61,25,"String"],[58,33,61,31],[58,34,61,32,"rawBasics"],[58,43,61,41],[58,44,61,42,"company"],[58,51,61,49],[58,55,61,53],[58,57,61,55],[58,58,61,56],[59,8,63,6],[59,12,63,10],[59,13,63,11,"jobTitleRaw"],[59,24,63,22],[59,28,63,26],[59,29,63,27,"companyRaw"],[59,39,63,37],[59,43,63,41,"fallbackWork"],[59,55,63,53],[59,56,63,54,"includes"],[59,64,63,62],[59,65,63,63],[59,71,63,69],[59,72,63,70],[59,74,63,72],[60,10,64,8],[60,16,64,14,"parts"],[60,21,64,19],[60,24,64,22,"fallbackWork"],[60,36,64,34],[60,37,64,35,"split"],[60,42,64,40],[60,43,64,41],[60,49,64,47],[60,50,64,48],[61,10,65,8],[61,16,65,14,"jt"],[61,18,65,16],[61,21,65,19,"String"],[61,27,65,25],[61,28,65,26,"parts"],[61,33,65,31],[61,34,65,32],[61,35,65,33],[61,36,65,34],[61,40,65,38],[61,42,65,40],[61,43,65,41],[61,44,65,42,"trim"],[61,48,65,46],[61,49,65,47],[61,50,65,48],[62,10,66,8],[62,16,66,14,"co"],[62,18,66,16],[62,21,66,19,"String"],[62,27,66,25],[62,28,66,26,"parts"],[62,33,66,31],[62,34,66,32,"slice"],[62,39,66,37],[62,40,66,38],[62,41,66,39],[62,42,66,40],[62,43,66,41,"join"],[62,47,66,45],[62,48,66,46],[62,54,66,52],[62,55,66,53],[62,59,66,57],[62,61,66,59],[62,62,66,60],[62,63,66,61,"trim"],[62,67,66,65],[62,68,66,66],[62,69,66,67],[63,10,67,8,"setBasicJobTitle"],[63,26,67,24],[63,27,67,25,"jt"],[63,29,67,27],[63,30,67,28],[64,10,68,8,"setBasicCompany"],[64,25,68,23],[64,26,68,24,"co"],[64,28,68,26],[64,29,68,27],[65,8,69,6],[65,9,69,7],[65,15,69,13],[66,10,70,8,"setBasicJobTitle"],[66,26,70,24],[66,27,70,25,"jobTitleRaw"],[66,38,70,36],[66,39,70,37],[67,10,71,8,"setBasicCompany"],[67,25,71,23],[67,26,71,24,"companyRaw"],[67,36,71,34],[67,37,71,35],[68,8,72,6],[69,8,74,6,"setBasicEducation"],[69,25,74,23],[69,26,75,8,"String"],[69,32,75,14],[69,33,75,15,"rawBasics"],[69,42,75,24],[69,43,75,25,"education"],[69,52,75,34],[69,56,75,38,"preferences"],[69,67,75,49],[69,68,75,50,"education"],[69,77,75,59],[69,81,75,63],[69,83,75,65],[69,84,76,6],[69,85,76,7],[70,8,77,6,"setBasicLookingFor"],[70,26,77,24],[70,27,78,8,"String"],[70,33,78,14],[70,34,78,15,"rawBasics"],[70,43,78,24],[70,44,78,25,"lookingFor"],[70,54,78,35],[70,58,78,39,"preferences"],[70,69,78,50],[70,70,78,51,"lookingFor"],[70,80,78,61],[70,84,78,65],[70,86,78,67],[70,87,79,6],[70,88,79,7],[71,8,80,6,"setBasicSexuality"],[71,25,80,23],[71,26,81,8,"String"],[71,32,81,14],[71,33,81,15,"rawBasics"],[71,42,81,24],[71,43,81,25,"sexuality"],[71,52,81,34],[71,56,81,38,"rawBasics"],[71,65,81,47],[71,66,81,48,"orientation"],[71,77,81,59],[71,81,81,63],[71,83,81,65],[71,84,82,6],[71,85,82,7],[72,8,84,6],[72,14,84,12,"prefVideosRaw"],[72,27,84,25],[72,30,84,28,"Array"],[72,35,84,33],[72,36,84,34,"isArray"],[72,43,84,41],[72,44,84,42,"preferences"],[72,55,84,53],[72,56,84,54,"videos"],[72,62,84,60],[72,63,84,61],[72,66,85,10,"preferences"],[72,77,85,21],[72,78,85,22,"videos"],[72,84,85,28],[72,87,86,10],[72,89,86,12],[73,8,88,6],[73,14,88,12,"prefVideos"],[73,24,88,22],[73,27,88,25,"prefVideosRaw"],[73,40,88,38],[73,41,89,9,"map"],[73,44,89,12],[73,45,89,13,"normalizeVideoUrl"],[73,62,89,30],[73,63,89,31],[73,64,90,9,"filter"],[73,70,90,15],[73,71,90,17,"x"],[73,72,90,18],[73,76,90,23],[73,83,90,30,"x"],[73,84,90,31],[73,89,90,36],[73,97,90,44],[73,101,90,48,"x"],[73,102,90,49],[73,103,90,50,"length"],[73,109,90,56],[73,112,90,59],[73,113,90,60],[73,114,90,61],[75,8,92,6],[76,8,93,6,"setVideos"],[76,17,93,15],[76,18,93,16,"prefVideos"],[76,28,93,26],[76,29,93,27,"slice"],[76,34,93,32],[76,35,93,33],[76,36,93,34],[76,38,93,36],[76,39,93,37],[76,40,93,38],[76,41,93,39],[77,8,95,6],[77,14,95,12,"prefInterests"],[77,27,95,25],[77,30,95,28,"Array"],[77,35,95,33],[77,36,95,34,"isArray"],[77,43,95,41],[77,44,95,42,"preferences"],[77,55,95,53],[77,56,95,54,"interests"],[77,65,95,63],[77,66,95,64],[77,69,96,10,"preferences"],[77,80,96,21],[77,81,96,22,"interests"],[77,90,96,31],[77,93,97,10],[77,95,97,12],[78,8,98,6,"setInterests"],[78,20,98,18],[78,21,98,19,"prefInterests"],[78,34,98,32],[78,35,98,33],[79,8,100,6],[79,14,100,12,"prefPrompts"],[79,25,100,23],[79,28,100,26,"Array"],[79,33,100,31],[79,34,100,32,"isArray"],[79,41,100,39],[79,42,100,40,"preferences"],[79,53,100,51],[79,54,100,52,"prompts"],[79,61,100,59],[79,62,100,60],[79,65,101,10,"preferences"],[79,76,101,21],[79,77,101,22,"prompts"],[79,84,101,29],[79,87,102,10],[79,89,102,12],[80,8,103,6],[80,14,103,12,"normalized"],[80,24,103,22],[80,27,103,25],[80,28,103,26],[80,29,103,27],[80,31,103,29],[80,32,103,30],[80,34,103,32],[80,35,103,33],[80,36,103,34],[80,37,103,35,"map"],[80,40,103,38],[80,41,103,40,"i"],[80,42,103,41],[80,46,103,46],[81,10,104,8],[81,16,104,14,"p"],[81,17,104,15],[81,20,104,18,"prefPrompts"],[81,31,104,29],[81,32,104,30,"i"],[81,33,104,31],[81,34,104,32],[82,10,105,8],[82,17,105,15],[83,12,106,10,"question"],[83,20,106,18],[83,22,106,20,"p"],[83,23,106,21],[83,25,106,23,"question"],[83,33,106,31],[83,37,106,35],[83,39,106,37],[84,12,107,10,"answer"],[84,18,107,16],[84,20,107,18,"p"],[84,21,107,19],[84,23,107,21,"answer"],[84,29,107,27],[84,33,107,31],[85,10,108,8],[85,11,108,9],[86,8,109,6],[86,9,109,7],[86,10,109,8],[87,8,110,6,"setPrompts"],[87,18,110,16],[87,19,110,17,"normalized"],[87,29,110,27],[87,30,110,28],[88,8,112,6],[88,14,112,12,"vp"],[88,16,112,14],[88,19,112,17,"preferences"],[88,30,112,28],[88,31,112,29,"voicePrompt"],[88,42,112,40],[88,46,112,44],[88,47,112,45],[88,48,112,46],[89,8,113,6,"setVoicePrompt"],[89,22,113,20],[89,23,113,21],[90,10,114,8,"question"],[90,18,114,16],[90,20,114,18,"vp"],[90,22,114,20],[90,24,114,22,"question"],[90,32,114,30],[90,36,114,34],[90,38,114,36],[91,10,115,8,"audioUrl"],[91,18,115,16],[91,20,115,18,"vp"],[91,22,115,20],[91,24,115,22,"audioUrl"],[91,32,115,30],[91,36,115,34],[91,38,115,36],[92,10,116,8,"fileName"],[92,18,116,16],[92,20,116,18,"vp"],[92,22,116,20],[92,24,116,22,"fileName"],[92,32,116,30],[92,36,116,34],[92,38,116,36],[93,10,117,8,"waveform"],[93,18,117,16],[93,20,117,18,"Array"],[93,25,117,23],[93,26,117,24,"isArray"],[93,33,117,31],[93,34,117,32,"vp"],[93,36,117,34],[93,38,117,36,"waveform"],[93,46,117,44],[93,47,117,45],[93,50,117,48,"vp"],[93,52,117,50],[93,53,117,51,"waveform"],[93,61,117,59],[93,64,117,62],[94,8,118,6],[94,9,118,7],[94,10,118,8],[95,6,119,4],[96,4,120,2],[96,5,120,3],[96,7,120,5],[96,8,121,4,"data"],[96,12,121,8],[96,14,121,10,"user"],[96,18,121,14],[96,20,122,4,"preferences"],[96,31,122,15],[96,33,123,4,"serverProfile"],[96,46,123,17],[96,48,124,4,"preferences"],[96,59,124,15],[96,60,124,16,"interests"],[96,69,124,25],[96,71,125,4,"preferences"],[96,82,125,15],[96,83,125,16,"prompts"],[96,90,125,23],[96,92,126,4,"preferences"],[96,103,126,15],[96,104,126,16,"voicePrompt"],[96,115,126,27],[96,117,127,4,"preferences"],[96,128,127,15],[96,129,127,16,"videos"],[96,135,127,22],[96,137,128,4,"normalizeVideoUrl"],[96,154,128,21],[96,156,129,4,"setDisplayName"],[96,170,129,18],[96,172,130,4,"setBio"],[96,178,130,10],[96,180,131,4,"setPhotos"],[96,189,131,13],[96,191,132,4,"setAge"],[96,197,132,10],[96,199,133,4,"setGender"],[96,208,133,13],[96,210,134,4,"setLocation"],[96,221,134,15],[96,223,135,4,"setPhoneNumber"],[96,237,135,18],[96,239,136,4,"setCategory"],[96,250,136,15],[96,252,137,4,"setBasicHeight"],[96,266,137,18],[96,268,138,4,"setBasicJobTitle"],[96,284,138,20],[96,286,139,4,"setBasicCompany"],[96,301,139,19],[96,303,140,4,"setBasicEducation"],[96,320,140,21],[96,322,141,4,"setBasicLookingFor"],[96,340,141,22],[96,342,142,4,"setBasicSexuality"],[96,359,142,21],[96,361,143,4,"setVideos"],[96,370,143,13],[96,372,144,4,"setInterests"],[96,384,144,16],[96,386,145,4,"setPrompts"],[96,396,145,14],[96,398,146,4,"setVoicePrompt"],[96,412,146,18],[96,413,147,3],[96,414,147,4],[97,2,148,0],[98,0,148,1],[98,3]],"functionMap":{"names":["<global>","useProfileHydration","useEffect$argument_0","prefVideosRaw.map.filter$argument_0","map$argument_0"],"mappings":"AAA;OCE;YCwB;gBC+D,4CD;uCEa;OFM;GDW;CD4B"},"hasCjsExports":false},"type":"js/module"}]}