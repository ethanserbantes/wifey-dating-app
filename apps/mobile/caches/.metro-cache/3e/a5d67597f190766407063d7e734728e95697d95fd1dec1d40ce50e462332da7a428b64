{"dependencies":[{"name":"./asyncContext/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"UuQ32QVz1TZHuuFfjsuiZDUPZlQ=","exportNames":["*"],"imports":1}},{"name":"./carrier.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":66,"index":133}}],"key":"6pp/3IpieqS3/vnZmp/pHWp2vlc=","exportNames":["*"],"imports":1}},{"name":"./scope.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":134},"end":{"line":3,"column":35,"index":169}}],"key":"asFjrgTIWdvglBac91WvmgCtKdM=","exportNames":["*"],"imports":1}},{"name":"./utils/propagationContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":170},"end":{"line":4,"column":63,"index":233}}],"key":"A+CCGmas654FEDhE3lMkwoufVoc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getClient\", {\n    enumerable: true,\n    get: function () {\n      return getClient;\n    }\n  });\n  Object.defineProperty(exports, \"getCurrentScope\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentScope;\n    }\n  });\n  Object.defineProperty(exports, \"getGlobalScope\", {\n    enumerable: true,\n    get: function () {\n      return getGlobalScope;\n    }\n  });\n  Object.defineProperty(exports, \"getIsolationScope\", {\n    enumerable: true,\n    get: function () {\n      return getIsolationScope;\n    }\n  });\n  Object.defineProperty(exports, \"getTraceContextFromScope\", {\n    enumerable: true,\n    get: function () {\n      return getTraceContextFromScope;\n    }\n  });\n  Object.defineProperty(exports, \"withIsolationScope\", {\n    enumerable: true,\n    get: function () {\n      return withIsolationScope;\n    }\n  });\n  Object.defineProperty(exports, \"withScope\", {\n    enumerable: true,\n    get: function () {\n      return withScope;\n    }\n  });\n  var _asyncContextIndexJs = require(_dependencyMap[0]);\n  var _carrierJs = require(_dependencyMap[1]);\n  var _scopeJs = require(_dependencyMap[2]);\n  var _utilsPropagationContextJs = require(_dependencyMap[3]);\n  /**\n   * Get the currently active scope.\n   */\n  function getCurrentScope() {\n    var carrier = (0, _carrierJs.getMainCarrier)();\n    var acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n    return acs.getCurrentScope();\n  }\n\n  /**\n   * Get the currently active isolation scope.\n   * The isolation scope is active for the current execution context.\n   */\n  function getIsolationScope() {\n    var carrier = (0, _carrierJs.getMainCarrier)();\n    var acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n    return acs.getIsolationScope();\n  }\n\n  /**\n   * Get the global scope.\n   * This scope is applied to _all_ events.\n   */\n  function getGlobalScope() {\n    return (0, _carrierJs.getGlobalSingleton)('globalScope', () => new _scopeJs.Scope());\n  }\n\n  /**\n   * Creates a new scope with and executes the given operation within.\n   * The scope is automatically removed once the operation\n   * finishes or throws.\n   */\n\n  /**\n   * Either creates a new active scope, or sets the given scope as active scope in the given callback.\n   */\n  function withScope() {\n    var carrier = (0, _carrierJs.getMainCarrier)();\n    var acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n\n    // If a scope is defined, we want to make this the active scope instead of the default one\n    for (var _len = arguments.length, rest = new Array(_len), _key = 0; _key < _len; _key++) {\n      rest[_key] = arguments[_key];\n    }\n    if (rest.length === 2) {\n      var scope = rest[0],\n        callback = rest[1];\n      if (!scope) {\n        return acs.withScope(callback);\n      }\n      return acs.withSetScope(scope, callback);\n    }\n    return acs.withScope(rest[0]);\n  }\n\n  /**\n   * Attempts to fork the current isolation scope and the current scope based on the current async context strategy. If no\n   * async context strategy is set, the isolation scope and the current scope will not be forked (this is currently the\n   * case, for example, in the browser).\n   *\n   * Usage of this function in environments without async context strategy is discouraged and may lead to unexpected behaviour.\n   *\n   * This function is intended for Sentry SDK and SDK integration development. It is not recommended to be used in \"normal\"\n   * applications directly because it comes with pitfalls. Use at your own risk!\n   */\n\n  /**\n   * Either creates a new active isolation scope, or sets the given isolation scope as active scope in the given callback.\n   */\n  function withIsolationScope() {\n    var carrier = (0, _carrierJs.getMainCarrier)();\n    var acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n\n    // If a scope is defined, we want to make this the active scope instead of the default one\n    for (var _len2 = arguments.length, rest = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      rest[_key2] = arguments[_key2];\n    }\n    if (rest.length === 2) {\n      var isolationScope = rest[0],\n        callback = rest[1];\n      if (!isolationScope) {\n        return acs.withIsolationScope(callback);\n      }\n      return acs.withSetIsolationScope(isolationScope, callback);\n    }\n    return acs.withIsolationScope(rest[0]);\n  }\n\n  /**\n   * Get the currently active client.\n   */\n  function getClient() {\n    return getCurrentScope().getClient();\n  }\n\n  /**\n   * Get a trace context for the given scope.\n   */\n  function getTraceContextFromScope(scope) {\n    var propagationContext = scope.getPropagationContext();\n    var traceId = propagationContext.traceId,\n      parentSpanId = propagationContext.parentSpanId,\n      propagationSpanId = propagationContext.propagationSpanId;\n    var traceContext = {\n      trace_id: traceId,\n      span_id: propagationSpanId || (0, _utilsPropagationContextJs.generateSpanId)()\n    };\n    if (parentSpanId) {\n      traceContext.parent_span_id = parentSpanId;\n    }\n    return traceContext;\n  }\n});","lineCount":165,"map":[[7,2,124,0,"Object"],[7,8,124,0],[7,9,124,0,"defineProperty"],[7,23,124,0],[7,24,124,0,"exports"],[7,31,124,0],[8,4,124,0,"enumerable"],[8,14,124,0],[9,4,124,0,"get"],[9,7,124,0],[9,18,124,0,"get"],[9,19,124,0],[10,6,124,0],[10,13,124,9,"getClient"],[10,22,124,18],[11,4,124,18],[12,2,124,18],[13,2,124,0,"Object"],[13,8,124,0],[13,9,124,0,"defineProperty"],[13,23,124,0],[13,24,124,0,"exports"],[13,31,124,0],[14,4,124,0,"enumerable"],[14,14,124,0],[15,4,124,0,"get"],[15,7,124,0],[15,18,124,0,"get"],[15,19,124,0],[16,6,124,0],[16,13,124,20,"getCurrentScope"],[16,28,124,35],[17,4,124,35],[18,2,124,35],[19,2,124,0,"Object"],[19,8,124,0],[19,9,124,0,"defineProperty"],[19,23,124,0],[19,24,124,0,"exports"],[19,31,124,0],[20,4,124,0,"enumerable"],[20,14,124,0],[21,4,124,0,"get"],[21,7,124,0],[21,18,124,0,"get"],[21,19,124,0],[22,6,124,0],[22,13,124,37,"getGlobalScope"],[22,27,124,51],[23,4,124,51],[24,2,124,51],[25,2,124,0,"Object"],[25,8,124,0],[25,9,124,0,"defineProperty"],[25,23,124,0],[25,24,124,0,"exports"],[25,31,124,0],[26,4,124,0,"enumerable"],[26,14,124,0],[27,4,124,0,"get"],[27,7,124,0],[27,18,124,0,"get"],[27,19,124,0],[28,6,124,0],[28,13,124,53,"getIsolationScope"],[28,30,124,70],[29,4,124,70],[30,2,124,70],[31,2,124,0,"Object"],[31,8,124,0],[31,9,124,0,"defineProperty"],[31,23,124,0],[31,24,124,0,"exports"],[31,31,124,0],[32,4,124,0,"enumerable"],[32,14,124,0],[33,4,124,0,"get"],[33,7,124,0],[33,18,124,0,"get"],[33,19,124,0],[34,6,124,0],[34,13,124,72,"getTraceContextFromScope"],[34,37,124,96],[35,4,124,96],[36,2,124,96],[37,2,124,0,"Object"],[37,8,124,0],[37,9,124,0,"defineProperty"],[37,23,124,0],[37,24,124,0,"exports"],[37,31,124,0],[38,4,124,0,"enumerable"],[38,14,124,0],[39,4,124,0,"get"],[39,7,124,0],[39,18,124,0,"get"],[39,19,124,0],[40,6,124,0],[40,13,124,98,"withIsolationScope"],[40,31,124,116],[41,4,124,116],[42,2,124,116],[43,2,124,0,"Object"],[43,8,124,0],[43,9,124,0,"defineProperty"],[43,23,124,0],[43,24,124,0,"exports"],[43,31,124,0],[44,4,124,0,"enumerable"],[44,14,124,0],[45,4,124,0,"get"],[45,7,124,0],[45,18,124,0,"get"],[45,19,124,0],[46,6,124,0],[46,13,124,118,"withScope"],[46,22,124,127],[47,4,124,127],[48,2,124,127],[49,2,1,0],[49,6,1,0,"_asyncContextIndexJs"],[49,26,1,0],[49,29,1,0,"require"],[49,36,1,0],[49,37,1,0,"_dependencyMap"],[49,51,1,0],[50,2,2,0],[50,6,2,0,"_carrierJs"],[50,16,2,0],[50,19,2,0,"require"],[50,26,2,0],[50,27,2,0,"_dependencyMap"],[50,41,2,0],[51,2,3,0],[51,6,3,0,"_scopeJs"],[51,14,3,0],[51,17,3,0,"require"],[51,24,3,0],[51,25,3,0,"_dependencyMap"],[51,39,3,0],[52,2,4,0],[52,6,4,0,"_utilsPropagationContextJs"],[52,32,4,0],[52,35,4,0,"require"],[52,42,4,0],[52,43,4,0,"_dependencyMap"],[52,57,4,0],[53,2,6,0],[54,0,7,0],[55,0,8,0],[56,2,9,0],[56,11,9,9,"getCurrentScope"],[56,26,9,24,"getCurrentScope"],[56,27,9,24],[56,29,9,27],[57,4,10,2],[57,8,10,8,"carrier"],[57,15,10,15],[57,18,10,18],[57,22,10,18,"getMainCarrier"],[57,32,10,32],[57,33,10,32,"getMainCarrier"],[57,47,10,32],[57,49,10,33],[57,50,10,34],[58,4,11,2],[58,8,11,8,"acs"],[58,11,11,11],[58,14,11,14],[58,18,11,14,"getAsyncContextStrategy"],[58,38,11,37],[58,39,11,37,"getAsyncContextStrategy"],[58,62,11,37],[58,64,11,38,"carrier"],[58,71,11,45],[58,72,11,46],[59,4,12,2],[59,11,12,9,"acs"],[59,14,12,12],[59,15,12,13,"getCurrentScope"],[59,30,12,28],[59,31,12,29],[59,32,12,30],[60,2,13,0],[62,2,15,0],[63,0,16,0],[64,0,17,0],[65,0,18,0],[66,2,19,0],[66,11,19,9,"getIsolationScope"],[66,28,19,26,"getIsolationScope"],[66,29,19,26],[66,31,19,29],[67,4,20,2],[67,8,20,8,"carrier"],[67,15,20,15],[67,18,20,18],[67,22,20,18,"getMainCarrier"],[67,32,20,32],[67,33,20,32,"getMainCarrier"],[67,47,20,32],[67,49,20,33],[67,50,20,34],[68,4,21,2],[68,8,21,8,"acs"],[68,11,21,11],[68,14,21,14],[68,18,21,14,"getAsyncContextStrategy"],[68,38,21,37],[68,39,21,37,"getAsyncContextStrategy"],[68,62,21,37],[68,64,21,38,"carrier"],[68,71,21,45],[68,72,21,46],[69,4,22,2],[69,11,22,9,"acs"],[69,14,22,12],[69,15,22,13,"getIsolationScope"],[69,32,22,30],[69,33,22,31],[69,34,22,32],[70,2,23,0],[72,2,25,0],[73,0,26,0],[74,0,27,0],[75,0,28,0],[76,2,29,0],[76,11,29,9,"getGlobalScope"],[76,25,29,23,"getGlobalScope"],[76,26,29,23],[76,28,29,26],[77,4,30,2],[77,11,30,9],[77,15,30,9,"getGlobalSingleton"],[77,25,30,27],[77,26,30,27,"getGlobalSingleton"],[77,44,30,27],[77,46,30,28],[77,59,30,41],[77,61,30,43],[77,67,30,49],[77,71,30,53,"Scope"],[77,79,30,58],[77,80,30,58,"Scope"],[77,85,30,58],[77,86,30,59],[77,87,30,60],[77,88,30,61],[78,2,31,0],[80,2,33,0],[81,0,34,0],[82,0,35,0],[83,0,36,0],[84,0,37,0],[86,2,39,0],[87,0,40,0],[88,0,41,0],[89,2,42,0],[89,11,42,9,"withScope"],[89,20,42,18,"withScope"],[89,21,42,18],[89,23,44,2],[90,4,45,2],[90,8,45,8,"carrier"],[90,15,45,15],[90,18,45,18],[90,22,45,18,"getMainCarrier"],[90,32,45,32],[90,33,45,32,"getMainCarrier"],[90,47,45,32],[90,49,45,33],[90,50,45,34],[91,4,46,2],[91,8,46,8,"acs"],[91,11,46,11],[91,14,46,14],[91,18,46,14,"getAsyncContextStrategy"],[91,38,46,37],[91,39,46,37,"getAsyncContextStrategy"],[91,62,46,37],[91,64,46,38,"carrier"],[91,71,46,45],[91,72,46,46],[93,4,48,2],[94,4,48,2],[94,13,48,2,"_len"],[94,17,48,2],[94,20,48,2,"arguments"],[94,29,48,2],[94,30,48,2,"length"],[94,36,48,2],[94,38,43,5,"rest"],[94,42,43,9],[94,49,43,9,"Array"],[94,54,43,9],[94,55,43,9,"_len"],[94,59,43,9],[94,62,43,9,"_key"],[94,66,43,9],[94,72,43,9,"_key"],[94,76,43,9],[94,79,43,9,"_len"],[94,83,43,9],[94,85,43,9,"_key"],[94,89,43,9],[95,6,43,5,"rest"],[95,10,43,9],[95,11,43,9,"_key"],[95,15,43,9],[95,19,43,9,"arguments"],[95,28,43,9],[95,29,43,9,"_key"],[95,33,43,9],[96,4,43,9],[97,4,49,2],[97,8,49,6,"rest"],[97,12,49,10],[97,13,49,11,"length"],[97,19,49,17],[97,24,49,22],[97,25,49,23],[97,27,49,25],[98,6,50,4],[98,10,50,11,"scope"],[98,15,50,16],[98,18,50,30,"rest"],[98,22,50,34],[99,8,50,18,"callback"],[99,16,50,26],[99,19,50,30,"rest"],[99,23,50,34],[100,6,52,4],[100,10,52,8],[100,11,52,9,"scope"],[100,16,52,14],[100,18,52,16],[101,8,53,6],[101,15,53,13,"acs"],[101,18,53,16],[101,19,53,17,"withScope"],[101,28,53,26],[101,29,53,27,"callback"],[101,37,53,35],[101,38,53,36],[102,6,54,4],[103,6,56,4],[103,13,56,11,"acs"],[103,16,56,14],[103,17,56,15,"withSetScope"],[103,29,56,27],[103,30,56,28,"scope"],[103,35,56,33],[103,37,56,35,"callback"],[103,45,56,43],[103,46,56,44],[104,4,57,2],[105,4,59,2],[105,11,59,9,"acs"],[105,14,59,12],[105,15,59,13,"withScope"],[105,24,59,22],[105,25,59,23,"rest"],[105,29,59,27],[105,30,59,28],[105,31,59,29],[105,32,59,30],[105,33,59,31],[106,2,60,0],[108,2,62,0],[109,0,63,0],[110,0,64,0],[111,0,65,0],[112,0,66,0],[113,0,67,0],[114,0,68,0],[115,0,69,0],[116,0,70,0],[117,0,71,0],[119,2,73,0],[120,0,74,0],[121,0,75,0],[122,2,76,0],[122,11,76,9,"withIsolationScope"],[122,29,76,27,"withIsolationScope"],[122,30,76,27],[122,32,79,2],[123,4,80,2],[123,8,80,8,"carrier"],[123,15,80,15],[123,18,80,18],[123,22,80,18,"getMainCarrier"],[123,32,80,32],[123,33,80,32,"getMainCarrier"],[123,47,80,32],[123,49,80,33],[123,50,80,34],[124,4,81,2],[124,8,81,8,"acs"],[124,11,81,11],[124,14,81,14],[124,18,81,14,"getAsyncContextStrategy"],[124,38,81,37],[124,39,81,37,"getAsyncContextStrategy"],[124,62,81,37],[124,64,81,38,"carrier"],[124,71,81,45],[124,72,81,46],[126,4,83,2],[127,4,83,2],[127,13,83,2,"_len2"],[127,18,83,2],[127,21,83,2,"arguments"],[127,30,83,2],[127,31,83,2,"length"],[127,37,83,2],[127,39,77,5,"rest"],[127,43,77,9],[127,50,77,9,"Array"],[127,55,77,9],[127,56,77,9,"_len2"],[127,61,77,9],[127,64,77,9,"_key2"],[127,69,77,9],[127,75,77,9,"_key2"],[127,80,77,9],[127,83,77,9,"_len2"],[127,88,77,9],[127,90,77,9,"_key2"],[127,95,77,9],[128,6,77,5,"rest"],[128,10,77,9],[128,11,77,9,"_key2"],[128,16,77,9],[128,20,77,9,"arguments"],[128,29,77,9],[128,30,77,9,"_key2"],[128,35,77,9],[129,4,77,9],[130,4,84,2],[130,8,84,6,"rest"],[130,12,84,10],[130,13,84,11,"length"],[130,19,84,17],[130,24,84,22],[130,25,84,23],[130,27,84,25],[131,6,85,4],[131,10,85,11,"isolationScope"],[131,24,85,25],[131,27,85,39,"rest"],[131,31,85,43],[132,8,85,27,"callback"],[132,16,85,35],[132,19,85,39,"rest"],[132,23,85,43],[133,6,87,4],[133,10,87,8],[133,11,87,9,"isolationScope"],[133,25,87,23],[133,27,87,25],[134,8,88,6],[134,15,88,13,"acs"],[134,18,88,16],[134,19,88,17,"withIsolationScope"],[134,37,88,35],[134,38,88,36,"callback"],[134,46,88,44],[134,47,88,45],[135,6,89,4],[136,6,91,4],[136,13,91,11,"acs"],[136,16,91,14],[136,17,91,15,"withSetIsolationScope"],[136,38,91,36],[136,39,91,37,"isolationScope"],[136,53,91,51],[136,55,91,53,"callback"],[136,63,91,61],[136,64,91,62],[137,4,92,2],[138,4,94,2],[138,11,94,9,"acs"],[138,14,94,12],[138,15,94,13,"withIsolationScope"],[138,33,94,31],[138,34,94,32,"rest"],[138,38,94,36],[138,39,94,37],[138,40,94,38],[138,41,94,39],[138,42,94,40],[139,2,95,0],[141,2,97,0],[142,0,98,0],[143,0,99,0],[144,2,100,0],[144,11,100,9,"getClient"],[144,20,100,18,"getClient"],[144,21,100,18],[144,23,100,21],[145,4,101,2],[145,11,101,9,"getCurrentScope"],[145,26,101,24],[145,27,101,25],[145,28,101,26],[145,29,101,27,"getClient"],[145,38,101,36],[145,39,101,37],[145,40,101,38],[146,2,102,0],[148,2,104,0],[149,0,105,0],[150,0,106,0],[151,2,107,0],[151,11,107,9,"getTraceContextFromScope"],[151,35,107,33,"getTraceContextFromScope"],[151,36,107,34,"scope"],[151,41,107,39],[151,43,107,41],[152,4,108,2],[152,8,108,8,"propagationContext"],[152,26,108,26],[152,29,108,29,"scope"],[152,34,108,34],[152,35,108,35,"getPropagationContext"],[152,56,108,56],[152,57,108,57],[152,58,108,58],[153,4,110,2],[153,8,110,10,"traceId"],[153,15,110,17],[153,18,110,55,"propagationContext"],[153,36,110,73],[153,37,110,10,"traceId"],[153,44,110,17],[154,6,110,19,"parentSpanId"],[154,18,110,31],[154,21,110,55,"propagationContext"],[154,39,110,73],[154,40,110,19,"parentSpanId"],[154,52,110,31],[155,6,110,33,"propagationSpanId"],[155,23,110,50],[155,26,110,55,"propagationContext"],[155,44,110,73],[155,45,110,33,"propagationSpanId"],[155,62,110,50],[156,4,112,2],[156,8,112,8,"traceContext"],[156,20,112,20],[156,23,112,23],[157,6,113,4,"trace_id"],[157,14,113,12],[157,16,113,14,"traceId"],[157,23,113,21],[158,6,114,4,"span_id"],[158,13,114,11],[158,15,114,13,"propagationSpanId"],[158,32,114,30],[158,36,114,34],[158,40,114,34,"generateSpanId"],[158,66,114,48],[158,67,114,48,"generateSpanId"],[158,81,114,48],[158,83,114,49],[159,4,115,2],[159,5,115,3],[160,4,117,2],[160,8,117,6,"parentSpanId"],[160,20,117,18],[160,22,117,20],[161,6,118,4,"traceContext"],[161,18,118,16],[161,19,118,17,"parent_span_id"],[161,33,118,31],[161,36,118,34,"parentSpanId"],[161,48,118,46],[162,4,119,2],[163,4,121,2],[163,11,121,9,"traceContext"],[163,23,121,21],[164,2,122,0],[165,0,122,1],[165,3]],"functionMap":{"names":["<global>","getCurrentScope","getIsolationScope","getGlobalScope","getGlobalSingleton$argument_1","withScope","withIsolationScope","getClient","getTraceContextFromScope"],"mappings":"AAA;ACQ;CDI;AEM;CFI;AGM;2CCC,iBD;CHC;AKW;CLkB;AMgB;CNmB;AOK;CPE;AQK;CRe"},"hasCjsExports":false},"type":"js/module"}]}