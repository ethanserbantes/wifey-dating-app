{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":49,"index":90}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":33,"index":124}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"./organizationStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":125},"end":{"line":4,"column":59,"index":184}}],"key":"V/fzZ4ieYZmujLAlZC1W7yy5AuU=","exportNames":["*"],"imports":1}},{"name":"zod","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":185},"end":{"line":5,"column":24,"index":209}}],"key":"EgTkl25xpDemoBwqaFxYoOam6bo=","exportNames":["*"],"imports":1}},{"name":"react-native-purchases","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":210},"end":{"line":6,"column":47,"index":257}}],"key":"w6kXlt3+wzwVuELA/KXcfEkh03Q=","exportNames":["*"],"imports":1}},{"name":"jwt-decode","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":258},"end":{"line":7,"column":39,"index":297}}],"key":"Ctk48ebkS2nqaQvz9JtD6w/U1Fs=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":298},"end":{"line":8,"column":40,"index":338}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../utils/apollo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":339},"end":{"line":9,"column":46,"index":385}}],"key":"cIGifLlj4NT7dIP8Or+AzIbCfck=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _constants = require(_dependencyMap[1]);\n  var _expoSecureStore = require(_dependencyMap[2]);\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _zustand = require(_dependencyMap[3]);\n  var _organizationStore = require(_dependencyMap[4]);\n  var _zod = require(_dependencyMap[5]);\n  var _reactNativePurchases = require(_dependencyMap[6]);\n  var Purchases = _interopDefault(_reactNativePurchases);\n  var _jwtDecode2 = require(_dependencyMap[7]);\n  require(_dependencyMap[8]);\n  var _utilsApollo = require(_dependencyMap[9]);\n  var authSchema = _zod.z.object({\n    accessToken: _zod.z.string(),\n    refreshToken: _zod.z.string()\n  });\n  var useAuthStore = (0, _zustand.create)(set => ({\n    isReady: false,\n    auth: null,\n    setAuth: auth => {\n      if (auth) {\n        SecureStore.setItemAsync(_constants.AUTH_KEY, JSON.stringify(auth));\n      } else {\n        _organizationStore.useOrganizationStore.getState().setCurrentOrganizationIndex(0);\n        SecureStore.deleteItemAsync(_constants.AUTH_KEY);\n      }\n      set({\n        auth\n      });\n    },\n    init: rawAuth => {\n      var auth = rawAuth ? authSchema.safeParse(JSON.parse(rawAuth)) : null;\n      useAuthStore.setState({\n        auth: auth?.success ? auth.data : null,\n        isReady: true\n      });\n    }\n  }));\n  useAuthStore.subscribe(/*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (state) {\n      if (process.env.EXPO_PUBLIC_REVENUECAT_PROJECT_APPLE_API_KEY) {\n        try {\n          if (state.auth) {\n            var _jwtDecode = (0, _jwtDecode2.jwtDecode)(state.auth.accessToken),\n              sub = _jwtDecode.sub;\n            if (typeof sub === 'string') {\n              yield Purchases.default.logIn(sub);\n            }\n          } else {\n            _utilsApollo.apolloCache.reset();\n            yield Purchases.default.logOut();\n          }\n        } catch (error) {\n          console.warn('Error logging in/out of Purchases:', error);\n        }\n      }\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n});","lineCount":95,"map":[[27,2,14,0,"Object"],[27,8,14,0],[27,9,14,0,"defineProperty"],[27,23,14,0],[27,24,14,0,"exports"],[27,31,14,0],[28,4,14,0,"enumerable"],[28,14,14,0],[29,4,14,0,"get"],[29,7,14,0],[29,18,14,0,"get"],[29,19,14,0],[30,6,14,0],[30,13,14,0,"useAuthStore"],[30,25,14,0],[31,4,14,0],[32,2,14,0],[33,2,34,4],[33,6,34,4,"_babelRuntimeHelpersAsyncToGenerator"],[33,42,34,4],[33,45,34,4,"require"],[33,52,34,4],[33,53,34,4,"_dependencyMap"],[33,67,34,4],[34,2,34,4],[34,6,34,4,"_asyncToGenerator"],[34,23,34,4],[34,26,34,4,"_interopDefault"],[34,41,34,4],[34,42,34,4,"_babelRuntimeHelpersAsyncToGenerator"],[34,78,34,4],[35,2,1,0],[35,6,1,0,"_constants"],[35,16,1,0],[35,19,1,0,"require"],[35,26,1,0],[35,27,1,0,"_dependencyMap"],[35,41,1,0],[36,2,2,0],[36,6,2,0,"_expoSecureStore"],[36,22,2,0],[36,25,2,0,"require"],[36,32,2,0],[36,33,2,0,"_dependencyMap"],[36,47,2,0],[37,2,2,0],[37,6,2,0,"SecureStore"],[37,17,2,0],[37,20,2,0,"_interopNamespace"],[37,37,2,0],[37,38,2,0,"_expoSecureStore"],[37,54,2,0],[38,2,3,0],[38,6,3,0,"_zustand"],[38,14,3,0],[38,17,3,0,"require"],[38,24,3,0],[38,25,3,0,"_dependencyMap"],[38,39,3,0],[39,2,4,0],[39,6,4,0,"_organizationStore"],[39,24,4,0],[39,27,4,0,"require"],[39,34,4,0],[39,35,4,0,"_dependencyMap"],[39,49,4,0],[40,2,5,0],[40,6,5,0,"_zod"],[40,10,5,0],[40,13,5,0,"require"],[40,20,5,0],[40,21,5,0,"_dependencyMap"],[40,35,5,0],[41,2,6,0],[41,6,6,0,"_reactNativePurchases"],[41,27,6,0],[41,30,6,0,"require"],[41,37,6,0],[41,38,6,0,"_dependencyMap"],[41,52,6,0],[42,2,6,0],[42,6,6,0,"Purchases"],[42,15,6,0],[42,18,6,0,"_interopDefault"],[42,33,6,0],[42,34,6,0,"_reactNativePurchases"],[42,55,6,0],[43,2,7,0],[43,6,7,0,"_jwtDecode2"],[43,17,7,0],[43,20,7,0,"require"],[43,27,7,0],[43,28,7,0,"_dependencyMap"],[43,42,7,0],[44,2,8,0,"require"],[44,9,8,0],[44,10,8,0,"_dependencyMap"],[44,24,8,0],[45,2,9,0],[45,6,9,0,"_utilsApollo"],[45,18,9,0],[45,21,9,0,"require"],[45,28,9,0],[45,29,9,0,"_dependencyMap"],[45,43,9,0],[46,2,10,0],[46,6,10,6,"authSchema"],[46,16,10,16],[46,19,10,19,"z"],[46,23,10,20],[46,24,10,20,"z"],[46,25,10,20],[46,26,10,21,"object"],[46,32,10,27],[46,33,10,28],[47,4,11,4,"accessToken"],[47,15,11,15],[47,17,11,17,"z"],[47,21,11,18],[47,22,11,18,"z"],[47,23,11,18],[47,24,11,19,"string"],[47,30,11,25],[47,31,11,26],[47,32,11,27],[48,4,12,4,"refreshToken"],[48,16,12,16],[48,18,12,18,"z"],[48,22,12,19],[48,23,12,19,"z"],[48,24,12,19],[48,25,12,20,"string"],[48,31,12,26],[48,32,12,27],[49,2,13,0],[49,3,13,1],[49,4,13,2],[50,2,14,7],[50,6,14,13,"useAuthStore"],[50,18,14,25],[50,21,14,28],[50,25,14,28,"create"],[50,33,14,34],[50,34,14,34,"create"],[50,40,14,34],[50,42,14,36,"set"],[50,45,14,39],[50,50,14,45],[51,4,15,4,"isReady"],[51,11,15,11],[51,13,15,13],[51,18,15,18],[52,4,16,4,"auth"],[52,8,16,8],[52,10,16,10],[52,14,16,14],[53,4,17,4,"setAuth"],[53,11,17,11],[53,13,17,14,"auth"],[53,17,17,18],[53,21,17,23],[54,6,18,8],[54,10,18,12,"auth"],[54,14,18,16],[54,16,18,18],[55,8,19,12,"SecureStore"],[55,19,19,23],[55,20,19,24,"setItemAsync"],[55,32,19,36],[55,33,19,37,"AUTH_KEY"],[55,43,19,45],[55,44,19,45,"AUTH_KEY"],[55,52,19,45],[55,54,19,47,"JSON"],[55,58,19,51],[55,59,19,52,"stringify"],[55,68,19,61],[55,69,19,62,"auth"],[55,73,19,66],[55,74,19,67],[55,75,19,68],[56,6,20,8],[56,7,20,9],[56,13,21,13],[57,8,22,12,"useOrganizationStore"],[57,26,22,32],[57,27,22,32,"useOrganizationStore"],[57,47,22,32],[57,48,22,33,"getState"],[57,56,22,41],[57,57,22,42],[57,58,22,43],[57,59,22,44,"setCurrentOrganizationIndex"],[57,86,22,71],[57,87,22,72],[57,88,22,73],[57,89,22,74],[58,8,23,12,"SecureStore"],[58,19,23,23],[58,20,23,24,"deleteItemAsync"],[58,35,23,39],[58,36,23,40,"AUTH_KEY"],[58,46,23,48],[58,47,23,48,"AUTH_KEY"],[58,55,23,48],[58,56,23,49],[59,6,24,8],[60,6,25,8,"set"],[60,9,25,11],[60,10,25,12],[61,8,25,14,"auth"],[62,6,25,19],[62,7,25,20],[62,8,25,21],[63,4,26,4],[63,5,26,5],[64,4,27,4,"init"],[64,8,27,8],[64,10,27,11,"rawAuth"],[64,17,27,18],[64,21,27,23],[65,6,28,8],[65,10,28,14,"auth"],[65,14,28,18],[65,17,28,21,"rawAuth"],[65,24,28,28],[65,27,28,31,"authSchema"],[65,37,28,41],[65,38,28,42,"safeParse"],[65,47,28,51],[65,48,28,52,"JSON"],[65,52,28,56],[65,53,28,57,"parse"],[65,58,28,62],[65,59,28,63,"rawAuth"],[65,66,28,70],[65,67,28,71],[65,68,28,72],[65,71,28,75],[65,75,28,79],[66,6,29,8,"useAuthStore"],[66,18,29,20],[66,19,29,21,"setState"],[66,27,29,29],[66,28,29,30],[67,8,30,12,"auth"],[67,12,30,16],[67,14,30,18,"auth"],[67,18,30,22],[67,20,30,24,"success"],[67,27,30,31],[67,30,30,34,"auth"],[67,34,30,38],[67,35,30,39,"data"],[67,39,30,43],[67,42,30,46],[67,46,30,50],[68,8,31,12,"isReady"],[68,15,31,19],[68,17,31,21],[69,6,32,8],[69,7,32,9],[69,8,32,10],[70,4,33,4],[71,2,34,0],[71,3,34,1],[71,4,34,2],[71,5,34,3],[72,2,35,0,"useAuthStore"],[72,14,35,12],[72,15,35,13,"subscribe"],[72,24,35,22],[73,4,35,22],[73,8,35,22,"_ref"],[73,12,35,22],[73,19,35,22,"_asyncToGenerator"],[73,36,35,22],[73,37,35,22,"default"],[73,44,35,22],[73,46,35,23],[73,57,35,30,"state"],[73,62,35,35],[73,64,35,40],[74,6,36,4],[74,10,37,8,"process"],[74,17,37,15],[74,18,37,16,"env"],[74,21,37,19],[74,22,37,20,"EXPO_PUBLIC_REVENUECAT_PROJECT_APPLE_API_KEY"],[74,66,37,64],[74,68,37,66],[75,8,38,8],[75,12,38,12],[76,10,39,12],[76,14,39,16,"state"],[76,19,39,21],[76,20,39,22,"auth"],[76,24,39,26],[76,26,39,28],[77,12,40,16],[77,16,40,16,"_jwtDecode"],[77,26,40,16],[77,29,40,32],[77,33,40,32,"jwtDecode"],[77,44,40,41],[77,45,40,41,"jwtDecode"],[77,54,40,41],[77,56,40,42,"state"],[77,61,40,47],[77,62,40,48,"auth"],[77,66,40,52],[77,67,40,53,"accessToken"],[77,78,40,64],[77,79,40,65],[78,14,40,24,"sub"],[78,17,40,27],[78,20,40,27,"_jwtDecode"],[78,30,40,27],[78,31,40,24,"sub"],[78,34,40,27],[79,12,41,16],[79,16,41,20],[79,23,41,27,"sub"],[79,26,41,30],[79,31,41,35],[79,39,41,43],[79,41,41,45],[80,14,42,20],[80,20,42,26,"Purchases"],[80,29,42,35],[80,30,42,35,"default"],[80,37,42,35],[80,38,42,36,"logIn"],[80,43,42,41],[80,44,42,42,"sub"],[80,47,42,45],[80,48,42,46],[81,12,43,16],[82,10,44,12],[82,11,44,13],[82,17,45,17],[83,12,46,16,"apolloCache"],[83,24,46,27],[83,25,46,27,"apolloCache"],[83,36,46,27],[83,37,46,28,"reset"],[83,42,46,33],[83,43,46,34],[83,44,46,35],[84,12,47,16],[84,18,47,22,"Purchases"],[84,27,47,31],[84,28,47,31,"default"],[84,35,47,31],[84,36,47,32,"logOut"],[84,42,47,38],[84,43,47,39],[84,44,47,40],[85,10,48,12],[86,8,49,8],[86,9,49,9],[86,10,50,8],[86,17,50,15,"error"],[86,22,50,20],[86,24,50,22],[87,10,51,12,"console"],[87,17,51,19],[87,18,51,20,"warn"],[87,22,51,24],[87,23,51,25],[87,59,51,61],[87,61,51,63,"error"],[87,66,51,68],[87,67,51,69],[88,8,52,8],[89,6,53,4],[90,4,54,0],[90,5,54,1],[91,4,54,1],[91,21,54,1,"_x"],[91,23,54,1],[92,6,54,1],[92,13,54,1,"_ref"],[92,17,54,1],[92,18,54,1,"apply"],[92,23,54,1],[92,30,54,1,"arguments"],[92,39,54,1],[93,4,54,1],[94,2,54,1],[94,6,54,2],[95,0,54,3],[95,3]],"functionMap":{"names":["<global>","create$argument_0","setAuth","init","useAuthStore.subscribe$argument_0"],"mappings":"AAA;mCCa;aCG;KDS;UEC;KFM;EDC;uBIC;CJmB"},"hasCjsExports":false},"type":"js/module"}]}