{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-audio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":47,"index":113}}],"key":"GHpNh+2in6lWH3tZa8Mq2h9os0E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useVoiceMemoPlayer = useVoiceMemoPlayer;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAudio = require(_dependencyMap[1], \"expo-audio\");\n  function useVoiceMemoPlayer() {\n    const [playingMessageId, setPlayingMessageId] = (0, _react.useState)(null);\n    const playerRef = (0, _react.useRef)(null);\n    const stopPlayer = (0, _react.useCallback)(() => {\n      const p = playerRef.current;\n      if (!p) return;\n      try {\n        p.pause();\n        p.remove();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        playerRef.current = null;\n        setPlayingMessageId(null);\n      }\n    }, []);\n    const togglePlayVoiceMemo = (0, _react.useCallback)(message => {\n      const url = String(message?.audio_url || \"\").trim();\n      if (!url) return;\n      const id = message?.id;\n      if (playingMessageId && id === playingMessageId) {\n        stopPlayer();\n        return;\n      }\n      stopPlayer();\n      try {\n        const next = (0, _expoAudio.createAudioPlayer)(url);\n        playerRef.current = next;\n        setPlayingMessageId(id);\n        next.play();\n      } catch (e) {\n        console.error(e);\n      }\n    }, [playingMessageId, stopPlayer]);\n    (0, _react.useEffect)(() => {\n      const interval = setInterval(() => {\n        const p = playerRef.current;\n        if (!p) return;\n        const finished = !p.playing && Number(p.currentTime) > 0;\n        if (finished) {\n          stopPlayer();\n        }\n      }, 250);\n      return () => {\n        clearInterval(interval);\n        stopPlayer();\n      };\n    }, [stopPlayer]);\n    return {\n      playingMessageId,\n      togglePlayVoiceMemo\n    };\n  }\n});","lineCount":63,"map":[[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"useVoiceMemoPlayer"],[7,28,4,0],[7,31,4,0,"useVoiceMemoPlayer"],[7,49,4,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_expoAudio"],[9,16,2,0],[9,19,2,0,"require"],[9,26,2,0],[9,27,2,0,"_dependencyMap"],[9,41,2,0],[10,2,4,7],[10,11,4,16,"useVoiceMemoPlayer"],[10,29,4,34,"useVoiceMemoPlayer"],[10,30,4,34],[10,32,4,37],[11,4,5,2],[11,10,5,8],[11,11,5,9,"playingMessageId"],[11,27,5,25],[11,29,5,27,"setPlayingMessageId"],[11,48,5,46],[11,49,5,47],[11,52,5,50],[11,56,5,50,"useState"],[11,62,5,58],[11,63,5,58,"useState"],[11,71,5,58],[11,73,5,59],[11,77,5,63],[11,78,5,64],[12,4,6,2],[12,10,6,8,"playerRef"],[12,19,6,17],[12,22,6,20],[12,26,6,20,"useRef"],[12,32,6,26],[12,33,6,26,"useRef"],[12,39,6,26],[12,41,6,27],[12,45,6,31],[12,46,6,32],[13,4,8,2],[13,10,8,8,"stopPlayer"],[13,20,8,18],[13,23,8,21],[13,27,8,21,"useCallback"],[13,33,8,32],[13,34,8,32,"useCallback"],[13,45,8,32],[13,47,8,33],[13,53,8,39],[14,6,9,4],[14,12,9,10,"p"],[14,13,9,11],[14,16,9,14,"playerRef"],[14,25,9,23],[14,26,9,24,"current"],[14,33,9,31],[15,6,10,4],[15,10,10,8],[15,11,10,9,"p"],[15,12,10,10],[15,14,10,12],[16,6,11,4],[16,10,11,8],[17,8,12,6,"p"],[17,9,12,7],[17,10,12,8,"pause"],[17,15,12,13],[17,16,12,14],[17,17,12,15],[18,8,13,6,"p"],[18,9,13,7],[18,10,13,8,"remove"],[18,16,13,14],[18,17,13,15],[18,18,13,16],[19,6,14,4],[19,7,14,5],[19,8,14,6],[19,15,14,13,"e"],[19,16,14,14],[19,18,14,16],[20,8,15,6,"console"],[20,15,15,13],[20,16,15,14,"error"],[20,21,15,19],[20,22,15,20,"e"],[20,23,15,21],[20,24,15,22],[21,6,16,4],[21,7,16,5],[21,16,16,14],[22,8,17,6,"playerRef"],[22,17,17,15],[22,18,17,16,"current"],[22,25,17,23],[22,28,17,26],[22,32,17,30],[23,8,18,6,"setPlayingMessageId"],[23,27,18,25],[23,28,18,26],[23,32,18,30],[23,33,18,31],[24,6,19,4],[25,4,20,2],[25,5,20,3],[25,7,20,5],[25,9,20,7],[25,10,20,8],[26,4,22,2],[26,10,22,8,"togglePlayVoiceMemo"],[26,29,22,27],[26,32,22,30],[26,36,22,30,"useCallback"],[26,42,22,41],[26,43,22,41,"useCallback"],[26,54,22,41],[26,56,23,5,"message"],[26,63,23,12],[26,67,23,17],[27,6,24,6],[27,12,24,12,"url"],[27,15,24,15],[27,18,24,18,"String"],[27,24,24,24],[27,25,24,25,"message"],[27,32,24,32],[27,34,24,34,"audio_url"],[27,43,24,43],[27,47,24,47],[27,49,24,49],[27,50,24,50],[27,51,24,51,"trim"],[27,55,24,55],[27,56,24,56],[27,57,24,57],[28,6,25,6],[28,10,25,10],[28,11,25,11,"url"],[28,14,25,14],[28,16,25,16],[29,6,27,6],[29,12,27,12,"id"],[29,14,27,14],[29,17,27,17,"message"],[29,24,27,24],[29,26,27,26,"id"],[29,28,27,28],[30,6,28,6],[30,10,28,10,"playingMessageId"],[30,26,28,26],[30,30,28,30,"id"],[30,32,28,32],[30,37,28,37,"playingMessageId"],[30,53,28,53],[30,55,28,55],[31,8,29,8,"stopPlayer"],[31,18,29,18],[31,19,29,19],[31,20,29,20],[32,8,30,8],[33,6,31,6],[34,6,33,6,"stopPlayer"],[34,16,33,16],[34,17,33,17],[34,18,33,18],[35,6,35,6],[35,10,35,10],[36,8,36,8],[36,14,36,14,"next"],[36,18,36,18],[36,21,36,21],[36,25,36,21,"createAudioPlayer"],[36,35,36,38],[36,36,36,38,"createAudioPlayer"],[36,53,36,38],[36,55,36,39,"url"],[36,58,36,42],[36,59,36,43],[37,8,37,8,"playerRef"],[37,17,37,17],[37,18,37,18,"current"],[37,25,37,25],[37,28,37,28,"next"],[37,32,37,32],[38,8,38,8,"setPlayingMessageId"],[38,27,38,27],[38,28,38,28,"id"],[38,30,38,30],[38,31,38,31],[39,8,39,8,"next"],[39,12,39,12],[39,13,39,13,"play"],[39,17,39,17],[39,18,39,18],[39,19,39,19],[40,6,40,6],[40,7,40,7],[40,8,40,8],[40,15,40,15,"e"],[40,16,40,16],[40,18,40,18],[41,8,41,8,"console"],[41,15,41,15],[41,16,41,16,"error"],[41,21,41,21],[41,22,41,22,"e"],[41,23,41,23],[41,24,41,24],[42,6,42,6],[43,4,43,4],[43,5,43,5],[43,7,44,4],[43,8,44,5,"playingMessageId"],[43,24,44,21],[43,26,44,23,"stopPlayer"],[43,36,44,33],[43,37,45,2],[43,38,45,3],[44,4,47,2],[44,8,47,2,"useEffect"],[44,14,47,11],[44,15,47,11,"useEffect"],[44,24,47,11],[44,26,47,12],[44,32,47,18],[45,6,48,4],[45,12,48,10,"interval"],[45,20,48,18],[45,23,48,21,"setInterval"],[45,34,48,32],[45,35,48,33],[45,41,48,39],[46,8,49,6],[46,14,49,12,"p"],[46,15,49,13],[46,18,49,16,"playerRef"],[46,27,49,25],[46,28,49,26,"current"],[46,35,49,33],[47,8,50,6],[47,12,50,10],[47,13,50,11,"p"],[47,14,50,12],[47,16,50,14],[48,8,52,6],[48,14,52,12,"finished"],[48,22,52,20],[48,25,52,23],[48,26,52,24,"p"],[48,27,52,25],[48,28,52,26,"playing"],[48,35,52,33],[48,39,52,37,"Number"],[48,45,52,43],[48,46,52,44,"p"],[48,47,52,45],[48,48,52,46,"currentTime"],[48,59,52,57],[48,60,52,58],[48,63,52,61],[48,64,52,62],[49,8,53,6],[49,12,53,10,"finished"],[49,20,53,18],[49,22,53,20],[50,10,54,8,"stopPlayer"],[50,20,54,18],[50,21,54,19],[50,22,54,20],[51,8,55,6],[52,6,56,4],[52,7,56,5],[52,9,56,7],[52,12,56,10],[52,13,56,11],[53,6,58,4],[53,13,58,11],[53,19,58,17],[54,8,59,6,"clearInterval"],[54,21,59,19],[54,22,59,20,"interval"],[54,30,59,28],[54,31,59,29],[55,8,60,6,"stopPlayer"],[55,18,60,16],[55,19,60,17],[55,20,60,18],[56,6,61,4],[56,7,61,5],[57,4,62,2],[57,5,62,3],[57,7,62,5],[57,8,62,6,"stopPlayer"],[57,18,62,16],[57,19,62,17],[57,20,62,18],[58,4,64,2],[58,11,64,9],[59,6,65,4,"playingMessageId"],[59,22,65,20],[60,6,66,4,"togglePlayVoiceMemo"],[61,4,67,2],[61,5,67,3],[62,2,68,0],[63,0,68,1],[63,3]],"functionMap":{"names":["<global>","useVoiceMemoPlayer","stopPlayer","togglePlayVoiceMemo","useEffect$argument_0","setInterval$argument_0","<anonymous>"],"mappings":"AAA;OCG;iCCI;GDY;IEG;KFoB;YGI;iCCC;KDQ;WEE;KFG;GHC;CDM"},"hasCjsExports":false},"type":"js/module"}]}