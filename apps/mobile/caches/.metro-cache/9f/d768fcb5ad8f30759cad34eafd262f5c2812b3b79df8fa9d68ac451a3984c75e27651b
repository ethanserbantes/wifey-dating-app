{"dependencies":[{"name":"./clone-node","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"2dAS8WAO+n9kiGwM+5z/3DDOac4=","exportNames":["*"],"imports":1}},{"name":"./embed-images","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":45,"index":87}}],"key":"hyx0rNNS8GFpEoCPjg9PN4MK2A8=","exportNames":["*"],"imports":1}},{"name":"./apply-style","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":88},"end":{"line":3,"column":43,"index":131}}],"key":"rOTzR/WnfForZF7J//JBcHAxBO8=","exportNames":["*"],"imports":1}},{"name":"./embed-webfonts","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":132},"end":{"line":4,"column":64,"index":196}}],"key":"rNL8qCPFgNQM26Aaf90PYkOI67M=","exportNames":["*"],"imports":1}},{"name":"./util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":197},"end":{"line":5,"column":119,"index":316}}],"key":"1+hZBLc/k6i18AZJ4yHV73uDZHQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.toSvg = toSvg;\n  exports.toCanvas = toCanvas;\n  exports.toPixelData = toPixelData;\n  exports.toPng = toPng;\n  exports.toJpeg = toJpeg;\n  exports.toBlob = toBlob;\n  exports.getFontEmbedCSS = getFontEmbedCSS;\n  var _cloneNode = require(_dependencyMap[0], \"./clone-node\");\n  var _embedImages = require(_dependencyMap[1], \"./embed-images\");\n  var _applyStyle = require(_dependencyMap[2], \"./apply-style\");\n  var _embedWebfonts = require(_dependencyMap[3], \"./embed-webfonts\");\n  var _util = require(_dependencyMap[4], \"./util\");\n  async function toSvg(node, options = {}) {\n    const {\n      width,\n      height\n    } = (0, _util.getImageSize)(node, options);\n    const clonedNode = await (0, _cloneNode.cloneNode)(node, options, true);\n    await (0, _embedWebfonts.embedWebFonts)(clonedNode, options);\n    await (0, _embedImages.embedImages)(clonedNode, options);\n    (0, _applyStyle.applyStyle)(clonedNode, options);\n    const datauri = await (0, _util.nodeToDataURL)(clonedNode, width, height);\n    return datauri;\n  }\n  async function toCanvas(node, options = {}) {\n    const {\n      width,\n      height\n    } = (0, _util.getImageSize)(node, options);\n    const svg = await toSvg(node, options);\n    const img = await (0, _util.createImage)(svg);\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const ratio = options.pixelRatio || (0, _util.getPixelRatio)();\n    const canvasWidth = options.canvasWidth || width;\n    const canvasHeight = options.canvasHeight || height;\n    canvas.width = canvasWidth * ratio;\n    canvas.height = canvasHeight * ratio;\n    if (!options.skipAutoScale) {\n      (0, _util.checkCanvasDimensions)(canvas);\n    }\n    canvas.style.width = `${canvasWidth}`;\n    canvas.style.height = `${canvasHeight}`;\n    if (options.backgroundColor) {\n      context.fillStyle = options.backgroundColor;\n      context.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n    return canvas;\n  }\n  async function toPixelData(node, options = {}) {\n    const {\n      width,\n      height\n    } = (0, _util.getImageSize)(node, options);\n    const canvas = await toCanvas(node, options);\n    const ctx = canvas.getContext('2d');\n    return ctx.getImageData(0, 0, width, height).data;\n  }\n  async function toPng(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL();\n  }\n  async function toJpeg(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    return canvas.toDataURL('image/jpeg', options.quality || 1);\n  }\n  async function toBlob(node, options = {}) {\n    const canvas = await toCanvas(node, options);\n    const blob = await (0, _util.canvasToBlob)(canvas);\n    return blob;\n  }\n  async function getFontEmbedCSS(node, options = {}) {\n    return (0, _embedWebfonts.getWebFontCSS)(node, options);\n  }\n});","lineCount":82,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"toSvg"],[7,15,6,0],[7,18,6,0,"toSvg"],[7,23,6,0],[8,2,15,0,"exports"],[8,9,15,0],[8,10,15,0,"toCanvas"],[8,18,15,0],[8,21,15,0,"toCanvas"],[8,29,15,0],[9,2,38,0,"exports"],[9,9,38,0],[9,10,38,0,"toPixelData"],[9,21,38,0],[9,24,38,0,"toPixelData"],[9,35,38,0],[10,2,44,0,"exports"],[10,9,44,0],[10,10,44,0,"toPng"],[10,15,44,0],[10,18,44,0,"toPng"],[10,23,44,0],[11,2,48,0,"exports"],[11,9,48,0],[11,10,48,0,"toJpeg"],[11,16,48,0],[11,19,48,0,"toJpeg"],[11,25,48,0],[12,2,52,0,"exports"],[12,9,52,0],[12,10,52,0,"toBlob"],[12,16,52,0],[12,19,52,0,"toBlob"],[12,25,52,0],[13,2,57,0,"exports"],[13,9,57,0],[13,10,57,0,"getFontEmbedCSS"],[13,25,57,0],[13,28,57,0,"getFontEmbedCSS"],[13,43,57,0],[14,2,1,0],[14,6,1,0,"_cloneNode"],[14,16,1,0],[14,19,1,0,"require"],[14,26,1,0],[14,27,1,0,"_dependencyMap"],[14,41,1,0],[15,2,2,0],[15,6,2,0,"_embedImages"],[15,18,2,0],[15,21,2,0,"require"],[15,28,2,0],[15,29,2,0,"_dependencyMap"],[15,43,2,0],[16,2,3,0],[16,6,3,0,"_applyStyle"],[16,17,3,0],[16,20,3,0,"require"],[16,27,3,0],[16,28,3,0,"_dependencyMap"],[16,42,3,0],[17,2,4,0],[17,6,4,0,"_embedWebfonts"],[17,20,4,0],[17,23,4,0,"require"],[17,30,4,0],[17,31,4,0,"_dependencyMap"],[17,45,4,0],[18,2,5,0],[18,6,5,0,"_util"],[18,11,5,0],[18,14,5,0,"require"],[18,21,5,0],[18,22,5,0,"_dependencyMap"],[18,36,5,0],[19,2,6,7],[19,17,6,22,"toSvg"],[19,22,6,27,"toSvg"],[19,23,6,28,"node"],[19,27,6,32],[19,29,6,34,"options"],[19,36,6,41],[19,39,6,44],[19,40,6,45],[19,41,6,46],[19,43,6,48],[20,4,7,4],[20,10,7,10],[21,6,7,12,"width"],[21,11,7,17],[22,6,7,19,"height"],[23,4,7,26],[23,5,7,27],[23,8,7,30],[23,12,7,30,"getImageSize"],[23,17,7,42],[23,18,7,42,"getImageSize"],[23,30,7,42],[23,32,7,43,"node"],[23,36,7,47],[23,38,7,49,"options"],[23,45,7,56],[23,46,7,57],[24,4,8,4],[24,10,8,10,"clonedNode"],[24,20,8,20],[24,23,8,24],[24,29,8,30],[24,33,8,30,"cloneNode"],[24,43,8,39],[24,44,8,39,"cloneNode"],[24,53,8,39],[24,55,8,40,"node"],[24,59,8,44],[24,61,8,46,"options"],[24,68,8,53],[24,70,8,55],[24,74,8,59],[24,75,8,61],[25,4,9,4],[25,10,9,10],[25,14,9,10,"embedWebFonts"],[25,28,9,23],[25,29,9,23,"embedWebFonts"],[25,42,9,23],[25,44,9,24,"clonedNode"],[25,54,9,34],[25,56,9,36,"options"],[25,63,9,43],[25,64,9,44],[26,4,10,4],[26,10,10,10],[26,14,10,10,"embedImages"],[26,26,10,21],[26,27,10,21,"embedImages"],[26,38,10,21],[26,40,10,22,"clonedNode"],[26,50,10,32],[26,52,10,34,"options"],[26,59,10,41],[26,60,10,42],[27,4,11,4],[27,8,11,4,"applyStyle"],[27,19,11,14],[27,20,11,14,"applyStyle"],[27,30,11,14],[27,32,11,15,"clonedNode"],[27,42,11,25],[27,44,11,27,"options"],[27,51,11,34],[27,52,11,35],[28,4,12,4],[28,10,12,10,"datauri"],[28,17,12,17],[28,20,12,20],[28,26,12,26],[28,30,12,26,"nodeToDataURL"],[28,35,12,39],[28,36,12,39,"nodeToDataURL"],[28,49,12,39],[28,51,12,40,"clonedNode"],[28,61,12,50],[28,63,12,52,"width"],[28,68,12,57],[28,70,12,59,"height"],[28,76,12,65],[28,77,12,66],[29,4,13,4],[29,11,13,11,"datauri"],[29,18,13,18],[30,2,14,0],[31,2,15,7],[31,17,15,22,"toCanvas"],[31,25,15,30,"toCanvas"],[31,26,15,31,"node"],[31,30,15,35],[31,32,15,37,"options"],[31,39,15,44],[31,42,15,47],[31,43,15,48],[31,44,15,49],[31,46,15,51],[32,4,16,4],[32,10,16,10],[33,6,16,12,"width"],[33,11,16,17],[34,6,16,19,"height"],[35,4,16,26],[35,5,16,27],[35,8,16,30],[35,12,16,30,"getImageSize"],[35,17,16,42],[35,18,16,42,"getImageSize"],[35,30,16,42],[35,32,16,43,"node"],[35,36,16,47],[35,38,16,49,"options"],[35,45,16,56],[35,46,16,57],[36,4,17,4],[36,10,17,10,"svg"],[36,13,17,13],[36,16,17,16],[36,22,17,22,"toSvg"],[36,27,17,27],[36,28,17,28,"node"],[36,32,17,32],[36,34,17,34,"options"],[36,41,17,41],[36,42,17,42],[37,4,18,4],[37,10,18,10,"img"],[37,13,18,13],[37,16,18,16],[37,22,18,22],[37,26,18,22,"createImage"],[37,31,18,33],[37,32,18,33,"createImage"],[37,43,18,33],[37,45,18,34,"svg"],[37,48,18,37],[37,49,18,38],[38,4,19,4],[38,10,19,10,"canvas"],[38,16,19,16],[38,19,19,19,"document"],[38,27,19,27],[38,28,19,28,"createElement"],[38,41,19,41],[38,42,19,42],[38,50,19,50],[38,51,19,51],[39,4,20,4],[39,10,20,10,"context"],[39,17,20,17],[39,20,20,20,"canvas"],[39,26,20,26],[39,27,20,27,"getContext"],[39,37,20,37],[39,38,20,38],[39,42,20,42],[39,43,20,43],[40,4,21,4],[40,10,21,10,"ratio"],[40,15,21,15],[40,18,21,18,"options"],[40,25,21,25],[40,26,21,26,"pixelRatio"],[40,36,21,36],[40,40,21,40],[40,44,21,40,"getPixelRatio"],[40,49,21,53],[40,50,21,53,"getPixelRatio"],[40,63,21,53],[40,65,21,54],[40,66,21,55],[41,4,22,4],[41,10,22,10,"canvasWidth"],[41,21,22,21],[41,24,22,24,"options"],[41,31,22,31],[41,32,22,32,"canvasWidth"],[41,43,22,43],[41,47,22,47,"width"],[41,52,22,52],[42,4,23,4],[42,10,23,10,"canvasHeight"],[42,22,23,22],[42,25,23,25,"options"],[42,32,23,32],[42,33,23,33,"canvasHeight"],[42,45,23,45],[42,49,23,49,"height"],[42,55,23,55],[43,4,24,4,"canvas"],[43,10,24,10],[43,11,24,11,"width"],[43,16,24,16],[43,19,24,19,"canvasWidth"],[43,30,24,30],[43,33,24,33,"ratio"],[43,38,24,38],[44,4,25,4,"canvas"],[44,10,25,10],[44,11,25,11,"height"],[44,17,25,17],[44,20,25,20,"canvasHeight"],[44,32,25,32],[44,35,25,35,"ratio"],[44,40,25,40],[45,4,26,4],[45,8,26,8],[45,9,26,9,"options"],[45,16,26,16],[45,17,26,17,"skipAutoScale"],[45,30,26,30],[45,32,26,32],[46,6,27,8],[46,10,27,8,"checkCanvasDimensions"],[46,15,27,29],[46,16,27,29,"checkCanvasDimensions"],[46,37,27,29],[46,39,27,30,"canvas"],[46,45,27,36],[46,46,27,37],[47,4,28,4],[48,4,29,4,"canvas"],[48,10,29,10],[48,11,29,11,"style"],[48,16,29,16],[48,17,29,17,"width"],[48,22,29,22],[48,25,29,25],[48,28,29,28,"canvasWidth"],[48,39,29,39],[48,41,29,41],[49,4,30,4,"canvas"],[49,10,30,10],[49,11,30,11,"style"],[49,16,30,16],[49,17,30,17,"height"],[49,23,30,23],[49,26,30,26],[49,29,30,29,"canvasHeight"],[49,41,30,41],[49,43,30,43],[50,4,31,4],[50,8,31,8,"options"],[50,15,31,15],[50,16,31,16,"backgroundColor"],[50,31,31,31],[50,33,31,33],[51,6,32,8,"context"],[51,13,32,15],[51,14,32,16,"fillStyle"],[51,23,32,25],[51,26,32,28,"options"],[51,33,32,35],[51,34,32,36,"backgroundColor"],[51,49,32,51],[52,6,33,8,"context"],[52,13,33,15],[52,14,33,16,"fillRect"],[52,22,33,24],[52,23,33,25],[52,24,33,26],[52,26,33,28],[52,27,33,29],[52,29,33,31,"canvas"],[52,35,33,37],[52,36,33,38,"width"],[52,41,33,43],[52,43,33,45,"canvas"],[52,49,33,51],[52,50,33,52,"height"],[52,56,33,58],[52,57,33,59],[53,4,34,4],[54,4,35,4,"context"],[54,11,35,11],[54,12,35,12,"drawImage"],[54,21,35,21],[54,22,35,22,"img"],[54,25,35,25],[54,27,35,27],[54,28,35,28],[54,30,35,30],[54,31,35,31],[54,33,35,33,"canvas"],[54,39,35,39],[54,40,35,40,"width"],[54,45,35,45],[54,47,35,47,"canvas"],[54,53,35,53],[54,54,35,54,"height"],[54,60,35,60],[54,61,35,61],[55,4,36,4],[55,11,36,11,"canvas"],[55,17,36,17],[56,2,37,0],[57,2,38,7],[57,17,38,22,"toPixelData"],[57,28,38,33,"toPixelData"],[57,29,38,34,"node"],[57,33,38,38],[57,35,38,40,"options"],[57,42,38,47],[57,45,38,50],[57,46,38,51],[57,47,38,52],[57,49,38,54],[58,4,39,4],[58,10,39,10],[59,6,39,12,"width"],[59,11,39,17],[60,6,39,19,"height"],[61,4,39,26],[61,5,39,27],[61,8,39,30],[61,12,39,30,"getImageSize"],[61,17,39,42],[61,18,39,42,"getImageSize"],[61,30,39,42],[61,32,39,43,"node"],[61,36,39,47],[61,38,39,49,"options"],[61,45,39,56],[61,46,39,57],[62,4,40,4],[62,10,40,10,"canvas"],[62,16,40,16],[62,19,40,19],[62,25,40,25,"toCanvas"],[62,33,40,33],[62,34,40,34,"node"],[62,38,40,38],[62,40,40,40,"options"],[62,47,40,47],[62,48,40,48],[63,4,41,4],[63,10,41,10,"ctx"],[63,13,41,13],[63,16,41,16,"canvas"],[63,22,41,22],[63,23,41,23,"getContext"],[63,33,41,33],[63,34,41,34],[63,38,41,38],[63,39,41,39],[64,4,42,4],[64,11,42,11,"ctx"],[64,14,42,14],[64,15,42,15,"getImageData"],[64,27,42,27],[64,28,42,28],[64,29,42,29],[64,31,42,31],[64,32,42,32],[64,34,42,34,"width"],[64,39,42,39],[64,41,42,41,"height"],[64,47,42,47],[64,48,42,48],[64,49,42,49,"data"],[64,53,42,53],[65,2,43,0],[66,2,44,7],[66,17,44,22,"toPng"],[66,22,44,27,"toPng"],[66,23,44,28,"node"],[66,27,44,32],[66,29,44,34,"options"],[66,36,44,41],[66,39,44,44],[66,40,44,45],[66,41,44,46],[66,43,44,48],[67,4,45,4],[67,10,45,10,"canvas"],[67,16,45,16],[67,19,45,19],[67,25,45,25,"toCanvas"],[67,33,45,33],[67,34,45,34,"node"],[67,38,45,38],[67,40,45,40,"options"],[67,47,45,47],[67,48,45,48],[68,4,46,4],[68,11,46,11,"canvas"],[68,17,46,17],[68,18,46,18,"toDataURL"],[68,27,46,27],[68,28,46,28],[68,29,46,29],[69,2,47,0],[70,2,48,7],[70,17,48,22,"toJpeg"],[70,23,48,28,"toJpeg"],[70,24,48,29,"node"],[70,28,48,33],[70,30,48,35,"options"],[70,37,48,42],[70,40,48,45],[70,41,48,46],[70,42,48,47],[70,44,48,49],[71,4,49,4],[71,10,49,10,"canvas"],[71,16,49,16],[71,19,49,19],[71,25,49,25,"toCanvas"],[71,33,49,33],[71,34,49,34,"node"],[71,38,49,38],[71,40,49,40,"options"],[71,47,49,47],[71,48,49,48],[72,4,50,4],[72,11,50,11,"canvas"],[72,17,50,17],[72,18,50,18,"toDataURL"],[72,27,50,27],[72,28,50,28],[72,40,50,40],[72,42,50,42,"options"],[72,49,50,49],[72,50,50,50,"quality"],[72,57,50,57],[72,61,50,61],[72,62,50,62],[72,63,50,63],[73,2,51,0],[74,2,52,7],[74,17,52,22,"toBlob"],[74,23,52,28,"toBlob"],[74,24,52,29,"node"],[74,28,52,33],[74,30,52,35,"options"],[74,37,52,42],[74,40,52,45],[74,41,52,46],[74,42,52,47],[74,44,52,49],[75,4,53,4],[75,10,53,10,"canvas"],[75,16,53,16],[75,19,53,19],[75,25,53,25,"toCanvas"],[75,33,53,33],[75,34,53,34,"node"],[75,38,53,38],[75,40,53,40,"options"],[75,47,53,47],[75,48,53,48],[76,4,54,4],[76,10,54,10,"blob"],[76,14,54,14],[76,17,54,17],[76,23,54,23],[76,27,54,23,"canvasToBlob"],[76,32,54,35],[76,33,54,35,"canvasToBlob"],[76,45,54,35],[76,47,54,36,"canvas"],[76,53,54,42],[76,54,54,43],[77,4,55,4],[77,11,55,11,"blob"],[77,15,55,15],[78,2,56,0],[79,2,57,7],[79,17,57,22,"getFontEmbedCSS"],[79,32,57,37,"getFontEmbedCSS"],[79,33,57,38,"node"],[79,37,57,42],[79,39,57,44,"options"],[79,46,57,51],[79,49,57,54],[79,50,57,55],[79,51,57,56],[79,53,57,58],[80,4,58,4],[80,11,58,11],[80,15,58,11,"getWebFontCSS"],[80,29,58,24],[80,30,58,24,"getWebFontCSS"],[80,43,58,24],[80,45,58,25,"node"],[80,49,58,29],[80,51,58,31,"options"],[80,58,58,38],[80,59,58,39],[81,2,59,0],[82,0,59,1],[82,3]],"functionMap":{"names":["<global>","toSvg","toCanvas","toPixelData","toPng","toJpeg","toBlob","getFontEmbedCSS"],"mappings":"AAA;OCK;CDQ;OEC;CFsB;OGC;CHK;OIC;CJG;OKC;CLG;OMC;CNI;OOC;CPE"},"hasCjsExports":false},"type":"js/module"}]}