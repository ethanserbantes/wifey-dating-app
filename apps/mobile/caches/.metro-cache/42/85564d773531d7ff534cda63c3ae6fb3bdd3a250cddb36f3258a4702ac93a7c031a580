{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":310,"index":310}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":311},"end":{"line":2,"column":48,"index":359}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"./instrument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":360},"end":{"line":3,"column":63,"index":423}}],"key":"/faGONMhKrqQj2KSLxxwco89Hvc=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":424},"end":{"line":4,"column":115,"index":539}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"_sendStandaloneClsSpan\", {\n    enumerable: true,\n    get: function () {\n      return _sendStandaloneClsSpan;\n    }\n  });\n  Object.defineProperty(exports, \"trackClsAsStandaloneSpan\", {\n    enumerable: true,\n    get: function () {\n      return trackClsAsStandaloneSpan;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0]);\n  var _debugBuildJs = require(_dependencyMap[1]);\n  var _instrumentJs = require(_dependencyMap[2]);\n  var _utilsJs = require(_dependencyMap[3]);\n  /**\n   * Starts tracking the Cumulative Layout Shift on the current page and collects the value once\n   *\n   * - the page visibility is hidden\n   * - a navigation span is started (to stop CLS measurement for SPA soft navigations)\n   *\n   * Once either of these events triggers, the CLS value is sent as a standalone span and we stop\n   * measuring CLS.\n   */\n  function trackClsAsStandaloneSpan(client) {\n    var standaloneCLsValue = 0;\n    var standaloneClsEntry;\n    if (!(0, _utilsJs.supportsWebVital)('layout-shift')) {\n      return;\n    }\n    var cleanupClsHandler = (0, _instrumentJs.addClsInstrumentationHandler)(_ref => {\n      var metric = _ref.metric;\n      var entry = metric.entries[metric.entries.length - 1];\n      if (!entry) {\n        return;\n      }\n      standaloneCLsValue = metric.value;\n      standaloneClsEntry = entry;\n    }, true);\n    (0, _utilsJs.listenForWebVitalReportEvents)(client, (reportEvent, pageloadSpanId) => {\n      _sendStandaloneClsSpan(standaloneCLsValue, standaloneClsEntry, pageloadSpanId, reportEvent);\n      cleanupClsHandler();\n    });\n  }\n\n  /**\n   * Exported only for testing!\n   */\n  function _sendStandaloneClsSpan(clsValue, entry, pageloadSpanId, reportEvent) {\n    _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log(`Sending CLS span (${clsValue})`);\n    var startTime = entry ? (0, _utilsJs.msToSec)(((0, _sentryCore.browserPerformanceTimeOrigin)() || 0) + entry.startTime) : (0, _sentryCore.timestampInSeconds)();\n    var routeName = (0, _sentryCore.getCurrentScope)().getScopeData().transactionName;\n    var name = entry ? (0, _sentryCore.htmlTreeAsString)(entry.sources[0]?.node) : 'Layout shift';\n    var attributes = {\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.http.browser.cls',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'ui.webvital.cls',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: 0,\n      // attach the pageload span id to the CLS span so that we can link them in the UI\n      'sentry.pageload.span_id': pageloadSpanId,\n      // describes what triggered the web vital to be reported\n      'sentry.report_event': reportEvent\n    };\n\n    // Add CLS sources as span attributes to help with debugging layout shifts\n    // See: https://developer.mozilla.org/en-US/docs/Web/API/LayoutShift/sources\n    if (entry?.sources) {\n      entry.sources.forEach((source, index) => {\n        attributes[`cls.source.${index + 1}`] = (0, _sentryCore.htmlTreeAsString)(source.node);\n      });\n    }\n    var span = (0, _utilsJs.startStandaloneWebVitalSpan)({\n      name,\n      transaction: routeName,\n      attributes,\n      startTime\n    });\n    if (span) {\n      span.addEvent('cls', {\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: '',\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: clsValue\n      });\n\n      // LayoutShift performance entries always have a duration of 0, so we don't need to add `entry.duration` here\n      // see: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEntry/duration\n      span.end(startTime);\n    }\n  }\n});","lineCount":95,"map":[[7,2,91,0,"Object"],[7,8,91,0],[7,9,91,0,"defineProperty"],[7,23,91,0],[7,24,91,0,"exports"],[7,31,91,0],[8,4,91,0,"enumerable"],[8,14,91,0],[9,4,91,0,"get"],[9,7,91,0],[9,18,91,0,"get"],[9,19,91,0],[10,6,91,0],[10,13,91,9,"_sendStandaloneClsSpan"],[10,35,91,31],[11,4,91,31],[12,2,91,31],[13,2,91,0,"Object"],[13,8,91,0],[13,9,91,0,"defineProperty"],[13,23,91,0],[13,24,91,0,"exports"],[13,31,91,0],[14,4,91,0,"enumerable"],[14,14,91,0],[15,4,91,0,"get"],[15,7,91,0],[15,18,91,0,"get"],[15,19,91,0],[16,6,91,0],[16,13,91,33,"trackClsAsStandaloneSpan"],[16,37,91,57],[17,4,91,57],[18,2,91,57],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,2,0],[20,6,2,0,"_debugBuildJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,3,0],[21,6,3,0,"_instrumentJs"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,4,0],[22,6,4,0,"_utilsJs"],[22,14,4,0],[22,17,4,0,"require"],[22,24,4,0],[22,25,4,0,"_dependencyMap"],[22,39,4,0],[23,2,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,2,15,0],[32,11,15,9,"trackClsAsStandaloneSpan"],[32,35,15,33,"trackClsAsStandaloneSpan"],[32,36,15,34,"client"],[32,42,15,40],[32,44,15,42],[33,4,16,2],[33,8,16,6,"standaloneCLsValue"],[33,26,16,24],[33,29,16,27],[33,30,16,28],[34,4,17,2],[34,8,17,6,"standaloneClsEntry"],[34,26,17,24],[35,4,19,2],[35,8,19,6],[35,9,19,7],[35,13,19,7,"supportsWebVital"],[35,21,19,23],[35,22,19,23,"supportsWebVital"],[35,38,19,23],[35,40,19,24],[35,54,19,38],[35,55,19,39],[35,57,19,41],[36,6,20,4],[37,4,21,2],[38,4,23,2],[38,8,23,8,"cleanupClsHandler"],[38,25,23,25],[38,28,23,28],[38,32,23,28,"addClsInstrumentationHandler"],[38,45,23,56],[38,46,23,56,"addClsInstrumentationHandler"],[38,74,23,56],[38,76,23,57,"_ref"],[38,80,23,57],[38,84,23,73],[39,6,23,73],[39,10,23,60,"metric"],[39,16,23,66],[39,19,23,66,"_ref"],[39,23,23,66],[39,24,23,60,"metric"],[39,30,23,66],[40,6,24,4],[40,10,24,10,"entry"],[40,15,24,15],[40,18,24,18,"metric"],[40,24,24,24],[40,25,24,25,"entries"],[40,32,24,32],[40,33,24,33,"metric"],[40,39,24,39],[40,40,24,40,"entries"],[40,47,24,47],[40,48,24,48,"length"],[40,54,24,54],[40,57,24,57],[40,58,24,58],[40,59,24,59],[41,6,25,4],[41,10,25,8],[41,11,25,9,"entry"],[41,16,25,14],[41,18,25,16],[42,8,26,6],[43,6,27,4],[44,6,28,4,"standaloneCLsValue"],[44,24,28,22],[44,27,28,25,"metric"],[44,33,28,31],[44,34,28,32,"value"],[44,39,28,37],[45,6,29,4,"standaloneClsEntry"],[45,24,29,22],[45,27,29,25,"entry"],[45,32,29,30],[46,4,30,2],[46,5,30,3],[46,7,30,5],[46,11,30,9],[46,12,30,10],[47,4,32,2],[47,8,32,2,"listenForWebVitalReportEvents"],[47,16,32,31],[47,17,32,31,"listenForWebVitalReportEvents"],[47,46,32,31],[47,48,32,32,"client"],[47,54,32,38],[47,56,32,40],[47,57,32,41,"reportEvent"],[47,68,32,52],[47,70,32,54,"pageloadSpanId"],[47,84,32,68],[47,89,32,73],[48,6,33,4,"_sendStandaloneClsSpan"],[48,28,33,26],[48,29,33,27,"standaloneCLsValue"],[48,47,33,45],[48,49,33,47,"standaloneClsEntry"],[48,67,33,65],[48,69,33,67,"pageloadSpanId"],[48,83,33,81],[48,85,33,83,"reportEvent"],[48,96,33,94],[48,97,33,95],[49,6,34,4,"cleanupClsHandler"],[49,23,34,21],[49,24,34,22],[49,25,34,23],[50,4,35,2],[50,5,35,3],[50,6,35,4],[51,2,36,0],[53,2,38,0],[54,0,39,0],[55,0,40,0],[56,2,41,0],[56,11,41,9,"_sendStandaloneClsSpan"],[56,33,41,31,"_sendStandaloneClsSpan"],[56,34,42,2,"clsValue"],[56,42,42,10],[56,44,43,2,"entry"],[56,49,43,7],[56,51,44,2,"pageloadSpanId"],[56,65,44,16],[56,67,45,2,"reportEvent"],[56,78,45,13],[56,80,46,2],[57,4,47,2,"DEBUG_BUILD"],[57,17,47,13],[57,18,47,13,"DEBUG_BUILD"],[57,29,47,13],[57,33,47,17,"debug"],[57,44,47,22],[57,45,47,22,"debug"],[57,50,47,22],[57,51,47,23,"log"],[57,54,47,26],[57,55,47,27],[57,76,47,48,"clsValue"],[57,84,47,56],[57,87,47,59],[57,88,47,60],[58,4,49,2],[58,8,49,8,"startTime"],[58,17,49,17],[58,20,49,20,"entry"],[58,25,49,25],[58,28,49,28],[58,32,49,28,"msToSec"],[58,40,49,35],[58,41,49,35,"msToSec"],[58,48,49,35],[58,50,49,36],[58,51,49,37],[58,55,49,37,"browserPerformanceTimeOrigin"],[58,66,49,65],[58,67,49,65,"browserPerformanceTimeOrigin"],[58,95,49,65],[58,97,49,66],[58,98,49,67],[58,102,49,71],[58,103,49,72],[58,107,49,76,"entry"],[58,112,49,81],[58,113,49,82,"startTime"],[58,122,49,91],[58,123,49,92],[58,126,49,95],[58,130,49,95,"timestampInSeconds"],[58,141,49,113],[58,142,49,113,"timestampInSeconds"],[58,160,49,113],[58,162,49,114],[58,163,49,115],[59,4,50,2],[59,8,50,8,"routeName"],[59,17,50,17],[59,20,50,20],[59,24,50,20,"getCurrentScope"],[59,35,50,35],[59,36,50,35,"getCurrentScope"],[59,51,50,35],[59,53,50,36],[59,54,50,37],[59,55,50,38,"getScopeData"],[59,67,50,50],[59,68,50,51],[59,69,50,52],[59,70,50,53,"transactionName"],[59,85,50,68],[60,4,52,2],[60,8,52,8,"name"],[60,12,52,12],[60,15,52,15,"entry"],[60,20,52,20],[60,23,52,23],[60,27,52,23,"htmlTreeAsString"],[60,38,52,39],[60,39,52,39,"htmlTreeAsString"],[60,55,52,39],[60,57,52,40,"entry"],[60,62,52,45],[60,63,52,46,"sources"],[60,70,52,53],[60,71,52,54],[60,72,52,55],[60,73,52,56],[60,75,52,58,"node"],[60,79,52,62],[60,80,52,63],[60,83,52,66],[60,97,52,80],[61,4,54,2],[61,8,54,8,"attributes"],[61,18,54,18],[61,21,54,21],[62,6,55,4],[62,7,55,5,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[62,18,55,37],[62,19,55,37,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[62,51,55,37],[62,54,55,40],[62,77,55,63],[63,6,56,4],[63,7,56,5,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[63,18,56,33],[63,19,56,33,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[63,47,56,33],[63,50,56,36],[63,67,56,53],[64,6,57,4],[64,7,57,5,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[64,18,57,38],[64,19,57,38,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[64,52,57,38],[64,55,57,41],[64,56,57,42],[65,6,58,4],[66,6,59,4],[66,31,59,29],[66,33,59,31,"pageloadSpanId"],[66,47,59,45],[67,6,60,4],[68,6,61,4],[68,27,61,25],[68,29,61,27,"reportEvent"],[69,4,62,2],[69,5,62,3],[71,4,64,2],[72,4,65,2],[73,4,66,2],[73,8,66,6,"entry"],[73,13,66,11],[73,15,66,13,"sources"],[73,22,66,20],[73,24,66,22],[74,6,67,4,"entry"],[74,11,67,9],[74,12,67,10,"sources"],[74,19,67,17],[74,20,67,18,"forEach"],[74,27,67,25],[74,28,67,26],[74,29,67,27,"source"],[74,35,67,33],[74,37,67,35,"index"],[74,42,67,40],[74,47,67,45],[75,8,68,6,"attributes"],[75,18,68,16],[75,19,68,17],[75,33,68,31,"index"],[75,38,68,36],[75,41,68,39],[75,42,68,40],[75,44,68,42],[75,45,68,43],[75,48,68,46],[75,52,68,46,"htmlTreeAsString"],[75,63,68,62],[75,64,68,62,"htmlTreeAsString"],[75,80,68,62],[75,82,68,63,"source"],[75,88,68,69],[75,89,68,70,"node"],[75,93,68,74],[75,94,68,75],[76,6,69,4],[76,7,69,5],[76,8,69,6],[77,4,70,2],[78,4,72,2],[78,8,72,8,"span"],[78,12,72,12],[78,15,72,15],[78,19,72,15,"startStandaloneWebVitalSpan"],[78,27,72,42],[78,28,72,42,"startStandaloneWebVitalSpan"],[78,55,72,42],[78,57,72,43],[79,6,73,4,"name"],[79,10,73,8],[80,6,74,4,"transaction"],[80,17,74,15],[80,19,74,17,"routeName"],[80,28,74,26],[81,6,75,4,"attributes"],[81,16,75,14],[82,6,76,4,"startTime"],[83,4,77,2],[83,5,77,3],[83,6,77,4],[84,4,79,2],[84,8,79,6,"span"],[84,12,79,10],[84,14,79,12],[85,6,80,4,"span"],[85,10,80,8],[85,11,80,9,"addEvent"],[85,19,80,17],[85,20,80,18],[85,25,80,23],[85,27,80,25],[86,8,81,6],[86,9,81,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[86,20,81,49],[86,21,81,49,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[86,63,81,49],[86,66,81,52],[86,68,81,54],[87,8,82,6],[87,9,82,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[87,20,82,50],[87,21,82,50,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[87,64,82,50],[87,67,82,53,"clsValue"],[88,6,83,4],[88,7,83,5],[88,8,83,6],[90,6,85,4],[91,6,86,4],[92,6,87,4,"span"],[92,10,87,8],[92,11,87,9,"end"],[92,14,87,12],[92,15,87,13,"startTime"],[92,24,87,22],[92,25,87,23],[93,4,88,2],[94,2,89,0],[95,0,89,1],[95,3]],"functionMap":{"names":["<global>","trackClsAsStandaloneSpan","addClsInstrumentationHandler$argument_0","listenForWebVitalReportEvents$argument_1","_sendStandaloneClsSpan","entry.sources.forEach$argument_0"],"mappings":"AAA;ACc;yDCQ;GDO;wCEE;GFG;CDC;AIK;0BC0B;KDE;CJoB"},"hasCjsExports":false},"type":"js/module"}]}