{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"@sentry-internal/browser-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":76},"end":{"line":2,"column":73,"index":149}}],"key":"NhwjGxy6N7nYR3SR4JfgASTvmbA=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":150},"end":{"line":3,"column":48,"index":198}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"INTEGRATION_NAME\", {\n    enumerable: true,\n    get: function () {\n      return INTEGRATION_NAME;\n    }\n  });\n  Object.defineProperty(exports, \"isSpotlightInteraction\", {\n    enumerable: true,\n    get: function () {\n      return isSpotlightInteraction;\n    }\n  });\n  Object.defineProperty(exports, \"spotlightBrowserIntegration\", {\n    enumerable: true,\n    get: function () {\n      return spotlightBrowserIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _sentryInternalBrowserUtils = require(_dependencyMap[1], \"@sentry-internal/browser-utils\");\n  var _debugBuildJs = require(_dependencyMap[2], \"../debug-build.js\");\n  var INTEGRATION_NAME = 'SpotlightBrowser';\n  var _spotlightIntegration = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var sidecarUrl = options.sidecarUrl || 'http://localhost:8969/stream';\n    return {\n      name: INTEGRATION_NAME,\n      setup: () => {\n        _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log('Using Sidecar URL', sidecarUrl);\n      },\n      // We don't want to send interaction transactions/root spans created from\n      // clicks within Spotlight to Sentry. Neither do we want them to be sent to\n      // spotlight.\n      processEvent: event => isSpotlightInteraction(event) ? null : event,\n      afterAllSetup: client => {\n        setupSidecarForwarding(client, sidecarUrl);\n      }\n    };\n  };\n  function setupSidecarForwarding(client, sidecarUrl) {\n    var makeFetch = (0, _sentryInternalBrowserUtils.getNativeImplementation)('fetch');\n    var failCount = 0;\n    client.on('beforeEnvelope', envelope => {\n      if (failCount > 3) {\n        _sentryCore.debug.warn('[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:', failCount);\n        return;\n      }\n      makeFetch(sidecarUrl, {\n        method: 'POST',\n        body: (0, _sentryCore.serializeEnvelope)(envelope),\n        headers: {\n          'Content-Type': 'application/x-sentry-envelope'\n        },\n        mode: 'cors'\n      }).then(res => {\n        if (res.status >= 200 && res.status < 400) {\n          // Reset failed requests counter on success\n          failCount = 0;\n        }\n      }, err => {\n        failCount++;\n        _sentryCore.debug.error(\"Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/\", err);\n      });\n    });\n  }\n\n  /**\n   * Use this integration to send errors and transactions to Spotlight.\n   *\n   * Learn more about spotlight at https://spotlightjs.com\n   */\n  var spotlightBrowserIntegration = (0, _sentryCore.defineIntegration)(_spotlightIntegration);\n\n  /**\n   * Flags if the event is a transaction created from an interaction with the spotlight UI.\n   */\n  function isSpotlightInteraction(event) {\n    return Boolean(event.type === 'transaction' && event.spans && event.contexts?.trace && event.contexts.trace.op === 'ui.action.click' && event.spans.some(_ref => {\n      var description = _ref.description;\n      return description?.includes('#sentry-spotlight');\n    }));\n  }\n});","lineCount":89,"map":[[7,2,80,0,"Object"],[7,8,80,0],[7,9,80,0,"defineProperty"],[7,23,80,0],[7,24,80,0,"exports"],[7,31,80,0],[8,4,80,0,"enumerable"],[8,14,80,0],[9,4,80,0,"get"],[9,7,80,0],[9,18,80,0,"get"],[9,19,80,0],[10,6,80,0],[10,13,80,9,"INTEGRATION_NAME"],[10,29,80,25],[11,4,80,25],[12,2,80,25],[13,2,80,0,"Object"],[13,8,80,0],[13,9,80,0,"defineProperty"],[13,23,80,0],[13,24,80,0,"exports"],[13,31,80,0],[14,4,80,0,"enumerable"],[14,14,80,0],[15,4,80,0,"get"],[15,7,80,0],[15,18,80,0,"get"],[15,19,80,0],[16,6,80,0],[16,13,80,27,"isSpotlightInteraction"],[16,35,80,49],[17,4,80,49],[18,2,80,49],[19,2,80,0,"Object"],[19,8,80,0],[19,9,80,0,"defineProperty"],[19,23,80,0],[19,24,80,0,"exports"],[19,31,80,0],[20,4,80,0,"enumerable"],[20,14,80,0],[21,4,80,0,"get"],[21,7,80,0],[21,18,80,0,"get"],[21,19,80,0],[22,6,80,0],[22,13,80,51,"spotlightBrowserIntegration"],[22,40,80,78],[23,4,80,78],[24,2,80,78],[25,2,1,0],[25,6,1,0,"_sentryCore"],[25,17,1,0],[25,20,1,0,"require"],[25,27,1,0],[25,28,1,0,"_dependencyMap"],[25,42,1,0],[26,2,2,0],[26,6,2,0,"_sentryInternalBrowserUtils"],[26,33,2,0],[26,36,2,0,"require"],[26,43,2,0],[26,44,2,0,"_dependencyMap"],[26,58,2,0],[27,2,3,0],[27,6,3,0,"_debugBuildJs"],[27,19,3,0],[27,22,3,0,"require"],[27,29,3,0],[27,30,3,0,"_dependencyMap"],[27,44,3,0],[28,2,5,0],[28,6,5,6,"INTEGRATION_NAME"],[28,22,5,22],[28,25,5,25],[28,43,5,43],[29,2,7,0],[29,6,7,6,"_spotlightIntegration"],[29,27,7,27],[29,30,7,31],[29,39,7,31,"_spotlightIntegration"],[29,40,7,31],[29,42,7,49],[30,4,7,49],[30,8,7,32,"options"],[30,15,7,39],[30,18,7,39,"arguments"],[30,27,7,39],[30,28,7,39,"length"],[30,34,7,39],[30,42,7,39,"arguments"],[30,51,7,39],[30,59,7,39,"undefined"],[30,68,7,39],[30,71,7,39,"arguments"],[30,80,7,39],[30,86,7,42],[30,87,7,43],[30,88,7,44],[31,4,8,2],[31,8,8,8,"sidecarUrl"],[31,18,8,18],[31,21,8,21,"options"],[31,28,8,28],[31,29,8,29,"sidecarUrl"],[31,39,8,39],[31,43,8,43],[31,73,8,73],[32,4,10,2],[32,11,10,9],[33,6,11,4,"name"],[33,10,11,8],[33,12,11,10,"INTEGRATION_NAME"],[33,28,11,26],[34,6,12,4,"setup"],[34,11,12,9],[34,13,12,11,"setup"],[34,14,12,11],[34,19,12,17],[35,8,13,6,"DEBUG_BUILD"],[35,21,13,17],[35,22,13,17,"DEBUG_BUILD"],[35,33,13,17],[35,37,13,21,"debug"],[35,48,13,26],[35,49,13,26,"debug"],[35,54,13,26],[35,55,13,27,"log"],[35,58,13,30],[35,59,13,31],[35,78,13,50],[35,80,13,52,"sidecarUrl"],[35,90,13,62],[35,91,13,63],[36,6,14,4],[36,7,14,5],[37,6,15,4],[38,6,16,4],[39,6,17,4],[40,6,18,4,"processEvent"],[40,18,18,16],[40,20,18,18,"event"],[40,25,18,23],[40,29,18,28,"isSpotlightInteraction"],[40,51,18,50],[40,52,18,51,"event"],[40,57,18,56],[40,58,18,57],[40,61,18,60],[40,65,18,64],[40,68,18,67,"event"],[40,73,18,73],[41,6,19,4,"afterAllSetup"],[41,19,19,17],[41,21,19,20,"client"],[41,27,19,26],[41,31,19,31],[42,8,20,6,"setupSidecarForwarding"],[42,30,20,28],[42,31,20,29,"client"],[42,37,20,35],[42,39,20,37,"sidecarUrl"],[42,49,20,47],[42,50,20,48],[43,6,21,4],[44,4,22,2],[44,5,22,3],[45,2,23,0],[45,3,23,2],[46,2,25,0],[46,11,25,9,"setupSidecarForwarding"],[46,33,25,31,"setupSidecarForwarding"],[46,34,25,32,"client"],[46,40,25,38],[46,42,25,40,"sidecarUrl"],[46,52,25,50],[46,54,25,52],[47,4,26,2],[47,8,26,8,"makeFetch"],[47,17,26,17],[47,20,26,20],[47,24,26,20,"getNativeImplementation"],[47,51,26,43],[47,52,26,43,"getNativeImplementation"],[47,75,26,43],[47,77,26,44],[47,84,26,51],[47,85,26,52],[48,4,27,2],[48,8,27,6,"failCount"],[48,17,27,15],[48,20,27,18],[48,21,27,19],[49,4,29,2,"client"],[49,10,29,8],[49,11,29,9,"on"],[49,13,29,11],[49,14,29,12],[49,30,29,28],[49,32,29,31,"envelope"],[49,40,29,39],[49,44,29,44],[50,6,30,4],[50,10,30,8,"failCount"],[50,19,30,17],[50,22,30,20],[50,23,30,21],[50,25,30,23],[51,8,31,6,"debug"],[51,19,31,11],[51,20,31,11,"debug"],[51,25,31,11],[51,26,31,12,"warn"],[51,30,31,16],[51,31,31,17],[51,118,31,104],[51,120,31,106,"failCount"],[51,129,31,115],[51,130,31,116],[52,8,32,6],[53,6,33,4],[54,6,35,4,"makeFetch"],[54,15,35,13],[54,16,35,14,"sidecarUrl"],[54,26,35,24],[54,28,35,26],[55,8,36,6,"method"],[55,14,36,12],[55,16,36,14],[55,22,36,20],[56,8,37,6,"body"],[56,12,37,10],[56,14,37,12],[56,18,37,12,"serializeEnvelope"],[56,29,37,29],[56,30,37,29,"serializeEnvelope"],[56,47,37,29],[56,49,37,30,"envelope"],[56,57,37,38],[56,58,37,39],[57,8,38,6,"headers"],[57,15,38,13],[57,17,38,15],[58,10,39,8],[58,24,39,22],[58,26,39,24],[59,8,40,6],[59,9,40,7],[60,8,41,6,"mode"],[60,12,41,10],[60,14,41,12],[61,6,42,4],[61,7,42,5],[61,8,42,6],[61,9,42,7,"then"],[61,13,42,11],[61,14,43,6,"res"],[61,17,43,9],[61,21,43,13],[62,8,44,8],[62,12,44,12,"res"],[62,15,44,15],[62,16,44,16,"status"],[62,22,44,22],[62,26,44,26],[62,29,44,29],[62,33,44,33,"res"],[62,36,44,36],[62,37,44,37,"status"],[62,43,44,43],[62,46,44,46],[62,49,44,49],[62,51,44,51],[63,10,45,10],[64,10,46,10,"failCount"],[64,19,46,19],[64,22,46,22],[64,23,46,23],[65,8,47,8],[66,6,48,6],[66,7,48,7],[66,9,49,6,"err"],[66,12,49,9],[66,16,49,13],[67,8,50,8,"failCount"],[67,17,50,17],[67,19,50,19],[68,8,51,8,"debug"],[68,19,51,13],[68,20,51,13,"debug"],[68,25,51,13],[68,26,51,14,"error"],[68,31,51,19],[68,32,52,10],[68,126,52,104],[68,128,53,10,"err"],[68,131,54,8],[68,132,54,9],[69,6,55,6],[69,7,56,4],[69,8,56,5],[70,4,57,2],[70,5,57,3],[70,6,57,4],[71,2,58,0],[73,2,60,0],[74,0,61,0],[75,0,62,0],[76,0,63,0],[77,0,64,0],[78,2,65,0],[78,6,65,6,"spotlightBrowserIntegration"],[78,33,65,33],[78,36,65,36],[78,40,65,36,"defineIntegration"],[78,51,65,53],[78,52,65,53,"defineIntegration"],[78,69,65,53],[78,71,65,54,"_spotlightIntegration"],[78,92,65,75],[78,93,65,76],[80,2,67,0],[81,0,68,0],[82,0,69,0],[83,2,70,0],[83,11,70,9,"isSpotlightInteraction"],[83,33,70,31,"isSpotlightInteraction"],[83,34,70,32,"event"],[83,39,70,37],[83,41,70,39],[84,4,71,2],[84,11,71,9,"Boolean"],[84,18,71,16],[84,19,72,4,"event"],[84,24,72,9],[84,25,72,10,"type"],[84,29,72,14],[84,34,72,19],[84,47,72,32],[84,51,73,6,"event"],[84,56,73,11],[84,57,73,12,"spans"],[84,62,73,17],[84,66,74,6,"event"],[84,71,74,11],[84,72,74,12,"contexts"],[84,80,74,20],[84,82,74,22,"trace"],[84,87,74,27],[84,91,75,6,"event"],[84,96,75,11],[84,97,75,12,"contexts"],[84,105,75,20],[84,106,75,21,"trace"],[84,111,75,26],[84,112,75,27,"op"],[84,114,75,29],[84,119,75,34],[84,136,75,51],[84,140,76,6,"event"],[84,145,76,11],[84,146,76,12,"spans"],[84,151,76,17],[84,152,76,18,"some"],[84,156,76,22],[84,157,76,23,"_ref"],[84,161,76,23],[85,6,76,23],[85,10,76,26,"description"],[85,21,76,37],[85,24,76,37,"_ref"],[85,28,76,37],[85,29,76,26,"description"],[85,40,76,37],[86,6,76,37],[86,13,76,44,"description"],[86,24,76,55],[86,26,76,57,"includes"],[86,34,76,65],[86,35,76,66],[86,54,76,85],[86,55,76,86],[87,4,76,86],[87,6,77,2],[87,7,77,3],[88,2,78,0],[89,0,78,1],[89,3]],"functionMap":{"names":["<global>","_spotlightIntegration","setup","processEvent","afterAllSetup","setupSidecarForwarding","client.on$argument_1","makeFetch.then$argument_0","makeFetch.then$argument_1","isSpotlightInteraction","event.spans.some$argument_0"],"mappings":"AAA;+BCM;WCK;KDE;kBEI,uDF;mBGC;KHE;CDE;AKE;8BCI;MCc;ODK;MEC;OFM;GDE;CLC;ASY;uBCM,+DD;CTE"},"hasCjsExports":false},"type":"js/module"}]}