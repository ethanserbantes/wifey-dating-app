{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":31,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _uploadcareUploadClient = require(_dependencyMap[1], \"@uploadcare/upload-client\");\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  const client = new _uploadcareUploadClient.UploadClient({\n    publicKey: _expoVirtualEnv.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    const [loading, setLoading] = React.useState(false);\n    const upload = React.useCallback(async input => {\n      try {\n        setLoading(true);\n        const baseURL = _expoVirtualEnv.env.EXPO_PUBLIC_BASE_URL || \"\";\n        let response;\n        if ('reactNativeAsset' in input && input.reactNativeAsset) {\n          if (input.reactNativeAsset.file) {\n            const formData = new FormData();\n            formData.append('file', input.reactNativeAsset.file);\n            const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n            response = await fetch(uploadUrl, {\n              method: 'POST',\n              body: formData\n            });\n          } else {\n            const presignUrl = baseURL ? `${baseURL}/_create/api/upload/presign/` : \"/_create/api/upload/presign/\";\n            const response = await fetch(presignUrl, {\n              method: 'POST'\n            });\n            const {\n              secureSignature,\n              secureExpire\n            } = await response.json();\n            const result = await client.uploadFile(input.reactNativeAsset, {\n              fileName: input.reactNativeAsset.name ?? input.reactNativeAsset.uri.split('/').pop(),\n              contentType: input.reactNativeAsset.mimeType,\n              secureSignature,\n              secureExpire\n            });\n            return {\n              url: `${_expoVirtualEnv.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n              mimeType: result.mimeType || null\n            };\n          }\n        } else if ('url' in input) {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              url: input.url\n            })\n          });\n        } else if ('base64' in input) {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              base64: input.base64\n            })\n          });\n        } else {\n          const uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          response = await fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/octet-stream'\n            },\n            body: input.buffer\n          });\n        }\n        if (!response.ok) {\n          if (response.status === 413) {\n            throw new Error('Upload failed: File too large.');\n          }\n          throw new Error('Upload failed');\n        }\n        const data = await response.json();\n        return {\n          url: data.url,\n          mimeType: data.mimeType || null\n        };\n      } catch (uploadError) {\n        if (uploadError instanceof Error) {\n          return {\n            error: uploadError.message\n          };\n        }\n        if (typeof uploadError === 'string') {\n          return {\n            error: uploadError\n          };\n        }\n        return {\n          error: 'Upload failed'\n        };\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":146,"map":[[23,2,92,0,"Object"],[23,8,92,0],[23,9,92,0,"defineProperty"],[23,23,92,0],[23,24,92,0,"exports"],[23,31,92,0],[24,4,92,0,"enumerable"],[24,14,92,0],[25,4,92,0,"get"],[25,7,92,0],[25,18,92,0,"get"],[25,19,92,0],[26,6,92,0],[26,13,92,0,"_default"],[26,21,92,0],[27,4,92,0],[28,2,92,0],[29,2,91,0,"Object"],[29,8,91,0],[29,9,91,0,"defineProperty"],[29,23,91,0],[29,24,91,0,"exports"],[29,31,91,0],[30,4,91,0,"enumerable"],[30,14,91,0],[31,4,91,0,"get"],[31,7,91,0],[31,18,91,0,"get"],[31,19,91,0],[32,6,91,0],[32,13,91,9,"useUpload"],[32,22,91,18],[33,4,91,18],[34,2,91,18],[35,2,91,21],[35,6,91,21,"_expoVirtualEnv"],[35,21,91,21],[35,24,91,21,"require"],[35,31,91,21],[35,32,91,21,"_dependencyMap"],[35,46,91,21],[36,2,1,0],[36,6,1,0,"_uploadcareUploadClient"],[36,29,1,0],[36,32,1,0,"require"],[36,39,1,0],[36,40,1,0,"_dependencyMap"],[36,54,1,0],[37,2,2,0],[37,6,2,0,"_react"],[37,12,2,0],[37,15,2,0,"require"],[37,22,2,0],[37,23,2,0,"_dependencyMap"],[37,37,2,0],[38,2,2,0],[38,6,2,0,"React"],[38,11,2,0],[38,14,2,0,"_interopNamespace"],[38,31,2,0],[38,32,2,0,"_react"],[38,38,2,0],[39,2,3,0],[39,8,3,6,"client"],[39,14,3,12],[39,17,3,15],[39,21,3,19,"UploadClient"],[39,44,3,31],[39,45,3,31,"UploadClient"],[39,57,3,31],[39,58,3,32],[40,4,3,34,"publicKey"],[40,13,3,43],[40,15,3,43,"_expoVirtualEnv"],[40,30,3,43],[40,31,3,43,"env"],[40,34,3,43],[40,35,3,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[41,2,3,91],[41,3,3,92],[41,4,3,93],[42,2,5,0],[42,11,5,9,"useUpload"],[42,20,5,18,"useUpload"],[42,21,5,18],[42,23,5,21],[43,4,5,21,"_s"],[43,6,5,21],[44,4,6,2],[44,10,6,8],[44,11,6,9,"loading"],[44,18,6,16],[44,20,6,18,"setLoading"],[44,30,6,28],[44,31,6,29],[44,34,6,32,"React"],[44,39,6,37],[44,40,6,38,"useState"],[44,48,6,46],[44,49,6,47],[44,54,6,52],[44,55,6,53],[45,4,7,2],[45,10,7,8,"upload"],[45,16,7,14],[45,19,7,17,"React"],[45,24,7,22],[45,25,7,23,"useCallback"],[45,36,7,34],[45,37,7,35],[45,43,7,42,"input"],[45,48,7,47],[45,52,7,52],[46,6,8,4],[46,10,8,8],[47,8,9,6,"setLoading"],[47,18,9,16],[47,19,9,17],[47,23,9,21],[47,24,9,22],[48,8,10,6],[48,14,10,12,"baseURL"],[48,21,10,19],[48,24,10,22,"_expoVirtualEnv"],[48,39,10,22],[48,40,10,22,"env"],[48,43,10,22],[48,44,10,22,"EXPO_PUBLIC_BASE_URL"],[48,64,10,22],[48,68,10,58],[48,70,10,60],[49,8,11,6],[49,12,11,10,"response"],[49,20,11,18],[50,8,12,6],[50,12,12,10],[50,30,12,28],[50,34,12,32,"input"],[50,39,12,37],[50,43,12,41,"input"],[50,48,12,46],[50,49,12,47,"reactNativeAsset"],[50,65,12,63],[50,67,12,65],[51,10,13,8],[51,14,13,12,"input"],[51,19,13,17],[51,20,13,18,"reactNativeAsset"],[51,36,13,34],[51,37,13,35,"file"],[51,41,13,39],[51,43,13,41],[52,12,14,10],[52,18,14,16,"formData"],[52,26,14,24],[52,29,14,27],[52,33,14,31,"FormData"],[52,41,14,39],[52,42,14,40],[52,43,14,41],[53,12,15,10,"formData"],[53,20,15,18],[53,21,15,19,"append"],[53,27,15,25],[53,28,15,26],[53,34,15,32],[53,36,15,34,"input"],[53,41,15,39],[53,42,15,40,"reactNativeAsset"],[53,58,15,56],[53,59,15,57,"file"],[53,63,15,61],[53,64,15,62],[54,12,16,10],[54,18,16,16,"uploadUrl"],[54,27,16,25],[54,30,16,28,"baseURL"],[54,37,16,35],[54,40,16,38],[54,43,16,41,"baseURL"],[54,50,16,48],[54,72,16,70],[54,75,16,73],[54,97,16,95],[55,12,17,10,"response"],[55,20,17,18],[55,23,17,21],[55,29,17,27,"fetch"],[55,34,17,32],[55,35,17,33,"uploadUrl"],[55,44,17,42],[55,46,17,44],[56,14,18,12,"method"],[56,20,18,18],[56,22,18,20],[56,28,18,26],[57,14,19,12,"body"],[57,18,19,16],[57,20,19,18,"formData"],[58,12,20,10],[58,13,20,11],[58,14,20,12],[59,10,21,8],[59,11,21,9],[59,17,21,15],[60,12,22,10],[60,18,22,16,"presignUrl"],[60,28,22,26],[60,31,22,29,"baseURL"],[60,38,22,36],[60,41,22,39],[60,44,22,42,"baseURL"],[60,51,22,49],[60,81,22,79],[60,84,22,82],[60,114,22,112],[61,12,24,10],[61,18,24,16,"response"],[61,26,24,24],[61,29,24,27],[61,35,24,33,"fetch"],[61,40,24,38],[61,41,24,39,"presignUrl"],[61,51,24,49],[61,53,24,51],[62,14,25,12,"method"],[62,20,25,18],[62,22,25,20],[63,12,26,10],[63,13,26,11],[63,14,26,12],[64,12,27,10],[64,18,27,16],[65,14,27,18,"secureSignature"],[65,29,27,33],[66,14,27,35,"secureExpire"],[67,12,27,48],[67,13,27,49],[67,16,27,52],[67,22,27,58,"response"],[67,30,27,66],[67,31,27,67,"json"],[67,35,27,71],[67,36,27,72],[67,37,27,73],[68,12,28,10],[68,18,28,16,"result"],[68,24,28,22],[68,27,28,25],[68,33,28,31,"client"],[68,39,28,37],[68,40,28,38,"uploadFile"],[68,50,28,48],[68,51,28,49,"input"],[68,56,28,54],[68,57,28,55,"reactNativeAsset"],[68,73,28,71],[68,75,28,73],[69,14,29,12,"fileName"],[69,22,29,20],[69,24,29,22,"input"],[69,29,29,27],[69,30,29,28,"reactNativeAsset"],[69,46,29,44],[69,47,29,45,"name"],[69,51,29,49],[69,55,29,53,"input"],[69,60,29,58],[69,61,29,59,"reactNativeAsset"],[69,77,29,75],[69,78,29,76,"uri"],[69,81,29,79],[69,82,29,80,"split"],[69,87,29,85],[69,88,29,86],[69,91,29,89],[69,92,29,90],[69,93,29,91,"pop"],[69,96,29,94],[69,97,29,95],[69,98,29,96],[70,14,30,12,"contentType"],[70,25,30,23],[70,27,30,25,"input"],[70,32,30,30],[70,33,30,31,"reactNativeAsset"],[70,49,30,47],[70,50,30,48,"mimeType"],[70,58,30,56],[71,14,31,12,"secureSignature"],[71,29,31,27],[72,14,32,12,"secureExpire"],[73,12,33,10],[73,13,33,11],[73,14,33,12],[74,12,34,10],[74,19,34,17],[75,14,35,12,"url"],[75,17,35,15],[75,19,35,17],[75,22,35,17,"_expoVirtualEnv"],[75,37,35,17],[75,38,35,17,"env"],[75,41,35,17],[75,42,35,17,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[75,82,35,17],[75,86,35,76,"result"],[75,92,35,82],[75,93,35,83,"uuid"],[75,97,35,87],[75,100,35,90],[76,14,36,12,"mimeType"],[76,22,36,20],[76,24,36,22,"result"],[76,30,36,28],[76,31,36,29,"mimeType"],[76,39,36,37],[76,43,36,41],[77,12,37,10],[77,13,37,11],[78,10,38,8],[79,8,39,6],[79,9,39,7],[79,15,39,13],[79,19,39,17],[79,24,39,22],[79,28,39,26,"input"],[79,33,39,31],[79,35,39,33],[80,10,40,8],[80,16,40,14,"uploadUrl"],[80,25,40,23],[80,28,40,26,"baseURL"],[80,35,40,33],[80,38,40,36],[80,41,40,39,"baseURL"],[80,48,40,46],[80,70,40,68],[80,73,40,71],[80,95,40,93],[81,10,41,8,"response"],[81,18,41,16],[81,21,41,19],[81,27,41,25,"fetch"],[81,32,41,30],[81,33,41,31,"uploadUrl"],[81,42,41,40],[81,44,41,42],[82,12,42,10,"method"],[82,18,42,16],[82,20,42,18],[82,26,42,24],[83,12,43,10,"headers"],[83,19,43,17],[83,21,43,19],[84,14,44,12],[84,28,44,26],[84,30,44,28],[85,12,45,10],[85,13,45,11],[86,12,46,10,"body"],[86,16,46,14],[86,18,46,16,"JSON"],[86,22,46,20],[86,23,46,21,"stringify"],[86,32,46,30],[86,33,46,31],[87,14,46,33,"url"],[87,17,46,36],[87,19,46,38,"input"],[87,24,46,43],[87,25,46,44,"url"],[88,12,46,48],[88,13,46,49],[89,10,47,8],[89,11,47,9],[89,12,47,10],[90,8,48,6],[90,9,48,7],[90,15,48,13],[90,19,48,17],[90,27,48,25],[90,31,48,29,"input"],[90,36,48,34],[90,38,48,36],[91,10,49,8],[91,16,49,14,"uploadUrl"],[91,25,49,23],[91,28,49,26,"baseURL"],[91,35,49,33],[91,38,49,36],[91,41,49,39,"baseURL"],[91,48,49,46],[91,70,49,68],[91,73,49,71],[91,95,49,93],[92,10,50,8,"response"],[92,18,50,16],[92,21,50,19],[92,27,50,25,"fetch"],[92,32,50,30],[92,33,50,31,"uploadUrl"],[92,42,50,40],[92,44,50,42],[93,12,51,10,"method"],[93,18,51,16],[93,20,51,18],[93,26,51,24],[94,12,52,10,"headers"],[94,19,52,17],[94,21,52,19],[95,14,53,12],[95,28,53,26],[95,30,53,28],[96,12,54,10],[96,13,54,11],[97,12,55,10,"body"],[97,16,55,14],[97,18,55,16,"JSON"],[97,22,55,20],[97,23,55,21,"stringify"],[97,32,55,30],[97,33,55,31],[98,14,55,33,"base64"],[98,20,55,39],[98,22,55,41,"input"],[98,27,55,46],[98,28,55,47,"base64"],[99,12,55,54],[99,13,55,55],[100,10,56,8],[100,11,56,9],[100,12,56,10],[101,8,57,6],[101,9,57,7],[101,15,57,13],[102,10,58,8],[102,16,58,14,"uploadUrl"],[102,25,58,23],[102,28,58,26,"baseURL"],[102,35,58,33],[102,38,58,36],[102,41,58,39,"baseURL"],[102,48,58,46],[102,70,58,68],[102,73,58,71],[102,95,58,93],[103,10,59,8,"response"],[103,18,59,16],[103,21,59,19],[103,27,59,25,"fetch"],[103,32,59,30],[103,33,59,31,"uploadUrl"],[103,42,59,40],[103,44,59,42],[104,12,60,10,"method"],[104,18,60,16],[104,20,60,18],[104,26,60,24],[105,12,61,10,"headers"],[105,19,61,17],[105,21,61,19],[106,14,62,12],[106,28,62,26],[106,30,62,28],[107,12,63,10],[107,13,63,11],[108,12,64,10,"body"],[108,16,64,14],[108,18,64,16,"input"],[108,23,64,21],[108,24,64,22,"buffer"],[109,10,65,8],[109,11,65,9],[109,12,65,10],[110,8,66,6],[111,8,67,6],[111,12,67,10],[111,13,67,11,"response"],[111,21,67,19],[111,22,67,20,"ok"],[111,24,67,22],[111,26,67,24],[112,10,68,8],[112,14,68,12,"response"],[112,22,68,20],[112,23,68,21,"status"],[112,29,68,27],[112,34,68,32],[112,37,68,35],[112,39,68,37],[113,12,69,10],[113,18,69,16],[113,22,69,20,"Error"],[113,27,69,25],[113,28,69,26],[113,60,69,58],[113,61,69,59],[114,10,70,8],[115,10,71,8],[115,16,71,14],[115,20,71,18,"Error"],[115,25,71,23],[115,26,71,24],[115,41,71,39],[115,42,71,40],[116,8,72,6],[117,8,73,6],[117,14,73,12,"data"],[117,18,73,16],[117,21,73,19],[117,27,73,25,"response"],[117,35,73,33],[117,36,73,34,"json"],[117,40,73,38],[117,41,73,39],[117,42,73,40],[118,8,74,6],[118,15,74,13],[119,10,74,15,"url"],[119,13,74,18],[119,15,74,20,"data"],[119,19,74,24],[119,20,74,25,"url"],[119,23,74,28],[120,10,74,30,"mimeType"],[120,18,74,38],[120,20,74,40,"data"],[120,24,74,44],[120,25,74,45,"mimeType"],[120,33,74,53],[120,37,74,57],[121,8,74,62],[121,9,74,63],[122,6,75,4],[122,7,75,5],[122,8,75,6],[122,15,75,13,"uploadError"],[122,26,75,24],[122,28,75,26],[123,8,76,6],[123,12,76,10,"uploadError"],[123,23,76,21],[123,35,76,33,"Error"],[123,40,76,38],[123,42,76,40],[124,10,77,8],[124,17,77,15],[125,12,77,17,"error"],[125,17,77,22],[125,19,77,24,"uploadError"],[125,30,77,35],[125,31,77,36,"message"],[126,10,77,44],[126,11,77,45],[127,8,78,6],[128,8,79,6],[128,12,79,10],[128,19,79,17,"uploadError"],[128,30,79,28],[128,35,79,33],[128,43,79,41],[128,45,79,43],[129,10,80,8],[129,17,80,15],[130,12,80,17,"error"],[130,17,80,22],[130,19,80,24,"uploadError"],[131,10,80,36],[131,11,80,37],[132,8,81,6],[133,8,82,6],[133,15,82,13],[134,10,82,15,"error"],[134,15,82,20],[134,17,82,22],[135,8,82,38],[135,9,82,39],[136,6,83,4],[136,7,83,5],[136,16,83,14],[137,8,84,6,"setLoading"],[137,18,84,16],[137,19,84,17],[137,24,84,22],[137,25,84,23],[138,6,85,4],[139,4,86,2],[139,5,86,3],[139,7,86,5],[139,9,86,7],[139,10,86,8],[140,4,88,2],[140,11,88,9],[140,12,88,10,"upload"],[140,18,88,16],[140,20,88,18],[141,6,88,20,"loading"],[142,4,88,28],[142,5,88,29],[142,6,88,30],[143,2,89,0],[144,2,89,1,"_s"],[144,4,89,1],[144,5,5,9,"useUpload"],[144,14,5,18],[145,2,92,0],[145,6,92,0,"_default"],[145,14,92,0],[145,17,92,15,"useUpload"],[145,26,92,24],[146,0,92,25],[146,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GD+E;CDG"},"hasCjsExports":false},"type":"js/module"}]}