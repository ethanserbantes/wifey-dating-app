{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT\", {\n    enumerable: true,\n    get: function () {\n      return DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT;\n    }\n  });\n  Object.defineProperty(exports, \"truncateGenAiMessages\", {\n    enumerable: true,\n    get: function () {\n      return truncateGenAiMessages;\n    }\n  });\n  Object.defineProperty(exports, \"truncateGenAiStringInput\", {\n    enumerable: true,\n    get: function () {\n      return truncateGenAiStringInput;\n    }\n  });\n  Object.defineProperty(exports, \"truncateMessagesByBytes\", {\n    enumerable: true,\n    get: function () {\n      return truncateMessagesByBytes;\n    }\n  });\n  /**\n   * Default maximum size in bytes for GenAI messages.\n   * Messages exceeding this limit will be truncated.\n   */\n  var DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT = 20000;\n\n  /**\n   * Message format used by OpenAI and Anthropic APIs.\n   */\n\n  /**\n   * Calculate the UTF-8 byte length of a string.\n   */\n  var utf8Bytes = text => {\n    return new TextEncoder().encode(text).length;\n  };\n\n  /**\n   * Calculate the UTF-8 byte length of a value's JSON representation.\n   */\n  var jsonBytes = value => {\n    return utf8Bytes(JSON.stringify(value));\n  };\n\n  /**\n   * Truncate a string to fit within maxBytes when encoded as UTF-8.\n   * Uses binary search for efficiency with multi-byte characters.\n   *\n   * @param text - The string to truncate\n   * @param maxBytes - Maximum byte length (UTF-8 encoded)\n   * @returns Truncated string that fits within maxBytes\n   */\n  function truncateTextByBytes(text, maxBytes) {\n    if (utf8Bytes(text) <= maxBytes) {\n      return text;\n    }\n    var low = 0;\n    var high = text.length;\n    var bestFit = '';\n    while (low <= high) {\n      var mid = Math.floor((low + high) / 2);\n      var candidate = text.slice(0, mid);\n      var byteSize = utf8Bytes(candidate);\n      if (byteSize <= maxBytes) {\n        bestFit = candidate;\n        low = mid + 1;\n      } else {\n        high = mid - 1;\n      }\n    }\n    return bestFit;\n  }\n\n  /**\n   * Extract text content from a Google GenAI message part.\n   * Parts are either plain strings or objects with a text property.\n   *\n   * @returns The text content\n   */\n  function getPartText(part) {\n    if (typeof part === 'string') {\n      return part;\n    }\n    return part.text;\n  }\n\n  /**\n   * Create a new part with updated text content while preserving the original structure.\n   *\n   * @param part - Original part (string or object)\n   * @param text - New text content\n   * @returns New part with updated text\n   */\n  function withPartText(part, text) {\n    if (typeof part === 'string') {\n      return text;\n    }\n    return {\n      ...part,\n      text\n    };\n  }\n\n  /**\n   * Check if a message has the OpenAI/Anthropic content format.\n   */\n  function isContentMessage(message) {\n    return message !== null && typeof message === 'object' && 'content' in message && typeof message.content === 'string';\n  }\n\n  /**\n   * Check if a message has the Google GenAI parts format.\n   */\n  function isPartsMessage(message) {\n    return message !== null && typeof message === 'object' && 'parts' in message && Array.isArray(message.parts) && message.parts.length > 0;\n  }\n\n  /**\n   * Truncate a message with `content: string` format (OpenAI/Anthropic).\n   *\n   * @param message - Message with content property\n   * @param maxBytes - Maximum byte limit\n   * @returns Array with truncated message, or empty array if it doesn't fit\n   */\n  function truncateContentMessage(message, maxBytes) {\n    // Calculate overhead (message structure without content)\n    var emptyMessage = {\n      ...message,\n      content: ''\n    };\n    var overhead = jsonBytes(emptyMessage);\n    var availableForContent = maxBytes - overhead;\n    if (availableForContent <= 0) {\n      return [];\n    }\n    var truncatedContent = truncateTextByBytes(message.content, availableForContent);\n    return [{\n      ...message,\n      content: truncatedContent\n    }];\n  }\n\n  /**\n   * Truncate a message with `parts: [...]` format (Google GenAI).\n   * Keeps as many complete parts as possible, only truncating the first part if needed.\n   *\n   * @param message - Message with parts array\n   * @param maxBytes - Maximum byte limit\n   * @returns Array with truncated message, or empty array if it doesn't fit\n   */\n  function truncatePartsMessage(message, maxBytes) {\n    var parts = message.parts;\n\n    // Calculate overhead by creating empty text parts\n    var emptyParts = parts.map(part => withPartText(part, ''));\n    var overhead = jsonBytes({\n      ...message,\n      parts: emptyParts\n    });\n    var remainingBytes = maxBytes - overhead;\n    if (remainingBytes <= 0) {\n      return [];\n    }\n\n    // Include parts until we run out of space\n    var includedParts = [];\n    for (var part of parts) {\n      var text = getPartText(part);\n      var textSize = utf8Bytes(text);\n      if (textSize <= remainingBytes) {\n        // Part fits: include it as-is\n        includedParts.push(part);\n        remainingBytes -= textSize;\n      } else if (includedParts.length === 0) {\n        // First part doesn't fit: truncate it\n        var truncated = truncateTextByBytes(text, remainingBytes);\n        if (truncated) {\n          includedParts.push(withPartText(part, truncated));\n        }\n        break;\n      } else {\n        // Subsequent part doesn't fit: stop here\n        break;\n      }\n    }\n    return includedParts.length > 0 ? [{\n      ...message,\n      parts: includedParts\n    }] : [];\n  }\n\n  /**\n   * Truncate a single message to fit within maxBytes.\n   *\n   * Supports two message formats:\n   * - OpenAI/Anthropic: `{ ..., content: string }`\n   * - Google GenAI: `{ ..., parts: Array<string | {text: string} | non-text> }`\n   *\n   * @param message - The message to truncate\n   * @param maxBytes - Maximum byte limit for the message\n   * @returns Array containing the truncated message, or empty array if truncation fails\n   */\n  function truncateSingleMessage(message, maxBytes) {\n    if (!message || typeof message !== 'object') {\n      return [];\n    }\n    if (isContentMessage(message)) {\n      return truncateContentMessage(message, maxBytes);\n    }\n    if (isPartsMessage(message)) {\n      return truncatePartsMessage(message, maxBytes);\n    }\n\n    // Unknown message format: cannot truncate safely\n    return [];\n  }\n\n  /**\n   * Truncate an array of messages to fit within a byte limit.\n   *\n   * Strategy:\n   * - Keeps the newest messages (from the end of the array)\n   * - Uses O(n) algorithm: precompute sizes once, then find largest suffix under budget\n   * - If no complete messages fit, attempts to truncate the newest single message\n   *\n   * @param messages - Array of messages to truncate\n   * @param maxBytes - Maximum total byte limit for all messages\n   * @returns Truncated array of messages\n   *\n   * @example\n   * ```ts\n   * const messages = [msg1, msg2, msg3, msg4]; // newest is msg4\n   * const truncated = truncateMessagesByBytes(messages, 10000);\n   * // Returns [msg3, msg4] if they fit, or [msg4] if only it fits, etc.\n   * ```\n   */\n  function truncateMessagesByBytes(messages, maxBytes) {\n    // Early return for empty or invalid input\n    if (!Array.isArray(messages) || messages.length === 0) {\n      return messages;\n    }\n\n    // Fast path: if all messages fit, return as-is\n    var totalBytes = jsonBytes(messages);\n    if (totalBytes <= maxBytes) {\n      return messages;\n    }\n\n    // Precompute each message's JSON size once for efficiency\n    var messageSizes = messages.map(jsonBytes);\n\n    // Find the largest suffix (newest messages) that fits within the budget\n    var bytesUsed = 0;\n    var startIndex = messages.length; // Index where the kept suffix starts\n\n    for (var i = messages.length - 1; i >= 0; i--) {\n      var messageSize = messageSizes[i];\n      if (messageSize && bytesUsed + messageSize > maxBytes) {\n        // Adding this message would exceed the budget\n        break;\n      }\n      if (messageSize) {\n        bytesUsed += messageSize;\n      }\n      startIndex = i;\n    }\n\n    // If no complete messages fit, try truncating just the newest message\n    if (startIndex === messages.length) {\n      var newestMessage = messages[messages.length - 1];\n      return truncateSingleMessage(newestMessage, maxBytes);\n    }\n\n    // Return the suffix that fits\n    return messages.slice(startIndex);\n  }\n\n  /**\n   * Truncate GenAI messages using the default byte limit.\n   *\n   * Convenience wrapper around `truncateMessagesByBytes` with the default limit.\n   *\n   * @param messages - Array of messages to truncate\n   * @returns Truncated array of messages\n   */\n  function truncateGenAiMessages(messages) {\n    return truncateMessagesByBytes(messages, DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT);\n  }\n\n  /**\n   * Truncate GenAI string input using the default byte limit.\n   *\n   * @param input - The string to truncate\n   * @returns Truncated string\n   */\n  function truncateGenAiStringInput(input) {\n    return truncateTextByBytes(input, DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT);\n  }\n});","lineCount":309,"map":[[7,2,290,0,"Object"],[7,8,290,0],[7,9,290,0,"defineProperty"],[7,23,290,0],[7,24,290,0,"exports"],[7,31,290,0],[8,4,290,0,"enumerable"],[8,14,290,0],[9,4,290,0,"get"],[9,7,290,0],[9,18,290,0,"get"],[9,19,290,0],[10,6,290,0],[10,13,290,9,"DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT"],[10,47,290,43],[11,4,290,43],[12,2,290,43],[13,2,290,0,"Object"],[13,8,290,0],[13,9,290,0,"defineProperty"],[13,23,290,0],[13,24,290,0,"exports"],[13,31,290,0],[14,4,290,0,"enumerable"],[14,14,290,0],[15,4,290,0,"get"],[15,7,290,0],[15,18,290,0,"get"],[15,19,290,0],[16,6,290,0],[16,13,290,45,"truncateGenAiMessages"],[16,34,290,66],[17,4,290,66],[18,2,290,66],[19,2,290,0,"Object"],[19,8,290,0],[19,9,290,0,"defineProperty"],[19,23,290,0],[19,24,290,0,"exports"],[19,31,290,0],[20,4,290,0,"enumerable"],[20,14,290,0],[21,4,290,0,"get"],[21,7,290,0],[21,18,290,0,"get"],[21,19,290,0],[22,6,290,0],[22,13,290,68,"truncateGenAiStringInput"],[22,37,290,92],[23,4,290,92],[24,2,290,92],[25,2,290,0,"Object"],[25,8,290,0],[25,9,290,0,"defineProperty"],[25,23,290,0],[25,24,290,0,"exports"],[25,31,290,0],[26,4,290,0,"enumerable"],[26,14,290,0],[27,4,290,0,"get"],[27,7,290,0],[27,18,290,0,"get"],[27,19,290,0],[28,6,290,0],[28,13,290,94,"truncateMessagesByBytes"],[28,36,290,117],[29,4,290,117],[30,2,290,117],[31,2,1,0],[32,0,2,0],[33,0,3,0],[34,0,4,0],[35,2,5,0],[35,6,5,6,"DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT"],[35,40,5,40],[35,43,5,43],[35,48,5,48],[37,2,7,0],[38,0,8,0],[39,0,9,0],[41,2,11,0],[42,0,12,0],[43,0,13,0],[44,2,14,0],[44,6,14,6,"utf8Bytes"],[44,15,14,15],[44,18,14,19,"text"],[44,22,14,23],[44,26,14,28],[45,4,15,2],[45,11,15,9],[45,15,15,13,"TextEncoder"],[45,26,15,24],[45,27,15,25],[45,28,15,26],[45,29,15,27,"encode"],[45,35,15,33],[45,36,15,34,"text"],[45,40,15,38],[45,41,15,39],[45,42,15,40,"length"],[45,48,15,46],[46,2,16,0],[46,3,16,1],[48,2,18,0],[49,0,19,0],[50,0,20,0],[51,2,21,0],[51,6,21,6,"jsonBytes"],[51,15,21,15],[51,18,21,19,"value"],[51,23,21,24],[51,27,21,29],[52,4,22,2],[52,11,22,9,"utf8Bytes"],[52,20,22,18],[52,21,22,19,"JSON"],[52,25,22,23],[52,26,22,24,"stringify"],[52,35,22,33],[52,36,22,34,"value"],[52,41,22,39],[52,42,22,40],[52,43,22,41],[53,2,23,0],[53,3,23,1],[55,2,25,0],[56,0,26,0],[57,0,27,0],[58,0,28,0],[59,0,29,0],[60,0,30,0],[61,0,31,0],[62,0,32,0],[63,2,33,0],[63,11,33,9,"truncateTextByBytes"],[63,30,33,28,"truncateTextByBytes"],[63,31,33,29,"text"],[63,35,33,33],[63,37,33,35,"maxBytes"],[63,45,33,43],[63,47,33,45],[64,4,34,2],[64,8,34,6,"utf8Bytes"],[64,17,34,15],[64,18,34,16,"text"],[64,22,34,20],[64,23,34,21],[64,27,34,25,"maxBytes"],[64,35,34,33],[64,37,34,35],[65,6,35,4],[65,13,35,11,"text"],[65,17,35,15],[66,4,36,2],[67,4,38,2],[67,8,38,6,"low"],[67,11,38,9],[67,14,38,12],[67,15,38,13],[68,4,39,2],[68,8,39,6,"high"],[68,12,39,10],[68,15,39,13,"text"],[68,19,39,17],[68,20,39,18,"length"],[68,26,39,24],[69,4,40,2],[69,8,40,6,"bestFit"],[69,15,40,13],[69,18,40,16],[69,20,40,18],[70,4,42,2],[70,11,42,9,"low"],[70,14,42,12],[70,18,42,16,"high"],[70,22,42,20],[70,24,42,22],[71,6,43,4],[71,10,43,10,"mid"],[71,13,43,13],[71,16,43,16,"Math"],[71,20,43,20],[71,21,43,21,"floor"],[71,26,43,26],[71,27,43,27],[71,28,43,28,"low"],[71,31,43,31],[71,34,43,34,"high"],[71,38,43,38],[71,42,43,42],[71,43,43,43],[71,44,43,44],[72,6,44,4],[72,10,44,10,"candidate"],[72,19,44,19],[72,22,44,22,"text"],[72,26,44,26],[72,27,44,27,"slice"],[72,32,44,32],[72,33,44,33],[72,34,44,34],[72,36,44,36,"mid"],[72,39,44,39],[72,40,44,40],[73,6,45,4],[73,10,45,10,"byteSize"],[73,18,45,18],[73,21,45,21,"utf8Bytes"],[73,30,45,30],[73,31,45,31,"candidate"],[73,40,45,40],[73,41,45,41],[74,6,47,4],[74,10,47,8,"byteSize"],[74,18,47,16],[74,22,47,20,"maxBytes"],[74,30,47,28],[74,32,47,30],[75,8,48,6,"bestFit"],[75,15,48,13],[75,18,48,16,"candidate"],[75,27,48,25],[76,8,49,6,"low"],[76,11,49,9],[76,14,49,12,"mid"],[76,17,49,15],[76,20,49,18],[76,21,49,19],[77,6,50,4],[77,7,50,5],[77,13,50,11],[78,8,51,6,"high"],[78,12,51,10],[78,15,51,13,"mid"],[78,18,51,16],[78,21,51,19],[78,22,51,20],[79,6,52,4],[80,4,53,2],[81,4,55,2],[81,11,55,9,"bestFit"],[81,18,55,16],[82,2,56,0],[84,2,58,0],[85,0,59,0],[86,0,60,0],[87,0,61,0],[88,0,62,0],[89,0,63,0],[90,2,64,0],[90,11,64,9,"getPartText"],[90,22,64,20,"getPartText"],[90,23,64,21,"part"],[90,27,64,25],[90,29,64,27],[91,4,65,2],[91,8,65,6],[91,15,65,13,"part"],[91,19,65,17],[91,24,65,22],[91,32,65,30],[91,34,65,32],[92,6,66,4],[92,13,66,11,"part"],[92,17,66,15],[93,4,67,2],[94,4,68,2],[94,11,68,9,"part"],[94,15,68,13],[94,16,68,14,"text"],[94,20,68,18],[95,2,69,0],[97,2,71,0],[98,0,72,0],[99,0,73,0],[100,0,74,0],[101,0,75,0],[102,0,76,0],[103,0,77,0],[104,2,78,0],[104,11,78,9,"withPartText"],[104,23,78,21,"withPartText"],[104,24,78,22,"part"],[104,28,78,26],[104,30,78,28,"text"],[104,34,78,32],[104,36,78,34],[105,4,79,2],[105,8,79,6],[105,15,79,13,"part"],[105,19,79,17],[105,24,79,22],[105,32,79,30],[105,34,79,32],[106,6,80,4],[106,13,80,11,"text"],[106,17,80,15],[107,4,81,2],[108,4,82,2],[108,11,82,9],[109,6,82,11],[109,9,82,14,"part"],[109,13,82,18],[110,6,82,20,"text"],[111,4,82,25],[111,5,82,26],[112,2,83,0],[114,2,85,0],[115,0,86,0],[116,0,87,0],[117,2,88,0],[117,11,88,9,"isContentMessage"],[117,27,88,25,"isContentMessage"],[117,28,88,26,"message"],[117,35,88,33],[117,37,88,35],[118,4,89,2],[118,11,90,4,"message"],[118,18,90,11],[118,23,90,16],[118,27,90,20],[118,31,91,4],[118,38,91,11,"message"],[118,45,91,18],[118,50,91,23],[118,58,91,31],[118,62,92,4],[118,71,92,13],[118,75,92,17,"message"],[118,82,92,24],[118,86,93,4],[118,93,93,12,"message"],[118,100,93,19],[118,101,93,22,"content"],[118,108,93,29],[118,113,93,34],[118,121,93,42],[119,2,95,0],[121,2,97,0],[122,0,98,0],[123,0,99,0],[124,2,100,0],[124,11,100,9,"isPartsMessage"],[124,25,100,23,"isPartsMessage"],[124,26,100,24,"message"],[124,33,100,31],[124,35,100,33],[125,4,101,2],[125,11,102,4,"message"],[125,18,102,11],[125,23,102,16],[125,27,102,20],[125,31,103,4],[125,38,103,11,"message"],[125,45,103,18],[125,50,103,23],[125,58,103,31],[125,62,104,4],[125,69,104,11],[125,73,104,15,"message"],[125,80,104,22],[125,84,105,4,"Array"],[125,89,105,9],[125,90,105,10,"isArray"],[125,97,105,17],[125,98,105,19,"message"],[125,105,105,26],[125,106,105,29,"parts"],[125,111,105,34],[125,112,105,35],[125,116,106,5,"message"],[125,123,106,12],[125,124,106,15,"parts"],[125,129,106,20],[125,130,106,21,"length"],[125,136,106,27],[125,139,106,30],[125,140,106,31],[126,2,108,0],[128,2,110,0],[129,0,111,0],[130,0,112,0],[131,0,113,0],[132,0,114,0],[133,0,115,0],[134,0,116,0],[135,2,117,0],[135,11,117,9,"truncateContentMessage"],[135,33,117,31,"truncateContentMessage"],[135,34,117,32,"message"],[135,41,117,39],[135,43,117,41,"maxBytes"],[135,51,117,49],[135,53,117,51],[136,4,118,2],[137,4,119,2],[137,8,119,8,"emptyMessage"],[137,20,119,20],[137,23,119,23],[138,6,119,25],[138,9,119,28,"message"],[138,16,119,35],[139,6,119,37,"content"],[139,13,119,44],[139,15,119,46],[140,4,119,49],[140,5,119,50],[141,4,120,2],[141,8,120,8,"overhead"],[141,16,120,16],[141,19,120,19,"jsonBytes"],[141,28,120,28],[141,29,120,29,"emptyMessage"],[141,41,120,41],[141,42,120,42],[142,4,121,2],[142,8,121,8,"availableForContent"],[142,27,121,27],[142,30,121,30,"maxBytes"],[142,38,121,38],[142,41,121,41,"overhead"],[142,49,121,49],[143,4,123,2],[143,8,123,6,"availableForContent"],[143,27,123,25],[143,31,123,29],[143,32,123,30],[143,34,123,32],[144,6,124,4],[144,13,124,11],[144,15,124,13],[145,4,125,2],[146,4,127,2],[146,8,127,8,"truncatedContent"],[146,24,127,24],[146,27,127,27,"truncateTextByBytes"],[146,46,127,46],[146,47,127,47,"message"],[146,54,127,54],[146,55,127,55,"content"],[146,62,127,62],[146,64,127,64,"availableForContent"],[146,83,127,83],[146,84,127,84],[147,4,128,2],[147,11,128,9],[147,12,128,10],[148,6,128,12],[148,9,128,15,"message"],[148,16,128,22],[149,6,128,24,"content"],[149,13,128,31],[149,15,128,33,"truncatedContent"],[150,4,128,50],[150,5,128,51],[150,6,128,52],[151,2,129,0],[153,2,131,0],[154,0,132,0],[155,0,133,0],[156,0,134,0],[157,0,135,0],[158,0,136,0],[159,0,137,0],[160,0,138,0],[161,2,139,0],[161,11,139,9,"truncatePartsMessage"],[161,31,139,29,"truncatePartsMessage"],[161,32,139,30,"message"],[161,39,139,37],[161,41,139,39,"maxBytes"],[161,49,139,47],[161,51,139,49],[162,4,140,2],[162,8,140,10,"parts"],[162,13,140,15],[162,16,140,20,"message"],[162,23,140,27],[162,24,140,10,"parts"],[162,29,140,15],[164,4,142,2],[165,4,143,2],[165,8,143,8,"emptyParts"],[165,18,143,18],[165,21,143,21,"parts"],[165,26,143,26],[165,27,143,27,"map"],[165,30,143,30],[165,31,143,31,"part"],[165,35,143,35],[165,39,143,39,"withPartText"],[165,51,143,51],[165,52,143,52,"part"],[165,56,143,56],[165,58,143,58],[165,60,143,60],[165,61,143,61],[165,62,143,62],[166,4,144,2],[166,8,144,8,"overhead"],[166,16,144,16],[166,19,144,19,"jsonBytes"],[166,28,144,28],[166,29,144,29],[167,6,144,31],[167,9,144,34,"message"],[167,16,144,41],[168,6,144,43,"parts"],[168,11,144,48],[168,13,144,50,"emptyParts"],[169,4,144,61],[169,5,144,62],[169,6,144,63],[170,4,145,2],[170,8,145,6,"remainingBytes"],[170,22,145,20],[170,25,145,23,"maxBytes"],[170,33,145,31],[170,36,145,34,"overhead"],[170,44,145,42],[171,4,147,2],[171,8,147,6,"remainingBytes"],[171,22,147,20],[171,26,147,24],[171,27,147,25],[171,29,147,27],[172,6,148,4],[172,13,148,11],[172,15,148,13],[173,4,149,2],[175,4,151,2],[176,4,152,2],[176,8,152,8,"includedParts"],[176,21,152,21],[176,24,152,24],[176,26,152,26],[177,4,154,2],[177,9,154,7],[177,13,154,13,"part"],[177,17,154,17],[177,21,154,21,"parts"],[177,26,154,26],[177,28,154,28],[178,6,155,4],[178,10,155,10,"text"],[178,14,155,14],[178,17,155,17,"getPartText"],[178,28,155,28],[178,29,155,29,"part"],[178,33,155,33],[178,34,155,34],[179,6,156,4],[179,10,156,10,"textSize"],[179,18,156,18],[179,21,156,21,"utf8Bytes"],[179,30,156,30],[179,31,156,31,"text"],[179,35,156,35],[179,36,156,36],[180,6,158,4],[180,10,158,8,"textSize"],[180,18,158,16],[180,22,158,20,"remainingBytes"],[180,36,158,34],[180,38,158,36],[181,8,159,6],[182,8,160,6,"includedParts"],[182,21,160,19],[182,22,160,20,"push"],[182,26,160,24],[182,27,160,25,"part"],[182,31,160,29],[182,32,160,30],[183,8,161,6,"remainingBytes"],[183,22,161,20],[183,26,161,24,"textSize"],[183,34,161,32],[184,6,162,4],[184,7,162,5],[184,13,162,11],[184,17,162,15,"includedParts"],[184,30,162,28],[184,31,162,29,"length"],[184,37,162,35],[184,42,162,40],[184,43,162,41],[184,45,162,43],[185,8,163,6],[186,8,164,6],[186,12,164,12,"truncated"],[186,21,164,21],[186,24,164,24,"truncateTextByBytes"],[186,43,164,43],[186,44,164,44,"text"],[186,48,164,48],[186,50,164,50,"remainingBytes"],[186,64,164,64],[186,65,164,65],[187,8,165,6],[187,12,165,10,"truncated"],[187,21,165,19],[187,23,165,21],[188,10,166,8,"includedParts"],[188,23,166,21],[188,24,166,22,"push"],[188,28,166,26],[188,29,166,27,"withPartText"],[188,41,166,39],[188,42,166,40,"part"],[188,46,166,44],[188,48,166,46,"truncated"],[188,57,166,55],[188,58,166,56],[188,59,166,57],[189,8,167,6],[190,8,168,6],[191,6,169,4],[191,7,169,5],[191,13,169,11],[192,8,170,6],[193,8,171,6],[194,6,172,4],[195,4,173,2],[196,4,175,2],[196,11,175,9,"includedParts"],[196,24,175,22],[196,25,175,23,"length"],[196,31,175,29],[196,34,175,32],[196,35,175,33],[196,38,175,36],[196,39,175,37],[197,6,175,39],[197,9,175,42,"message"],[197,16,175,49],[198,6,175,51,"parts"],[198,11,175,56],[198,13,175,58,"includedParts"],[199,4,175,72],[199,5,175,73],[199,6,175,74],[199,9,175,77],[199,11,175,79],[200,2,176,0],[202,2,178,0],[203,0,179,0],[204,0,180,0],[205,0,181,0],[206,0,182,0],[207,0,183,0],[208,0,184,0],[209,0,185,0],[210,0,186,0],[211,0,187,0],[212,0,188,0],[213,2,189,0],[213,11,189,9,"truncateSingleMessage"],[213,32,189,30,"truncateSingleMessage"],[213,33,189,31,"message"],[213,40,189,38],[213,42,189,40,"maxBytes"],[213,50,189,48],[213,52,189,50],[214,4,190,2],[214,8,190,6],[214,9,190,7,"message"],[214,16,190,14],[214,20,190,18],[214,27,190,25,"message"],[214,34,190,32],[214,39,190,37],[214,47,190,45],[214,49,190,47],[215,6,191,4],[215,13,191,11],[215,15,191,13],[216,4,192,2],[217,4,194,2],[217,8,194,6,"isContentMessage"],[217,24,194,22],[217,25,194,23,"message"],[217,32,194,30],[217,33,194,31],[217,35,194,33],[218,6,195,4],[218,13,195,11,"truncateContentMessage"],[218,35,195,33],[218,36,195,34,"message"],[218,43,195,41],[218,45,195,43,"maxBytes"],[218,53,195,51],[218,54,195,52],[219,4,196,2],[220,4,198,2],[220,8,198,6,"isPartsMessage"],[220,22,198,20],[220,23,198,21,"message"],[220,30,198,28],[220,31,198,29],[220,33,198,31],[221,6,199,4],[221,13,199,11,"truncatePartsMessage"],[221,33,199,31],[221,34,199,32,"message"],[221,41,199,39],[221,43,199,41,"maxBytes"],[221,51,199,49],[221,52,199,50],[222,4,200,2],[224,4,202,2],[225,4,203,2],[225,11,203,9],[225,13,203,11],[226,2,204,0],[228,2,206,0],[229,0,207,0],[230,0,208,0],[231,0,209,0],[232,0,210,0],[233,0,211,0],[234,0,212,0],[235,0,213,0],[236,0,214,0],[237,0,215,0],[238,0,216,0],[239,0,217,0],[240,0,218,0],[241,0,219,0],[242,0,220,0],[243,0,221,0],[244,0,222,0],[245,0,223,0],[246,0,224,0],[247,2,225,0],[247,11,225,9,"truncateMessagesByBytes"],[247,34,225,32,"truncateMessagesByBytes"],[247,35,225,33,"messages"],[247,43,225,41],[247,45,225,43,"maxBytes"],[247,53,225,51],[247,55,225,53],[248,4,226,2],[249,4,227,2],[249,8,227,6],[249,9,227,7,"Array"],[249,14,227,12],[249,15,227,13,"isArray"],[249,22,227,20],[249,23,227,21,"messages"],[249,31,227,29],[249,32,227,30],[249,36,227,34,"messages"],[249,44,227,42],[249,45,227,43,"length"],[249,51,227,49],[249,56,227,54],[249,57,227,55],[249,59,227,57],[250,6,228,4],[250,13,228,11,"messages"],[250,21,228,19],[251,4,229,2],[253,4,231,2],[254,4,232,2],[254,8,232,8,"totalBytes"],[254,18,232,18],[254,21,232,21,"jsonBytes"],[254,30,232,30],[254,31,232,31,"messages"],[254,39,232,39],[254,40,232,40],[255,4,233,2],[255,8,233,6,"totalBytes"],[255,18,233,16],[255,22,233,20,"maxBytes"],[255,30,233,28],[255,32,233,30],[256,6,234,4],[256,13,234,11,"messages"],[256,21,234,19],[257,4,235,2],[259,4,237,2],[260,4,238,2],[260,8,238,8,"messageSizes"],[260,20,238,20],[260,23,238,23,"messages"],[260,31,238,31],[260,32,238,32,"map"],[260,35,238,35],[260,36,238,36,"jsonBytes"],[260,45,238,45],[260,46,238,46],[262,4,240,2],[263,4,241,2],[263,8,241,6,"bytesUsed"],[263,17,241,15],[263,20,241,18],[263,21,241,19],[264,4,242,2],[264,8,242,6,"startIndex"],[264,18,242,16],[264,21,242,19,"messages"],[264,29,242,27],[264,30,242,28,"length"],[264,36,242,34],[264,37,242,35],[264,38,242,36],[266,4,244,2],[266,9,244,7],[266,13,244,11,"i"],[266,14,244,12],[266,17,244,15,"messages"],[266,25,244,23],[266,26,244,24,"length"],[266,32,244,30],[266,35,244,33],[266,36,244,34],[266,38,244,36,"i"],[266,39,244,37],[266,43,244,41],[266,44,244,42],[266,46,244,44,"i"],[266,47,244,45],[266,49,244,47],[266,51,244,49],[267,6,245,4],[267,10,245,10,"messageSize"],[267,21,245,21],[267,24,245,24,"messageSizes"],[267,36,245,36],[267,37,245,37,"i"],[267,38,245,38],[267,39,245,39],[268,6,247,4],[268,10,247,8,"messageSize"],[268,21,247,19],[268,25,247,23,"bytesUsed"],[268,34,247,32],[268,37,247,35,"messageSize"],[268,48,247,46],[268,51,247,49,"maxBytes"],[268,59,247,57],[268,61,247,59],[269,8,248,6],[270,8,249,6],[271,6,250,4],[272,6,252,4],[272,10,252,8,"messageSize"],[272,21,252,19],[272,23,252,21],[273,8,253,6,"bytesUsed"],[273,17,253,15],[273,21,253,19,"messageSize"],[273,32,253,30],[274,6,254,4],[275,6,255,4,"startIndex"],[275,16,255,14],[275,19,255,17,"i"],[275,20,255,18],[276,4,256,2],[278,4,258,2],[279,4,259,2],[279,8,259,6,"startIndex"],[279,18,259,16],[279,23,259,21,"messages"],[279,31,259,29],[279,32,259,30,"length"],[279,38,259,36],[279,40,259,38],[280,6,260,4],[280,10,260,10,"newestMessage"],[280,23,260,23],[280,26,260,26,"messages"],[280,34,260,34],[280,35,260,35,"messages"],[280,43,260,43],[280,44,260,44,"length"],[280,50,260,50],[280,53,260,53],[280,54,260,54],[280,55,260,55],[281,6,261,4],[281,13,261,11,"truncateSingleMessage"],[281,34,261,32],[281,35,261,33,"newestMessage"],[281,48,261,46],[281,50,261,48,"maxBytes"],[281,58,261,56],[281,59,261,57],[282,4,262,2],[284,4,264,2],[285,4,265,2],[285,11,265,9,"messages"],[285,19,265,17],[285,20,265,18,"slice"],[285,25,265,23],[285,26,265,24,"startIndex"],[285,36,265,34],[285,37,265,35],[286,2,266,0],[288,2,268,0],[289,0,269,0],[290,0,270,0],[291,0,271,0],[292,0,272,0],[293,0,273,0],[294,0,274,0],[295,0,275,0],[296,2,276,0],[296,11,276,9,"truncateGenAiMessages"],[296,32,276,30,"truncateGenAiMessages"],[296,33,276,31,"messages"],[296,41,276,39],[296,43,276,41],[297,4,277,2],[297,11,277,9,"truncateMessagesByBytes"],[297,34,277,32],[297,35,277,33,"messages"],[297,43,277,41],[297,45,277,43,"DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT"],[297,79,277,77],[297,80,277,78],[298,2,278,0],[300,2,280,0],[301,0,281,0],[302,0,282,0],[303,0,283,0],[304,0,284,0],[305,0,285,0],[306,2,286,0],[306,11,286,9,"truncateGenAiStringInput"],[306,35,286,33,"truncateGenAiStringInput"],[306,36,286,34,"input"],[306,41,286,39],[306,43,286,41],[307,4,287,2],[307,11,287,9,"truncateTextByBytes"],[307,30,287,28],[307,31,287,29,"input"],[307,36,287,34],[307,38,287,36,"DEFAULT_GEN_AI_MESSAGES_BYTE_LIMIT"],[307,72,287,70],[307,73,287,71],[308,2,288,0],[309,0,288,1],[309,3]],"functionMap":{"names":["<global>","utf8Bytes","jsonBytes","truncateTextByBytes","getPartText","withPartText","isContentMessage","isPartsMessage","truncateContentMessage","truncatePartsMessage","parts.map$argument_0","truncateSingleMessage","truncateMessagesByBytes","truncateGenAiMessages","truncateGenAiStringInput"],"mappings":"AAA;kBCa;CDE;kBEK;CFE;AGU;CHuB;AIQ;CJK;AKS;CLK;AMK;CNO;AOK;CPQ;AQS;CRY;ASU;+BCI,8BD;CTiC;AWa;CXe;AYqB;CZyC;AaU;CbE;AcQ;CdE"},"hasCjsExports":false},"type":"js/module"}]}