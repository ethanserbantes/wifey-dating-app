{"dependencies":[{"name":"../ai/gen-ai-attributes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":154,"index":154}}],"key":"nKHaXfEjIYF1icPUCGJgR0o1cZ8=","exportNames":["*"],"imports":1}},{"name":"../ai/utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":155},"end":{"line":2,"column":56,"index":211}}],"key":"4ap/A8nGTkT0jtbnAG1G9kFBsuw=","exportNames":["*"],"imports":1}},{"name":"./constants.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":212},"end":{"line":3,"column":49,"index":261}}],"key":"46QfplZMuoT7/1B4GqMDknw8q/g=","exportNames":["*"],"imports":1}},{"name":"./vercel-ai-attributes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":262},"end":{"line":4,"column":94,"index":356}}],"key":"8VVb5p/hn6eVc3Oj41eFjNNtJuw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"_INTERNAL_cleanupToolCallSpan\", {\n    enumerable: true,\n    get: function () {\n      return _INTERNAL_cleanupToolCallSpan;\n    }\n  });\n  Object.defineProperty(exports, \"_INTERNAL_getSpanForToolCallId\", {\n    enumerable: true,\n    get: function () {\n      return _INTERNAL_getSpanForToolCallId;\n    }\n  });\n  Object.defineProperty(exports, \"accumulateTokensForParent\", {\n    enumerable: true,\n    get: function () {\n      return accumulateTokensForParent;\n    }\n  });\n  Object.defineProperty(exports, \"applyAccumulatedTokens\", {\n    enumerable: true,\n    get: function () {\n      return applyAccumulatedTokens;\n    }\n  });\n  Object.defineProperty(exports, \"convertAvailableToolsToJsonString\", {\n    enumerable: true,\n    get: function () {\n      return convertAvailableToolsToJsonString;\n    }\n  });\n  Object.defineProperty(exports, \"convertPromptToMessages\", {\n    enumerable: true,\n    get: function () {\n      return convertPromptToMessages;\n    }\n  });\n  Object.defineProperty(exports, \"requestMessagesFromPrompt\", {\n    enumerable: true,\n    get: function () {\n      return requestMessagesFromPrompt;\n    }\n  });\n  var _aiGenAiAttributesJs = require(_dependencyMap[0]);\n  var _aiUtilsJs = require(_dependencyMap[1]);\n  var _constantsJs = require(_dependencyMap[2]);\n  var _vercelAiAttributesJs = require(_dependencyMap[3]);\n  /**\n   * Accumulates token data from a span to its parent in the token accumulator map.\n   * This function extracts token usage from the current span and adds it to the\n   * accumulated totals for its parent span.\n   */\n  function accumulateTokensForParent(span, tokenAccumulator) {\n    var parentSpanId = span.parent_span_id;\n    if (!parentSpanId) {\n      return;\n    }\n    var inputTokens = span.data[_aiGenAiAttributesJs.GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE];\n    var outputTokens = span.data[_aiGenAiAttributesJs.GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE];\n    if (typeof inputTokens === 'number' || typeof outputTokens === 'number') {\n      var existing = tokenAccumulator.get(parentSpanId) || {\n        inputTokens: 0,\n        outputTokens: 0\n      };\n      if (typeof inputTokens === 'number') {\n        existing.inputTokens += inputTokens;\n      }\n      if (typeof outputTokens === 'number') {\n        existing.outputTokens += outputTokens;\n      }\n      tokenAccumulator.set(parentSpanId, existing);\n    }\n  }\n\n  /**\n   * Applies accumulated token data to the `gen_ai.invoke_agent` span.\n   * Only immediate children of the `gen_ai.invoke_agent` span are considered,\n   * since aggregation will automatically occur for each parent span.\n   */\n  function applyAccumulatedTokens(spanOrTrace, tokenAccumulator) {\n    var accumulated = tokenAccumulator.get(spanOrTrace.span_id);\n    if (!accumulated || !spanOrTrace.data) {\n      return;\n    }\n    if (accumulated.inputTokens > 0) {\n      spanOrTrace.data[_aiGenAiAttributesJs.GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE] = accumulated.inputTokens;\n    }\n    if (accumulated.outputTokens > 0) {\n      spanOrTrace.data[_aiGenAiAttributesJs.GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE] = accumulated.outputTokens;\n    }\n    if (accumulated.inputTokens > 0 || accumulated.outputTokens > 0) {\n      spanOrTrace.data['gen_ai.usage.total_tokens'] = accumulated.inputTokens + accumulated.outputTokens;\n    }\n  }\n\n  /**\n   * Get the span associated with a tool call ID\n   */\n  function _INTERNAL_getSpanForToolCallId(toolCallId) {\n    return _constantsJs.toolCallSpanMap.get(toolCallId);\n  }\n\n  /**\n   * Clean up the span mapping for a tool call ID\n   */\n  function _INTERNAL_cleanupToolCallSpan(toolCallId) {\n    _constantsJs.toolCallSpanMap.delete(toolCallId);\n  }\n\n  /**\n   * Convert an array of tool strings to a JSON string\n   */\n  function convertAvailableToolsToJsonString(tools) {\n    var toolObjects = tools.map(tool => {\n      if (typeof tool === 'string') {\n        try {\n          return JSON.parse(tool);\n        } catch {\n          return tool;\n        }\n      }\n      return tool;\n    });\n    return JSON.stringify(toolObjects);\n  }\n\n  /**\n   * Convert the prompt string to messages array\n   */\n  function convertPromptToMessages(prompt) {\n    try {\n      var p = JSON.parse(prompt);\n      if (!!p && typeof p === 'object') {\n        var _prompt = p.prompt,\n          system = p.system;\n        if (typeof _prompt === 'string' || typeof system === 'string') {\n          var messages = [];\n          if (typeof system === 'string') {\n            messages.push({\n              role: 'system',\n              content: system\n            });\n          }\n          if (typeof _prompt === 'string') {\n            messages.push({\n              role: 'user',\n              content: _prompt\n            });\n          }\n          return messages;\n        }\n      }\n      // eslint-disable-next-line no-empty\n    } catch {}\n    return [];\n  }\n\n  /**\n   * Generate a request.messages JSON array from the prompt field in the\n   * invoke_agent op\n   */\n  function requestMessagesFromPrompt(span, attributes) {\n    if (attributes[_vercelAiAttributesJs.AI_PROMPT_ATTRIBUTE]) {\n      var truncatedPrompt = (0, _aiUtilsJs.getTruncatedJsonString)(attributes[_vercelAiAttributesJs.AI_PROMPT_ATTRIBUTE]);\n      span.setAttribute('gen_ai.prompt', truncatedPrompt);\n    }\n    var prompt = attributes[_vercelAiAttributesJs.AI_PROMPT_ATTRIBUTE];\n    if (typeof prompt === 'string' && !attributes[_aiGenAiAttributesJs.GEN_AI_REQUEST_MESSAGES_ATTRIBUTE] && !attributes[_vercelAiAttributesJs.AI_PROMPT_MESSAGES_ATTRIBUTE]) {\n      var messages = convertPromptToMessages(prompt);\n      if (messages.length) span.setAttribute(_aiGenAiAttributesJs.GEN_AI_REQUEST_MESSAGES_ATTRIBUTE, (0, _aiUtilsJs.getTruncatedJsonString)(messages));\n    }\n  }\n});","lineCount":178,"map":[[7,2,134,0,"Object"],[7,8,134,0],[7,9,134,0,"defineProperty"],[7,23,134,0],[7,24,134,0,"exports"],[7,31,134,0],[8,4,134,0,"enumerable"],[8,14,134,0],[9,4,134,0,"get"],[9,7,134,0],[9,18,134,0,"get"],[9,19,134,0],[10,6,134,0],[10,13,134,9,"_INTERNAL_cleanupToolCallSpan"],[10,42,134,38],[11,4,134,38],[12,2,134,38],[13,2,134,0,"Object"],[13,8,134,0],[13,9,134,0,"defineProperty"],[13,23,134,0],[13,24,134,0,"exports"],[13,31,134,0],[14,4,134,0,"enumerable"],[14,14,134,0],[15,4,134,0,"get"],[15,7,134,0],[15,18,134,0,"get"],[15,19,134,0],[16,6,134,0],[16,13,134,40,"_INTERNAL_getSpanForToolCallId"],[16,43,134,70],[17,4,134,70],[18,2,134,70],[19,2,134,0,"Object"],[19,8,134,0],[19,9,134,0,"defineProperty"],[19,23,134,0],[19,24,134,0,"exports"],[19,31,134,0],[20,4,134,0,"enumerable"],[20,14,134,0],[21,4,134,0,"get"],[21,7,134,0],[21,18,134,0,"get"],[21,19,134,0],[22,6,134,0],[22,13,134,72,"accumulateTokensForParent"],[22,38,134,97],[23,4,134,97],[24,2,134,97],[25,2,134,0,"Object"],[25,8,134,0],[25,9,134,0,"defineProperty"],[25,23,134,0],[25,24,134,0,"exports"],[25,31,134,0],[26,4,134,0,"enumerable"],[26,14,134,0],[27,4,134,0,"get"],[27,7,134,0],[27,18,134,0,"get"],[27,19,134,0],[28,6,134,0],[28,13,134,99,"applyAccumulatedTokens"],[28,35,134,121],[29,4,134,121],[30,2,134,121],[31,2,134,0,"Object"],[31,8,134,0],[31,9,134,0,"defineProperty"],[31,23,134,0],[31,24,134,0,"exports"],[31,31,134,0],[32,4,134,0,"enumerable"],[32,14,134,0],[33,4,134,0,"get"],[33,7,134,0],[33,18,134,0,"get"],[33,19,134,0],[34,6,134,0],[34,13,134,123,"convertAvailableToolsToJsonString"],[34,46,134,156],[35,4,134,156],[36,2,134,156],[37,2,134,0,"Object"],[37,8,134,0],[37,9,134,0,"defineProperty"],[37,23,134,0],[37,24,134,0,"exports"],[37,31,134,0],[38,4,134,0,"enumerable"],[38,14,134,0],[39,4,134,0,"get"],[39,7,134,0],[39,18,134,0,"get"],[39,19,134,0],[40,6,134,0],[40,13,134,158,"convertPromptToMessages"],[40,36,134,181],[41,4,134,181],[42,2,134,181],[43,2,134,0,"Object"],[43,8,134,0],[43,9,134,0,"defineProperty"],[43,23,134,0],[43,24,134,0,"exports"],[43,31,134,0],[44,4,134,0,"enumerable"],[44,14,134,0],[45,4,134,0,"get"],[45,7,134,0],[45,18,134,0,"get"],[45,19,134,0],[46,6,134,0],[46,13,134,183,"requestMessagesFromPrompt"],[46,38,134,208],[47,4,134,208],[48,2,134,208],[49,2,1,0],[49,6,1,0,"_aiGenAiAttributesJs"],[49,26,1,0],[49,29,1,0,"require"],[49,36,1,0],[49,37,1,0,"_dependencyMap"],[49,51,1,0],[50,2,2,0],[50,6,2,0,"_aiUtilsJs"],[50,16,2,0],[50,19,2,0,"require"],[50,26,2,0],[50,27,2,0,"_dependencyMap"],[50,41,2,0],[51,2,3,0],[51,6,3,0,"_constantsJs"],[51,18,3,0],[51,21,3,0,"require"],[51,28,3,0],[51,29,3,0,"_dependencyMap"],[51,43,3,0],[52,2,4,0],[52,6,4,0,"_vercelAiAttributesJs"],[52,27,4,0],[52,30,4,0,"require"],[52,37,4,0],[52,38,4,0,"_dependencyMap"],[52,52,4,0],[53,2,6,0],[54,0,7,0],[55,0,8,0],[56,0,9,0],[57,0,10,0],[58,2,11,0],[58,11,11,9,"accumulateTokensForParent"],[58,36,11,34,"accumulateTokensForParent"],[58,37,11,35,"span"],[58,41,11,39],[58,43,11,41,"tokenAccumulator"],[58,59,11,57],[58,61,11,59],[59,4,12,2],[59,8,12,8,"parentSpanId"],[59,20,12,20],[59,23,12,23,"span"],[59,27,12,27],[59,28,12,28,"parent_span_id"],[59,42,12,42],[60,4,13,2],[60,8,13,6],[60,9,13,7,"parentSpanId"],[60,21,13,19],[60,23,13,21],[61,6,14,4],[62,4,15,2],[63,4,17,2],[63,8,17,8,"inputTokens"],[63,19,17,19],[63,22,17,22,"span"],[63,26,17,26],[63,27,17,27,"data"],[63,31,17,31],[63,32,17,32,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[63,52,17,67],[63,53,17,67,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[63,88,17,67],[63,89,17,68],[64,4,18,2],[64,8,18,8,"outputTokens"],[64,20,18,20],[64,23,18,23,"span"],[64,27,18,27],[64,28,18,28,"data"],[64,32,18,32],[64,33,18,33,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[64,53,18,69],[64,54,18,69,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[64,90,18,69],[64,91,18,70],[65,4,20,2],[65,8,20,6],[65,15,20,13,"inputTokens"],[65,26,20,24],[65,31,20,29],[65,39,20,37],[65,43,20,41],[65,50,20,48,"outputTokens"],[65,62,20,60],[65,67,20,65],[65,75,20,73],[65,77,20,75],[66,6,21,4],[66,10,21,10,"existing"],[66,18,21,18],[66,21,21,21,"tokenAccumulator"],[66,37,21,37],[66,38,21,38,"get"],[66,41,21,41],[66,42,21,42,"parentSpanId"],[66,54,21,54],[66,55,21,55],[66,59,21,59],[67,8,21,61,"inputTokens"],[67,19,21,72],[67,21,21,74],[67,22,21,75],[68,8,21,77,"outputTokens"],[68,20,21,89],[68,22,21,91],[69,6,21,93],[69,7,21,94],[70,6,23,4],[70,10,23,8],[70,17,23,15,"inputTokens"],[70,28,23,26],[70,33,23,31],[70,41,23,39],[70,43,23,41],[71,8,24,6,"existing"],[71,16,24,14],[71,17,24,15,"inputTokens"],[71,28,24,26],[71,32,24,30,"inputTokens"],[71,43,24,41],[72,6,25,4],[73,6,26,4],[73,10,26,8],[73,17,26,15,"outputTokens"],[73,29,26,27],[73,34,26,32],[73,42,26,40],[73,44,26,42],[74,8,27,6,"existing"],[74,16,27,14],[74,17,27,15,"outputTokens"],[74,29,27,27],[74,33,27,31,"outputTokens"],[74,45,27,43],[75,6,28,4],[76,6,30,4,"tokenAccumulator"],[76,22,30,20],[76,23,30,21,"set"],[76,26,30,24],[76,27,30,25,"parentSpanId"],[76,39,30,37],[76,41,30,39,"existing"],[76,49,30,47],[76,50,30,48],[77,4,31,2],[78,2,32,0],[80,2,34,0],[81,0,35,0],[82,0,36,0],[83,0,37,0],[84,0,38,0],[85,2,39,0],[85,11,39,9,"applyAccumulatedTokens"],[85,33,39,31,"applyAccumulatedTokens"],[85,34,40,2,"spanOrTrace"],[85,45,40,13],[85,47,41,2,"tokenAccumulator"],[85,63,41,18],[85,65,42,2],[86,4,43,2],[86,8,43,8,"accumulated"],[86,19,43,19],[86,22,43,22,"tokenAccumulator"],[86,38,43,38],[86,39,43,39,"get"],[86,42,43,42],[86,43,43,43,"spanOrTrace"],[86,54,43,54],[86,55,43,55,"span_id"],[86,62,43,62],[86,63,43,63],[87,4,44,2],[87,8,44,6],[87,9,44,7,"accumulated"],[87,20,44,18],[87,24,44,22],[87,25,44,23,"spanOrTrace"],[87,36,44,34],[87,37,44,35,"data"],[87,41,44,39],[87,43,44,41],[88,6,45,4],[89,4,46,2],[90,4,48,2],[90,8,48,6,"accumulated"],[90,19,48,17],[90,20,48,18,"inputTokens"],[90,31,48,29],[90,34,48,32],[90,35,48,33],[90,37,48,35],[91,6,49,4,"spanOrTrace"],[91,17,49,15],[91,18,49,16,"data"],[91,22,49,20],[91,23,49,21,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[91,43,49,56],[91,44,49,56,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[91,79,49,56],[91,80,49,57],[91,83,49,60,"accumulated"],[91,94,49,71],[91,95,49,72,"inputTokens"],[91,106,49,83],[92,4,50,2],[93,4,51,2],[93,8,51,6,"accumulated"],[93,19,51,17],[93,20,51,18,"outputTokens"],[93,32,51,30],[93,35,51,33],[93,36,51,34],[93,38,51,36],[94,6,52,4,"spanOrTrace"],[94,17,52,15],[94,18,52,16,"data"],[94,22,52,20],[94,23,52,21,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[94,43,52,57],[94,44,52,57,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[94,80,52,57],[94,81,52,58],[94,84,52,61,"accumulated"],[94,95,52,72],[94,96,52,73,"outputTokens"],[94,108,52,85],[95,4,53,2],[96,4,54,2],[96,8,54,6,"accumulated"],[96,19,54,17],[96,20,54,18,"inputTokens"],[96,31,54,29],[96,34,54,32],[96,35,54,33],[96,39,54,37,"accumulated"],[96,50,54,48],[96,51,54,49,"outputTokens"],[96,63,54,61],[96,66,54,64],[96,67,54,65],[96,69,54,67],[97,6,55,4,"spanOrTrace"],[97,17,55,15],[97,18,55,16,"data"],[97,22,55,20],[97,23,55,21],[97,50,55,48],[97,51,55,49],[97,54,55,52,"accumulated"],[97,65,55,63],[97,66,55,64,"inputTokens"],[97,77,55,75],[97,80,55,78,"accumulated"],[97,91,55,89],[97,92,55,90,"outputTokens"],[97,104,55,102],[98,4,56,2],[99,2,57,0],[101,2,59,0],[102,0,60,0],[103,0,61,0],[104,2,62,0],[104,11,62,9,"_INTERNAL_getSpanForToolCallId"],[104,41,62,39,"_INTERNAL_getSpanForToolCallId"],[104,42,62,40,"toolCallId"],[104,52,62,50],[104,54,62,52],[105,4,63,2],[105,11,63,9,"toolCallSpanMap"],[105,23,63,24],[105,24,63,24,"toolCallSpanMap"],[105,39,63,24],[105,40,63,25,"get"],[105,43,63,28],[105,44,63,29,"toolCallId"],[105,54,63,39],[105,55,63,40],[106,2,64,0],[108,2,66,0],[109,0,67,0],[110,0,68,0],[111,2,69,0],[111,11,69,9,"_INTERNAL_cleanupToolCallSpan"],[111,40,69,38,"_INTERNAL_cleanupToolCallSpan"],[111,41,69,39,"toolCallId"],[111,51,69,49],[111,53,69,51],[112,4,70,2,"toolCallSpanMap"],[112,16,70,17],[112,17,70,17,"toolCallSpanMap"],[112,32,70,17],[112,33,70,18,"delete"],[112,39,70,24],[112,40,70,25,"toolCallId"],[112,50,70,35],[112,51,70,36],[113,2,71,0],[115,2,73,0],[116,0,74,0],[117,0,75,0],[118,2,76,0],[118,11,76,9,"convertAvailableToolsToJsonString"],[118,44,76,42,"convertAvailableToolsToJsonString"],[118,45,76,43,"tools"],[118,50,76,48],[118,52,76,50],[119,4,77,2],[119,8,77,8,"toolObjects"],[119,19,77,19],[119,22,77,22,"tools"],[119,27,77,27],[119,28,77,28,"map"],[119,31,77,31],[119,32,77,32,"tool"],[119,36,77,36],[119,40,77,40],[120,6,78,4],[120,10,78,8],[120,17,78,15,"tool"],[120,21,78,19],[120,26,78,24],[120,34,78,32],[120,36,78,34],[121,8,79,6],[121,12,79,10],[122,10,80,8],[122,17,80,15,"JSON"],[122,21,80,19],[122,22,80,20,"parse"],[122,27,80,25],[122,28,80,26,"tool"],[122,32,80,30],[122,33,80,31],[123,8,81,6],[123,9,81,7],[123,10,81,8],[123,16,81,14],[124,10,82,8],[124,17,82,15,"tool"],[124,21,82,19],[125,8,83,6],[126,6,84,4],[127,6,85,4],[127,13,85,11,"tool"],[127,17,85,15],[128,4,86,2],[128,5,86,3],[128,6,86,4],[129,4,87,2],[129,11,87,9,"JSON"],[129,15,87,13],[129,16,87,14,"stringify"],[129,25,87,23],[129,26,87,24,"toolObjects"],[129,37,87,35],[129,38,87,36],[130,2,88,0],[132,2,90,0],[133,0,91,0],[134,0,92,0],[135,2,93,0],[135,11,93,9,"convertPromptToMessages"],[135,34,93,32,"convertPromptToMessages"],[135,35,93,33,"prompt"],[135,41,93,39],[135,43,93,41],[136,4,94,2],[136,8,94,6],[137,6,95,4],[137,10,95,10,"p"],[137,11,95,11],[137,14,95,14,"JSON"],[137,18,95,18],[137,19,95,19,"parse"],[137,24,95,24],[137,25,95,25,"prompt"],[137,31,95,31],[137,32,95,32],[138,6,96,4],[138,10,96,8],[138,11,96,9],[138,12,96,10,"p"],[138,13,96,11],[138,17,96,15],[138,24,96,22,"p"],[138,25,96,23],[138,30,96,28],[138,38,96,36],[138,40,96,38],[139,8,97,6],[139,12,97,14,"prompt"],[139,19,97,20],[139,22,97,33,"p"],[139,23,97,34],[139,24,97,14,"prompt"],[139,30,97,20],[140,10,97,22,"system"],[140,16,97,28],[140,19,97,33,"p"],[140,20,97,34],[140,21,97,22,"system"],[140,27,97,28],[141,8,98,6],[141,12,98,10],[141,19,98,17,"prompt"],[141,26,98,23],[141,31,98,28],[141,39,98,36],[141,43,98,40],[141,50,98,47,"system"],[141,56,98,53],[141,61,98,58],[141,69,98,66],[141,71,98,68],[142,10,99,8],[142,14,99,14,"messages"],[142,22,99,22],[142,25,99,25],[142,27,99,27],[143,10,100,8],[143,14,100,12],[143,21,100,19,"system"],[143,27,100,25],[143,32,100,30],[143,40,100,38],[143,42,100,40],[144,12,101,10,"messages"],[144,20,101,18],[144,21,101,19,"push"],[144,25,101,23],[144,26,101,24],[145,14,101,26,"role"],[145,18,101,30],[145,20,101,32],[145,28,101,40],[146,14,101,42,"content"],[146,21,101,49],[146,23,101,51,"system"],[147,12,101,58],[147,13,101,59],[147,14,101,60],[148,10,102,8],[149,10,103,8],[149,14,103,12],[149,21,103,19,"prompt"],[149,28,103,25],[149,33,103,30],[149,41,103,38],[149,43,103,40],[150,12,104,10,"messages"],[150,20,104,18],[150,21,104,19,"push"],[150,25,104,23],[150,26,104,24],[151,14,104,26,"role"],[151,18,104,30],[151,20,104,32],[151,26,104,38],[152,14,104,40,"content"],[152,21,104,47],[152,23,104,49,"prompt"],[153,12,104,56],[153,13,104,57],[153,14,104,58],[154,10,105,8],[155,10,106,8],[155,17,106,15,"messages"],[155,25,106,23],[156,8,107,6],[157,6,108,4],[158,6,109,4],[159,4,110,2],[159,5,110,3],[159,6,110,4],[159,12,110,10],[159,13,110,11],[160,4,111,2],[160,11,111,9],[160,13,111,11],[161,2,112,0],[163,2,114,0],[164,0,115,0],[165,0,116,0],[166,0,117,0],[167,2,118,0],[167,11,118,9,"requestMessagesFromPrompt"],[167,36,118,34,"requestMessagesFromPrompt"],[167,37,118,35,"span"],[167,41,118,39],[167,43,118,41,"attributes"],[167,53,118,51],[167,55,118,53],[168,4,119,2],[168,8,119,6,"attributes"],[168,18,119,16],[168,19,119,17,"AI_PROMPT_ATTRIBUTE"],[168,40,119,36],[168,41,119,36,"AI_PROMPT_ATTRIBUTE"],[168,60,119,36],[168,61,119,37],[168,63,119,39],[169,6,120,4],[169,10,120,10,"truncatedPrompt"],[169,25,120,25],[169,28,120,28],[169,32,120,28,"getTruncatedJsonString"],[169,42,120,50],[169,43,120,50,"getTruncatedJsonString"],[169,65,120,50],[169,67,120,51,"attributes"],[169,77,120,61],[169,78,120,62,"AI_PROMPT_ATTRIBUTE"],[169,99,120,81],[169,100,120,81,"AI_PROMPT_ATTRIBUTE"],[169,119,120,81],[169,120,120,83],[169,121,120,84],[170,6,121,4,"span"],[170,10,121,8],[170,11,121,9,"setAttribute"],[170,23,121,21],[170,24,121,22],[170,39,121,37],[170,41,121,39,"truncatedPrompt"],[170,56,121,54],[170,57,121,55],[171,4,122,2],[172,4,123,2],[172,8,123,8,"prompt"],[172,14,123,14],[172,17,123,17,"attributes"],[172,27,123,27],[172,28,123,28,"AI_PROMPT_ATTRIBUTE"],[172,49,123,47],[172,50,123,47,"AI_PROMPT_ATTRIBUTE"],[172,69,123,47],[172,70,123,48],[173,4,124,2],[173,8,125,4],[173,15,125,11,"prompt"],[173,21,125,17],[173,26,125,22],[173,34,125,30],[173,38,126,4],[173,39,126,5,"attributes"],[173,49,126,15],[173,50,126,16,"GEN_AI_REQUEST_MESSAGES_ATTRIBUTE"],[173,70,126,49],[173,71,126,49,"GEN_AI_REQUEST_MESSAGES_ATTRIBUTE"],[173,104,126,49],[173,105,126,50],[173,109,127,4],[173,110,127,5,"attributes"],[173,120,127,15],[173,121,127,16,"AI_PROMPT_MESSAGES_ATTRIBUTE"],[173,142,127,44],[173,143,127,44,"AI_PROMPT_MESSAGES_ATTRIBUTE"],[173,171,127,44],[173,172,127,45],[173,174,128,4],[174,6,129,4],[174,10,129,10,"messages"],[174,18,129,18],[174,21,129,21,"convertPromptToMessages"],[174,44,129,44],[174,45,129,45,"prompt"],[174,51,129,51],[174,52,129,52],[175,6,130,4],[175,10,130,8,"messages"],[175,18,130,16],[175,19,130,17,"length"],[175,25,130,23],[175,27,130,25,"span"],[175,31,130,29],[175,32,130,30,"setAttribute"],[175,44,130,42],[175,45,130,43,"GEN_AI_REQUEST_MESSAGES_ATTRIBUTE"],[175,65,130,76],[175,66,130,76,"GEN_AI_REQUEST_MESSAGES_ATTRIBUTE"],[175,99,130,76],[175,101,130,78],[175,105,130,78,"getTruncatedJsonString"],[175,115,130,100],[175,116,130,100,"getTruncatedJsonString"],[175,138,130,100],[175,140,130,101,"messages"],[175,148,130,109],[175,149,130,110],[175,150,130,111],[176,4,131,2],[177,2,132,0],[178,0,132,1],[178,3]],"functionMap":{"names":["<global>","accumulateTokensForParent","applyAccumulatedTokens","_INTERNAL_getSpanForToolCallId","_INTERNAL_cleanupToolCallSpan","convertAvailableToolsToJsonString","tools.map$argument_0","convertPromptToMessages","requestMessagesFromPrompt"],"mappings":"AAA;ACU;CDqB;AEO;CFkB;AGK;CHE;AIK;CJE;AKK;gCCC;GDS;CLE;AOK;CPmB;AQM;CRc"},"hasCjsExports":false},"type":"js/module"}]}