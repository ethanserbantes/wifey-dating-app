{"dependencies":[{"name":"@/utils/countryCallingCodes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":64,"index":64}}],"key":"5OkTQHzI+T/PFmmwFetf0dQgz0s=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"OTP_SUPPORTED_COUNTRIES\", {\n    enumerable: true,\n    get: function () {\n      return OTP_SUPPORTED_COUNTRIES;\n    }\n  });\n  exports.normalizePhoneForApi = normalizePhoneForApi;\n  var _utilsCountryCallingCodes = require(_dependencyMap[0], \"@/utils/countryCallingCodes\");\n  const OTP_SUPPORTED_COUNTRIES = [\"US\", \"CA\", \"GB\", \"AU\"]; // start simple; can expand later\n\n  function digitsOnly(value) {\n    return String(value || \"\").replace(/\\D/g, \"\");\n  }\n  function normalizeNationalDigitsForCountry(digits, iso2) {\n    const country = String(iso2 || \"\").toUpperCase();\n    let d = String(digits || \"\");\n\n    // Common: users type leading 0 locally (esp UK)\n    if (d.startsWith(\"0\") && country !== \"US\" && country !== \"CA\") {\n      d = d.replace(/^0+/, \"\");\n    }\n\n    // NANP: allow 11 digits starting with 1\n    if ((country === \"US\" || country === \"CA\") && d.length === 11 && d.startsWith(\"1\")) {\n      d = d.slice(1);\n    }\n    return d;\n  }\n  function normalizePhoneForApi(input, countryIso2) {\n    const raw = String(input || \"\").trim();\n    if (!raw) return \"\";\n\n    // If user already gave +, trust it as E.164-ish\n    if (raw.startsWith(\"+\")) {\n      const digits = digitsOnly(raw);\n      return digits ? `+${digits}` : \"\";\n    }\n\n    // Legacy behavior (no country selected)\n    if (!countryIso2) {\n      const digits = digitsOnly(raw);\n      if (!digits) return \"\";\n      if (digits.length === 10) {\n        return `+1${digits}`;\n      }\n      if (digits.length === 11 && digits.startsWith(\"1\")) {\n        return `+${digits}`;\n      }\n\n      // leave it as-is; backend will validate and show friendly error\n      return raw;\n    }\n\n    // Country-aware behavior\n    const dialCode = (0, _utilsCountryCallingCodes.getDialCodeByIso2)(countryIso2);\n    const digits = digitsOnly(raw);\n    if (!dialCode || !digits) return \"\";\n    const national = normalizeNationalDigitsForCountry(digits, countryIso2);\n    if (!national) return \"\";\n\n    // Basic length checks for US/CA (10 digits after normalization)\n    const country = String(countryIso2 || \"\").toUpperCase();\n    if ((country === \"US\" || country === \"CA\") && national.length !== 10) {\n      return \"\";\n    }\n    return `+${dialCode}${national}`;\n  }\n});","lineCount":74,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"OTP_SUPPORTED_COUNTRIES"],[10,36,3,0],[11,4,3,0],[12,2,3,0],[13,2,30,0,"exports"],[13,9,30,0],[13,10,30,0,"normalizePhoneForApi"],[13,30,30,0],[13,33,30,0,"normalizePhoneForApi"],[13,53,30,0],[14,2,1,0],[14,6,1,0,"_utilsCountryCallingCodes"],[14,31,1,0],[14,34,1,0,"require"],[14,41,1,0],[14,42,1,0,"_dependencyMap"],[14,56,1,0],[15,2,3,7],[15,8,3,13,"OTP_SUPPORTED_COUNTRIES"],[15,31,3,36],[15,34,3,39],[15,35,3,40],[15,39,3,44],[15,41,3,46],[15,45,3,50],[15,47,3,52],[15,51,3,56],[15,53,3,58],[15,57,3,62],[15,58,3,63],[15,59,3,64],[15,60,3,65],[17,2,5,0],[17,11,5,9,"digitsOnly"],[17,21,5,19,"digitsOnly"],[17,22,5,20,"value"],[17,27,5,25],[17,29,5,27],[18,4,6,2],[18,11,6,9,"String"],[18,17,6,15],[18,18,6,16,"value"],[18,23,6,21],[18,27,6,25],[18,29,6,27],[18,30,6,28],[18,31,6,29,"replace"],[18,38,6,36],[18,39,6,37],[18,44,6,42],[18,46,6,44],[18,48,6,46],[18,49,6,47],[19,2,7,0],[20,2,9,0],[20,11,9,9,"normalizeNationalDigitsForCountry"],[20,44,9,42,"normalizeNationalDigitsForCountry"],[20,45,9,43,"digits"],[20,51,9,49],[20,53,9,51,"iso2"],[20,57,9,55],[20,59,9,57],[21,4,10,2],[21,10,10,8,"country"],[21,17,10,15],[21,20,10,18,"String"],[21,26,10,24],[21,27,10,25,"iso2"],[21,31,10,29],[21,35,10,33],[21,37,10,35],[21,38,10,36],[21,39,10,37,"toUpperCase"],[21,50,10,48],[21,51,10,49],[21,52,10,50],[22,4,11,2],[22,8,11,6,"d"],[22,9,11,7],[22,12,11,10,"String"],[22,18,11,16],[22,19,11,17,"digits"],[22,25,11,23],[22,29,11,27],[22,31,11,29],[22,32,11,30],[24,4,13,2],[25,4,14,2],[25,8,14,6,"d"],[25,9,14,7],[25,10,14,8,"startsWith"],[25,20,14,18],[25,21,14,19],[25,24,14,22],[25,25,14,23],[25,29,14,27,"country"],[25,36,14,34],[25,41,14,39],[25,45,14,43],[25,49,14,47,"country"],[25,56,14,54],[25,61,14,59],[25,65,14,63],[25,67,14,65],[26,6,15,4,"d"],[26,7,15,5],[26,10,15,8,"d"],[26,11,15,9],[26,12,15,10,"replace"],[26,19,15,17],[26,20,15,18],[26,25,15,23],[26,27,15,25],[26,29,15,27],[26,30,15,28],[27,4,16,2],[29,4,18,2],[30,4,19,2],[30,8,20,4],[30,9,20,5,"country"],[30,16,20,12],[30,21,20,17],[30,25,20,21],[30,29,20,25,"country"],[30,36,20,32],[30,41,20,37],[30,45,20,41],[30,50,21,4,"d"],[30,51,21,5],[30,52,21,6,"length"],[30,58,21,12],[30,63,21,17],[30,65,21,19],[30,69,22,4,"d"],[30,70,22,5],[30,71,22,6,"startsWith"],[30,81,22,16],[30,82,22,17],[30,85,22,20],[30,86,22,21],[30,88,23,4],[31,6,24,4,"d"],[31,7,24,5],[31,10,24,8,"d"],[31,11,24,9],[31,12,24,10,"slice"],[31,17,24,15],[31,18,24,16],[31,19,24,17],[31,20,24,18],[32,4,25,2],[33,4,27,2],[33,11,27,9,"d"],[33,12,27,10],[34,2,28,0],[35,2,30,7],[35,11,30,16,"normalizePhoneForApi"],[35,31,30,36,"normalizePhoneForApi"],[35,32,30,37,"input"],[35,37,30,42],[35,39,30,44,"countryIso2"],[35,50,30,55],[35,52,30,57],[36,4,31,2],[36,10,31,8,"raw"],[36,13,31,11],[36,16,31,14,"String"],[36,22,31,20],[36,23,31,21,"input"],[36,28,31,26],[36,32,31,30],[36,34,31,32],[36,35,31,33],[36,36,31,34,"trim"],[36,40,31,38],[36,41,31,39],[36,42,31,40],[37,4,32,2],[37,8,32,6],[37,9,32,7,"raw"],[37,12,32,10],[37,14,32,12],[37,21,32,19],[37,23,32,21],[39,4,34,2],[40,4,35,2],[40,8,35,6,"raw"],[40,11,35,9],[40,12,35,10,"startsWith"],[40,22,35,20],[40,23,35,21],[40,26,35,24],[40,27,35,25],[40,29,35,27],[41,6,36,4],[41,12,36,10,"digits"],[41,18,36,16],[41,21,36,19,"digitsOnly"],[41,31,36,29],[41,32,36,30,"raw"],[41,35,36,33],[41,36,36,34],[42,6,37,4],[42,13,37,11,"digits"],[42,19,37,17],[42,22,37,20],[42,26,37,24,"digits"],[42,32,37,30],[42,34,37,32],[42,37,37,35],[42,39,37,37],[43,4,38,2],[45,4,40,2],[46,4,41,2],[46,8,41,6],[46,9,41,7,"countryIso2"],[46,20,41,18],[46,22,41,20],[47,6,42,4],[47,12,42,10,"digits"],[47,18,42,16],[47,21,42,19,"digitsOnly"],[47,31,42,29],[47,32,42,30,"raw"],[47,35,42,33],[47,36,42,34],[48,6,43,4],[48,10,43,8],[48,11,43,9,"digits"],[48,17,43,15],[48,19,43,17],[48,26,43,24],[48,28,43,26],[49,6,45,4],[49,10,45,8,"digits"],[49,16,45,14],[49,17,45,15,"length"],[49,23,45,21],[49,28,45,26],[49,30,45,28],[49,32,45,30],[50,8,46,6],[50,15,46,13],[50,20,46,18,"digits"],[50,26,46,24],[50,28,46,26],[51,6,47,4],[52,6,49,4],[52,10,49,8,"digits"],[52,16,49,14],[52,17,49,15,"length"],[52,23,49,21],[52,28,49,26],[52,30,49,28],[52,34,49,32,"digits"],[52,40,49,38],[52,41,49,39,"startsWith"],[52,51,49,49],[52,52,49,50],[52,55,49,53],[52,56,49,54],[52,58,49,56],[53,8,50,6],[53,15,50,13],[53,19,50,17,"digits"],[53,25,50,23],[53,27,50,25],[54,6,51,4],[56,6,53,4],[57,6,54,4],[57,13,54,11,"raw"],[57,16,54,14],[58,4,55,2],[60,4,57,2],[61,4,58,2],[61,10,58,8,"dialCode"],[61,18,58,16],[61,21,58,19],[61,25,58,19,"getDialCodeByIso2"],[61,50,58,36],[61,51,58,36,"getDialCodeByIso2"],[61,68,58,36],[61,70,58,37,"countryIso2"],[61,81,58,48],[61,82,58,49],[62,4,59,2],[62,10,59,8,"digits"],[62,16,59,14],[62,19,59,17,"digitsOnly"],[62,29,59,27],[62,30,59,28,"raw"],[62,33,59,31],[62,34,59,32],[63,4,60,2],[63,8,60,6],[63,9,60,7,"dialCode"],[63,17,60,15],[63,21,60,19],[63,22,60,20,"digits"],[63,28,60,26],[63,30,60,28],[63,37,60,35],[63,39,60,37],[64,4,62,2],[64,10,62,8,"national"],[64,18,62,16],[64,21,62,19,"normalizeNationalDigitsForCountry"],[64,54,62,52],[64,55,62,53,"digits"],[64,61,62,59],[64,63,62,61,"countryIso2"],[64,74,62,72],[64,75,62,73],[65,4,63,2],[65,8,63,6],[65,9,63,7,"national"],[65,17,63,15],[65,19,63,17],[65,26,63,24],[65,28,63,26],[67,4,65,2],[68,4,66,2],[68,10,66,8,"country"],[68,17,66,15],[68,20,66,18,"String"],[68,26,66,24],[68,27,66,25,"countryIso2"],[68,38,66,36],[68,42,66,40],[68,44,66,42],[68,45,66,43],[68,46,66,44,"toUpperCase"],[68,57,66,55],[68,58,66,56],[68,59,66,57],[69,4,67,2],[69,8,67,6],[69,9,67,7,"country"],[69,16,67,14],[69,21,67,19],[69,25,67,23],[69,29,67,27,"country"],[69,36,67,34],[69,41,67,39],[69,45,67,43],[69,50,67,48,"national"],[69,58,67,56],[69,59,67,57,"length"],[69,65,67,63],[69,70,67,68],[69,72,67,70],[69,74,67,72],[70,6,68,4],[70,13,68,11],[70,15,68,13],[71,4,69,2],[72,4,71,2],[72,11,71,9],[72,15,71,13,"dialCode"],[72,23,71,21],[72,26,71,24,"national"],[72,34,71,32],[72,36,71,34],[73,2,72,0],[74,0,72,1],[74,3]],"functionMap":{"names":["<global>","digitsOnly","normalizeNationalDigitsForCountry","normalizePhoneForApi"],"mappings":"AAA;ACI;CDE;AEE;CFmB;OGE;CH0C"},"hasCjsExports":false},"type":"js/module"}]}