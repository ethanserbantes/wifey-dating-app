{"dependencies":[{"name":"../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"W1BH0a3HSCo8tOLXH7X+m5FGigs=","exportNames":["*"],"imports":1}},{"name":"./lib/bindReporter.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":53,"index":94}}],"key":"yZXTUsWh1M46DyxIbZ88NUHRymg=","exportNames":["*"],"imports":1}},{"name":"./lib/getVisibilityWatcher.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":95},"end":{"line":3,"column":69,"index":164}}],"key":"nHtaM9v//YlxGAv+O3W06C++qp8=","exportNames":["*"],"imports":1}},{"name":"./lib/initMetric.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":165},"end":{"line":4,"column":49,"index":214}}],"key":"3h8m+kvAV2o3xN93IHHrmBqzs4s=","exportNames":["*"],"imports":1}},{"name":"./lib/initUnique.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":215},"end":{"line":5,"column":49,"index":264}}],"key":"hut8a99D/Gv1jGW5dfMa/Znpg4I=","exportNames":["*"],"imports":1}},{"name":"./lib/LayoutShiftManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":265},"end":{"line":6,"column":65,"index":330}}],"key":"NoAP3DDO8vMmiMFN3TGXUH1dQPA=","exportNames":["*"],"imports":1}},{"name":"./lib/observe.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":331},"end":{"line":7,"column":43,"index":374}}],"key":"Cz2RoRvLyGQyofIDJmcgFo6dicM=","exportNames":["*"],"imports":1}},{"name":"./lib/runOnce.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":375},"end":{"line":8,"column":43,"index":418}}],"key":"bwPHkAH8Ixo/Lbt+Aw9KJe855Jk=","exportNames":["*"],"imports":1}},{"name":"./onFCP.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":419},"end":{"line":9,"column":35,"index":454}}],"key":"9wYIWX7pl9yGISdpNXhM9vCUFQk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"CLSThresholds\", {\n    enumerable: true,\n    get: function () {\n      return CLSThresholds;\n    }\n  });\n  Object.defineProperty(exports, \"onCLS\", {\n    enumerable: true,\n    get: function () {\n      return onCLS;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0]);\n  var _libBindReporterJs = require(_dependencyMap[1]);\n  var _libGetVisibilityWatcherJs = require(_dependencyMap[2]);\n  var _libInitMetricJs = require(_dependencyMap[3]);\n  var _libInitUniqueJs = require(_dependencyMap[4]);\n  var _libLayoutShiftManagerJs = require(_dependencyMap[5]);\n  var _libObserveJs = require(_dependencyMap[6]);\n  var _libRunOnceJs = require(_dependencyMap[7]);\n  var _onFCPJs = require(_dependencyMap[8]);\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /** Thresholds for CLS. See https://web.dev/articles/cls#what_is_a_good_cls_score */\n  var CLSThresholds = [0.1, 0.25];\n\n  /**\n   * Calculates the [CLS](https://web.dev/articles/cls) value for the current page and\n   * calls the `callback` function once the value is ready to be reported, along\n   * with all `layout-shift` performance entries that were used in the metric\n   * value calculation. The reported value is a `double` (corresponding to a\n   * [layout shift score](https://web.dev/articles/cls#layout_shift_score)).\n   *\n   * If the `reportAllChanges` configuration option is set to `true`, the\n   * `callback` function will be called as soon as the value is initially\n   * determined as well as any time the value changes throughout the page\n   * lifespan.\n   *\n   * _**Important:** CLS should be continually monitored for changes throughout\n   * the entire lifespan of a pageâ€”including if the user returns to the page after\n   * it's been hidden/backgrounded. However, since browsers often [will not fire\n   * additional callbacks once the user has backgrounded a\n   * page](https://developer.chrome.com/blog/page-lifecycle-api/#advice-hidden),\n   * `callback` is always called when the page's visibility state changes to\n   * hidden. As a result, the `callback` function might be called multiple times\n   * during the same page load._\n   */\n  var onCLS = function (onReport) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // Start monitoring FCP so we can only report CLS if FCP is also reported.\n    // Note: this is done to match the current behavior of CrUX.\n    (0, _onFCPJs.onFCP)((0, _libRunOnceJs.runOnce)(() => {\n      var metric = (0, _libInitMetricJs.initMetric)('CLS', 0);\n      var report;\n      var visibilityWatcher = (0, _libGetVisibilityWatcherJs.getVisibilityWatcher)();\n      var layoutShiftManager = (0, _libInitUniqueJs.initUnique)(opts, _libLayoutShiftManagerJs.LayoutShiftManager);\n      var handleEntries = entries => {\n        for (var entry of entries) {\n          layoutShiftManager._processEntry(entry);\n        }\n\n        // If the current session value is larger than the current CLS value,\n        // update CLS and the entries contributing to it.\n        if (layoutShiftManager._sessionValue > metric.value) {\n          metric.value = layoutShiftManager._sessionValue;\n          metric.entries = layoutShiftManager._sessionEntries;\n          report();\n        }\n      };\n      var po = (0, _libObserveJs.observe)('layout-shift', handleEntries);\n      if (po) {\n        report = (0, _libBindReporterJs.bindReporter)(onReport, metric, CLSThresholds, opts.reportAllChanges);\n        visibilityWatcher.onHidden(() => {\n          handleEntries(po.takeRecords());\n          report(true);\n        });\n\n        // Queue a task to report (if nothing else triggers a report first).\n        // This allows CLS to be reported as soon as FCP fires when\n        // `reportAllChanges` is true.\n        _typesJs.WINDOW?.setTimeout?.(report);\n      }\n    }));\n  };\n});","lineCount":105,"map":[[7,2,95,0,"Object"],[7,8,95,0],[7,9,95,0,"defineProperty"],[7,23,95,0],[7,24,95,0,"exports"],[7,31,95,0],[8,4,95,0,"enumerable"],[8,14,95,0],[9,4,95,0,"get"],[9,7,95,0],[9,18,95,0,"get"],[9,19,95,0],[10,6,95,0],[10,13,95,9,"CLSThresholds"],[10,26,95,22],[11,4,95,22],[12,2,95,22],[13,2,95,0,"Object"],[13,8,95,0],[13,9,95,0,"defineProperty"],[13,23,95,0],[13,24,95,0,"exports"],[13,31,95,0],[14,4,95,0,"enumerable"],[14,14,95,0],[15,4,95,0,"get"],[15,7,95,0],[15,18,95,0,"get"],[15,19,95,0],[16,6,95,0],[16,13,95,24,"onCLS"],[16,18,95,29],[17,4,95,29],[18,2,95,29],[19,2,1,0],[19,6,1,0,"_typesJs"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_libBindReporterJs"],[20,24,2,0],[20,27,2,0,"require"],[20,34,2,0],[20,35,2,0,"_dependencyMap"],[20,49,2,0],[21,2,3,0],[21,6,3,0,"_libGetVisibilityWatcherJs"],[21,32,3,0],[21,35,3,0,"require"],[21,42,3,0],[21,43,3,0,"_dependencyMap"],[21,57,3,0],[22,2,4,0],[22,6,4,0,"_libInitMetricJs"],[22,22,4,0],[22,25,4,0,"require"],[22,32,4,0],[22,33,4,0,"_dependencyMap"],[22,47,4,0],[23,2,5,0],[23,6,5,0,"_libInitUniqueJs"],[23,22,5,0],[23,25,5,0,"require"],[23,32,5,0],[23,33,5,0,"_dependencyMap"],[23,47,5,0],[24,2,6,0],[24,6,6,0,"_libLayoutShiftManagerJs"],[24,30,6,0],[24,33,6,0,"require"],[24,40,6,0],[24,41,6,0,"_dependencyMap"],[24,55,6,0],[25,2,7,0],[25,6,7,0,"_libObserveJs"],[25,19,7,0],[25,22,7,0,"require"],[25,29,7,0],[25,30,7,0,"_dependencyMap"],[25,44,7,0],[26,2,8,0],[26,6,8,0,"_libRunOnceJs"],[26,19,8,0],[26,22,8,0,"require"],[26,29,8,0],[26,30,8,0,"_dependencyMap"],[26,44,8,0],[27,2,9,0],[27,6,9,0,"_onFCPJs"],[27,14,9,0],[27,17,9,0,"require"],[27,24,9,0],[27,25,9,0,"_dependencyMap"],[27,39,9,0],[28,2,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[34,0,17,0],[35,0,18,0],[36,0,19,0],[37,0,20,0],[38,0,21,0],[39,0,22,0],[40,0,23,0],[41,0,24,0],[42,0,25,0],[44,2,28,0],[45,2,29,0],[45,6,29,6,"CLSThresholds"],[45,19,29,19],[45,22,29,22],[45,23,29,23],[45,26,29,26],[45,28,29,28],[45,32,29,32],[45,33,29,33],[47,2,31,0],[48,0,32,0],[49,0,33,0],[50,0,34,0],[51,0,35,0],[52,0,36,0],[53,0,37,0],[54,0,38,0],[55,0,39,0],[56,0,40,0],[57,0,41,0],[58,0,42,0],[59,0,43,0],[60,0,44,0],[61,0,45,0],[62,0,46,0],[63,0,47,0],[64,0,48,0],[65,0,49,0],[66,0,50,0],[67,0,51,0],[68,2,52,0],[68,6,52,6,"onCLS"],[68,11,52,11],[68,14,52,14],[68,23,52,14,"onCLS"],[68,24,52,15,"onReport"],[68,32,52,23],[68,34,52,39],[69,4,52,39],[69,8,52,25,"opts"],[69,12,52,29],[69,15,52,29,"arguments"],[69,24,52,29],[69,25,52,29,"length"],[69,31,52,29],[69,39,52,29,"arguments"],[69,48,52,29],[69,56,52,29,"undefined"],[69,65,52,29],[69,68,52,29,"arguments"],[69,77,52,29],[69,83,52,32],[69,84,52,33],[69,85,52,34],[70,4,53,2],[71,4,54,2],[72,4,55,2],[72,8,55,2,"onFCP"],[72,16,55,7],[72,17,55,7,"onFCP"],[72,22,55,7],[72,24,56,4],[72,28,56,4,"runOnce"],[72,41,56,11],[72,42,56,11,"runOnce"],[72,49,56,11],[72,51,56,12],[72,57,56,18],[73,6,57,6],[73,10,57,12,"metric"],[73,16,57,18],[73,19,57,21],[73,23,57,21,"initMetric"],[73,39,57,31],[73,40,57,31,"initMetric"],[73,50,57,31],[73,52,57,32],[73,57,57,37],[73,59,57,39],[73,60,57,40],[73,61,57,41],[74,6,58,6],[74,10,58,10,"report"],[74,16,58,16],[75,6,59,6],[75,10,59,12,"visibilityWatcher"],[75,27,59,29],[75,30,59,32],[75,34,59,32,"getVisibilityWatcher"],[75,60,59,52],[75,61,59,52,"getVisibilityWatcher"],[75,81,59,52],[75,83,59,53],[75,84,59,54],[76,6,61,6],[76,10,61,12,"layoutShiftManager"],[76,28,61,30],[76,31,61,33],[76,35,61,33,"initUnique"],[76,51,61,43],[76,52,61,43,"initUnique"],[76,62,61,43],[76,64,61,44,"opts"],[76,68,61,48],[76,70,61,50,"LayoutShiftManager"],[76,94,61,68],[76,95,61,68,"LayoutShiftManager"],[76,113,61,68],[76,114,61,69],[77,6,63,6],[77,10,63,12,"handleEntries"],[77,23,63,25],[77,26,63,29,"entries"],[77,33,63,36],[77,37,63,41],[78,8,64,8],[78,13,64,13],[78,17,64,19,"entry"],[78,22,64,24],[78,26,64,28,"entries"],[78,33,64,35],[78,35,64,37],[79,10,65,10,"layoutShiftManager"],[79,28,65,28],[79,29,65,29,"_processEntry"],[79,42,65,42],[79,43,65,43,"entry"],[79,48,65,48],[79,49,65,49],[80,8,66,8],[82,8,68,8],[83,8,69,8],[84,8,70,8],[84,12,70,12,"layoutShiftManager"],[84,30,70,30],[84,31,70,31,"_sessionValue"],[84,44,70,44],[84,47,70,47,"metric"],[84,53,70,53],[84,54,70,54,"value"],[84,59,70,59],[84,61,70,61],[85,10,71,10,"metric"],[85,16,71,16],[85,17,71,17,"value"],[85,22,71,22],[85,25,71,25,"layoutShiftManager"],[85,43,71,43],[85,44,71,44,"_sessionValue"],[85,57,71,57],[86,10,72,10,"metric"],[86,16,72,16],[86,17,72,17,"entries"],[86,24,72,24],[86,27,72,27,"layoutShiftManager"],[86,45,72,45],[86,46,72,46,"_sessionEntries"],[86,61,72,61],[87,10,73,10,"report"],[87,16,73,16],[87,17,73,17],[87,18,73,18],[88,8,74,8],[89,6,75,6],[89,7,75,7],[90,6,77,6],[90,10,77,12,"po"],[90,12,77,14],[90,15,77,17],[90,19,77,17,"observe"],[90,32,77,24],[90,33,77,24,"observe"],[90,40,77,24],[90,42,77,25],[90,56,77,39],[90,58,77,41,"handleEntries"],[90,71,77,54],[90,72,77,55],[91,6,78,6],[91,10,78,10,"po"],[91,12,78,12],[91,14,78,14],[92,8,79,8,"report"],[92,14,79,14],[92,17,79,17],[92,21,79,17,"bindReporter"],[92,39,79,29],[92,40,79,29,"bindReporter"],[92,52,79,29],[92,54,79,30,"onReport"],[92,62,79,38],[92,64,79,40,"metric"],[92,70,79,46],[92,72,79,48,"CLSThresholds"],[92,85,79,61],[92,87,79,63,"opts"],[92,91,79,67],[92,92,79,68,"reportAllChanges"],[92,108,79,84],[92,109,79,85],[93,8,81,8,"visibilityWatcher"],[93,25,81,25],[93,26,81,26,"onHidden"],[93,34,81,34],[93,35,81,35],[93,41,81,41],[94,10,82,10,"handleEntries"],[94,23,82,23],[94,24,82,24,"po"],[94,26,82,26],[94,27,82,27,"takeRecords"],[94,38,82,38],[94,39,82,39],[94,40,82,41],[94,41,82,42],[95,10,83,10,"report"],[95,16,83,16],[95,17,83,17],[95,21,83,21],[95,22,83,22],[96,8,84,8],[96,9,84,9],[96,10,84,10],[98,8,86,8],[99,8,87,8],[100,8,88,8],[101,8,89,8,"WINDOW"],[101,16,89,14],[101,17,89,14,"WINDOW"],[101,23,89,14],[101,25,89,16,"setTimeout"],[101,35,89,26],[101,38,89,29,"report"],[101,44,89,35],[101,45,89,36],[102,6,90,6],[103,4,91,4],[103,5,91,5],[103,6,92,2],[103,7,92,3],[104,2,93,0],[104,3,93,1],[105,0,93,2],[105,3]],"functionMap":{"names":["<global>","onCLS","runOnce$argument_0","handleEntries","visibilityWatcher.onHidden$argument_0"],"mappings":"AAA;cCmD;YCI;4BCO;ODY;mCEM;SFG;KDO;CDE"},"hasCjsExports":false},"type":"js/module"}]}