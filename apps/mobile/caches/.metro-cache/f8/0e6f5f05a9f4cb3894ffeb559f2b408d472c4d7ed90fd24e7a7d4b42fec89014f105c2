{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":36,"index":36}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-navigation/native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":37},"end":{"line":2,"column":58,"index":95}}],"key":"yKhyWCfwa1gXEwEbMKnWHykYbZ4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useMessagesAutoRefresh = useMessagesAutoRefresh;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNavigationNative = require(_dependencyMap[1], \"@react-navigation/native\");\n  function useMessagesAutoRefresh(_ref) {\n    _s();\n    var user = _ref.user,\n      closedRows = _ref.closedRows,\n      loadMatches = _ref.loadMatches,\n      markMatchesSeen = _ref.markMatchesSeen,\n      refreshCredits = _ref.refreshCredits,\n      hasCredits = _ref.hasCredits,\n      attemptRestoreCredits = _ref.attemptRestoreCredits;\n    // Refresh when returning to tab\n    (0, _reactNavigationNative.useFocusEffect)((0, _react.useCallback)(() => {\n      if (!user?.id) return;\n\n      // Keep these cheap and non-blocking\n      markMatchesSeen(user.id);\n      loadMatches(user.id);\n      refreshCredits(user.id);\n\n      // NEW: if they're locked but they just completed a purchase,\n      // try a one-shot restore+claim here so they don't get stuck.\n      if (!hasCredits && typeof attemptRestoreCredits === \"function\") {\n        attemptRestoreCredits(user.id).catch(() => null);\n      }\n    }, [attemptRestoreCredits, hasCredits, loadMatches, markMatchesSeen, refreshCredits, user?.id]));\n\n    // Auto-refresh if we have terminal rows (so they auto-dismiss)\n    (0, _reactNavigationNative.useFocusEffect)((0, _react.useCallback)(() => {\n      if (!user?.id) return;\n      var hasTerminal = (closedRows?.length || 0) > 0;\n      if (!hasTerminal) return;\n      var id = setTimeout(() => {\n        loadMatches(user.id);\n      }, 4000);\n      return () => clearTimeout(id);\n    }, [closedRows?.length, loadMatches, user?.id]));\n  }\n  _s(useMessagesAutoRefresh, \"D1u/CFEz2BqbNc9Az6klnPzoDsc=\", false, function () {\n    return [_reactNavigationNative.useFocusEffect, _reactNavigationNative.useFocusEffect];\n  });\n});","lineCount":50,"map":[[8,2,4,0,"exports"],[8,9,4,0],[8,10,4,0,"useMessagesAutoRefresh"],[8,32,4,0],[8,35,4,0,"useMessagesAutoRefresh"],[8,57,4,0],[9,2,1,0],[9,6,1,0,"_react"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,6,2,0,"_reactNavigationNative"],[10,28,2,0],[10,31,2,0,"require"],[10,38,2,0],[10,39,2,0,"_dependencyMap"],[10,53,2,0],[11,2,4,7],[11,11,4,16,"useMessagesAutoRefresh"],[11,33,4,38,"useMessagesAutoRefresh"],[11,34,4,38,"_ref"],[11,38,4,38],[11,40,12,3],[12,4,12,3,"_s"],[12,6,12,3],[13,4,12,3],[13,8,5,2,"user"],[13,12,5,6],[13,15,5,6,"_ref"],[13,19,5,6],[13,20,5,2,"user"],[13,24,5,6],[14,6,6,2,"closedRows"],[14,16,6,12],[14,19,6,12,"_ref"],[14,23,6,12],[14,24,6,2,"closedRows"],[14,34,6,12],[15,6,7,2,"loadMatches"],[15,17,7,13],[15,20,7,13,"_ref"],[15,24,7,13],[15,25,7,2,"loadMatches"],[15,36,7,13],[16,6,8,2,"markMatchesSeen"],[16,21,8,17],[16,24,8,17,"_ref"],[16,28,8,17],[16,29,8,2,"markMatchesSeen"],[16,44,8,17],[17,6,9,2,"refreshCredits"],[17,20,9,16],[17,23,9,16,"_ref"],[17,27,9,16],[17,28,9,2,"refreshCredits"],[17,42,9,16],[18,6,10,2,"hasCredits"],[18,16,10,12],[18,19,10,12,"_ref"],[18,23,10,12],[18,24,10,2,"hasCredits"],[18,34,10,12],[19,6,11,2,"attemptRestoreCredits"],[19,27,11,23],[19,30,11,23,"_ref"],[19,34,11,23],[19,35,11,2,"attemptRestoreCredits"],[19,56,11,23],[20,4,13,2],[21,4,14,2],[21,8,14,2,"useFocusEffect"],[21,30,14,16],[21,31,14,16,"useFocusEffect"],[21,45,14,16],[21,47,15,4],[21,51,15,4,"useCallback"],[21,57,15,15],[21,58,15,15,"useCallback"],[21,69,15,15],[21,71,15,16],[21,77,15,22],[22,6,16,6],[22,10,16,10],[22,11,16,11,"user"],[22,15,16,15],[22,17,16,17,"id"],[22,19,16,19],[22,21,16,21],[24,6,18,6],[25,6,19,6,"markMatchesSeen"],[25,21,19,21],[25,22,19,22,"user"],[25,26,19,26],[25,27,19,27,"id"],[25,29,19,29],[25,30,19,30],[26,6,20,6,"loadMatches"],[26,17,20,17],[26,18,20,18,"user"],[26,22,20,22],[26,23,20,23,"id"],[26,25,20,25],[26,26,20,26],[27,6,21,6,"refreshCredits"],[27,20,21,20],[27,21,21,21,"user"],[27,25,21,25],[27,26,21,26,"id"],[27,28,21,28],[27,29,21,29],[29,6,23,6],[30,6,24,6],[31,6,25,6],[31,10,25,10],[31,11,25,11,"hasCredits"],[31,21,25,21],[31,25,25,25],[31,32,25,32,"attemptRestoreCredits"],[31,53,25,53],[31,58,25,58],[31,68,25,68],[31,70,25,70],[32,8,26,8,"attemptRestoreCredits"],[32,29,26,29],[32,30,26,30,"user"],[32,34,26,34],[32,35,26,35,"id"],[32,37,26,37],[32,38,26,38],[32,39,26,39,"catch"],[32,44,26,44],[32,45,26,45],[32,51,26,51],[32,55,26,55],[32,56,26,56],[33,6,27,6],[34,4,28,4],[34,5,28,5],[34,7,28,7],[34,8,29,6,"attemptRestoreCredits"],[34,29,29,27],[34,31,30,6,"hasCredits"],[34,41,30,16],[34,43,31,6,"loadMatches"],[34,54,31,17],[34,56,32,6,"markMatchesSeen"],[34,71,32,21],[34,73,33,6,"refreshCredits"],[34,87,33,20],[34,89,34,6,"user"],[34,93,34,10],[34,95,34,12,"id"],[34,97,34,14],[34,98,35,5],[34,99,36,2],[34,100,36,3],[36,4,38,2],[37,4,39,2],[37,8,39,2,"useFocusEffect"],[37,30,39,16],[37,31,39,16,"useFocusEffect"],[37,45,39,16],[37,47,40,4],[37,51,40,4,"useCallback"],[37,57,40,15],[37,58,40,15,"useCallback"],[37,69,40,15],[37,71,40,16],[37,77,40,22],[38,6,41,6],[38,10,41,10],[38,11,41,11,"user"],[38,15,41,15],[38,17,41,17,"id"],[38,19,41,19],[38,21,41,21],[39,6,42,6],[39,10,42,12,"hasTerminal"],[39,21,42,23],[39,24,42,26],[39,25,42,27,"closedRows"],[39,35,42,37],[39,37,42,39,"length"],[39,43,42,45],[39,47,42,49],[39,48,42,50],[39,52,42,54],[39,53,42,55],[40,6,43,6],[40,10,43,10],[40,11,43,11,"hasTerminal"],[40,22,43,22],[40,24,43,24],[41,6,45,6],[41,10,45,12,"id"],[41,12,45,14],[41,15,45,17,"setTimeout"],[41,25,45,27],[41,26,45,28],[41,32,45,34],[42,8,46,8,"loadMatches"],[42,19,46,19],[42,20,46,20,"user"],[42,24,46,24],[42,25,46,25,"id"],[42,27,46,27],[42,28,46,28],[43,6,47,6],[43,7,47,7],[43,9,47,9],[43,13,47,13],[43,14,47,14],[44,6,49,6],[44,13,49,13],[44,19,49,19,"clearTimeout"],[44,31,49,31],[44,32,49,32,"id"],[44,34,49,34],[44,35,49,35],[45,4,50,4],[45,5,50,5],[45,7,50,7],[45,8,50,8,"closedRows"],[45,18,50,18],[45,20,50,20,"length"],[45,26,50,26],[45,28,50,28,"loadMatches"],[45,39,50,39],[45,41,50,41,"user"],[45,45,50,45],[45,47,50,47,"id"],[45,49,50,49],[45,50,50,50],[45,51,51,2],[45,52,51,3],[46,2,52,0],[47,2,52,1,"_s"],[47,4,52,1],[47,5,4,16,"useMessagesAutoRefresh"],[47,27,4,38],[48,4,4,38],[48,12,14,2,"useFocusEffect"],[48,34,14,16],[48,35,14,16,"useFocusEffect"],[48,49,14,16],[48,51,39,2,"useFocusEffect"],[48,73,39,16],[48,74,39,16,"useFocusEffect"],[48,88,39,16],[49,2,39,16],[50,0,39,16],[50,3]],"functionMap":{"names":["<global>","useMessagesAutoRefresh","useFocusEffect$argument_0","attemptRestoreCredits._catch$argument_0","setTimeout$argument_0","<anonymous>"],"mappings":"AAA;OCG;gBCW;6CCW,UD;KDE;gBCY;4BEK;OFE;aGE,sBH;KDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}