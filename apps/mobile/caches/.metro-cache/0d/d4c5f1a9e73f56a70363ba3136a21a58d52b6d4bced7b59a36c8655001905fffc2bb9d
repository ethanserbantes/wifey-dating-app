{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":83},"end":{"line":3,"column":69,"index":152}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useProfileData = useProfileData;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  function useProfileData() {\n    const {\n      data,\n      isLoading,\n      error\n    } = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"profile\", \"me\"],\n      queryFn: async () => {\n        const userData = await AsyncStorage.default.getItem(\"user\");\n        if (!userData) {\n          throw new Error(\"You're not signed in.\");\n        }\n        const user = JSON.parse(userData);\n        const response = await fetch(`/api/profile/me?userId=${user.id}`);\n        if (!response.ok) {\n          throw new Error(`When fetching /api/profile/me, the response was [${response.status}] ${response.statusText}`);\n        }\n        const json = await response.json();\n        return {\n          user,\n          profile: json.profile\n        };\n      }\n    });\n    const serverProfile = data?.profile;\n    const preferences = (0, _react.useMemo)(() => {\n      const raw = serverProfile?.preferences;\n      if (!raw) return {};\n      if (typeof raw === \"object\") return raw;\n      try {\n        return JSON.parse(raw);\n      } catch {\n        return {};\n      }\n    }, [serverProfile?.preferences]);\n    return {\n      data,\n      isLoading,\n      error,\n      serverProfile,\n      preferences\n    };\n  }\n});","lineCount":60,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useProfileData"],[12,24,5,0],[12,27,5,0,"useProfileData"],[12,41,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_tanstackReactQuery"],[14,25,2,0],[14,28,2,0,"require"],[14,35,2,0],[14,36,2,0,"_dependencyMap"],[14,50,2,0],[15,2,3,0],[15,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[15,42,3,0],[15,45,3,0,"require"],[15,52,3,0],[15,53,3,0,"_dependencyMap"],[15,67,3,0],[16,2,3,0],[16,6,3,0,"AsyncStorage"],[16,18,3,0],[16,21,3,0,"_interopDefault"],[16,36,3,0],[16,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[16,73,3,0],[17,2,5,7],[17,11,5,16,"useProfileData"],[17,25,5,30,"useProfileData"],[17,26,5,30],[17,28,5,33],[18,4,6,2],[18,10,6,8],[19,6,6,10,"data"],[19,10,6,14],[20,6,6,16,"isLoading"],[20,15,6,25],[21,6,6,27,"error"],[22,4,6,33],[22,5,6,34],[22,8,6,37],[22,12,6,37,"useQuery"],[22,31,6,45],[22,32,6,45,"useQuery"],[22,40,6,45],[22,42,6,46],[23,6,7,4,"queryKey"],[23,14,7,12],[23,16,7,14],[23,17,7,15],[23,26,7,24],[23,28,7,26],[23,32,7,30],[23,33,7,31],[24,6,8,4,"queryFn"],[24,13,8,11],[24,15,8,13],[24,21,8,13,"queryFn"],[24,22,8,13],[24,27,8,25],[25,8,9,6],[25,14,9,12,"userData"],[25,22,9,20],[25,25,9,23],[25,31,9,29,"AsyncStorage"],[25,43,9,41],[25,44,9,41,"default"],[25,51,9,41],[25,52,9,42,"getItem"],[25,59,9,49],[25,60,9,50],[25,66,9,56],[25,67,9,57],[26,8,10,6],[26,12,10,10],[26,13,10,11,"userData"],[26,21,10,19],[26,23,10,21],[27,10,11,8],[27,16,11,14],[27,20,11,18,"Error"],[27,25,11,23],[27,26,11,24],[27,49,11,47],[27,50,11,48],[28,8,12,6],[29,8,13,6],[29,14,13,12,"user"],[29,18,13,16],[29,21,13,19,"JSON"],[29,25,13,23],[29,26,13,24,"parse"],[29,31,13,29],[29,32,13,30,"userData"],[29,40,13,38],[29,41,13,39],[30,8,15,6],[30,14,15,12,"response"],[30,22,15,20],[30,25,15,23],[30,31,15,29,"fetch"],[30,36,15,34],[30,37,15,35],[30,63,15,61,"user"],[30,67,15,65],[30,68,15,66,"id"],[30,70,15,68],[30,72,15,70],[30,73,15,71],[31,8,16,6],[31,12,16,10],[31,13,16,11,"response"],[31,21,16,19],[31,22,16,20,"ok"],[31,24,16,22],[31,26,16,24],[32,10,17,8],[32,16,17,14],[32,20,17,18,"Error"],[32,25,17,23],[32,26,18,10],[32,78,18,62,"response"],[32,86,18,70],[32,87,18,71,"status"],[32,93,18,77],[32,98,18,82,"response"],[32,106,18,90],[32,107,18,91,"statusText"],[32,117,18,101],[32,119,19,8],[32,120,19,9],[33,8,20,6],[34,8,21,6],[34,14,21,12,"json"],[34,18,21,16],[34,21,21,19],[34,27,21,25,"response"],[34,35,21,33],[34,36,21,34,"json"],[34,40,21,38],[34,41,21,39],[34,42,21,40],[35,8,22,6],[35,15,22,13],[36,10,22,15,"user"],[36,14,22,19],[37,10,22,21,"profile"],[37,17,22,28],[37,19,22,30,"json"],[37,23,22,34],[37,24,22,35,"profile"],[38,8,22,43],[38,9,22,44],[39,6,23,4],[40,4,24,2],[40,5,24,3],[40,6,24,4],[41,4,26,2],[41,10,26,8,"serverProfile"],[41,23,26,21],[41,26,26,24,"data"],[41,30,26,28],[41,32,26,30,"profile"],[41,39,26,37],[42,4,28,2],[42,10,28,8,"preferences"],[42,21,28,19],[42,24,28,22],[42,28,28,22,"useMemo"],[42,34,28,29],[42,35,28,29,"useMemo"],[42,42,28,29],[42,44,28,30],[42,50,28,36],[43,6,29,4],[43,12,29,10,"raw"],[43,15,29,13],[43,18,29,16,"serverProfile"],[43,31,29,29],[43,33,29,31,"preferences"],[43,44,29,42],[44,6,30,4],[44,10,30,8],[44,11,30,9,"raw"],[44,14,30,12],[44,16,30,14],[44,23,30,21],[44,24,30,22],[44,25,30,23],[45,6,31,4],[45,10,31,8],[45,17,31,15,"raw"],[45,20,31,18],[45,25,31,23],[45,33,31,31],[45,35,31,33],[45,42,31,40,"raw"],[45,45,31,43],[46,6,32,4],[46,10,32,8],[47,8,33,6],[47,15,33,13,"JSON"],[47,19,33,17],[47,20,33,18,"parse"],[47,25,33,23],[47,26,33,24,"raw"],[47,29,33,27],[47,30,33,28],[48,6,34,4],[48,7,34,5],[48,8,34,6],[48,14,34,12],[49,8,35,6],[49,15,35,13],[49,16,35,14],[49,17,35,15],[50,6,36,4],[51,4,37,2],[51,5,37,3],[51,7,37,5],[51,8,37,6,"serverProfile"],[51,21,37,19],[51,23,37,21,"preferences"],[51,34,37,32],[51,35,37,33],[51,36,37,34],[52,4,39,2],[52,11,39,9],[53,6,40,4,"data"],[53,10,40,8],[54,6,41,4,"isLoading"],[54,15,41,13],[55,6,42,4,"error"],[55,11,42,9],[56,6,43,4,"serverProfile"],[56,19,43,17],[57,6,44,4,"preferences"],[58,4,45,2],[58,5,45,3],[59,2,46,0],[60,0,46,1],[60,3]],"functionMap":{"names":["<global>","useProfileData","useQuery$argument_0.queryFn","useMemo$argument_0"],"mappings":"AAA;OCI;aCG;KDe;8BEK;GFS;CDS"},"hasCjsExports":false},"type":"js/module"}]}