{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":74,"index":74}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":75},"end":{"line":2,"column":51,"index":126}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react-native-purchases","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":127},"end":{"line":3,"column":47,"index":174}}],"key":"w6kXlt3+wzwVuELA/KXcfEkh03Q=","exportNames":["*"],"imports":1}},{"name":"@/utils/subscription","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":175},"end":{"line":4,"column":62,"index":237}}],"key":"jUbXHGp0jcOKUUYC/w0fagW62w8=","exportNames":["*"],"imports":1}},{"name":"@/utils/dateCreditsHelpers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":88,"index":326}}],"key":"oRWBdvQUhGiyZ/vbJNT/hHj85Fs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesCredits = useMessagesCredits;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _expoRouter = require(_dependencyMap[3]);\n  var _reactNativePurchases = require(_dependencyMap[4]);\n  var Purchases = _interopDefault(_reactNativePurchases);\n  var _utilsSubscription = require(_dependencyMap[5]);\n  var _utilsDateCreditsHelpers = require(_dependencyMap[6]);\n  function useMessagesCredits(_ref) {\n    var jwt = _ref.jwt,\n      user = _ref.user,\n      loadMatches = _ref.loadMatches;\n    var params = (0, _expoRouter.useLocalSearchParams)();\n    var creditsRefreshParam = (0, _react.useMemo)(() => {\n      var raw = params?.creditsRefresh;\n      var v = Array.isArray(raw) ? raw[0] : raw;\n      var s = v != null ? String(v).trim() : \"\";\n      return s || null;\n    }, [params?.creditsRefresh]);\n    var _useState = (0, _react.useState)({\n        credits: 0,\n        maxCredits: 3\n      }),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      creditStatus = _useState2[0],\n      setCreditStatus = _useState2[1];\n    var _useState3 = (0, _react.useState)({\n        restoring: false,\n        lastError: null\n      }),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      restoreState = _useState4[0],\n      setRestoreState = _useState4[1];\n    var refreshCredits = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          var uid = Number(userId);\n          var hasUid = Number.isFinite(uid);\n          var hasJwt = jwt && typeof jwt === \"string\";\n          if (!hasUid && !hasJwt) {\n            return null;\n          }\n          var url = hasUid ? `/api/date-credits/status?userId=${uid}` : \"/api/date-credits/status\";\n          var resp = yield fetch(url, {\n            headers: hasJwt ? {\n              Authorization: `Bearer ${jwt}`\n            } : undefined\n          });\n          if (!resp.ok) {\n            throw new Error(`When fetching /api/date-credits/status, the response was [${resp.status}] ${resp.statusText}`);\n          }\n          var data = yield resp.json();\n          var next = {\n            credits: Number(data?.credits || 0),\n            maxCredits: Number(data?.maxCredits || 3)\n          };\n          setCreditStatus(next);\n          return next;\n        } catch (e) {\n          console.error(e);\n          return null;\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [jwt]);\n    var restoreInFlightRef = (0, _react.useRef)(false);\n    var attemptRestoreCredits = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (userId) {\n        var hasJwt = jwt && typeof jwt === \"string\";\n        var uid = Number(userId);\n        if (!Number.isFinite(uid)) return null;\n        if (!hasJwt) return null;\n\n        // Don't attempt restore if user already has credits â€” the initial purchase\n        // claim already worked. Restoring here risks double-crediting because\n        // CustomerInfo can return a different transaction ID than what was used\n        // in the original claim.\n        if (creditStatus.credits > 0) return null;\n\n        // Avoid spamming RevenueCat / server\n        if (restoreInFlightRef.current) return null;\n        restoreInFlightRef.current = true;\n        setRestoreState({\n          restoring: true,\n          lastError: null\n        });\n        try {\n          var _configurePurchasesOn = (0, _utilsSubscription.configurePurchasesOnce)(),\n            ok = _configurePurchasesOn.ok;\n          if (!ok) {\n            return null;\n          }\n\n          // Make sure RevenueCat is logged in as this user before syncing.\n          yield Purchases.default.logIn(String(uid)).catch(() => null);\n\n          // Ensure RC receipt is synced (helps TestFlight)\n          if (typeof Purchases.default.syncPurchases === \"function\") {\n            yield Purchases.default.syncPurchases().catch(() => null);\n          }\n          var info = yield Purchases.default.getCustomerInfo().catch(() => null);\n          var latestTxn = (0, _utilsDateCreditsHelpers.extractLatestTransactionIdFromCustomerInfo)(info);\n          if (!latestTxn?.transactionId || !latestTxn?.productId) {\n            return null;\n          }\n\n          // Claim on the backend (idempotent by transaction id)\n          var resp = yield fetch(\"/api/date-credits/claim\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${jwt}`\n            },\n            body: JSON.stringify({\n              transactionId: latestTxn.transactionId,\n              productId: latestTxn.productId\n            })\n          });\n          var json = yield resp.json().catch(() => null);\n          if (!resp.ok) {\n            throw new Error(json?.error || `Claim failed (${resp.status})`);\n          }\n\n          // Refresh credits after claim\n          var next = yield refreshCredits(uid);\n\n          // Also refresh matches so the newly-unlocked section populates immediately\n          if (next?.credits > 0) {\n            loadMatches(uid).catch(() => null);\n          }\n          return next;\n        } catch (e) {\n          console.error(e);\n          setRestoreState({\n            restoring: false,\n            lastError: e?.message || \"Failed\"\n          });\n          return null;\n        } finally {\n          setRestoreState(s => ({\n            ...s,\n            restoring: false\n          }));\n          restoreInFlightRef.current = false;\n        }\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [jwt, loadMatches, refreshCredits, creditStatus.credits]);\n    var lastCreditsRefreshRef = (0, _react.useRef)(null);\n    (0, _react.useEffect)(() => {\n      if (!creditsRefreshParam) return;\n      if (!user?.id) return;\n      if (lastCreditsRefreshRef.current === creditsRefreshParam) {\n        return;\n      }\n      lastCreditsRefreshRef.current = creditsRefreshParam;\n      loadMatches(user.id).catch(() => null);\n      refreshCredits(user.id).catch(() => null);\n\n      // NEW: also attempt to restore any just-finished purchase\n      attemptRestoreCredits(user.id).catch(() => null);\n    }, [attemptRestoreCredits, creditsRefreshParam, loadMatches, refreshCredits, user?.id]);\n    return {\n      creditStatus,\n      refreshCredits,\n      attemptRestoreCredits,\n      restoreState\n    };\n  }\n});","lineCount":188,"map":[[12,2,7,0,"exports"],[12,9,7,0],[12,10,7,0,"useMessagesCredits"],[12,28,7,0],[12,31,7,0,"useMessagesCredits"],[12,49,7,0],[13,2,180,1],[13,6,180,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,180,1],[13,45,180,1,"require"],[13,52,180,1],[13,53,180,1,"_dependencyMap"],[13,67,180,1],[14,2,180,1],[14,6,180,1,"_asyncToGenerator"],[14,23,180,1],[14,26,180,1,"_interopDefault"],[14,41,180,1],[14,42,180,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,180,1],[15,2,180,1],[15,6,180,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,180,1],[15,42,180,1,"require"],[15,49,180,1],[15,50,180,1,"_dependencyMap"],[15,64,180,1],[16,2,180,1],[16,6,180,1,"_slicedToArray"],[16,20,180,1],[16,23,180,1,"_interopDefault"],[16,38,180,1],[16,39,180,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,180,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_expoRouter"],[18,17,2,0],[18,20,2,0,"require"],[18,27,2,0],[18,28,2,0,"_dependencyMap"],[18,42,2,0],[19,2,3,0],[19,6,3,0,"_reactNativePurchases"],[19,27,3,0],[19,30,3,0,"require"],[19,37,3,0],[19,38,3,0,"_dependencyMap"],[19,52,3,0],[20,2,3,0],[20,6,3,0,"Purchases"],[20,15,3,0],[20,18,3,0,"_interopDefault"],[20,33,3,0],[20,34,3,0,"_reactNativePurchases"],[20,55,3,0],[21,2,4,0],[21,6,4,0,"_utilsSubscription"],[21,24,4,0],[21,27,4,0,"require"],[21,34,4,0],[21,35,4,0,"_dependencyMap"],[21,49,4,0],[22,2,5,0],[22,6,5,0,"_utilsDateCreditsHelpers"],[22,30,5,0],[22,33,5,0,"require"],[22,40,5,0],[22,41,5,0,"_dependencyMap"],[22,55,5,0],[23,2,7,7],[23,11,7,16,"useMessagesCredits"],[23,29,7,34,"useMessagesCredits"],[23,30,7,34,"_ref"],[23,34,7,34],[23,36,7,63],[24,4,7,63],[24,8,7,37,"jwt"],[24,11,7,40],[24,14,7,40,"_ref"],[24,18,7,40],[24,19,7,37,"jwt"],[24,22,7,40],[25,6,7,42,"user"],[25,10,7,46],[25,13,7,46,"_ref"],[25,17,7,46],[25,18,7,42,"user"],[25,22,7,46],[26,6,7,48,"loadMatches"],[26,17,7,59],[26,20,7,59,"_ref"],[26,24,7,59],[26,25,7,48,"loadMatches"],[26,36,7,59],[27,4,8,2],[27,8,8,8,"params"],[27,14,8,14],[27,17,8,17],[27,21,8,17,"useLocalSearchParams"],[27,32,8,37],[27,33,8,37,"useLocalSearchParams"],[27,53,8,37],[27,55,8,38],[27,56,8,39],[28,4,10,2],[28,8,10,8,"creditsRefreshParam"],[28,27,10,27],[28,30,10,30],[28,34,10,30,"useMemo"],[28,40,10,37],[28,41,10,37,"useMemo"],[28,48,10,37],[28,50,10,38],[28,56,10,44],[29,6,11,4],[29,10,11,10,"raw"],[29,13,11,13],[29,16,11,16,"params"],[29,22,11,22],[29,24,11,24,"creditsRefresh"],[29,38,11,38],[30,6,12,4],[30,10,12,10,"v"],[30,11,12,11],[30,14,12,14,"Array"],[30,19,12,19],[30,20,12,20,"isArray"],[30,27,12,27],[30,28,12,28,"raw"],[30,31,12,31],[30,32,12,32],[30,35,12,35,"raw"],[30,38,12,38],[30,39,12,39],[30,40,12,40],[30,41,12,41],[30,44,12,44,"raw"],[30,47,12,47],[31,6,13,4],[31,10,13,10,"s"],[31,11,13,11],[31,14,13,14,"v"],[31,15,13,15],[31,19,13,19],[31,23,13,23],[31,26,13,26,"String"],[31,32,13,32],[31,33,13,33,"v"],[31,34,13,34],[31,35,13,35],[31,36,13,36,"trim"],[31,40,13,40],[31,41,13,41],[31,42,13,42],[31,45,13,45],[31,47,13,47],[32,6,14,4],[32,13,14,11,"s"],[32,14,14,12],[32,18,14,16],[32,22,14,20],[33,4,15,2],[33,5,15,3],[33,7,15,5],[33,8,15,6,"params"],[33,14,15,12],[33,16,15,14,"creditsRefresh"],[33,30,15,28],[33,31,15,29],[33,32,15,30],[34,4,17,2],[34,8,17,2,"_useState"],[34,17,17,2],[34,20,17,42],[34,24,17,42,"useState"],[34,30,17,50],[34,31,17,50,"useState"],[34,39,17,50],[34,41,17,51],[35,8,18,4,"credits"],[35,15,18,11],[35,17,18,13],[35,18,18,14],[36,8,19,4,"maxCredits"],[36,18,19,14],[36,20,19,16],[37,6,20,2],[37,7,20,3],[37,8,20,4],[38,6,20,4,"_useState2"],[38,16,20,4],[38,23,20,4,"_slicedToArray"],[38,37,20,4],[38,38,20,4,"default"],[38,45,20,4],[38,47,20,4,"_useState"],[38,56,20,4],[39,6,17,9,"creditStatus"],[39,18,17,21],[39,21,17,21,"_useState2"],[39,31,17,21],[40,6,17,23,"setCreditStatus"],[40,21,17,38],[40,24,17,38,"_useState2"],[40,34,17,38],[41,4,22,2],[41,8,22,2,"_useState3"],[41,18,22,2],[41,21,22,42],[41,25,22,42,"useState"],[41,31,22,50],[41,32,22,50,"useState"],[41,40,22,50],[41,42,22,51],[42,8,23,4,"restoring"],[42,17,23,13],[42,19,23,15],[42,24,23,20],[43,8,24,4,"lastError"],[43,17,24,13],[43,19,24,15],[44,6,25,2],[44,7,25,3],[44,8,25,4],[45,6,25,4,"_useState4"],[45,16,25,4],[45,23,25,4,"_slicedToArray"],[45,37,25,4],[45,38,25,4,"default"],[45,45,25,4],[45,47,25,4,"_useState3"],[45,57,25,4],[46,6,22,9,"restoreState"],[46,18,22,21],[46,21,22,21,"_useState4"],[46,31,22,21],[47,6,22,23,"setRestoreState"],[47,21,22,38],[47,24,22,38,"_useState4"],[47,34,22,38],[48,4,27,2],[48,8,27,8,"refreshCredits"],[48,22,27,22],[48,25,27,25],[48,29,27,25,"useCallback"],[48,35,27,36],[48,36,27,36,"useCallback"],[48,47,27,36],[49,6,27,36],[49,10,27,36,"_ref2"],[49,15,27,36],[49,22,27,36,"_asyncToGenerator"],[49,39,27,36],[49,40,27,36,"default"],[49,47,27,36],[49,49,28,4],[49,60,28,11,"userId"],[49,66,28,17],[49,68,28,22],[50,8,29,6],[50,12,29,10],[51,10,30,8],[51,14,30,14,"uid"],[51,17,30,17],[51,20,30,20,"Number"],[51,26,30,26],[51,27,30,27,"userId"],[51,33,30,33],[51,34,30,34],[52,10,31,8],[52,14,31,14,"hasUid"],[52,20,31,20],[52,23,31,23,"Number"],[52,29,31,29],[52,30,31,30,"isFinite"],[52,38,31,38],[52,39,31,39,"uid"],[52,42,31,42],[52,43,31,43],[53,10,32,8],[53,14,32,14,"hasJwt"],[53,20,32,20],[53,23,32,23,"jwt"],[53,26,32,26],[53,30,32,30],[53,37,32,37,"jwt"],[53,40,32,40],[53,45,32,45],[53,53,32,53],[54,10,34,8],[54,14,34,12],[54,15,34,13,"hasUid"],[54,21,34,19],[54,25,34,23],[54,26,34,24,"hasJwt"],[54,32,34,30],[54,34,34,32],[55,12,35,10],[55,19,35,17],[55,23,35,21],[56,10,36,8],[57,10,38,8],[57,14,38,14,"url"],[57,17,38,17],[57,20,38,20,"hasUid"],[57,26,38,26],[57,29,39,12],[57,64,39,47,"uid"],[57,67,39,50],[57,69,39,52],[57,72,40,12],[57,98,40,38],[58,10,42,8],[58,14,42,14,"resp"],[58,18,42,18],[58,27,42,27,"fetch"],[58,32,42,32],[58,33,42,33,"url"],[58,36,42,36],[58,38,42,38],[59,12,43,10,"headers"],[59,19,43,17],[59,21,43,19,"hasJwt"],[59,27,43,25],[59,30,43,28],[60,14,43,30,"Authorization"],[60,27,43,43],[60,29,43,45],[60,39,43,55,"jwt"],[60,42,43,58],[61,12,43,61],[61,13,43,62],[61,16,43,65,"undefined"],[62,10,44,8],[62,11,44,9],[62,12,44,10],[63,10,46,8],[63,14,46,12],[63,15,46,13,"resp"],[63,19,46,17],[63,20,46,18,"ok"],[63,22,46,20],[63,24,46,22],[64,12,47,10],[64,18,47,16],[64,22,47,20,"Error"],[64,27,47,25],[64,28,48,12],[64,89,48,73,"resp"],[64,93,48,77],[64,94,48,78,"status"],[64,100,48,84],[64,105,48,89,"resp"],[64,109,48,93],[64,110,48,94,"statusText"],[64,120,48,104],[64,122,49,10],[64,123,49,11],[65,10,50,8],[66,10,52,8],[66,14,52,14,"data"],[66,18,52,18],[66,27,52,27,"resp"],[66,31,52,31],[66,32,52,32,"json"],[66,36,52,36],[66,37,52,37],[66,38,52,38],[67,10,53,8],[67,14,53,14,"next"],[67,18,53,18],[67,21,53,21],[68,12,54,10,"credits"],[68,19,54,17],[68,21,54,19,"Number"],[68,27,54,25],[68,28,54,26,"data"],[68,32,54,30],[68,34,54,32,"credits"],[68,41,54,39],[68,45,54,43],[68,46,54,44],[68,47,54,45],[69,12,55,10,"maxCredits"],[69,22,55,20],[69,24,55,22,"Number"],[69,30,55,28],[69,31,55,29,"data"],[69,35,55,33],[69,37,55,35,"maxCredits"],[69,47,55,45],[69,51,55,49],[69,52,55,50],[70,10,56,8],[70,11,56,9],[71,10,58,8,"setCreditStatus"],[71,25,58,23],[71,26,58,24,"next"],[71,30,58,28],[71,31,58,29],[72,10,59,8],[72,17,59,15,"next"],[72,21,59,19],[73,8,60,6],[73,9,60,7],[73,10,60,8],[73,17,60,15,"e"],[73,18,60,16],[73,20,60,18],[74,10,61,8,"console"],[74,17,61,15],[74,18,61,16,"error"],[74,23,61,21],[74,24,61,22,"e"],[74,25,61,23],[74,26,61,24],[75,10,62,8],[75,17,62,15],[75,21,62,19],[76,8,63,6],[77,6,64,4],[77,7,64,5],[78,6,64,5],[78,23,64,5,"_x"],[78,25,64,5],[79,8,64,5],[79,15,64,5,"_ref2"],[79,20,64,5],[79,21,64,5,"apply"],[79,26,64,5],[79,33,64,5,"arguments"],[79,42,64,5],[80,6,64,5],[81,4,64,5],[81,9,65,4],[81,10,65,5,"jwt"],[81,13,65,8],[81,14,66,2],[81,15,66,3],[82,4,68,2],[82,8,68,8,"restoreInFlightRef"],[82,26,68,26],[82,29,68,29],[82,33,68,29,"useRef"],[82,39,68,35],[82,40,68,35,"useRef"],[82,46,68,35],[82,48,68,36],[82,53,68,41],[82,54,68,42],[83,4,69,2],[83,8,69,8,"attemptRestoreCredits"],[83,29,69,29],[83,32,69,32],[83,36,69,32,"useCallback"],[83,42,69,43],[83,43,69,43,"useCallback"],[83,54,69,43],[84,6,69,43],[84,10,69,43,"_ref3"],[84,15,69,43],[84,22,69,43,"_asyncToGenerator"],[84,39,69,43],[84,40,69,43,"default"],[84,47,69,43],[84,49,70,4],[84,60,70,11,"userId"],[84,66,70,17],[84,68,70,22],[85,8,71,6],[85,12,71,12,"hasJwt"],[85,18,71,18],[85,21,71,21,"jwt"],[85,24,71,24],[85,28,71,28],[85,35,71,35,"jwt"],[85,38,71,38],[85,43,71,43],[85,51,71,51],[86,8,72,6],[86,12,72,12,"uid"],[86,15,72,15],[86,18,72,18,"Number"],[86,24,72,24],[86,25,72,25,"userId"],[86,31,72,31],[86,32,72,32],[87,8,73,6],[87,12,73,10],[87,13,73,11,"Number"],[87,19,73,17],[87,20,73,18,"isFinite"],[87,28,73,26],[87,29,73,27,"uid"],[87,32,73,30],[87,33,73,31],[87,35,73,33],[87,42,73,40],[87,46,73,44],[88,8,74,6],[88,12,74,10],[88,13,74,11,"hasJwt"],[88,19,74,17],[88,21,74,19],[88,28,74,26],[88,32,74,30],[90,8,76,6],[91,8,77,6],[92,8,78,6],[93,8,79,6],[94,8,80,6],[94,12,80,10,"creditStatus"],[94,24,80,22],[94,25,80,23,"credits"],[94,32,80,30],[94,35,80,33],[94,36,80,34],[94,38,80,36],[94,45,80,43],[94,49,80,47],[96,8,82,6],[97,8,83,6],[97,12,83,10,"restoreInFlightRef"],[97,30,83,28],[97,31,83,29,"current"],[97,38,83,36],[97,40,83,38],[97,47,83,45],[97,51,83,49],[98,8,84,6,"restoreInFlightRef"],[98,26,84,24],[98,27,84,25,"current"],[98,34,84,32],[98,37,84,35],[98,41,84,39],[99,8,85,6,"setRestoreState"],[99,23,85,21],[99,24,85,22],[100,10,85,24,"restoring"],[100,19,85,33],[100,21,85,35],[100,25,85,39],[101,10,85,41,"lastError"],[101,19,85,50],[101,21,85,52],[102,8,85,57],[102,9,85,58],[102,10,85,59],[103,8,87,6],[103,12,87,10],[104,10,88,8],[104,14,88,8,"_configurePurchasesOn"],[104,35,88,8],[104,38,88,23],[104,42,88,23,"configurePurchasesOnce"],[104,60,88,45],[104,61,88,45,"configurePurchasesOnce"],[104,83,88,45],[104,85,88,46],[104,86,88,47],[105,12,88,16,"ok"],[105,14,88,18],[105,17,88,18,"_configurePurchasesOn"],[105,38,88,18],[105,39,88,16,"ok"],[105,41,88,18],[106,10,89,8],[106,14,89,12],[106,15,89,13,"ok"],[106,17,89,15],[106,19,89,17],[107,12,90,10],[107,19,90,17],[107,23,90,21],[108,10,91,8],[110,10,93,8],[111,10,94,8],[111,16,94,14,"Purchases"],[111,25,94,23],[111,26,94,23,"default"],[111,33,94,23],[111,34,94,24,"logIn"],[111,39,94,29],[111,40,94,30,"String"],[111,46,94,36],[111,47,94,37,"uid"],[111,50,94,40],[111,51,94,41],[111,52,94,42],[111,53,94,43,"catch"],[111,58,94,48],[111,59,94,49],[111,65,94,55],[111,69,94,59],[111,70,94,60],[113,10,96,8],[114,10,97,8],[114,14,97,12],[114,21,97,19,"Purchases"],[114,30,97,28],[114,31,97,28,"default"],[114,38,97,28],[114,39,97,29,"syncPurchases"],[114,52,97,42],[114,57,97,47],[114,67,97,57],[114,69,97,59],[115,12,98,10],[115,18,98,16,"Purchases"],[115,27,98,25],[115,28,98,25,"default"],[115,35,98,25],[115,36,98,26,"syncPurchases"],[115,49,98,39],[115,50,98,40],[115,51,98,41],[115,52,98,42,"catch"],[115,57,98,47],[115,58,98,48],[115,64,98,54],[115,68,98,58],[115,69,98,59],[116,10,99,8],[117,10,101,8],[117,14,101,14,"info"],[117,18,101,18],[117,27,101,27,"Purchases"],[117,36,101,36],[117,37,101,36,"default"],[117,44,101,36],[117,45,101,37,"getCustomerInfo"],[117,60,101,52],[117,61,101,53],[117,62,101,54],[117,63,101,55,"catch"],[117,68,101,60],[117,69,101,61],[117,75,101,67],[117,79,101,71],[117,80,101,72],[118,10,102,8],[118,14,102,14,"latestTxn"],[118,23,102,23],[118,26,102,26],[118,30,102,26,"extractLatestTransactionIdFromCustomerInfo"],[118,54,102,68],[118,55,102,68,"extractLatestTransactionIdFromCustomerInfo"],[118,97,102,68],[118,99,102,69,"info"],[118,103,102,73],[118,104,102,74],[119,10,104,8],[119,14,104,12],[119,15,104,13,"latestTxn"],[119,24,104,22],[119,26,104,24,"transactionId"],[119,39,104,37],[119,43,104,41],[119,44,104,42,"latestTxn"],[119,53,104,51],[119,55,104,53,"productId"],[119,64,104,62],[119,66,104,64],[120,12,105,10],[120,19,105,17],[120,23,105,21],[121,10,106,8],[123,10,108,8],[124,10,109,8],[124,14,109,14,"resp"],[124,18,109,18],[124,27,109,27,"fetch"],[124,32,109,32],[124,33,109,33],[124,58,109,58],[124,60,109,60],[125,12,110,10,"method"],[125,18,110,16],[125,20,110,18],[125,26,110,24],[126,12,111,10,"headers"],[126,19,111,17],[126,21,111,19],[127,14,112,12],[127,28,112,26],[127,30,112,28],[127,48,112,46],[128,14,113,12,"Authorization"],[128,27,113,25],[128,29,113,27],[128,39,113,37,"jwt"],[128,42,113,40],[129,12,114,10],[129,13,114,11],[130,12,115,10,"body"],[130,16,115,14],[130,18,115,16,"JSON"],[130,22,115,20],[130,23,115,21,"stringify"],[130,32,115,30],[130,33,115,31],[131,14,116,12,"transactionId"],[131,27,116,25],[131,29,116,27,"latestTxn"],[131,38,116,36],[131,39,116,37,"transactionId"],[131,52,116,50],[132,14,117,12,"productId"],[132,23,117,21],[132,25,117,23,"latestTxn"],[132,34,117,32],[132,35,117,33,"productId"],[133,12,118,10],[133,13,118,11],[134,10,119,8],[134,11,119,9],[134,12,119,10],[135,10,121,8],[135,14,121,14,"json"],[135,18,121,18],[135,27,121,27,"resp"],[135,31,121,31],[135,32,121,32,"json"],[135,36,121,36],[135,37,121,37],[135,38,121,38],[135,39,121,39,"catch"],[135,44,121,44],[135,45,121,45],[135,51,121,51],[135,55,121,55],[135,56,121,56],[136,10,122,8],[136,14,122,12],[136,15,122,13,"resp"],[136,19,122,17],[136,20,122,18,"ok"],[136,22,122,20],[136,24,122,22],[137,12,123,10],[137,18,123,16],[137,22,123,20,"Error"],[137,27,123,25],[137,28,123,26,"json"],[137,32,123,30],[137,34,123,32,"error"],[137,39,123,37],[137,43,123,41],[137,60,123,58,"resp"],[137,64,123,62],[137,65,123,63,"status"],[137,71,123,69],[137,74,123,72],[137,75,123,73],[138,10,124,8],[140,10,126,8],[141,10,127,8],[141,14,127,14,"next"],[141,18,127,18],[141,27,127,27,"refreshCredits"],[141,41,127,41],[141,42,127,42,"uid"],[141,45,127,45],[141,46,127,46],[143,10,129,8],[144,10,130,8],[144,14,130,12,"next"],[144,18,130,16],[144,20,130,18,"credits"],[144,27,130,25],[144,30,130,28],[144,31,130,29],[144,33,130,31],[145,12,131,10,"loadMatches"],[145,23,131,21],[145,24,131,22,"uid"],[145,27,131,25],[145,28,131,26],[145,29,131,27,"catch"],[145,34,131,32],[145,35,131,33],[145,41,131,39],[145,45,131,43],[145,46,131,44],[146,10,132,8],[147,10,134,8],[147,17,134,15,"next"],[147,21,134,19],[148,8,135,6],[148,9,135,7],[148,10,135,8],[148,17,135,15,"e"],[148,18,135,16],[148,20,135,18],[149,10,136,8,"console"],[149,17,136,15],[149,18,136,16,"error"],[149,23,136,21],[149,24,136,22,"e"],[149,25,136,23],[149,26,136,24],[150,10,137,8,"setRestoreState"],[150,25,137,23],[150,26,137,24],[151,12,138,10,"restoring"],[151,21,138,19],[151,23,138,21],[151,28,138,26],[152,12,139,10,"lastError"],[152,21,139,19],[152,23,139,21,"e"],[152,24,139,22],[152,26,139,24,"message"],[152,33,139,31],[152,37,139,35],[153,10,140,8],[153,11,140,9],[153,12,140,10],[154,10,141,8],[154,17,141,15],[154,21,141,19],[155,8,142,6],[155,9,142,7],[155,18,142,16],[156,10,143,8,"setRestoreState"],[156,25,143,23],[156,26,143,25,"s"],[156,27,143,26],[156,32,143,32],[157,12,143,34],[157,15,143,37,"s"],[157,16,143,38],[158,12,143,40,"restoring"],[158,21,143,49],[158,23,143,51],[159,10,143,57],[159,11,143,58],[159,12,143,59],[159,13,143,60],[160,10,144,8,"restoreInFlightRef"],[160,28,144,26],[160,29,144,27,"current"],[160,36,144,34],[160,39,144,37],[160,44,144,42],[161,8,145,6],[162,6,146,4],[162,7,146,5],[163,6,146,5],[163,23,146,5,"_x2"],[163,26,146,5],[164,8,146,5],[164,15,146,5,"_ref3"],[164,20,146,5],[164,21,146,5,"apply"],[164,26,146,5],[164,33,146,5,"arguments"],[164,42,146,5],[165,6,146,5],[166,4,146,5],[166,9,147,4],[166,10,147,5,"jwt"],[166,13,147,8],[166,15,147,10,"loadMatches"],[166,26,147,21],[166,28,147,23,"refreshCredits"],[166,42,147,37],[166,44,147,39,"creditStatus"],[166,56,147,51],[166,57,147,52,"credits"],[166,64,147,59],[166,65,148,2],[166,66,148,3],[167,4,150,2],[167,8,150,8,"lastCreditsRefreshRef"],[167,29,150,29],[167,32,150,32],[167,36,150,32,"useRef"],[167,42,150,38],[167,43,150,38,"useRef"],[167,49,150,38],[167,51,150,39],[167,55,150,43],[167,56,150,44],[168,4,151,2],[168,8,151,2,"useEffect"],[168,14,151,11],[168,15,151,11,"useEffect"],[168,24,151,11],[168,26,151,12],[168,32,151,18],[169,6,152,4],[169,10,152,8],[169,11,152,9,"creditsRefreshParam"],[169,30,152,28],[169,32,152,30],[170,6,153,4],[170,10,153,8],[170,11,153,9,"user"],[170,15,153,13],[170,17,153,15,"id"],[170,19,153,17],[170,21,153,19],[171,6,155,4],[171,10,155,8,"lastCreditsRefreshRef"],[171,31,155,29],[171,32,155,30,"current"],[171,39,155,37],[171,44,155,42,"creditsRefreshParam"],[171,63,155,61],[171,65,155,63],[172,8,156,6],[173,6,157,4],[174,6,159,4,"lastCreditsRefreshRef"],[174,27,159,25],[174,28,159,26,"current"],[174,35,159,33],[174,38,159,36,"creditsRefreshParam"],[174,57,159,55],[175,6,161,4,"loadMatches"],[175,17,161,15],[175,18,161,16,"user"],[175,22,161,20],[175,23,161,21,"id"],[175,25,161,23],[175,26,161,24],[175,27,161,25,"catch"],[175,32,161,30],[175,33,161,31],[175,39,161,37],[175,43,161,41],[175,44,161,42],[176,6,162,4,"refreshCredits"],[176,20,162,18],[176,21,162,19,"user"],[176,25,162,23],[176,26,162,24,"id"],[176,28,162,26],[176,29,162,27],[176,30,162,28,"catch"],[176,35,162,33],[176,36,162,34],[176,42,162,40],[176,46,162,44],[176,47,162,45],[178,6,164,4],[179,6,165,4,"attemptRestoreCredits"],[179,27,165,25],[179,28,165,26,"user"],[179,32,165,30],[179,33,165,31,"id"],[179,35,165,33],[179,36,165,34],[179,37,165,35,"catch"],[179,42,165,40],[179,43,165,41],[179,49,165,47],[179,53,165,51],[179,54,165,52],[180,4,166,2],[180,5,166,3],[180,7,166,5],[180,8,167,4,"attemptRestoreCredits"],[180,29,167,25],[180,31,168,4,"creditsRefreshParam"],[180,50,168,23],[180,52,169,4,"loadMatches"],[180,63,169,15],[180,65,170,4,"refreshCredits"],[180,79,170,18],[180,81,171,4,"user"],[180,85,171,8],[180,87,171,10,"id"],[180,89,171,12],[180,90,172,3],[180,91,172,4],[181,4,174,2],[181,11,174,9],[182,6,175,4,"creditStatus"],[182,18,175,16],[183,6,176,4,"refreshCredits"],[183,20,176,18],[184,6,177,4,"attemptRestoreCredits"],[184,27,177,25],[185,6,178,4,"restoreState"],[186,4,179,2],[186,5,179,3],[187,2,180,0],[188,0,180,1],[188,3]],"functionMap":{"names":["<global>","useMessagesCredits","useMemo$argument_0","refreshCredits","attemptRestoreCredits","Purchases.logIn._catch$argument_0","Purchases.syncPurchases._catch$argument_0","Purchases.getCustomerInfo._catch$argument_0","resp.json._catch$argument_0","loadMatches._catch$argument_0","setRestoreState$argument_0","useEffect$argument_0","refreshCredits._catch$argument_0","attemptRestoreCredits._catch$argument_0"],"mappings":"AAA;OCM;sCCG;GDK;IEa;KFoC;IGM;iDCwB,UD;gDEI,UF;6DGG,UH;6CIoB,UJ;iCKU,UL;wBMY,mCN;KHG;YUK;+BFU,UE;kCCC,UD;yCEG,UF;GVC;CDc"},"hasCjsExports":false},"type":"js/module"}]}