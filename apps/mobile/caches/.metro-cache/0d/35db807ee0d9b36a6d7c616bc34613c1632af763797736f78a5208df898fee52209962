{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"expo/fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":48,"index":98}}],"key":"ug2WTu871fxhwUkT+lg+x8TWZJo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoSecureStore = require(_dependencyMap[2]);\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _expoFetch = require(_dependencyMap[3]);\n  var originalFetch = fetch;\n  var authKey = `${\"ebfa1886-4681-4a98-ab82-c390b0927406\"}-jwt`;\n  var getURLFromArgs = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var urlArg = args[0];\n    var url;\n    if (typeof urlArg === 'string') {\n      url = urlArg;\n    } else if (typeof urlArg === 'object' && urlArg !== null) {\n      url = urlArg.url;\n    } else {\n      url = null;\n    }\n    return url;\n  };\n  var isFileURL = url => {\n    return url.startsWith('file://') || url.startsWith('data:');\n  };\n  var isFirstPartyURL = url => {\n    return url.startsWith('/') || url.startsWith(\"http://192.168.1.78:3001\");\n  };\n  var isSecondPartyURL = url => {\n    return url.startsWith('/_create/');\n  };\n  var fetchToWeb = /*#__PURE__*/function () {\n    var _fetchWithHeaders = (0, _asyncToGenerator.default)(function* () {\n      var firstPartyURL = \"http://192.168.1.78:3001\";\n      var secondPartyURL = undefined;\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      var input = args[0],\n        init = args[1];\n      var url = getURLFromArgs(input, init);\n      if (!url) {\n        return (0, _expoFetch.fetch)(input, init);\n      }\n      if (isFileURL(url)) {\n        return originalFetch(input, init);\n      }\n      var isExternalFetch = !isFirstPartyURL(url);\n      // we should not add headers to requests that don't go to our own server\n      if (isExternalFetch) {\n        return (0, _expoFetch.fetch)(input, init);\n      }\n      var finalInput = input;\n      var baseURL = isSecondPartyURL(url) ? secondPartyURL : firstPartyURL;\n      if (typeof input === 'string') {\n        finalInput = input.startsWith('/') ? `${baseURL}${input}` : input;\n      } else {\n        return (0, _expoFetch.fetch)(input, init);\n      }\n      var initHeaders = init?.headers ?? {};\n      var finalHeaders = new Headers(initHeaders);\n      var headers = {\n        'x-createxyz-project-group-id': \"ebfa1886-4681-4a98-ab82-c390b0927406\",\n        host: \"ebfa1886-4681-4a98-ab82-c390b0927406.created.app\",\n        'x-forwarded-host': \"ebfa1886-4681-4a98-ab82-c390b0927406.created.app\",\n        'x-createxyz-host': \"ebfa1886-4681-4a98-ab82-c390b0927406.created.app\"\n      };\n      for (var _ref of Object.entries(headers)) {\n        var _ref2 = (0, _slicedToArray.default)(_ref, 2);\n        var key = _ref2[0];\n        var value = _ref2[1];\n        if (value) {\n          finalHeaders.set(key, value);\n        }\n      }\n      var auth = yield SecureStore.getItemAsync(authKey).then(auth => {\n        return auth ? JSON.parse(auth) : null;\n      }).catch(() => {\n        return null;\n      });\n      if (auth) {\n        finalHeaders.set('authorization', `Bearer ${auth.jwt}`);\n      }\n      return (0, _expoFetch.fetch)(finalInput, {\n        ...init,\n        headers: finalHeaders\n      });\n    });\n    function fetchWithHeaders() {\n      return _fetchWithHeaders.apply(this, arguments);\n    }\n    return fetchWithHeaders;\n  }();\n  var _default = fetchToWeb;\n});","lineCount":129,"map":[[27,2,97,0,"Object"],[27,8,97,0],[27,9,97,0,"defineProperty"],[27,23,97,0],[27,24,97,0,"exports"],[27,31,97,0],[28,4,97,0,"enumerable"],[28,14,97,0],[29,4,97,0,"get"],[29,7,97,0],[29,18,97,0,"get"],[29,19,97,0],[30,6,97,0],[30,13,97,0,"_default"],[30,21,97,0],[31,4,97,0],[32,2,97,0],[33,2,97,26],[33,6,97,26,"_babelRuntimeHelpersSlicedToArray"],[33,39,97,26],[33,42,97,26,"require"],[33,49,97,26],[33,50,97,26,"_dependencyMap"],[33,64,97,26],[34,2,97,26],[34,6,97,26,"_slicedToArray"],[34,20,97,26],[34,23,97,26,"_interopDefault"],[34,38,97,26],[34,39,97,26,"_babelRuntimeHelpersSlicedToArray"],[34,72,97,26],[35,2,97,26],[35,6,97,26,"_babelRuntimeHelpersAsyncToGenerator"],[35,42,97,26],[35,45,97,26,"require"],[35,52,97,26],[35,53,97,26,"_dependencyMap"],[35,67,97,26],[36,2,97,26],[36,6,97,26,"_asyncToGenerator"],[36,23,97,26],[36,26,97,26,"_interopDefault"],[36,41,97,26],[36,42,97,26,"_babelRuntimeHelpersAsyncToGenerator"],[36,78,97,26],[37,2,1,0],[37,6,1,0,"_expoSecureStore"],[37,22,1,0],[37,25,1,0,"require"],[37,32,1,0],[37,33,1,0,"_dependencyMap"],[37,47,1,0],[38,2,1,0],[38,6,1,0,"SecureStore"],[38,17,1,0],[38,20,1,0,"_interopNamespace"],[38,37,1,0],[38,38,1,0,"_expoSecureStore"],[38,54,1,0],[39,2,2,0],[39,6,2,0,"_expoFetch"],[39,16,2,0],[39,19,2,0,"require"],[39,26,2,0],[39,27,2,0,"_dependencyMap"],[39,41,2,0],[40,2,4,0],[40,6,4,6,"originalFetch"],[40,19,4,19],[40,22,4,22,"fetch"],[40,27,4,27],[41,2,5,0],[41,6,5,6,"authKey"],[41,13,5,13],[41,16,5,16],[41,63,5,65],[42,2,7,0],[42,6,7,6,"getURLFromArgs"],[42,20,7,20],[42,23,7,23],[42,32,7,23,"getURLFromArgs"],[42,33,7,23],[42,35,7,62],[43,4,7,62],[43,13,7,62,"_len"],[43,17,7,62],[43,20,7,62,"arguments"],[43,29,7,62],[43,30,7,62,"length"],[43,36,7,62],[43,38,7,27,"args"],[43,42,7,31],[43,49,7,31,"Array"],[43,54,7,31],[43,55,7,31,"_len"],[43,59,7,31],[43,62,7,31,"_key"],[43,66,7,31],[43,72,7,31,"_key"],[43,76,7,31],[43,79,7,31,"_len"],[43,83,7,31],[43,85,7,31,"_key"],[43,89,7,31],[44,6,7,27,"args"],[44,10,7,31],[44,11,7,31,"_key"],[44,15,7,31],[44,19,7,31,"arguments"],[44,28,7,31],[44,29,7,31,"_key"],[44,33,7,31],[45,4,7,31],[46,4,8,2],[46,8,8,9,"urlArg"],[46,14,8,15],[46,17,8,19,"args"],[46,21,8,23],[47,4,9,2],[47,8,9,6,"url"],[47,11,9,24],[48,4,10,2],[48,8,10,6],[48,15,10,13,"urlArg"],[48,21,10,19],[48,26,10,24],[48,34,10,32],[48,36,10,34],[49,6,11,4,"url"],[49,9,11,7],[49,12,11,10,"urlArg"],[49,18,11,16],[50,4,12,2],[50,5,12,3],[50,11,12,9],[50,15,12,13],[50,22,12,20,"urlArg"],[50,28,12,26],[50,33,12,31],[50,41,12,39],[50,45,12,43,"urlArg"],[50,51,12,49],[50,56,12,54],[50,60,12,58],[50,62,12,60],[51,6,13,4,"url"],[51,9,13,7],[51,12,13,10,"urlArg"],[51,18,13,16],[51,19,13,17,"url"],[51,22,13,20],[52,4,14,2],[52,5,14,3],[52,11,14,9],[53,6,15,4,"url"],[53,9,15,7],[53,12,15,10],[53,16,15,14],[54,4,16,2],[55,4,17,2],[55,11,17,9,"url"],[55,14,17,12],[56,2,18,0],[56,3,18,1],[57,2,20,0],[57,6,20,6,"isFileURL"],[57,15,20,15],[57,18,20,19,"url"],[57,21,20,30],[57,25,20,35],[58,4,21,2],[58,11,21,9,"url"],[58,14,21,12],[58,15,21,13,"startsWith"],[58,25,21,23],[58,26,21,24],[58,35,21,33],[58,36,21,34],[58,40,21,38,"url"],[58,43,21,41],[58,44,21,42,"startsWith"],[58,54,21,52],[58,55,21,53],[58,62,21,60],[58,63,21,61],[59,2,22,0],[59,3,22,1],[60,2,24,0],[60,6,24,6,"isFirstPartyURL"],[60,21,24,21],[60,24,24,25,"url"],[60,27,24,36],[60,31,24,41],[61,4,25,2],[61,11,26,4,"url"],[61,14,26,7],[61,15,26,8,"startsWith"],[61,25,26,18],[61,26,26,19],[61,29,26,22],[61,30,26,23],[61,34,27,41,"url"],[61,37,27,44],[61,38,27,45,"startsWith"],[61,48,27,55],[61,75,27,88],[61,76,27,90],[62,2,29,0],[62,3,29,1],[63,2,31,0],[63,6,31,6,"isSecondPartyURL"],[63,22,31,22],[63,25,31,26,"url"],[63,28,31,37],[63,32,31,42],[64,4,32,2],[64,11,32,9,"url"],[64,14,32,12],[64,15,32,13,"startsWith"],[64,25,32,23],[64,26,32,24],[64,37,32,35],[64,38,32,36],[65,2,33,0],[65,3,33,1],[66,2,36,0],[66,6,36,6,"fetchToWeb"],[66,16,36,16],[67,4,36,16],[67,8,36,16,"_fetchWithHeaders"],[67,25,36,16],[67,32,36,16,"_asyncToGenerator"],[67,49,36,16],[67,50,36,16,"default"],[67,57,36,16],[67,59,36,19],[67,72,36,68],[68,6,37,2],[68,10,37,8,"firstPartyURL"],[68,23,37,21],[68,52,37,56],[69,6,38,2],[69,10,38,8,"secondPartyURL"],[69,24,38,22],[69,27,38,22,"undefined"],[69,36,38,63],[70,6,38,64],[70,15,38,64,"_len2"],[70,20,38,64],[70,23,38,64,"arguments"],[70,32,38,64],[70,33,38,64,"length"],[70,39,38,64],[70,41,36,54,"args"],[70,45,36,58],[70,52,36,58,"Array"],[70,57,36,58],[70,58,36,58,"_len2"],[70,63,36,58],[70,66,36,58,"_key2"],[70,71,36,58],[70,77,36,58,"_key2"],[70,82,36,58],[70,85,36,58,"_len2"],[70,90,36,58],[70,92,36,58,"_key2"],[70,97,36,58],[71,8,36,54,"args"],[71,12,36,58],[71,13,36,58,"_key2"],[71,18,36,58],[71,22,36,58,"arguments"],[71,31,36,58],[71,32,36,58,"_key2"],[71,37,36,58],[72,6,36,58],[73,6,39,2],[73,10,39,9,"input"],[73,15,39,14],[73,18,39,24,"args"],[73,22,39,28],[74,8,39,16,"init"],[74,12,39,20],[74,15,39,24,"args"],[74,19,39,28],[75,6,40,2],[75,10,40,8,"url"],[75,13,40,11],[75,16,40,14,"getURLFromArgs"],[75,30,40,28],[75,31,40,29,"input"],[75,36,40,34],[75,38,40,36,"init"],[75,42,40,40],[75,43,40,41],[76,6,41,2],[76,10,41,6],[76,11,41,7,"url"],[76,14,41,10],[76,16,41,12],[77,8,42,4],[77,15,42,11],[77,19,42,11,"expoFetch"],[77,29,42,20],[77,30,42,20,"fetch"],[77,35,42,20],[77,37,42,21,"input"],[77,42,42,26],[77,44,42,28,"init"],[77,48,42,32],[77,49,42,33],[78,6,43,2],[79,6,45,2],[79,10,45,6,"isFileURL"],[79,19,45,15],[79,20,45,16,"url"],[79,23,45,19],[79,24,45,20],[79,26,45,22],[80,8,46,4],[80,15,46,11,"originalFetch"],[80,28,46,24],[80,29,46,25,"input"],[80,34,46,30],[80,36,46,32,"init"],[80,40,46,36],[80,41,46,37],[81,6,47,2],[82,6,49,2],[82,10,49,8,"isExternalFetch"],[82,25,49,23],[82,28,49,26],[82,29,49,27,"isFirstPartyURL"],[82,44,49,42],[82,45,49,43,"url"],[82,48,49,46],[82,49,49,47],[83,6,50,2],[84,6,51,2],[84,10,51,6,"isExternalFetch"],[84,25,51,21],[84,27,51,23],[85,8,52,4],[85,15,52,11],[85,19,52,11,"expoFetch"],[85,29,52,20],[85,30,52,20,"fetch"],[85,35,52,20],[85,37,52,21,"input"],[85,42,52,26],[85,44,52,28,"init"],[85,48,52,32],[85,49,52,33],[86,6,53,2],[87,6,55,2],[87,10,55,6,"finalInput"],[87,20,55,16],[87,23,55,19,"input"],[87,28,55,24],[88,6,56,2],[88,10,56,8,"baseURL"],[88,17,56,15],[88,20,56,18,"isSecondPartyURL"],[88,36,56,34],[88,37,56,35,"url"],[88,40,56,38],[88,41,56,39],[88,44,56,42,"secondPartyURL"],[88,58,56,56],[88,61,56,59,"firstPartyURL"],[88,74,56,72],[89,6,57,2],[89,10,57,6],[89,17,57,13,"input"],[89,22,57,18],[89,27,57,23],[89,35,57,31],[89,37,57,33],[90,8,58,4,"finalInput"],[90,18,58,14],[90,21,58,17,"input"],[90,26,58,22],[90,27,58,23,"startsWith"],[90,37,58,33],[90,38,58,34],[90,41,58,37],[90,42,58,38],[90,45,58,41],[90,48,58,44,"baseURL"],[90,55,58,51],[90,58,58,54,"input"],[90,63,58,59],[90,65,58,61],[90,68,58,64,"input"],[90,73,58,69],[91,6,59,2],[91,7,59,3],[91,13,59,9],[92,8,60,4],[92,15,60,11],[92,19,60,11,"expoFetch"],[92,29,60,20],[92,30,60,20,"fetch"],[92,35,60,20],[92,37,60,21,"input"],[92,42,60,26],[92,44,60,28,"init"],[92,48,60,32],[92,49,60,33],[93,6,61,2],[94,6,63,2],[94,10,63,8,"initHeaders"],[94,21,63,19],[94,24,63,22,"init"],[94,28,63,26],[94,30,63,28,"headers"],[94,37,63,35],[94,41,63,39],[94,42,63,40],[94,43,63,41],[95,6,64,2],[95,10,64,8,"finalHeaders"],[95,22,64,20],[95,25,64,23],[95,29,64,27,"Headers"],[95,36,64,34],[95,37,64,35,"initHeaders"],[95,48,64,46],[95,49,64,47],[96,6,66,2],[96,10,66,8,"headers"],[96,17,66,15],[96,20,66,18],[97,8,67,4],[97,38,67,34],[97,78,67,76],[98,8,68,4,"host"],[98,12,68,8],[98,64,68,38],[99,8,69,4],[99,26,69,22],[99,78,69,52],[100,8,70,4],[100,26,70,22],[101,6,71,2],[101,7,71,3],[102,6,73,2],[102,15,73,2,"_ref"],[102,19,73,2],[102,23,73,29,"Object"],[102,29,73,35],[102,30,73,36,"entries"],[102,37,73,43],[102,38,73,44,"headers"],[102,45,73,51],[102,46,73,52],[102,48,73,54],[103,8,73,54],[103,12,73,54,"_ref2"],[103,17,73,54],[103,24,73,54,"_slicedToArray"],[103,38,73,54],[103,39,73,54,"default"],[103,46,73,54],[103,48,73,54,"_ref"],[103,52,73,54],[104,8,73,54],[104,12,73,14,"key"],[104,15,73,17],[104,18,73,17,"_ref2"],[104,23,73,17],[105,8,73,17],[105,12,73,19,"value"],[105,17,73,24],[105,20,73,24,"_ref2"],[105,25,73,24],[106,8,74,4],[106,12,74,8,"value"],[106,17,74,13],[106,19,74,15],[107,10,75,6,"finalHeaders"],[107,22,75,18],[107,23,75,19,"set"],[107,26,75,22],[107,27,75,23,"key"],[107,30,75,26],[107,32,75,28,"value"],[107,37,75,33],[107,38,75,34],[108,8,76,4],[109,6,77,2],[110,6,79,2],[110,10,79,8,"auth"],[110,14,79,12],[110,23,79,21,"SecureStore"],[110,34,79,32],[110,35,79,33,"getItemAsync"],[110,47,79,45],[110,48,79,46,"authKey"],[110,55,79,53],[110,56,79,54],[110,57,80,5,"then"],[110,61,80,9],[110,62,80,11,"auth"],[110,66,80,15],[110,70,80,20],[111,8,81,6],[111,15,81,13,"auth"],[111,19,81,17],[111,22,81,20,"JSON"],[111,26,81,24],[111,27,81,25,"parse"],[111,32,81,30],[111,33,81,31,"auth"],[111,37,81,35],[111,38,81,36],[111,41,81,39],[111,45,81,43],[112,6,82,4],[112,7,82,5],[112,8,82,6],[112,9,83,5,"catch"],[112,14,83,10],[112,15,83,11],[112,21,83,17],[113,8,84,6],[113,15,84,13],[113,19,84,17],[114,6,85,4],[114,7,85,5],[114,8,85,6],[115,6,87,2],[115,10,87,6,"auth"],[115,14,87,10],[115,16,87,12],[116,8,88,4,"finalHeaders"],[116,20,88,16],[116,21,88,17,"set"],[116,24,88,20],[116,25,88,21],[116,40,88,36],[116,42,88,38],[116,52,88,48,"auth"],[116,56,88,52],[116,57,88,53,"jwt"],[116,60,88,56],[116,62,88,58],[116,63,88,59],[117,6,89,2],[118,6,91,2],[118,13,91,9],[118,17,91,9,"expoFetch"],[118,27,91,18],[118,28,91,18,"fetch"],[118,33,91,18],[118,35,91,19,"finalInput"],[118,45,91,29],[118,47,91,31],[119,8,92,4],[119,11,92,7,"init"],[119,15,92,11],[120,8,93,4,"headers"],[120,15,93,11],[120,17,93,13,"finalHeaders"],[121,6,94,2],[121,7,94,3],[121,8,94,4],[122,4,95,0],[122,5,95,1],[123,4,95,1],[123,13,36,34,"fetchWithHeaders"],[123,29,36,50,"fetchWithHeaders"],[123,30,36,50],[124,6,36,50],[124,13,36,50,"_fetchWithHeaders"],[124,30,36,50],[124,31,36,50,"apply"],[124,36,36,50],[124,43,36,50,"arguments"],[124,52,36,50],[125,4,36,50],[126,4,36,50],[126,11,36,34,"fetchWithHeaders"],[126,27,36,50],[127,2,36,50],[127,5,95,1],[128,2,97,0],[128,6,97,0,"_default"],[128,14,97,0],[128,17,97,15,"fetchToWeb"],[128,27,97,25],[129,0,97,26],[129,3]],"functionMap":{"names":["<global>","getURLFromArgs","isFileURL","isFirstPartyURL","isSecondPartyURL","fetchWithHeaders","SecureStore.getItemAsync.then$argument_0","SecureStore.getItemAsync.then._catch$argument_0"],"mappings":"AAA;uBCM;CDW;kBEE;CFE;wBGE;CHK;yBIE;CJE;mBKG;UC4C;KDE;WEC;KFE;CLU"},"hasCjsExports":false},"type":"js/module"}]}