{"dependencies":[{"name":"../../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"How8xsoS0dUDpKnVy0jHSdmxOM4=","exportNames":["*"],"imports":1}},{"name":"./globalListeners.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":75,"index":119}}],"key":"vUYyxH7QtXe33DCzXpyRH3XH51k=","exportNames":["*"],"imports":1}},{"name":"./onHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":41,"index":161}}],"key":"jMxYG0qCUzQ5xC/izD0vNxgsljI=","exportNames":["*"],"imports":1}},{"name":"./runOnce.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":162},"end":{"line":4,"column":39,"index":201}}],"key":"GeQjtXVIw/b4yQAGDTFWJH+9oF4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"whenIdleOrHidden\", {\n    enumerable: true,\n    get: function () {\n      return whenIdleOrHidden;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0]);\n  var _globalListenersJs = require(_dependencyMap[1]);\n  var _onHiddenJs = require(_dependencyMap[2]);\n  var _runOnceJs = require(_dependencyMap[3]);\n  /*\n   * Copyright 2024 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /**\n   * Runs the passed callback during the next idle period, or immediately\n   * if the browser's visibility state is (or becomes) hidden.\n   */\n  var whenIdleOrHidden = cb => {\n    var rIC = _typesJs.WINDOW.requestIdleCallback || _typesJs.WINDOW.setTimeout;\n\n    // If the document is hidden, run the callback immediately, otherwise\n    // race an idle callback with the next `visibilitychange` event.\n    if (_typesJs.WINDOW.document?.visibilityState === 'hidden') {\n      cb();\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      cb = (0, _runOnceJs.runOnce)(cb);\n      (0, _globalListenersJs.addPageListener)('visibilitychange', cb, {\n        once: true,\n        capture: true\n      });\n      rIC(() => {\n        cb();\n        // Remove the above event listener since no longer required.\n        // See: https://github.com/GoogleChrome/web-vitals/issues/622\n        (0, _globalListenersJs.removePageListener)('visibilitychange', cb, {\n          capture: true\n        });\n      });\n      // sentry: we use onHidden instead of directly listening to visibilitychange\n      // because some browsers we still support (Safari <14.4) don't fully support\n      // `visibilitychange` or have known bugs w.r.t the `visibilitychange` event.\n      (0, _onHiddenJs.onHidden)(cb);\n    }\n  };\n});","lineCount":65,"map":[[7,2,51,0,"Object"],[7,8,51,0],[7,9,51,0,"defineProperty"],[7,23,51,0],[7,24,51,0,"exports"],[7,31,51,0],[8,4,51,0,"enumerable"],[8,14,51,0],[9,4,51,0,"get"],[9,7,51,0],[9,18,51,0,"get"],[9,19,51,0],[10,6,51,0],[10,13,51,9,"whenIdleOrHidden"],[10,29,51,25],[11,4,51,25],[12,2,51,25],[13,2,1,0],[13,6,1,0,"_typesJs"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_globalListenersJs"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,3,0],[15,6,3,0,"_onHiddenJs"],[15,17,3,0],[15,20,3,0,"require"],[15,27,3,0],[15,28,3,0,"_dependencyMap"],[15,42,3,0],[16,2,4,0],[16,6,4,0,"_runOnceJs"],[16,16,4,0],[16,19,4,0,"require"],[16,26,4,0],[16,27,4,0,"_dependencyMap"],[16,41,4,0],[17,2,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[33,2,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,2,27,0],[37,6,27,6,"whenIdleOrHidden"],[37,22,27,22],[37,25,27,26,"cb"],[37,27,27,28],[37,31,27,33],[38,4,28,2],[38,8,28,8,"rIC"],[38,11,28,11],[38,14,28,14,"WINDOW"],[38,22,28,20],[38,23,28,20,"WINDOW"],[38,29,28,20],[38,30,28,21,"requestIdleCallback"],[38,49,28,40],[38,53,28,44,"WINDOW"],[38,61,28,50],[38,62,28,50,"WINDOW"],[38,68,28,50],[38,69,28,51,"setTimeout"],[38,79,28,61],[40,4,30,2],[41,4,31,2],[42,4,32,2],[42,8,32,6,"WINDOW"],[42,16,32,12],[42,17,32,12,"WINDOW"],[42,23,32,12],[42,24,32,13,"document"],[42,32,32,21],[42,34,32,23,"visibilityState"],[42,49,32,38],[42,54,32,43],[42,62,32,51],[42,64,32,53],[43,6,33,4,"cb"],[43,8,33,6],[43,9,33,7],[43,10,33,8],[44,4,34,2],[44,5,34,3],[44,11,34,9],[45,6,35,4],[46,6,36,4,"cb"],[46,8,36,6],[46,11,36,9],[46,15,36,9,"runOnce"],[46,25,36,16],[46,26,36,16,"runOnce"],[46,33,36,16],[46,35,36,17,"cb"],[46,37,36,19],[46,38,36,20],[47,6,37,4],[47,10,37,4,"addPageListener"],[47,28,37,19],[47,29,37,19,"addPageListener"],[47,44,37,19],[47,46,37,20],[47,64,37,38],[47,66,37,40,"cb"],[47,68,37,42],[47,70,37,44],[48,8,37,46,"once"],[48,12,37,50],[48,14,37,52],[48,18,37,56],[49,8,37,58,"capture"],[49,15,37,65],[49,17,37,67],[50,6,37,72],[50,7,37,73],[50,8,37,74],[51,6,38,4,"rIC"],[51,9,38,7],[51,10,38,8],[51,16,38,14],[52,8,39,6,"cb"],[52,10,39,8],[52,11,39,9],[52,12,39,10],[53,8,40,6],[54,8,41,6],[55,8,42,6],[55,12,42,6,"removePageListener"],[55,30,42,24],[55,31,42,24,"removePageListener"],[55,49,42,24],[55,51,42,25],[55,69,42,43],[55,71,42,45,"cb"],[55,73,42,47],[55,75,42,49],[56,10,42,51,"capture"],[56,17,42,58],[56,19,42,60],[57,8,42,65],[57,9,42,66],[57,10,42,67],[58,6,43,4],[58,7,43,5],[58,8,43,6],[59,6,44,4],[60,6,45,4],[61,6,46,4],[62,6,47,4],[62,10,47,4,"onHidden"],[62,21,47,12],[62,22,47,12,"onHidden"],[62,30,47,12],[62,32,47,13,"cb"],[62,34,47,15],[62,35,47,16],[63,4,48,2],[64,2,49,0],[64,3,49,1],[65,0,49,2],[65,3]],"functionMap":{"names":["<global>","whenIdleOrHidden","rIC$argument_0"],"mappings":"AAA;yBC0B;QCW;KDK;CDM"},"hasCjsExports":false},"type":"js/module"}]}