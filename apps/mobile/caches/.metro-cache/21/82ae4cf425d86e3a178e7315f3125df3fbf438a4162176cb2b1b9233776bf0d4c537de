{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":37,"index":84}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useReportUser = useReportUser;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  function useReportUser(matchInfo, user) {\n    _s();\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      reportOpen = _useState2[0],\n      setReportOpen = _useState2[1];\n    var _useState3 = (0, _react.useState)(\"HARASSMENT\"),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      reportType = _useState4[0],\n      setReportType = _useState4[1];\n    var _useState5 = (0, _react.useState)(\"\"),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      reportDesc = _useState6[0],\n      setReportDesc = _useState6[1];\n    var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      reportSending = _useState8[0],\n      setReportSending = _useState8[1];\n    var submitReport = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!user?.id) return;\n      var reportedUserId = matchInfo?.otherUser?.id;\n      if (!reportedUserId) {\n        _reactNative.Alert.alert(\"Report failed\", \"Could not find the other user.\");\n        return;\n      }\n      var description = reportDesc.trim();\n      if (!description) {\n        _reactNative.Alert.alert(\"Add details\", \"Please add a short description.\");\n        return;\n      }\n      try {\n        setReportSending(true);\n        var resp = yield fetch(\"/api/reports\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            reporterUserId: user.id,\n            reportedUserId,\n            reportType,\n            description\n          })\n        });\n        if (!resp.ok) {\n          var text = yield resp.text();\n          throw new Error(`When posting /api/reports, the response was [${resp.status}] ${resp.statusText}. ${text}`);\n        }\n        setReportOpen(false);\n        setReportDesc(\"\");\n        _reactNative.Alert.alert(\"Report sent\", \"Thanks â€” our team will review it. You can also block this user from the menu.\");\n      } catch (e) {\n        console.error(\"Could not report user\", e);\n        _reactNative.Alert.alert(\"Report failed\", \"Could not send your report right now.\");\n      } finally {\n        setReportSending(false);\n      }\n    }), [matchInfo?.otherUser?.id, reportDesc, reportType, user?.id]);\n    return {\n      reportOpen,\n      setReportOpen,\n      reportType,\n      setReportType,\n      reportDesc,\n      setReportDesc,\n      reportSending,\n      submitReport\n    };\n  }\n  _s(useReportUser, \"29jnSp10uPJ/xYBERwBg2FmiA60=\");\n});","lineCount":90,"map":[[13,2,4,0,"exports"],[13,9,4,0],[13,10,4,0,"useReportUser"],[13,23,4,0],[13,26,4,0,"useReportUser"],[13,39,4,0],[14,2,68,1],[14,6,68,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,68,1],[14,45,68,1,"require"],[14,52,68,1],[14,53,68,1,"_dependencyMap"],[14,67,68,1],[15,2,68,1],[15,6,68,1,"_asyncToGenerator"],[15,23,68,1],[15,26,68,1,"_interopDefault"],[15,41,68,1],[15,42,68,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,68,1],[16,2,68,1],[16,6,68,1,"_babelRuntimeHelpersSlicedToArray"],[16,39,68,1],[16,42,68,1,"require"],[16,49,68,1],[16,50,68,1,"_dependencyMap"],[16,64,68,1],[17,2,68,1],[17,6,68,1,"_slicedToArray"],[17,20,68,1],[17,23,68,1,"_interopDefault"],[17,38,68,1],[17,39,68,1,"_babelRuntimeHelpersSlicedToArray"],[17,72,68,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNative"],[19,18,2,0],[19,21,2,0,"require"],[19,28,2,0],[19,29,2,0,"_dependencyMap"],[19,43,2,0],[20,2,4,7],[20,11,4,16,"useReportUser"],[20,24,4,29,"useReportUser"],[20,25,4,30,"matchInfo"],[20,34,4,39],[20,36,4,41,"user"],[20,40,4,45],[20,42,4,47],[21,4,4,47,"_s"],[21,6,4,47],[22,4,5,2],[22,8,5,2,"_useState"],[22,17,5,2],[22,20,5,38],[22,24,5,38,"useState"],[22,30,5,46],[22,31,5,46,"useState"],[22,39,5,46],[22,41,5,47],[22,46,5,52],[22,47,5,53],[23,6,5,53,"_useState2"],[23,16,5,53],[23,23,5,53,"_slicedToArray"],[23,37,5,53],[23,38,5,53,"default"],[23,45,5,53],[23,47,5,53,"_useState"],[23,56,5,53],[24,6,5,9,"reportOpen"],[24,16,5,19],[24,19,5,19,"_useState2"],[24,29,5,19],[25,6,5,21,"setReportOpen"],[25,19,5,34],[25,22,5,34,"_useState2"],[25,32,5,34],[26,4,6,2],[26,8,6,2,"_useState3"],[26,18,6,2],[26,21,6,38],[26,25,6,38,"useState"],[26,31,6,46],[26,32,6,46,"useState"],[26,40,6,46],[26,42,6,47],[26,54,6,59],[26,55,6,60],[27,6,6,60,"_useState4"],[27,16,6,60],[27,23,6,60,"_slicedToArray"],[27,37,6,60],[27,38,6,60,"default"],[27,45,6,60],[27,47,6,60,"_useState3"],[27,57,6,60],[28,6,6,9,"reportType"],[28,16,6,19],[28,19,6,19,"_useState4"],[28,29,6,19],[29,6,6,21,"setReportType"],[29,19,6,34],[29,22,6,34,"_useState4"],[29,32,6,34],[30,4,7,2],[30,8,7,2,"_useState5"],[30,18,7,2],[30,21,7,38],[30,25,7,38,"useState"],[30,31,7,46],[30,32,7,46,"useState"],[30,40,7,46],[30,42,7,47],[30,44,7,49],[30,45,7,50],[31,6,7,50,"_useState6"],[31,16,7,50],[31,23,7,50,"_slicedToArray"],[31,37,7,50],[31,38,7,50,"default"],[31,45,7,50],[31,47,7,50,"_useState5"],[31,57,7,50],[32,6,7,9,"reportDesc"],[32,16,7,19],[32,19,7,19,"_useState6"],[32,29,7,19],[33,6,7,21,"setReportDesc"],[33,19,7,34],[33,22,7,34,"_useState6"],[33,32,7,34],[34,4,8,2],[34,8,8,2,"_useState7"],[34,18,8,2],[34,21,8,44],[34,25,8,44,"useState"],[34,31,8,52],[34,32,8,52,"useState"],[34,40,8,52],[34,42,8,53],[34,47,8,58],[34,48,8,59],[35,6,8,59,"_useState8"],[35,16,8,59],[35,23,8,59,"_slicedToArray"],[35,37,8,59],[35,38,8,59,"default"],[35,45,8,59],[35,47,8,59,"_useState7"],[35,57,8,59],[36,6,8,9,"reportSending"],[36,19,8,22],[36,22,8,22,"_useState8"],[36,32,8,22],[37,6,8,24,"setReportSending"],[37,22,8,40],[37,25,8,40,"_useState8"],[37,35,8,40],[38,4,10,2],[38,8,10,8,"submitReport"],[38,20,10,20],[38,23,10,23],[38,27,10,23,"useCallback"],[38,33,10,34],[38,34,10,34,"useCallback"],[38,45,10,34],[38,64,10,34,"_asyncToGenerator"],[38,81,10,34],[38,82,10,34,"default"],[38,89,10,34],[38,91,10,35],[38,104,10,47],[39,6,11,4],[39,10,11,8],[39,11,11,9,"user"],[39,15,11,13],[39,17,11,15,"id"],[39,19,11,17],[39,21,11,19],[40,6,12,4],[40,10,12,10,"reportedUserId"],[40,24,12,24],[40,27,12,27,"matchInfo"],[40,36,12,36],[40,38,12,38,"otherUser"],[40,47,12,47],[40,49,12,49,"id"],[40,51,12,51],[41,6,13,4],[41,10,13,8],[41,11,13,9,"reportedUserId"],[41,25,13,23],[41,27,13,25],[42,8,14,6,"Alert"],[42,20,14,11],[42,21,14,11,"Alert"],[42,26,14,11],[42,27,14,12,"alert"],[42,32,14,17],[42,33,14,18],[42,48,14,33],[42,50,14,35],[42,82,14,67],[42,83,14,68],[43,8,15,6],[44,6,16,4],[45,6,18,4],[45,10,18,10,"description"],[45,21,18,21],[45,24,18,24,"reportDesc"],[45,34,18,34],[45,35,18,35,"trim"],[45,39,18,39],[45,40,18,40],[45,41,18,41],[46,6,19,4],[46,10,19,8],[46,11,19,9,"description"],[46,22,19,20],[46,24,19,22],[47,8,20,6,"Alert"],[47,20,20,11],[47,21,20,11,"Alert"],[47,26,20,11],[47,27,20,12,"alert"],[47,32,20,17],[47,33,20,18],[47,46,20,31],[47,48,20,33],[47,81,20,66],[47,82,20,67],[48,8,21,6],[49,6,22,4],[50,6,24,4],[50,10,24,8],[51,8,25,6,"setReportSending"],[51,24,25,22],[51,25,25,23],[51,29,25,27],[51,30,25,28],[52,8,26,6],[52,12,26,12,"resp"],[52,16,26,16],[52,25,26,25,"fetch"],[52,30,26,30],[52,31,26,31],[52,45,26,45],[52,47,26,47],[53,10,27,8,"method"],[53,16,27,14],[53,18,27,16],[53,24,27,22],[54,10,28,8,"headers"],[54,17,28,15],[54,19,28,17],[55,12,28,19],[55,26,28,33],[55,28,28,35],[56,10,28,54],[56,11,28,55],[57,10,29,8,"body"],[57,14,29,12],[57,16,29,14,"JSON"],[57,20,29,18],[57,21,29,19,"stringify"],[57,30,29,28],[57,31,29,29],[58,12,30,10,"reporterUserId"],[58,26,30,24],[58,28,30,26,"user"],[58,32,30,30],[58,33,30,31,"id"],[58,35,30,33],[59,12,31,10,"reportedUserId"],[59,26,31,24],[60,12,32,10,"reportType"],[60,22,32,20],[61,12,33,10,"description"],[62,10,34,8],[62,11,34,9],[63,8,35,6],[63,9,35,7],[63,10,35,8],[64,8,37,6],[64,12,37,10],[64,13,37,11,"resp"],[64,17,37,15],[64,18,37,16,"ok"],[64,20,37,18],[64,22,37,20],[65,10,38,8],[65,14,38,14,"text"],[65,18,38,18],[65,27,38,27,"resp"],[65,31,38,31],[65,32,38,32,"text"],[65,36,38,36],[65,37,38,37],[65,38,38,38],[66,10,39,8],[66,16,39,14],[66,20,39,18,"Error"],[66,25,39,23],[66,26,40,10],[66,74,40,58,"resp"],[66,78,40,62],[66,79,40,63,"status"],[66,85,40,69],[66,90,40,74,"resp"],[66,94,40,78],[66,95,40,79,"statusText"],[66,105,40,89],[66,110,40,94,"text"],[66,114,40,98],[66,116,41,8],[66,117,41,9],[67,8,42,6],[68,8,44,6,"setReportOpen"],[68,21,44,19],[68,22,44,20],[68,27,44,25],[68,28,44,26],[69,8,45,6,"setReportDesc"],[69,21,45,19],[69,22,45,20],[69,24,45,22],[69,25,45,23],[70,8,46,6,"Alert"],[70,20,46,11],[70,21,46,11,"Alert"],[70,26,46,11],[70,27,46,12,"alert"],[70,32,46,17],[70,33,47,8],[70,46,47,21],[70,48,48,8],[70,127,49,6],[70,128,49,7],[71,6,50,4],[71,7,50,5],[71,8,50,6],[71,15,50,13,"e"],[71,16,50,14],[71,18,50,16],[72,8,51,6,"console"],[72,15,51,13],[72,16,51,14,"error"],[72,21,51,19],[72,22,51,20],[72,45,51,43],[72,47,51,45,"e"],[72,48,51,46],[72,49,51,47],[73,8,52,6,"Alert"],[73,20,52,11],[73,21,52,11,"Alert"],[73,26,52,11],[73,27,52,12,"alert"],[73,32,52,17],[73,33,52,18],[73,48,52,33],[73,50,52,35],[73,89,52,74],[73,90,52,75],[74,6,53,4],[74,7,53,5],[74,16,53,14],[75,8,54,6,"setReportSending"],[75,24,54,22],[75,25,54,23],[75,30,54,28],[75,31,54,29],[76,6,55,4],[77,4,56,2],[77,5,56,3],[77,8,56,5],[77,9,56,6,"matchInfo"],[77,18,56,15],[77,20,56,17,"otherUser"],[77,29,56,26],[77,31,56,28,"id"],[77,33,56,30],[77,35,56,32,"reportDesc"],[77,45,56,42],[77,47,56,44,"reportType"],[77,57,56,54],[77,59,56,56,"user"],[77,63,56,60],[77,65,56,62,"id"],[77,67,56,64],[77,68,56,65],[77,69,56,66],[78,4,58,2],[78,11,58,9],[79,6,59,4,"reportOpen"],[79,16,59,14],[80,6,60,4,"setReportOpen"],[80,19,60,17],[81,6,61,4,"reportType"],[81,16,61,14],[82,6,62,4,"setReportType"],[82,19,62,17],[83,6,63,4,"reportDesc"],[83,16,63,14],[84,6,64,4,"setReportDesc"],[84,19,64,17],[85,6,65,4,"reportSending"],[85,19,65,17],[86,6,66,4,"submitReport"],[87,4,67,2],[87,5,67,3],[88,2,68,0],[89,2,68,1,"_s"],[89,4,68,1],[89,5,4,16,"useReportUser"],[89,18,4,29],[90,0,4,29],[90,3]],"functionMap":{"names":["<global>","useReportUser","submitReport"],"mappings":"AAA;OCG;mCCM;GD8C;CDY"},"hasCjsExports":false},"type":"js/module"}]}