{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.isDataUrl = isDataUrl;\n  exports.makeDataUrl = makeDataUrl;\n  exports.fetchAsDataURL = fetchAsDataURL;\n  exports.resourceToDataURL = resourceToDataURL;\n  function getContentFromDataUrl(dataURL) {\n    return dataURL.split(/,/)[1];\n  }\n  function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n  }\n  function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n  }\n  async function fetchAsDataURL(url, init, process) {\n    const res = await fetch(url, init);\n    if (res.status === 404) {\n      throw new Error(`Resource \"${res.url}\" not found`);\n    }\n    const blob = await res.blob();\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onerror = reject;\n      reader.onloadend = () => {\n        try {\n          resolve(process({\n            res,\n            result: reader.result\n          }));\n        } catch (error) {\n          reject(error);\n        }\n      };\n      reader.readAsDataURL(blob);\n    });\n  }\n  const cache = {};\n  function getCacheKey(url, contentType, includeQueryParams) {\n    let key = url.replace(/\\?.*/, '');\n    if (includeQueryParams) {\n      key = url;\n    }\n    // font resource\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n      key = key.replace(/.*\\//, '');\n    }\n    return contentType ? `[${contentType}]${key}` : key;\n  }\n  async function resourceToDataURL(resourceUrl, contentType, options) {\n    const cacheKey = getCacheKey(resourceUrl, contentType, options.includeQueryParams);\n    if (cache[cacheKey] != null) {\n      return cache[cacheKey];\n    }\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n      // eslint-disable-next-line no-param-reassign\n      resourceUrl += (/\\?/.test(resourceUrl) ? '&' : '?') + new Date().getTime();\n    }\n    let dataURL;\n    try {\n      const content = await fetchAsDataURL(resourceUrl, options.fetchRequestInit, ({\n        res,\n        result\n      }) => {\n        if (!contentType) {\n          // eslint-disable-next-line no-param-reassign\n          contentType = res.headers.get('Content-Type') || '';\n        }\n        return getContentFromDataUrl(result);\n      });\n      dataURL = makeDataUrl(content, contentType);\n    } catch (error) {\n      dataURL = options.imagePlaceholder || '';\n      let msg = `Failed to fetch resource: ${resourceUrl}`;\n      if (error) {\n        msg = typeof error === 'string' ? error : error.message;\n      }\n      if (msg) {\n        console.warn(msg);\n      }\n    }\n    cache[cacheKey] = dataURL;\n    return dataURL;\n  }\n});","lineCount":90,"map":[[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"isDataUrl"],[7,19,4,0],[7,22,4,0,"isDataUrl"],[7,31,4,0],[8,2,7,0,"exports"],[8,9,7,0],[8,10,7,0,"makeDataUrl"],[8,21,7,0],[8,24,7,0,"makeDataUrl"],[8,35,7,0],[9,2,10,0,"exports"],[9,9,10,0],[9,10,10,0,"fetchAsDataURL"],[9,24,10,0],[9,27,10,0,"fetchAsDataURL"],[9,41,10,0],[10,2,42,0,"exports"],[10,9,42,0],[10,10,42,0,"resourceToDataURL"],[10,27,42,0],[10,30,42,0,"resourceToDataURL"],[10,47,42,0],[11,2,1,0],[11,11,1,9,"getContentFromDataUrl"],[11,32,1,30,"getContentFromDataUrl"],[11,33,1,31,"dataURL"],[11,40,1,38],[11,42,1,40],[12,4,2,4],[12,11,2,11,"dataURL"],[12,18,2,18],[12,19,2,19,"split"],[12,24,2,24],[12,25,2,25],[12,28,2,28],[12,29,2,29],[12,30,2,30],[12,31,2,31],[12,32,2,32],[13,2,3,0],[14,2,4,7],[14,11,4,16,"isDataUrl"],[14,20,4,25,"isDataUrl"],[14,21,4,26,"url"],[14,24,4,29],[14,26,4,31],[15,4,5,4],[15,11,5,11,"url"],[15,14,5,14],[15,15,5,15,"search"],[15,21,5,21],[15,22,5,22],[15,32,5,32],[15,33,5,33],[15,38,5,38],[15,39,5,39],[15,40,5,40],[16,2,6,0],[17,2,7,7],[17,11,7,16,"makeDataUrl"],[17,22,7,27,"makeDataUrl"],[17,23,7,28,"content"],[17,30,7,35],[17,32,7,37,"mimeType"],[17,40,7,45],[17,42,7,47],[18,4,8,4],[18,11,8,11],[18,19,8,19,"mimeType"],[18,27,8,27],[18,38,8,38,"content"],[18,45,8,45],[18,47,8,47],[19,2,9,0],[20,2,10,7],[20,17,10,22,"fetchAsDataURL"],[20,31,10,36,"fetchAsDataURL"],[20,32,10,37,"url"],[20,35,10,40],[20,37,10,42,"init"],[20,41,10,46],[20,43,10,48,"process"],[20,50,10,55],[20,52,10,57],[21,4,11,4],[21,10,11,10,"res"],[21,13,11,13],[21,16,11,16],[21,22,11,22,"fetch"],[21,27,11,27],[21,28,11,28,"url"],[21,31,11,31],[21,33,11,33,"init"],[21,37,11,37],[21,38,11,38],[22,4,12,4],[22,8,12,8,"res"],[22,11,12,11],[22,12,12,12,"status"],[22,18,12,18],[22,23,12,23],[22,26,12,26],[22,28,12,28],[23,6,13,8],[23,12,13,14],[23,16,13,18,"Error"],[23,21,13,23],[23,22,13,24],[23,35,13,37,"res"],[23,38,13,40],[23,39,13,41,"url"],[23,42,13,44],[23,55,13,57],[23,56,13,58],[24,4,14,4],[25,4,15,4],[25,10,15,10,"blob"],[25,14,15,14],[25,17,15,17],[25,23,15,23,"res"],[25,26,15,26],[25,27,15,27,"blob"],[25,31,15,31],[25,32,15,32],[25,33,15,33],[26,4,16,4],[26,11,16,11],[26,15,16,15,"Promise"],[26,22,16,22],[26,23,16,23],[26,24,16,24,"resolve"],[26,31,16,31],[26,33,16,33,"reject"],[26,39,16,39],[26,44,16,44],[27,6,17,8],[27,12,17,14,"reader"],[27,18,17,20],[27,21,17,23],[27,25,17,27,"FileReader"],[27,35,17,37],[27,36,17,38],[27,37,17,39],[28,6,18,8,"reader"],[28,12,18,14],[28,13,18,15,"onerror"],[28,20,18,22],[28,23,18,25,"reject"],[28,29,18,31],[29,6,19,8,"reader"],[29,12,19,14],[29,13,19,15,"onloadend"],[29,22,19,24],[29,25,19,27],[29,31,19,33],[30,8,20,12],[30,12,20,16],[31,10,21,16,"resolve"],[31,17,21,23],[31,18,21,24,"process"],[31,25,21,31],[31,26,21,32],[32,12,21,34,"res"],[32,15,21,37],[33,12,21,39,"result"],[33,18,21,45],[33,20,21,47,"reader"],[33,26,21,53],[33,27,21,54,"result"],[34,10,21,61],[34,11,21,62],[34,12,21,63],[34,13,21,64],[35,8,22,12],[35,9,22,13],[35,10,23,12],[35,17,23,19,"error"],[35,22,23,24],[35,24,23,26],[36,10,24,16,"reject"],[36,16,24,22],[36,17,24,23,"error"],[36,22,24,28],[36,23,24,29],[37,8,25,12],[38,6,26,8],[38,7,26,9],[39,6,27,8,"reader"],[39,12,27,14],[39,13,27,15,"readAsDataURL"],[39,26,27,28],[39,27,27,29,"blob"],[39,31,27,33],[39,32,27,34],[40,4,28,4],[40,5,28,5],[40,6,28,6],[41,2,29,0],[42,2,30,0],[42,8,30,6,"cache"],[42,13,30,11],[42,16,30,14],[42,17,30,15],[42,18,30,16],[43,2,31,0],[43,11,31,9,"getCacheKey"],[43,22,31,20,"getCacheKey"],[43,23,31,21,"url"],[43,26,31,24],[43,28,31,26,"contentType"],[43,39,31,37],[43,41,31,39,"includeQueryParams"],[43,59,31,57],[43,61,31,59],[44,4,32,4],[44,8,32,8,"key"],[44,11,32,11],[44,14,32,14,"url"],[44,17,32,17],[44,18,32,18,"replace"],[44,25,32,25],[44,26,32,26],[44,32,32,32],[44,34,32,34],[44,36,32,36],[44,37,32,37],[45,4,33,4],[45,8,33,8,"includeQueryParams"],[45,26,33,26],[45,28,33,28],[46,6,34,8,"key"],[46,9,34,11],[46,12,34,14,"url"],[46,15,34,17],[47,4,35,4],[48,4,36,4],[49,4,37,4],[49,8,37,8],[49,29,37,29],[49,30,37,30,"test"],[49,34,37,34],[49,35,37,35,"key"],[49,38,37,38],[49,39,37,39],[49,41,37,41],[50,6,38,8,"key"],[50,9,38,11],[50,12,38,14,"key"],[50,15,38,17],[50,16,38,18,"replace"],[50,23,38,25],[50,24,38,26],[50,30,38,32],[50,32,38,34],[50,34,38,36],[50,35,38,37],[51,4,39,4],[52,4,40,4],[52,11,40,11,"contentType"],[52,22,40,22],[52,25,40,25],[52,29,40,29,"contentType"],[52,40,40,40],[52,44,40,44,"key"],[52,47,40,47],[52,49,40,49],[52,52,40,52,"key"],[52,55,40,55],[53,2,41,0],[54,2,42,7],[54,17,42,22,"resourceToDataURL"],[54,34,42,39,"resourceToDataURL"],[54,35,42,40,"resourceUrl"],[54,46,42,51],[54,48,42,53,"contentType"],[54,59,42,64],[54,61,42,66,"options"],[54,68,42,73],[54,70,42,75],[55,4,43,4],[55,10,43,10,"cacheKey"],[55,18,43,18],[55,21,43,21,"getCacheKey"],[55,32,43,32],[55,33,43,33,"resourceUrl"],[55,44,43,44],[55,46,43,46,"contentType"],[55,57,43,57],[55,59,43,59,"options"],[55,66,43,66],[55,67,43,67,"includeQueryParams"],[55,85,43,85],[55,86,43,86],[56,4,44,4],[56,8,44,8,"cache"],[56,13,44,13],[56,14,44,14,"cacheKey"],[56,22,44,22],[56,23,44,23],[56,27,44,27],[56,31,44,31],[56,33,44,33],[57,6,45,8],[57,13,45,15,"cache"],[57,18,45,20],[57,19,45,21,"cacheKey"],[57,27,45,29],[57,28,45,30],[58,4,46,4],[59,4,47,4],[60,4,48,4],[60,8,48,8,"options"],[60,15,48,15],[60,16,48,16,"cacheBust"],[60,25,48,25],[60,27,48,27],[61,6,49,8],[62,6,50,8,"resourceUrl"],[62,17,50,19],[62,21,50,23],[62,22,50,24],[62,26,50,28],[62,27,50,29,"test"],[62,31,50,33],[62,32,50,34,"resourceUrl"],[62,43,50,45],[62,44,50,46],[62,47,50,49],[62,50,50,52],[62,53,50,55],[62,56,50,58],[62,60,50,62],[62,64,50,66,"Date"],[62,68,50,70],[62,69,50,71],[62,70,50,72],[62,71,50,73,"getTime"],[62,78,50,80],[62,79,50,81],[62,80,50,82],[63,4,51,4],[64,4,52,4],[64,8,52,8,"dataURL"],[64,15,52,15],[65,4,53,4],[65,8,53,8],[66,6,54,8],[66,12,54,14,"content"],[66,19,54,21],[66,22,54,24],[66,28,54,30,"fetchAsDataURL"],[66,42,54,44],[66,43,54,45,"resourceUrl"],[66,54,54,56],[66,56,54,58,"options"],[66,63,54,65],[66,64,54,66,"fetchRequestInit"],[66,80,54,82],[66,82,54,84],[66,83,54,85],[67,8,54,87,"res"],[67,11,54,90],[68,8,54,92,"result"],[69,6,54,99],[69,7,54,100],[69,12,54,105],[70,8,55,12],[70,12,55,16],[70,13,55,17,"contentType"],[70,24,55,28],[70,26,55,30],[71,10,56,16],[72,10,57,16,"contentType"],[72,21,57,27],[72,24,57,30,"res"],[72,27,57,33],[72,28,57,34,"headers"],[72,35,57,41],[72,36,57,42,"get"],[72,39,57,45],[72,40,57,46],[72,54,57,60],[72,55,57,61],[72,59,57,65],[72,61,57,67],[73,8,58,12],[74,8,59,12],[74,15,59,19,"getContentFromDataUrl"],[74,36,59,40],[74,37,59,41,"result"],[74,43,59,47],[74,44,59,48],[75,6,60,8],[75,7,60,9],[75,8,60,10],[76,6,61,8,"dataURL"],[76,13,61,15],[76,16,61,18,"makeDataUrl"],[76,27,61,29],[76,28,61,30,"content"],[76,35,61,37],[76,37,61,39,"contentType"],[76,48,61,50],[76,49,61,51],[77,4,62,4],[77,5,62,5],[77,6,63,4],[77,13,63,11,"error"],[77,18,63,16],[77,20,63,18],[78,6,64,8,"dataURL"],[78,13,64,15],[78,16,64,18,"options"],[78,23,64,25],[78,24,64,26,"imagePlaceholder"],[78,40,64,42],[78,44,64,46],[78,46,64,48],[79,6,65,8],[79,10,65,12,"msg"],[79,13,65,15],[79,16,65,18],[79,45,65,47,"resourceUrl"],[79,56,65,58],[79,58,65,60],[80,6,66,8],[80,10,66,12,"error"],[80,15,66,17],[80,17,66,19],[81,8,67,12,"msg"],[81,11,67,15],[81,14,67,18],[81,21,67,25,"error"],[81,26,67,30],[81,31,67,35],[81,39,67,43],[81,42,67,46,"error"],[81,47,67,51],[81,50,67,54,"error"],[81,55,67,59],[81,56,67,60,"message"],[81,63,67,67],[82,6,68,8],[83,6,69,8],[83,10,69,12,"msg"],[83,13,69,15],[83,15,69,17],[84,8,70,12,"console"],[84,15,70,19],[84,16,70,20,"warn"],[84,20,70,24],[84,21,70,25,"msg"],[84,24,70,28],[84,25,70,29],[85,6,71,8],[86,4,72,4],[87,4,73,4,"cache"],[87,9,73,9],[87,10,73,10,"cacheKey"],[87,18,73,18],[87,19,73,19],[87,22,73,22,"dataURL"],[87,29,73,29],[88,4,74,4],[88,11,74,11,"dataURL"],[88,18,74,18],[89,2,75,0],[90,0,75,1],[90,3]],"functionMap":{"names":["getContentFromDataUrl","<global>","isDataUrl","makeDataUrl","fetchAsDataURL","Promise$argument_0","reader.onloadend","getCacheKey","resourceToDataURL","fetchAsDataURL$argument_2"],"mappings":"AAA;CCE;OCC;CDE;OEC;CFE;OGC;uBCM;2BCG;SDO;KDE;CHC;AME;CNU;OOC;oFCY;SDM;CPe"},"hasCjsExports":false},"type":"js/module"}]}