{"dependencies":[{"name":"../../jsutils/inspect.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"HkUMP5eMiKp2JNHcQbAA+S+H8jk=","exportNames":["*"],"imports":1}},{"name":"../../error/GraphQLError.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":60,"index":113}}],"key":"bmIpo7jOJABVILoymQcjQyoT3Bc=","exportNames":["*"],"imports":1}},{"name":"../../type/definition.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":114},"end":{"line":3,"column":60,"index":174}}],"key":"OJG9n3Eg7iYSTCZRKQx0dU0wthg=","exportNames":["*"],"imports":1}},{"name":"../../utilities/typeComparators.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":175},"end":{"line":4,"column":69,"index":244}}],"key":"aeY9uavlNyWIh5UIhTfxqFr2TVE=","exportNames":["*"],"imports":1}},{"name":"../../utilities/typeFromAST.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":245},"end":{"line":5,"column":62,"index":307}}],"key":"P51FP4x0ZRWtfhGrarBWkkKMM2k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.PossibleFragmentSpreadsRule = PossibleFragmentSpreadsRule;\n  var _jsutilsInspectMjs = require(_dependencyMap[0]);\n  var _errorGraphQLErrorMjs = require(_dependencyMap[1]);\n  var _typeDefinitionMjs = require(_dependencyMap[2]);\n  var _utilitiesTypeComparatorsMjs = require(_dependencyMap[3]);\n  var _utilitiesTypeFromASTMjs = require(_dependencyMap[4]);\n  /**\n   * Possible fragment spread\n   *\n   * A fragment spread is only valid if the type condition could ever possibly\n   * be true: if there is a non-empty intersection of the possible parent types,\n   * and possible types which pass the type condition.\n   */\n  function PossibleFragmentSpreadsRule(context) {\n    return {\n      InlineFragment(node) {\n        var fragType = context.getType();\n        var parentType = context.getParentType();\n        if ((0, _typeDefinitionMjs.isCompositeType)(fragType) && (0, _typeDefinitionMjs.isCompositeType)(parentType) && !(0, _utilitiesTypeComparatorsMjs.doTypesOverlap)(context.getSchema(), fragType, parentType)) {\n          var parentTypeStr = (0, _jsutilsInspectMjs.inspect)(parentType);\n          var fragTypeStr = (0, _jsutilsInspectMjs.inspect)(fragType);\n          context.reportError(new _errorGraphQLErrorMjs.GraphQLError(`Fragment cannot be spread here as objects of type \"${parentTypeStr}\" can never be of type \"${fragTypeStr}\".`, {\n            nodes: node\n          }));\n        }\n      },\n      FragmentSpread(node) {\n        var fragName = node.name.value;\n        var fragType = getFragmentType(context, fragName);\n        var parentType = context.getParentType();\n        if (fragType && parentType && !(0, _utilitiesTypeComparatorsMjs.doTypesOverlap)(context.getSchema(), fragType, parentType)) {\n          var parentTypeStr = (0, _jsutilsInspectMjs.inspect)(parentType);\n          var fragTypeStr = (0, _jsutilsInspectMjs.inspect)(fragType);\n          context.reportError(new _errorGraphQLErrorMjs.GraphQLError(`Fragment \"${fragName}\" cannot be spread here as objects of type \"${parentTypeStr}\" can never be of type \"${fragTypeStr}\".`, {\n            nodes: node\n          }));\n        }\n      }\n    };\n  }\n  function getFragmentType(context, name) {\n    var frag = context.getFragment(name);\n    if (frag) {\n      var type = (0, _utilitiesTypeFromASTMjs.typeFromAST)(context.getSchema(), frag.typeCondition);\n      if ((0, _typeDefinitionMjs.isCompositeType)(type)) {\n        return type;\n      }\n    }\n  }\n});","lineCount":56,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"PossibleFragmentSpreadsRule"],[7,37,14,0],[7,40,14,0,"PossibleFragmentSpreadsRule"],[7,67,14,0],[8,2,1,0],[8,6,1,0,"_jsutilsInspectMjs"],[8,24,1,0],[8,27,1,0,"require"],[8,34,1,0],[8,35,1,0,"_dependencyMap"],[8,49,1,0],[9,2,2,0],[9,6,2,0,"_errorGraphQLErrorMjs"],[9,27,2,0],[9,30,2,0,"require"],[9,37,2,0],[9,38,2,0,"_dependencyMap"],[9,52,2,0],[10,2,3,0],[10,6,3,0,"_typeDefinitionMjs"],[10,24,3,0],[10,27,3,0,"require"],[10,34,3,0],[10,35,3,0,"_dependencyMap"],[10,49,3,0],[11,2,4,0],[11,6,4,0,"_utilitiesTypeComparatorsMjs"],[11,34,4,0],[11,37,4,0,"require"],[11,44,4,0],[11,45,4,0,"_dependencyMap"],[11,59,4,0],[12,2,5,0],[12,6,5,0,"_utilitiesTypeFromASTMjs"],[12,30,5,0],[12,33,5,0,"require"],[12,40,5,0],[12,41,5,0,"_dependencyMap"],[12,55,5,0],[13,2,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,2,14,7],[20,11,14,16,"PossibleFragmentSpreadsRule"],[20,38,14,43,"PossibleFragmentSpreadsRule"],[20,39,14,44,"context"],[20,46,14,51],[20,48,14,53],[21,4,15,2],[21,11,15,9],[22,6,16,4,"InlineFragment"],[22,20,16,18,"InlineFragment"],[22,21,16,19,"node"],[22,25,16,23],[22,27,16,25],[23,8,17,6],[23,12,17,12,"fragType"],[23,20,17,20],[23,23,17,23,"context"],[23,30,17,30],[23,31,17,31,"getType"],[23,38,17,38],[23,39,17,39],[23,40,17,40],[24,8,18,6],[24,12,18,12,"parentType"],[24,22,18,22],[24,25,18,25,"context"],[24,32,18,32],[24,33,18,33,"getParentType"],[24,46,18,46],[24,47,18,47],[24,48,18,48],[25,8,20,6],[25,12,21,8],[25,16,21,8,"isCompositeType"],[25,34,21,23],[25,35,21,23,"isCompositeType"],[25,50,21,23],[25,52,21,24,"fragType"],[25,60,21,32],[25,61,21,33],[25,65,22,8],[25,69,22,8,"isCompositeType"],[25,87,22,23],[25,88,22,23,"isCompositeType"],[25,103,22,23],[25,105,22,24,"parentType"],[25,115,22,34],[25,116,22,35],[25,120,23,8],[25,121,23,9],[25,125,23,9,"doTypesOverlap"],[25,153,23,23],[25,154,23,23,"doTypesOverlap"],[25,168,23,23],[25,170,23,24,"context"],[25,177,23,31],[25,178,23,32,"getSchema"],[25,187,23,41],[25,188,23,42],[25,189,23,43],[25,191,23,45,"fragType"],[25,199,23,53],[25,201,23,55,"parentType"],[25,211,23,65],[25,212,23,66],[25,214,24,8],[26,10,25,8],[26,14,25,14,"parentTypeStr"],[26,27,25,27],[26,30,25,30],[26,34,25,30,"inspect"],[26,52,25,37],[26,53,25,37,"inspect"],[26,60,25,37],[26,62,25,38,"parentType"],[26,72,25,48],[26,73,25,49],[27,10,26,8],[27,14,26,14,"fragTypeStr"],[27,25,26,25],[27,28,26,28],[27,32,26,28,"inspect"],[27,50,26,35],[27,51,26,35,"inspect"],[27,58,26,35],[27,60,26,36,"fragType"],[27,68,26,44],[27,69,26,45],[28,10,27,8,"context"],[28,17,27,15],[28,18,27,16,"reportError"],[28,29,27,27],[28,30,28,10],[28,34,28,14,"GraphQLError"],[28,55,28,26],[28,56,28,26,"GraphQLError"],[28,68,28,26],[28,69,29,12],[28,123,29,66,"parentTypeStr"],[28,136,29,79],[28,163,29,106,"fragTypeStr"],[28,174,29,117],[28,178,29,121],[28,180,30,12],[29,12,31,14,"nodes"],[29,17,31,19],[29,19,31,21,"node"],[30,10,32,12],[30,11,33,10],[30,12,34,8],[30,13,34,9],[31,8,35,6],[32,6,36,4],[32,7,36,5],[33,6,38,4,"FragmentSpread"],[33,20,38,18,"FragmentSpread"],[33,21,38,19,"node"],[33,25,38,23],[33,27,38,25],[34,8,39,6],[34,12,39,12,"fragName"],[34,20,39,20],[34,23,39,23,"node"],[34,27,39,27],[34,28,39,28,"name"],[34,32,39,32],[34,33,39,33,"value"],[34,38,39,38],[35,8,40,6],[35,12,40,12,"fragType"],[35,20,40,20],[35,23,40,23,"getFragmentType"],[35,38,40,38],[35,39,40,39,"context"],[35,46,40,46],[35,48,40,48,"fragName"],[35,56,40,56],[35,57,40,57],[36,8,41,6],[36,12,41,12,"parentType"],[36,22,41,22],[36,25,41,25,"context"],[36,32,41,32],[36,33,41,33,"getParentType"],[36,46,41,46],[36,47,41,47],[36,48,41,48],[37,8,43,6],[37,12,44,8,"fragType"],[37,20,44,16],[37,24,45,8,"parentType"],[37,34,45,18],[37,38,46,8],[37,39,46,9],[37,43,46,9,"doTypesOverlap"],[37,71,46,23],[37,72,46,23,"doTypesOverlap"],[37,86,46,23],[37,88,46,24,"context"],[37,95,46,31],[37,96,46,32,"getSchema"],[37,105,46,41],[37,106,46,42],[37,107,46,43],[37,109,46,45,"fragType"],[37,117,46,53],[37,119,46,55,"parentType"],[37,129,46,65],[37,130,46,66],[37,132,47,8],[38,10,48,8],[38,14,48,14,"parentTypeStr"],[38,27,48,27],[38,30,48,30],[38,34,48,30,"inspect"],[38,52,48,37],[38,53,48,37,"inspect"],[38,60,48,37],[38,62,48,38,"parentType"],[38,72,48,48],[38,73,48,49],[39,10,49,8],[39,14,49,14,"fragTypeStr"],[39,25,49,25],[39,28,49,28],[39,32,49,28,"inspect"],[39,50,49,35],[39,51,49,35,"inspect"],[39,58,49,35],[39,60,49,36,"fragType"],[39,68,49,44],[39,69,49,45],[40,10,50,8,"context"],[40,17,50,15],[40,18,50,16,"reportError"],[40,29,50,27],[40,30,51,10],[40,34,51,14,"GraphQLError"],[40,55,51,26],[40,56,51,26,"GraphQLError"],[40,68,51,26],[40,69,52,12],[40,82,52,25,"fragName"],[40,90,52,33],[40,137,52,80,"parentTypeStr"],[40,150,52,93],[40,177,52,120,"fragTypeStr"],[40,188,52,131],[40,192,52,135],[40,194,53,12],[41,12,54,14,"nodes"],[41,17,54,19],[41,19,54,21,"node"],[42,10,55,12],[42,11,56,10],[42,12,57,8],[42,13,57,9],[43,8,58,6],[44,6,59,4],[45,4,60,2],[45,5,60,3],[46,2,61,0],[47,2,63,0],[47,11,63,9,"getFragmentType"],[47,26,63,24,"getFragmentType"],[47,27,63,25,"context"],[47,34,63,32],[47,36,63,34,"name"],[47,40,63,38],[47,42,63,40],[48,4,64,2],[48,8,64,8,"frag"],[48,12,64,12],[48,15,64,15,"context"],[48,22,64,22],[48,23,64,23,"getFragment"],[48,34,64,34],[48,35,64,35,"name"],[48,39,64,39],[48,40,64,40],[49,4,66,2],[49,8,66,6,"frag"],[49,12,66,10],[49,14,66,12],[50,6,67,4],[50,10,67,10,"type"],[50,14,67,14],[50,17,67,17],[50,21,67,17,"typeFromAST"],[50,45,67,28],[50,46,67,28,"typeFromAST"],[50,57,67,28],[50,59,67,29,"context"],[50,66,67,36],[50,67,67,37,"getSchema"],[50,76,67,46],[50,77,67,47],[50,78,67,48],[50,80,67,50,"frag"],[50,84,67,54],[50,85,67,55,"typeCondition"],[50,98,67,68],[50,99,67,69],[51,6,69,4],[51,10,69,8],[51,14,69,8,"isCompositeType"],[51,32,69,23],[51,33,69,23,"isCompositeType"],[51,48,69,23],[51,50,69,24,"type"],[51,54,69,28],[51,55,69,29],[51,57,69,31],[52,8,70,6],[52,15,70,13,"type"],[52,19,70,17],[53,6,71,4],[54,4,72,2],[55,2,73,0],[56,0,73,1],[56,3]],"functionMap":{"names":["<global>","PossibleFragmentSpreadsRule","InlineFragment","FragmentSpread","getFragmentType"],"mappings":"AAA;OCa;ICE;KDoB;IEE;KFqB;CDE;AIE;CJU"},"hasCjsExports":false},"type":"js/module"}]}