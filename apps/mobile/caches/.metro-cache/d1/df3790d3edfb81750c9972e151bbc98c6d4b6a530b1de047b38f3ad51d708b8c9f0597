{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":69,"index":135}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":136},"end":{"line":3,"column":55,"index":191}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesData = useMessagesData;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _tanstackReactQuery = require(_dependencyMap[4], \"@tanstack/react-query\");\n  function useMessagesData() {\n    _s();\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      jwt = _ref.jwt;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      matches = _useState4[0],\n      setMatches = _useState4[1];\n    var _useState5 = (0, _react.useState)(0),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      pendingMatchCount = _useState6[0],\n      setPendingMatchCount = _useState6[1];\n    var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      user = _useState8[0],\n      setUser = _useState8[1];\n    var _useState9 = (0, _react.useState)(null),\n      _useState0 = (0, _slicedToArray.default)(_useState9, 2),\n      error = _useState0[0],\n      setError = _useState0[1];\n    var queryClient = (0, _tanstackReactQuery.useQueryClient)();\n\n    // NEW: safety valve so the Messages tab can never spin forever.\n    var didFinishInitialLoadRef = (0, _react.useRef)(false);\n\n    // NEW: when we have a web-auth JWT (mobile WebView auth), make sure we are\n    // using the correct legacy `users.id`.\n    var ensureLegacyUserFromJwt = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      var token = jwt && typeof jwt === \"string\" ? jwt : null;\n      if (!token) return null;\n      try {\n        var resp = yield fetch(\"/api/users/ensure\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!resp.ok) {\n          // Non-fatal: fall back to AsyncStorage.\n          return null;\n        }\n        var data = yield resp.json().catch(() => null);\n        var ensured = data?.user || null;\n        var ensuredId = Number(ensured?.id);\n        if (!Number.isFinite(ensuredId)) {\n          return null;\n        }\n        return ensured;\n      } catch (e) {\n        console.error(\"/api/users/ensure failed\", e);\n        return null;\n      }\n    }), [jwt]);\n    var markMatchesSeen = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          var resp = yield fetch(\"/api/matches/mark-seen\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              userId\n            })\n          });\n          if (resp.ok) {\n            queryClient.invalidateQueries({\n              queryKey: [\"matchesForBadge\", userId]\n            });\n            queryClient.invalidateQueries({\n              queryKey: [\"matchesSummary\", userId]\n            });\n          }\n        } catch (e) {\n          console.error(\"Could not mark matches seen\", e);\n        }\n      });\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [queryClient]);\n    var fetchWithTimeout = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* (url, options, timeoutMs) {\n        // NOTE: AbortController support varies across RN runtimes.\n        // Promise.race guarantees we never hang on a stuck network call.\n        var controller = typeof AbortController !== \"undefined\" ? new AbortController() : null;\n        var timeoutId = null;\n        var fetchPromise = fetch(url, {\n          ...(options || {}),\n          ...(controller ? {\n            signal: controller.signal\n          } : {})\n        }).finally(() => {\n          if (timeoutId != null) {\n            clearTimeout(timeoutId);\n          }\n        });\n        var timeoutPromise = new Promise((_, reject) => {\n          timeoutId = setTimeout(() => {\n            try {\n              controller?.abort();\n            } catch {\n              // ignore\n            }\n            var err = new Error(`Request timed out after ${timeoutMs}ms`);\n            err.name = \"TimeoutError\";\n            reject(err);\n          }, timeoutMs);\n        });\n        return Promise.race([fetchPromise, timeoutPromise]);\n      });\n      return function (_x2, _x3, _x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }(), []);\n    var loadMatches = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref5 = (0, _asyncToGenerator.default)(function* (userId) {\n        try {\n          setError(null);\n          var response = yield fetchWithTimeout(`/api/matches?userId=${userId}`, null, 12000);\n          if (!response.ok) {\n            throw new Error(`When fetching /api/matches, the response was [${response.status}] ${response.statusText}`);\n          }\n          var data = yield response.json();\n          var list = data.matches || [];\n          setMatches(list);\n          setPendingMatchCount(Number(data?.pendingMatchCount) || 0);\n          return list;\n        } catch (err) {\n          var isTimeout = String(err?.name || \"\").toLowerCase() === \"timeouterror\";\n          console.error(\"Error loading matches:\", err);\n          setError(isTimeout ? \"Messages are taking too long to load. Please try again.\" : \"Could not load matches. Please try again.\");\n          return [];\n        }\n      });\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }(), [fetchWithTimeout]);\n    var loadUserAndMatches = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      try {\n        setError(null);\n        var ensured = yield ensureLegacyUserFromJwt();\n        var userData = yield AsyncStorage.default.getItem(\"user\");\n        var parsedUser = userData ? JSON.parse(userData) : null;\n\n        // Prefer ensured legacy id when available (keeps date credits + matches in sync).\n        var nextUser = parsedUser;\n        if (ensured) {\n          nextUser = {\n            ...(parsedUser || {}),\n            ...ensured,\n            id: ensured.id\n          };\n          try {\n            yield AsyncStorage.default.setItem(\"user\", JSON.stringify(nextUser));\n          } catch (e) {\n            console.error(\"Could not persist ensured user\", e);\n          }\n        }\n        if (!nextUser) {\n          setUser(null);\n          setMatches([]);\n          setPendingMatchCount(0);\n          return;\n        }\n        setUser(nextUser);\n        var uid = Number(nextUser?.id);\n        if (!Number.isFinite(uid)) {\n          setError(\"Could not load messages (missing user id). Please sign in again.\");\n          return;\n        }\n\n        // IMPORTANT: never block the whole screen on mark-seen.\n        markMatchesSeen(uid).catch(() => null);\n        yield loadMatches(uid);\n      } catch (error) {\n        console.error(\"Error loading user:\", error);\n        setError(\"Could not load messages. Please try again.\");\n      } finally {\n        didFinishInitialLoadRef.current = true;\n        setLoading(false);\n      }\n    }), [ensureLegacyUserFromJwt, loadMatches, markMatchesSeen]);\n    (0, _react.useEffect)(() => {\n      loadUserAndMatches();\n    }, [loadUserAndMatches]);\n    (0, _react.useEffect)(() => {\n      // If something in RN fetch/AsyncStorage ever gets into a weird state,\n      // we still stop the spinner and show an error.\n      var watchdogMs = 15000;\n      var id = setTimeout(() => {\n        if (didFinishInitialLoadRef.current) {\n          return;\n        }\n        console.error(`Messages watchdog fired after ${watchdogMs}ms (forcing loading=false).`);\n        setError(\"Messages are taking too long to load. Please try again.\");\n        setLoading(false);\n      }, watchdogMs);\n      return () => clearTimeout(id);\n    }, []);\n    return {\n      loading,\n      matches,\n      pendingMatchCount,\n      user,\n      error,\n      loadMatches,\n      markMatchesSeen\n    };\n  }\n  _s(useMessagesData, \"z7s32HYgSg1RtlR9tSCoLSgmB/8=\", false, function () {\n    return [_tanstackReactQuery.useQueryClient];\n  });\n});","lineCount":239,"map":[[13,2,5,0,"exports"],[13,9,5,0],[13,10,5,0,"useMessagesData"],[13,25,5,0],[13,28,5,0,"useMessagesData"],[13,43,5,0],[14,2,224,1],[14,6,224,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,224,1],[14,45,224,1,"require"],[14,52,224,1],[14,53,224,1,"_dependencyMap"],[14,67,224,1],[15,2,224,1],[15,6,224,1,"_asyncToGenerator"],[15,23,224,1],[15,26,224,1,"_interopDefault"],[15,41,224,1],[15,42,224,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,224,1],[16,2,224,1],[16,6,224,1,"_babelRuntimeHelpersSlicedToArray"],[16,39,224,1],[16,42,224,1,"require"],[16,49,224,1],[16,50,224,1,"_dependencyMap"],[16,64,224,1],[17,2,224,1],[17,6,224,1,"_slicedToArray"],[17,20,224,1],[17,23,224,1,"_interopDefault"],[17,38,224,1],[17,39,224,1,"_babelRuntimeHelpersSlicedToArray"],[17,72,224,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_tanstackReactQuery"],[21,25,3,0],[21,28,3,0,"require"],[21,35,3,0],[21,36,3,0,"_dependencyMap"],[21,50,3,0],[22,2,5,7],[22,11,5,16,"useMessagesData"],[22,26,5,31,"useMessagesData"],[22,27,5,31],[22,29,5,46],[23,4,5,46,"_s"],[23,6,5,46],[24,4,5,46],[24,8,5,46,"_ref"],[24,12,5,46],[24,15,5,46,"arguments"],[24,24,5,46],[24,25,5,46,"length"],[24,31,5,46],[24,39,5,46,"arguments"],[24,48,5,46],[24,56,5,46,"undefined"],[24,65,5,46],[24,68,5,46,"arguments"],[24,77,5,46],[24,83,5,42],[24,84,5,43],[24,85,5,44],[25,6,5,34,"jwt"],[25,9,5,37],[25,12,5,37,"_ref"],[25,16,5,37],[25,17,5,34,"jwt"],[25,20,5,37],[26,4,6,2],[26,8,6,2,"_useState"],[26,17,6,2],[26,20,6,32],[26,24,6,32,"useState"],[26,30,6,40],[26,31,6,40,"useState"],[26,39,6,40],[26,41,6,41],[26,45,6,45],[26,46,6,46],[27,6,6,46,"_useState2"],[27,16,6,46],[27,23,6,46,"_slicedToArray"],[27,37,6,46],[27,38,6,46,"default"],[27,45,6,46],[27,47,6,46,"_useState"],[27,56,6,46],[28,6,6,9,"loading"],[28,13,6,16],[28,16,6,16,"_useState2"],[28,26,6,16],[29,6,6,18,"setLoading"],[29,16,6,28],[29,19,6,28,"_useState2"],[29,29,6,28],[30,4,7,2],[30,8,7,2,"_useState3"],[30,18,7,2],[30,21,7,32],[30,25,7,32,"useState"],[30,31,7,40],[30,32,7,40,"useState"],[30,40,7,40],[30,42,7,41],[30,44,7,43],[30,45,7,44],[31,6,7,44,"_useState4"],[31,16,7,44],[31,23,7,44,"_slicedToArray"],[31,37,7,44],[31,38,7,44,"default"],[31,45,7,44],[31,47,7,44,"_useState3"],[31,57,7,44],[32,6,7,9,"matches"],[32,13,7,16],[32,16,7,16,"_useState4"],[32,26,7,16],[33,6,7,18,"setMatches"],[33,16,7,28],[33,19,7,28,"_useState4"],[33,29,7,28],[34,4,8,2],[34,8,8,2,"_useState5"],[34,18,8,2],[34,21,8,52],[34,25,8,52,"useState"],[34,31,8,60],[34,32,8,60,"useState"],[34,40,8,60],[34,42,8,61],[34,43,8,62],[34,44,8,63],[35,6,8,63,"_useState6"],[35,16,8,63],[35,23,8,63,"_slicedToArray"],[35,37,8,63],[35,38,8,63,"default"],[35,45,8,63],[35,47,8,63,"_useState5"],[35,57,8,63],[36,6,8,9,"pendingMatchCount"],[36,23,8,26],[36,26,8,26,"_useState6"],[36,36,8,26],[37,6,8,28,"setPendingMatchCount"],[37,26,8,48],[37,29,8,48,"_useState6"],[37,39,8,48],[38,4,9,2],[38,8,9,2,"_useState7"],[38,18,9,2],[38,21,9,26],[38,25,9,26,"useState"],[38,31,9,34],[38,32,9,34,"useState"],[38,40,9,34],[38,42,9,35],[38,46,9,39],[38,47,9,40],[39,6,9,40,"_useState8"],[39,16,9,40],[39,23,9,40,"_slicedToArray"],[39,37,9,40],[39,38,9,40,"default"],[39,45,9,40],[39,47,9,40,"_useState7"],[39,57,9,40],[40,6,9,9,"user"],[40,10,9,13],[40,13,9,13,"_useState8"],[40,23,9,13],[41,6,9,15,"setUser"],[41,13,9,22],[41,16,9,22,"_useState8"],[41,26,9,22],[42,4,10,2],[42,8,10,2,"_useState9"],[42,18,10,2],[42,21,10,28],[42,25,10,28,"useState"],[42,31,10,36],[42,32,10,36,"useState"],[42,40,10,36],[42,42,10,37],[42,46,10,41],[42,47,10,42],[43,6,10,42,"_useState0"],[43,16,10,42],[43,23,10,42,"_slicedToArray"],[43,37,10,42],[43,38,10,42,"default"],[43,45,10,42],[43,47,10,42,"_useState9"],[43,57,10,42],[44,6,10,9,"error"],[44,11,10,14],[44,14,10,14,"_useState0"],[44,24,10,14],[45,6,10,16,"setError"],[45,14,10,24],[45,17,10,24,"_useState0"],[45,27,10,24],[46,4,11,2],[46,8,11,8,"queryClient"],[46,19,11,19],[46,22,11,22],[46,26,11,22,"useQueryClient"],[46,45,11,36],[46,46,11,36,"useQueryClient"],[46,60,11,36],[46,62,11,37],[46,63,11,38],[48,4,13,2],[49,4,14,2],[49,8,14,8,"didFinishInitialLoadRef"],[49,31,14,31],[49,34,14,34],[49,38,14,34,"useRef"],[49,44,14,40],[49,45,14,40,"useRef"],[49,51,14,40],[49,53,14,41],[49,58,14,46],[49,59,14,47],[51,4,16,2],[52,4,17,2],[53,4,18,2],[53,8,18,8,"ensureLegacyUserFromJwt"],[53,31,18,31],[53,34,18,34],[53,38,18,34,"useCallback"],[53,44,18,45],[53,45,18,45,"useCallback"],[53,56,18,45],[53,75,18,45,"_asyncToGenerator"],[53,92,18,45],[53,93,18,45,"default"],[53,100,18,45],[53,102,18,46],[53,115,18,58],[54,6,19,4],[54,10,19,10,"token"],[54,15,19,15],[54,18,19,18,"jwt"],[54,21,19,21],[54,25,19,25],[54,32,19,32,"jwt"],[54,35,19,35],[54,40,19,40],[54,48,19,48],[54,51,19,51,"jwt"],[54,54,19,54],[54,57,19,57],[54,61,19,61],[55,6,20,4],[55,10,20,8],[55,11,20,9,"token"],[55,16,20,14],[55,18,20,16],[55,25,20,23],[55,29,20,27],[56,6,22,4],[56,10,22,8],[57,8,23,6],[57,12,23,12,"resp"],[57,16,23,16],[57,25,23,25,"fetch"],[57,30,23,30],[57,31,23,31],[57,50,23,50],[57,52,23,52],[58,10,24,8,"headers"],[58,17,24,15],[58,19,24,17],[59,12,24,19,"Authorization"],[59,25,24,32],[59,27,24,34],[59,37,24,44,"token"],[59,42,24,49],[60,10,24,52],[61,8,25,6],[61,9,25,7],[61,10,25,8],[62,8,27,6],[62,12,27,10],[62,13,27,11,"resp"],[62,17,27,15],[62,18,27,16,"ok"],[62,20,27,18],[62,22,27,20],[63,10,28,8],[64,10,29,8],[64,17,29,15],[64,21,29,19],[65,8,30,6],[66,8,32,6],[66,12,32,12,"data"],[66,16,32,16],[66,25,32,25,"resp"],[66,29,32,29],[66,30,32,30,"json"],[66,34,32,34],[66,35,32,35],[66,36,32,36],[66,37,32,37,"catch"],[66,42,32,42],[66,43,32,43],[66,49,32,49],[66,53,32,53],[66,54,32,54],[67,8,33,6],[67,12,33,12,"ensured"],[67,19,33,19],[67,22,33,22,"data"],[67,26,33,26],[67,28,33,28,"user"],[67,32,33,32],[67,36,33,36],[67,40,33,40],[68,8,35,6],[68,12,35,12,"ensuredId"],[68,21,35,21],[68,24,35,24,"Number"],[68,30,35,30],[68,31,35,31,"ensured"],[68,38,35,38],[68,40,35,40,"id"],[68,42,35,42],[68,43,35,43],[69,8,36,6],[69,12,36,10],[69,13,36,11,"Number"],[69,19,36,17],[69,20,36,18,"isFinite"],[69,28,36,26],[69,29,36,27,"ensuredId"],[69,38,36,36],[69,39,36,37],[69,41,36,39],[70,10,37,8],[70,17,37,15],[70,21,37,19],[71,8,38,6],[72,8,40,6],[72,15,40,13,"ensured"],[72,22,40,20],[73,6,41,4],[73,7,41,5],[73,8,41,6],[73,15,41,13,"e"],[73,16,41,14],[73,18,41,16],[74,8,42,6,"console"],[74,15,42,13],[74,16,42,14,"error"],[74,21,42,19],[74,22,42,20],[74,48,42,46],[74,50,42,48,"e"],[74,51,42,49],[74,52,42,50],[75,8,43,6],[75,15,43,13],[75,19,43,17],[76,6,44,4],[77,4,45,2],[77,5,45,3],[77,8,45,5],[77,9,45,6,"jwt"],[77,12,45,9],[77,13,45,10],[77,14,45,11],[78,4,47,2],[78,8,47,8,"markMatchesSeen"],[78,23,47,23],[78,26,47,26],[78,30,47,26,"useCallback"],[78,36,47,37],[78,37,47,37,"useCallback"],[78,48,47,37],[79,6,47,37],[79,10,47,37,"_ref3"],[79,15,47,37],[79,22,47,37,"_asyncToGenerator"],[79,39,47,37],[79,40,47,37,"default"],[79,47,47,37],[79,49,48,4],[79,60,48,11,"userId"],[79,66,48,17],[79,68,48,22],[80,8,49,6],[80,12,49,10],[81,10,50,8],[81,14,50,14,"resp"],[81,18,50,18],[81,27,50,27,"fetch"],[81,32,50,32],[81,33,50,33],[81,57,50,57],[81,59,50,59],[82,12,51,10,"method"],[82,18,51,16],[82,20,51,18],[82,26,51,24],[83,12,52,10,"headers"],[83,19,52,17],[83,21,52,19],[84,14,52,21],[84,28,52,35],[84,30,52,37],[85,12,52,56],[85,13,52,57],[86,12,53,10,"body"],[86,16,53,14],[86,18,53,16,"JSON"],[86,22,53,20],[86,23,53,21,"stringify"],[86,32,53,30],[86,33,53,31],[87,14,53,33,"userId"],[88,12,53,40],[88,13,53,41],[89,10,54,8],[89,11,54,9],[89,12,54,10],[90,10,55,8],[90,14,55,12,"resp"],[90,18,55,16],[90,19,55,17,"ok"],[90,21,55,19],[90,23,55,21],[91,12,56,10,"queryClient"],[91,23,56,21],[91,24,56,22,"invalidateQueries"],[91,41,56,39],[91,42,56,40],[92,14,57,12,"queryKey"],[92,22,57,20],[92,24,57,22],[92,25,57,23],[92,42,57,40],[92,44,57,42,"userId"],[92,50,57,48],[93,12,58,10],[93,13,58,11],[93,14,58,12],[94,12,59,10,"queryClient"],[94,23,59,21],[94,24,59,22,"invalidateQueries"],[94,41,59,39],[94,42,59,40],[95,14,60,12,"queryKey"],[95,22,60,20],[95,24,60,22],[95,25,60,23],[95,41,60,39],[95,43,60,41,"userId"],[95,49,60,47],[96,12,61,10],[96,13,61,11],[96,14,61,12],[97,10,62,8],[98,8,63,6],[98,9,63,7],[98,10,63,8],[98,17,63,15,"e"],[98,18,63,16],[98,20,63,18],[99,10,64,8,"console"],[99,17,64,15],[99,18,64,16,"error"],[99,23,64,21],[99,24,64,22],[99,53,64,51],[99,55,64,53,"e"],[99,56,64,54],[99,57,64,55],[100,8,65,6],[101,6,66,4],[101,7,66,5],[102,6,66,5],[102,23,66,5,"_x"],[102,25,66,5],[103,8,66,5],[103,15,66,5,"_ref3"],[103,20,66,5],[103,21,66,5,"apply"],[103,26,66,5],[103,33,66,5,"arguments"],[103,42,66,5],[104,6,66,5],[105,4,66,5],[105,9,67,4],[105,10,67,5,"queryClient"],[105,21,67,16],[105,22,68,2],[105,23,68,3],[106,4,70,2],[106,8,70,8,"fetchWithTimeout"],[106,24,70,24],[106,27,70,27],[106,31,70,27,"useCallback"],[106,37,70,38],[106,38,70,38,"useCallback"],[106,49,70,38],[107,6,70,38],[107,10,70,38,"_ref4"],[107,15,70,38],[107,22,70,38,"_asyncToGenerator"],[107,39,70,38],[107,40,70,38,"default"],[107,47,70,38],[107,49,70,39],[107,60,70,46,"url"],[107,63,70,49],[107,65,70,51,"options"],[107,72,70,58],[107,74,70,60,"timeoutMs"],[107,83,70,69],[107,85,70,74],[108,8,71,4],[109,8,72,4],[110,8,73,4],[110,12,73,10,"controller"],[110,22,73,20],[110,25,74,6],[110,32,74,13,"AbortController"],[110,47,74,28],[110,52,74,33],[110,63,74,44],[110,66,74,47],[110,70,74,51,"AbortController"],[110,85,74,66],[110,86,74,67],[110,87,74,68],[110,90,74,71],[110,94,74,75],[111,8,76,4],[111,12,76,8,"timeoutId"],[111,21,76,17],[111,24,76,20],[111,28,76,24],[112,8,78,4],[112,12,78,10,"fetchPromise"],[112,24,78,22],[112,27,78,25,"fetch"],[112,32,78,30],[112,33,78,31,"url"],[112,36,78,34],[112,38,78,36],[113,10,79,6],[113,14,79,10,"options"],[113,21,79,17],[113,25,79,21],[113,26,79,22],[113,27,79,23],[113,28,79,24],[114,10,80,6],[114,14,80,10,"controller"],[114,24,80,20],[114,27,80,23],[115,12,80,25,"signal"],[115,18,80,31],[115,20,80,33,"controller"],[115,30,80,43],[115,31,80,44,"signal"],[116,10,80,51],[116,11,80,52],[116,14,80,55],[116,15,80,56],[116,16,80,57],[117,8,81,4],[117,9,81,5],[117,10,81,6],[117,11,81,7,"finally"],[117,18,81,14],[117,19,81,15],[117,25,81,21],[118,10,82,6],[118,14,82,10,"timeoutId"],[118,23,82,19],[118,27,82,23],[118,31,82,27],[118,33,82,29],[119,12,83,8,"clearTimeout"],[119,24,83,20],[119,25,83,21,"timeoutId"],[119,34,83,30],[119,35,83,31],[120,10,84,6],[121,8,85,4],[121,9,85,5],[121,10,85,6],[122,8,87,4],[122,12,87,10,"timeoutPromise"],[122,26,87,24],[122,29,87,27],[122,33,87,31,"Promise"],[122,40,87,38],[122,41,87,39],[122,42,87,40,"_"],[122,43,87,41],[122,45,87,43,"reject"],[122,51,87,49],[122,56,87,54],[123,10,88,6,"timeoutId"],[123,19,88,15],[123,22,88,18,"setTimeout"],[123,32,88,28],[123,33,88,29],[123,39,88,35],[124,12,89,8],[124,16,89,12],[125,14,90,10,"controller"],[125,24,90,20],[125,26,90,22,"abort"],[125,31,90,27],[125,32,90,28],[125,33,90,29],[126,12,91,8],[126,13,91,9],[126,14,91,10],[126,20,91,16],[127,14,92,10],[128,12,92,10],[129,12,94,8],[129,16,94,14,"err"],[129,19,94,17],[129,22,94,20],[129,26,94,24,"Error"],[129,31,94,29],[129,32,94,30],[129,59,94,57,"timeoutMs"],[129,68,94,66],[129,72,94,70],[129,73,94,71],[130,12,95,8,"err"],[130,15,95,11],[130,16,95,12,"name"],[130,20,95,16],[130,23,95,19],[130,37,95,33],[131,12,96,8,"reject"],[131,18,96,14],[131,19,96,15,"err"],[131,22,96,18],[131,23,96,19],[132,10,97,6],[132,11,97,7],[132,13,97,9,"timeoutMs"],[132,22,97,18],[132,23,97,19],[133,8,98,4],[133,9,98,5],[133,10,98,6],[134,8,100,4],[134,15,100,11,"Promise"],[134,22,100,18],[134,23,100,19,"race"],[134,27,100,23],[134,28,100,24],[134,29,100,25,"fetchPromise"],[134,41,100,37],[134,43,100,39,"timeoutPromise"],[134,57,100,53],[134,58,100,54],[134,59,100,55],[135,6,101,2],[135,7,101,3],[136,6,101,3],[136,23,101,3,"_x2"],[136,26,101,3],[136,28,101,3,"_x3"],[136,31,101,3],[136,33,101,3,"_x4"],[136,36,101,3],[137,8,101,3],[137,15,101,3,"_ref4"],[137,20,101,3],[137,21,101,3,"apply"],[137,26,101,3],[137,33,101,3,"arguments"],[137,42,101,3],[138,6,101,3],[139,4,101,3],[139,9,101,5],[139,11,101,7],[139,12,101,8],[140,4,103,2],[140,8,103,8,"loadMatches"],[140,19,103,19],[140,22,103,22],[140,26,103,22,"useCallback"],[140,32,103,33],[140,33,103,33,"useCallback"],[140,44,103,33],[141,6,103,33],[141,10,103,33,"_ref5"],[141,15,103,33],[141,22,103,33,"_asyncToGenerator"],[141,39,103,33],[141,40,103,33,"default"],[141,47,103,33],[141,49,104,4],[141,60,104,11,"userId"],[141,66,104,17],[141,68,104,22],[142,8,105,6],[142,12,105,10],[143,10,106,8,"setError"],[143,18,106,16],[143,19,106,17],[143,23,106,21],[143,24,106,22],[144,10,107,8],[144,14,107,14,"response"],[144,22,107,22],[144,31,107,31,"fetchWithTimeout"],[144,47,107,47],[144,48,108,10],[144,71,108,33,"userId"],[144,77,108,39],[144,79,108,41],[144,81,109,10],[144,85,109,14],[144,87,110,10],[144,92,111,8],[144,93,111,9],[145,10,112,8],[145,14,112,12],[145,15,112,13,"response"],[145,23,112,21],[145,24,112,22,"ok"],[145,26,112,24],[145,28,112,26],[146,12,113,10],[146,18,113,16],[146,22,113,20,"Error"],[146,27,113,25],[146,28,114,12],[146,77,114,61,"response"],[146,85,114,69],[146,86,114,70,"status"],[146,92,114,76],[146,97,114,81,"response"],[146,105,114,89],[146,106,114,90,"statusText"],[146,116,114,100],[146,118,115,10],[146,119,115,11],[147,10,116,8],[148,10,117,8],[148,14,117,14,"data"],[148,18,117,18],[148,27,117,27,"response"],[148,35,117,35],[148,36,117,36,"json"],[148,40,117,40],[148,41,117,41],[148,42,117,42],[149,10,118,8],[149,14,118,14,"list"],[149,18,118,18],[149,21,118,21,"data"],[149,25,118,25],[149,26,118,26,"matches"],[149,33,118,33],[149,37,118,37],[149,39,118,39],[150,10,119,8,"setMatches"],[150,20,119,18],[150,21,119,19,"list"],[150,25,119,23],[150,26,119,24],[151,10,120,8,"setPendingMatchCount"],[151,30,120,28],[151,31,120,29,"Number"],[151,37,120,35],[151,38,120,36,"data"],[151,42,120,40],[151,44,120,42,"pendingMatchCount"],[151,61,120,59],[151,62,120,60],[151,66,120,64],[151,67,120,65],[151,68,120,66],[152,10,121,8],[152,17,121,15,"list"],[152,21,121,19],[153,8,122,6],[153,9,122,7],[153,10,122,8],[153,17,122,15,"err"],[153,20,122,18],[153,22,122,20],[154,10,123,8],[154,14,123,14,"isTimeout"],[154,23,123,23],[154,26,124,10,"String"],[154,32,124,16],[154,33,124,17,"err"],[154,36,124,20],[154,38,124,22,"name"],[154,42,124,26],[154,46,124,30],[154,48,124,32],[154,49,124,33],[154,50,124,34,"toLowerCase"],[154,61,124,45],[154,62,124,46],[154,63,124,47],[154,68,124,52],[154,82,124,66],[155,10,126,8,"console"],[155,17,126,15],[155,18,126,16,"error"],[155,23,126,21],[155,24,126,22],[155,48,126,46],[155,50,126,48,"err"],[155,53,126,51],[155,54,126,52],[156,10,127,8,"setError"],[156,18,127,16],[156,19,128,10,"isTimeout"],[156,28,128,19],[156,31,129,14],[156,88,129,71],[156,91,130,14],[156,134,131,8],[156,135,131,9],[157,10,132,8],[157,17,132,15],[157,19,132,17],[158,8,133,6],[159,6,134,4],[159,7,134,5],[160,6,134,5],[160,23,134,5,"_x5"],[160,26,134,5],[161,8,134,5],[161,15,134,5,"_ref5"],[161,20,134,5],[161,21,134,5,"apply"],[161,26,134,5],[161,33,134,5,"arguments"],[161,42,134,5],[162,6,134,5],[163,4,134,5],[163,9,135,4],[163,10,135,5,"fetchWithTimeout"],[163,26,135,21],[163,27,136,2],[163,28,136,3],[164,4,138,2],[164,8,138,8,"loadUserAndMatches"],[164,26,138,26],[164,29,138,29],[164,33,138,29,"useCallback"],[164,39,138,40],[164,40,138,40,"useCallback"],[164,51,138,40],[164,70,138,40,"_asyncToGenerator"],[164,87,138,40],[164,88,138,40,"default"],[164,95,138,40],[164,97,138,41],[164,110,138,53],[165,6,139,4],[165,10,139,8],[166,8,140,6,"setError"],[166,16,140,14],[166,17,140,15],[166,21,140,19],[166,22,140,20],[167,8,142,6],[167,12,142,12,"ensured"],[167,19,142,19],[167,28,142,28,"ensureLegacyUserFromJwt"],[167,51,142,51],[167,52,142,52],[167,53,142,53],[168,8,144,6],[168,12,144,12,"userData"],[168,20,144,20],[168,29,144,29,"AsyncStorage"],[168,41,144,41],[168,42,144,41,"default"],[168,49,144,41],[168,50,144,42,"getItem"],[168,57,144,49],[168,58,144,50],[168,64,144,56],[168,65,144,57],[169,8,145,6],[169,12,145,12,"parsedUser"],[169,22,145,22],[169,25,145,25,"userData"],[169,33,145,33],[169,36,145,36,"JSON"],[169,40,145,40],[169,41,145,41,"parse"],[169,46,145,46],[169,47,145,47,"userData"],[169,55,145,55],[169,56,145,56],[169,59,145,59],[169,63,145,63],[171,8,147,6],[172,8,148,6],[172,12,148,10,"nextUser"],[172,20,148,18],[172,23,148,21,"parsedUser"],[172,33,148,31],[173,8,149,6],[173,12,149,10,"ensured"],[173,19,149,17],[173,21,149,19],[174,10,150,8,"nextUser"],[174,18,150,16],[174,21,150,19],[175,12,151,10],[175,16,151,14,"parsedUser"],[175,26,151,24],[175,30,151,28],[175,31,151,29],[175,32,151,30],[175,33,151,31],[176,12,152,10],[176,15,152,13,"ensured"],[176,22,152,20],[177,12,153,10,"id"],[177,14,153,12],[177,16,153,14,"ensured"],[177,23,153,21],[177,24,153,22,"id"],[178,10,154,8],[178,11,154,9],[179,10,156,8],[179,14,156,12],[180,12,157,10],[180,18,157,16,"AsyncStorage"],[180,30,157,28],[180,31,157,28,"default"],[180,38,157,28],[180,39,157,29,"setItem"],[180,46,157,36],[180,47,157,37],[180,53,157,43],[180,55,157,45,"JSON"],[180,59,157,49],[180,60,157,50,"stringify"],[180,69,157,59],[180,70,157,60,"nextUser"],[180,78,157,68],[180,79,157,69],[180,80,157,70],[181,10,158,8],[181,11,158,9],[181,12,158,10],[181,19,158,17,"e"],[181,20,158,18],[181,22,158,20],[182,12,159,10,"console"],[182,19,159,17],[182,20,159,18,"error"],[182,25,159,23],[182,26,159,24],[182,58,159,56],[182,60,159,58,"e"],[182,61,159,59],[182,62,159,60],[183,10,160,8],[184,8,161,6],[185,8,163,6],[185,12,163,10],[185,13,163,11,"nextUser"],[185,21,163,19],[185,23,163,21],[186,10,164,8,"setUser"],[186,17,164,15],[186,18,164,16],[186,22,164,20],[186,23,164,21],[187,10,165,8,"setMatches"],[187,20,165,18],[187,21,165,19],[187,23,165,21],[187,24,165,22],[188,10,166,8,"setPendingMatchCount"],[188,30,166,28],[188,31,166,29],[188,32,166,30],[188,33,166,31],[189,10,167,8],[190,8,168,6],[191,8,170,6,"setUser"],[191,15,170,13],[191,16,170,14,"nextUser"],[191,24,170,22],[191,25,170,23],[192,8,172,6],[192,12,172,12,"uid"],[192,15,172,15],[192,18,172,18,"Number"],[192,24,172,24],[192,25,172,25,"nextUser"],[192,33,172,33],[192,35,172,35,"id"],[192,37,172,37],[192,38,172,38],[193,8,173,6],[193,12,173,10],[193,13,173,11,"Number"],[193,19,173,17],[193,20,173,18,"isFinite"],[193,28,173,26],[193,29,173,27,"uid"],[193,32,173,30],[193,33,173,31],[193,35,173,33],[194,10,174,8,"setError"],[194,18,174,16],[194,19,175,10],[194,85,176,8],[194,86,176,9],[195,10,177,8],[196,8,178,6],[198,8,180,6],[199,8,181,6,"markMatchesSeen"],[199,23,181,21],[199,24,181,22,"uid"],[199,27,181,25],[199,28,181,26],[199,29,181,27,"catch"],[199,34,181,32],[199,35,181,33],[199,41,181,39],[199,45,181,43],[199,46,181,44],[200,8,183,6],[200,14,183,12,"loadMatches"],[200,25,183,23],[200,26,183,24,"uid"],[200,29,183,27],[200,30,183,28],[201,6,184,4],[201,7,184,5],[201,8,184,6],[201,15,184,13,"error"],[201,20,184,18],[201,22,184,20],[202,8,185,6,"console"],[202,15,185,13],[202,16,185,14,"error"],[202,21,185,19],[202,22,185,20],[202,43,185,41],[202,45,185,43,"error"],[202,50,185,48],[202,51,185,49],[203,8,186,6,"setError"],[203,16,186,14],[203,17,186,15],[203,61,186,59],[203,62,186,60],[204,6,187,4],[204,7,187,5],[204,16,187,14],[205,8,188,6,"didFinishInitialLoadRef"],[205,31,188,29],[205,32,188,30,"current"],[205,39,188,37],[205,42,188,40],[205,46,188,44],[206,8,189,6,"setLoading"],[206,18,189,16],[206,19,189,17],[206,24,189,22],[206,25,189,23],[207,6,190,4],[208,4,191,2],[208,5,191,3],[208,8,191,5],[208,9,191,6,"ensureLegacyUserFromJwt"],[208,32,191,29],[208,34,191,31,"loadMatches"],[208,45,191,42],[208,47,191,44,"markMatchesSeen"],[208,62,191,59],[208,63,191,60],[208,64,191,61],[209,4,193,2],[209,8,193,2,"useEffect"],[209,14,193,11],[209,15,193,11,"useEffect"],[209,24,193,11],[209,26,193,12],[209,32,193,18],[210,6,194,4,"loadUserAndMatches"],[210,24,194,22],[210,25,194,23],[210,26,194,24],[211,4,195,2],[211,5,195,3],[211,7,195,5],[211,8,195,6,"loadUserAndMatches"],[211,26,195,24],[211,27,195,25],[211,28,195,26],[212,4,197,2],[212,8,197,2,"useEffect"],[212,14,197,11],[212,15,197,11,"useEffect"],[212,24,197,11],[212,26,197,12],[212,32,197,18],[213,6,198,4],[214,6,199,4],[215,6,200,4],[215,10,200,10,"watchdogMs"],[215,20,200,20],[215,23,200,23],[215,28,200,28],[216,6,201,4],[216,10,201,10,"id"],[216,12,201,12],[216,15,201,15,"setTimeout"],[216,25,201,25],[216,26,201,26],[216,32,201,32],[217,8,202,6],[217,12,202,10,"didFinishInitialLoadRef"],[217,35,202,33],[217,36,202,34,"current"],[217,43,202,41],[217,45,202,43],[218,10,203,8],[219,8,204,6],[220,8,205,6,"console"],[220,15,205,13],[220,16,205,14,"error"],[220,21,205,19],[220,22,206,8],[220,55,206,41,"watchdogMs"],[220,65,206,51],[220,94,207,6],[220,95,207,7],[221,8,208,6,"setError"],[221,16,208,14],[221,17,208,15],[221,74,208,72],[221,75,208,73],[222,8,209,6,"setLoading"],[222,18,209,16],[222,19,209,17],[222,24,209,22],[222,25,209,23],[223,6,210,4],[223,7,210,5],[223,9,210,7,"watchdogMs"],[223,19,210,17],[223,20,210,18],[224,6,212,4],[224,13,212,11],[224,19,212,17,"clearTimeout"],[224,31,212,29],[224,32,212,30,"id"],[224,34,212,32],[224,35,212,33],[225,4,213,2],[225,5,213,3],[225,7,213,5],[225,9,213,7],[225,10,213,8],[226,4,215,2],[226,11,215,9],[227,6,216,4,"loading"],[227,13,216,11],[228,6,217,4,"matches"],[228,13,217,11],[229,6,218,4,"pendingMatchCount"],[229,23,218,21],[230,6,219,4,"user"],[230,10,219,8],[231,6,220,4,"error"],[231,11,220,9],[232,6,221,4,"loadMatches"],[232,17,221,15],[233,6,222,4,"markMatchesSeen"],[234,4,223,2],[234,5,223,3],[235,2,224,0],[236,2,224,1,"_s"],[236,4,224,1],[236,5,5,16,"useMessagesData"],[236,20,5,31],[237,4,5,31],[237,12,11,22,"useQueryClient"],[237,31,11,36],[237,32,11,36,"useQueryClient"],[237,46,11,36],[238,2,11,36],[239,0,11,36],[239,3]],"functionMap":{"names":["<global>","useMessagesData","ensureLegacyUserFromJwt","resp.json._catch$argument_0","markMatchesSeen","fetchWithTimeout","fetch._finally$argument_0","Promise$argument_0","setTimeout$argument_0","loadMatches","loadUserAndMatches","markMatchesSeen._catch$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;8CCa;2CCc,UD;GDa;IGG;KHkB;uCII;eCW;KDI;uCEE;6BCC;ODS;KFC;GJG;IQG;KR8B;yCSI;iCC2C,UD;GTU;YWE;GXE;YWE;0BJI;KIS;WCE,sBD;GXC;CDW"},"hasCjsExports":false},"type":"js/module"}]}