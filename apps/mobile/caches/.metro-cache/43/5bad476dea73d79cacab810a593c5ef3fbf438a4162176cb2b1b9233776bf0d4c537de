{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":37,"index":84}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useReportUser = useReportUser;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNative = require(_dependencyMap[3]);\n  function useReportUser(matchInfo, user) {\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      reportOpen = _useState2[0],\n      setReportOpen = _useState2[1];\n    var _useState3 = (0, _react.useState)(\"HARASSMENT\"),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      reportType = _useState4[0],\n      setReportType = _useState4[1];\n    var _useState5 = (0, _react.useState)(\"\"),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      reportDesc = _useState6[0],\n      setReportDesc = _useState6[1];\n    var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      reportSending = _useState8[0],\n      setReportSending = _useState8[1];\n    var submitReport = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!user?.id) return;\n      var reportedUserId = matchInfo?.otherUser?.id;\n      if (!reportedUserId) {\n        _reactNative.Alert.alert(\"Report failed\", \"Could not find the other user.\");\n        return;\n      }\n      var description = reportDesc.trim();\n      if (!description) {\n        _reactNative.Alert.alert(\"Add details\", \"Please add a short description.\");\n        return;\n      }\n      try {\n        setReportSending(true);\n        var resp = yield fetch(\"/api/reports\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            reporterUserId: user.id,\n            reportedUserId,\n            reportType,\n            description\n          })\n        });\n        if (!resp.ok) {\n          var text = yield resp.text();\n          throw new Error(`When posting /api/reports, the response was [${resp.status}] ${resp.statusText}. ${text}`);\n        }\n        setReportOpen(false);\n        setReportDesc(\"\");\n        _reactNative.Alert.alert(\"Report sent\", \"Thanks â€” our team will review it. You can also block this user from the menu.\");\n      } catch (e) {\n        console.error(\"Could not report user\", e);\n        _reactNative.Alert.alert(\"Report failed\", \"Could not send your report right now.\");\n      } finally {\n        setReportSending(false);\n      }\n    }), [matchInfo?.otherUser?.id, reportDesc, reportType, user?.id]);\n    return {\n      reportOpen,\n      setReportOpen,\n      reportType,\n      setReportType,\n      reportDesc,\n      setReportDesc,\n      reportSending,\n      submitReport\n    };\n  }\n});","lineCount":87,"map":[[12,2,4,0,"exports"],[12,9,4,0],[12,10,4,0,"useReportUser"],[12,23,4,0],[12,26,4,0,"useReportUser"],[12,39,4,0],[13,2,68,1],[13,6,68,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,68,1],[13,45,68,1,"require"],[13,52,68,1],[13,53,68,1,"_dependencyMap"],[13,67,68,1],[14,2,68,1],[14,6,68,1,"_asyncToGenerator"],[14,23,68,1],[14,26,68,1,"_interopDefault"],[14,41,68,1],[14,42,68,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,68,1],[15,2,68,1],[15,6,68,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,68,1],[15,42,68,1,"require"],[15,49,68,1],[15,50,68,1,"_dependencyMap"],[15,64,68,1],[16,2,68,1],[16,6,68,1,"_slicedToArray"],[16,20,68,1],[16,23,68,1,"_interopDefault"],[16,38,68,1],[16,39,68,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,68,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNative"],[18,18,2,0],[18,21,2,0,"require"],[18,28,2,0],[18,29,2,0,"_dependencyMap"],[18,43,2,0],[19,2,4,7],[19,11,4,16,"useReportUser"],[19,24,4,29,"useReportUser"],[19,25,4,30,"matchInfo"],[19,34,4,39],[19,36,4,41,"user"],[19,40,4,45],[19,42,4,47],[20,4,5,2],[20,8,5,2,"_useState"],[20,17,5,2],[20,20,5,38],[20,24,5,38,"useState"],[20,30,5,46],[20,31,5,46,"useState"],[20,39,5,46],[20,41,5,47],[20,46,5,52],[20,47,5,53],[21,6,5,53,"_useState2"],[21,16,5,53],[21,23,5,53,"_slicedToArray"],[21,37,5,53],[21,38,5,53,"default"],[21,45,5,53],[21,47,5,53,"_useState"],[21,56,5,53],[22,6,5,9,"reportOpen"],[22,16,5,19],[22,19,5,19,"_useState2"],[22,29,5,19],[23,6,5,21,"setReportOpen"],[23,19,5,34],[23,22,5,34,"_useState2"],[23,32,5,34],[24,4,6,2],[24,8,6,2,"_useState3"],[24,18,6,2],[24,21,6,38],[24,25,6,38,"useState"],[24,31,6,46],[24,32,6,46,"useState"],[24,40,6,46],[24,42,6,47],[24,54,6,59],[24,55,6,60],[25,6,6,60,"_useState4"],[25,16,6,60],[25,23,6,60,"_slicedToArray"],[25,37,6,60],[25,38,6,60,"default"],[25,45,6,60],[25,47,6,60,"_useState3"],[25,57,6,60],[26,6,6,9,"reportType"],[26,16,6,19],[26,19,6,19,"_useState4"],[26,29,6,19],[27,6,6,21,"setReportType"],[27,19,6,34],[27,22,6,34,"_useState4"],[27,32,6,34],[28,4,7,2],[28,8,7,2,"_useState5"],[28,18,7,2],[28,21,7,38],[28,25,7,38,"useState"],[28,31,7,46],[28,32,7,46,"useState"],[28,40,7,46],[28,42,7,47],[28,44,7,49],[28,45,7,50],[29,6,7,50,"_useState6"],[29,16,7,50],[29,23,7,50,"_slicedToArray"],[29,37,7,50],[29,38,7,50,"default"],[29,45,7,50],[29,47,7,50,"_useState5"],[29,57,7,50],[30,6,7,9,"reportDesc"],[30,16,7,19],[30,19,7,19,"_useState6"],[30,29,7,19],[31,6,7,21,"setReportDesc"],[31,19,7,34],[31,22,7,34,"_useState6"],[31,32,7,34],[32,4,8,2],[32,8,8,2,"_useState7"],[32,18,8,2],[32,21,8,44],[32,25,8,44,"useState"],[32,31,8,52],[32,32,8,52,"useState"],[32,40,8,52],[32,42,8,53],[32,47,8,58],[32,48,8,59],[33,6,8,59,"_useState8"],[33,16,8,59],[33,23,8,59,"_slicedToArray"],[33,37,8,59],[33,38,8,59,"default"],[33,45,8,59],[33,47,8,59,"_useState7"],[33,57,8,59],[34,6,8,9,"reportSending"],[34,19,8,22],[34,22,8,22,"_useState8"],[34,32,8,22],[35,6,8,24,"setReportSending"],[35,22,8,40],[35,25,8,40,"_useState8"],[35,35,8,40],[36,4,10,2],[36,8,10,8,"submitReport"],[36,20,10,20],[36,23,10,23],[36,27,10,23,"useCallback"],[36,33,10,34],[36,34,10,34,"useCallback"],[36,45,10,34],[36,64,10,34,"_asyncToGenerator"],[36,81,10,34],[36,82,10,34,"default"],[36,89,10,34],[36,91,10,35],[36,104,10,47],[37,6,11,4],[37,10,11,8],[37,11,11,9,"user"],[37,15,11,13],[37,17,11,15,"id"],[37,19,11,17],[37,21,11,19],[38,6,12,4],[38,10,12,10,"reportedUserId"],[38,24,12,24],[38,27,12,27,"matchInfo"],[38,36,12,36],[38,38,12,38,"otherUser"],[38,47,12,47],[38,49,12,49,"id"],[38,51,12,51],[39,6,13,4],[39,10,13,8],[39,11,13,9,"reportedUserId"],[39,25,13,23],[39,27,13,25],[40,8,14,6,"Alert"],[40,20,14,11],[40,21,14,11,"Alert"],[40,26,14,11],[40,27,14,12,"alert"],[40,32,14,17],[40,33,14,18],[40,48,14,33],[40,50,14,35],[40,82,14,67],[40,83,14,68],[41,8,15,6],[42,6,16,4],[43,6,18,4],[43,10,18,10,"description"],[43,21,18,21],[43,24,18,24,"reportDesc"],[43,34,18,34],[43,35,18,35,"trim"],[43,39,18,39],[43,40,18,40],[43,41,18,41],[44,6,19,4],[44,10,19,8],[44,11,19,9,"description"],[44,22,19,20],[44,24,19,22],[45,8,20,6,"Alert"],[45,20,20,11],[45,21,20,11,"Alert"],[45,26,20,11],[45,27,20,12,"alert"],[45,32,20,17],[45,33,20,18],[45,46,20,31],[45,48,20,33],[45,81,20,66],[45,82,20,67],[46,8,21,6],[47,6,22,4],[48,6,24,4],[48,10,24,8],[49,8,25,6,"setReportSending"],[49,24,25,22],[49,25,25,23],[49,29,25,27],[49,30,25,28],[50,8,26,6],[50,12,26,12,"resp"],[50,16,26,16],[50,25,26,25,"fetch"],[50,30,26,30],[50,31,26,31],[50,45,26,45],[50,47,26,47],[51,10,27,8,"method"],[51,16,27,14],[51,18,27,16],[51,24,27,22],[52,10,28,8,"headers"],[52,17,28,15],[52,19,28,17],[53,12,28,19],[53,26,28,33],[53,28,28,35],[54,10,28,54],[54,11,28,55],[55,10,29,8,"body"],[55,14,29,12],[55,16,29,14,"JSON"],[55,20,29,18],[55,21,29,19,"stringify"],[55,30,29,28],[55,31,29,29],[56,12,30,10,"reporterUserId"],[56,26,30,24],[56,28,30,26,"user"],[56,32,30,30],[56,33,30,31,"id"],[56,35,30,33],[57,12,31,10,"reportedUserId"],[57,26,31,24],[58,12,32,10,"reportType"],[58,22,32,20],[59,12,33,10,"description"],[60,10,34,8],[60,11,34,9],[61,8,35,6],[61,9,35,7],[61,10,35,8],[62,8,37,6],[62,12,37,10],[62,13,37,11,"resp"],[62,17,37,15],[62,18,37,16,"ok"],[62,20,37,18],[62,22,37,20],[63,10,38,8],[63,14,38,14,"text"],[63,18,38,18],[63,27,38,27,"resp"],[63,31,38,31],[63,32,38,32,"text"],[63,36,38,36],[63,37,38,37],[63,38,38,38],[64,10,39,8],[64,16,39,14],[64,20,39,18,"Error"],[64,25,39,23],[64,26,40,10],[64,74,40,58,"resp"],[64,78,40,62],[64,79,40,63,"status"],[64,85,40,69],[64,90,40,74,"resp"],[64,94,40,78],[64,95,40,79,"statusText"],[64,105,40,89],[64,110,40,94,"text"],[64,114,40,98],[64,116,41,8],[64,117,41,9],[65,8,42,6],[66,8,44,6,"setReportOpen"],[66,21,44,19],[66,22,44,20],[66,27,44,25],[66,28,44,26],[67,8,45,6,"setReportDesc"],[67,21,45,19],[67,22,45,20],[67,24,45,22],[67,25,45,23],[68,8,46,6,"Alert"],[68,20,46,11],[68,21,46,11,"Alert"],[68,26,46,11],[68,27,46,12,"alert"],[68,32,46,17],[68,33,47,8],[68,46,47,21],[68,48,48,8],[68,127,49,6],[68,128,49,7],[69,6,50,4],[69,7,50,5],[69,8,50,6],[69,15,50,13,"e"],[69,16,50,14],[69,18,50,16],[70,8,51,6,"console"],[70,15,51,13],[70,16,51,14,"error"],[70,21,51,19],[70,22,51,20],[70,45,51,43],[70,47,51,45,"e"],[70,48,51,46],[70,49,51,47],[71,8,52,6,"Alert"],[71,20,52,11],[71,21,52,11,"Alert"],[71,26,52,11],[71,27,52,12,"alert"],[71,32,52,17],[71,33,52,18],[71,48,52,33],[71,50,52,35],[71,89,52,74],[71,90,52,75],[72,6,53,4],[72,7,53,5],[72,16,53,14],[73,8,54,6,"setReportSending"],[73,24,54,22],[73,25,54,23],[73,30,54,28],[73,31,54,29],[74,6,55,4],[75,4,56,2],[75,5,56,3],[75,8,56,5],[75,9,56,6,"matchInfo"],[75,18,56,15],[75,20,56,17,"otherUser"],[75,29,56,26],[75,31,56,28,"id"],[75,33,56,30],[75,35,56,32,"reportDesc"],[75,45,56,42],[75,47,56,44,"reportType"],[75,57,56,54],[75,59,56,56,"user"],[75,63,56,60],[75,65,56,62,"id"],[75,67,56,64],[75,68,56,65],[75,69,56,66],[76,4,58,2],[76,11,58,9],[77,6,59,4,"reportOpen"],[77,16,59,14],[78,6,60,4,"setReportOpen"],[78,19,60,17],[79,6,61,4,"reportType"],[79,16,61,14],[80,6,62,4,"setReportType"],[80,19,62,17],[81,6,63,4,"reportDesc"],[81,16,63,14],[82,6,64,4,"setReportDesc"],[82,19,64,17],[83,6,65,4,"reportSending"],[83,19,65,17],[84,6,66,4,"submitReport"],[85,4,67,2],[85,5,67,3],[86,2,68,0],[87,0,68,1],[87,3]],"functionMap":{"names":["<global>","useReportUser","submitReport"],"mappings":"AAA;OCG;mCCM;GD8C;CDY"},"hasCjsExports":false},"type":"js/module"}]}