{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"@sentry-internal/browser-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":100,"index":167}}],"key":"NhwjGxy6N7nYR3SR4JfgASTvmbA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"makeFetchTransport\", {\n    enumerable: true,\n    get: function () {\n      return makeFetchTransport;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _sentryCore = require(_dependencyMap[1]);\n  var _sentryInternalBrowserUtils = require(_dependencyMap[2]);\n  var DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE = 40;\n\n  /**\n   * Creates a Transport that uses the Fetch API to send events to Sentry.\n   */\n  function makeFetchTransport(options) {\n    var nativeFetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0, _sentryInternalBrowserUtils.getNativeImplementation)('fetch');\n    var pendingBodySize = 0;\n    var pendingCount = 0;\n    function makeRequest(_x) {\n      return _makeRequest.apply(this, arguments);\n    }\n    function _makeRequest() {\n      _makeRequest = (0, _asyncToGenerator.default)(function* (request) {\n        var requestSize = request.body.length;\n        pendingBodySize += requestSize;\n        pendingCount++;\n        var requestOptions = {\n          body: request.body,\n          method: 'POST',\n          referrerPolicy: 'strict-origin',\n          headers: options.headers,\n          // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n          // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n          // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n          // frequently sending events right before the user is switching pages (eg. when finishing navigation transactions).\n          // Gotchas:\n          // - `keepalive` isn't supported by Firefox\n          // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):\n          //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.\n          //   We will therefore only activate the flag when we're below that limit.\n          // There is also a limit of requests that can be open at the same time, so we also limit this to 15\n          // See https://github.com/getsentry/sentry-javascript/pull/7553 for details\n          keepalive: pendingBodySize <= 60000 && pendingCount < 15,\n          ...options.fetchOptions\n        };\n        try {\n          // Note: We do not need to suppress tracing here, because we are using the native fetch, instead of our wrapped one.\n          var response = yield nativeFetch(options.url, requestOptions);\n          return {\n            statusCode: response.status,\n            headers: {\n              'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n              'retry-after': response.headers.get('Retry-After')\n            }\n          };\n        } catch (e) {\n          (0, _sentryInternalBrowserUtils.clearCachedImplementation)('fetch');\n          throw e;\n        } finally {\n          pendingBodySize -= requestSize;\n          pendingCount--;\n        }\n      });\n      return _makeRequest.apply(this, arguments);\n    }\n    return (0, _sentryCore.createTransport)(options, makeRequest, (0, _sentryCore.makePromiseBuffer)(options.bufferSize || DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE));\n  }\n});","lineCount":80,"map":[[12,2,68,0,"Object"],[12,8,68,0],[12,9,68,0,"defineProperty"],[12,23,68,0],[12,24,68,0,"exports"],[12,31,68,0],[13,4,68,0,"enumerable"],[13,14,68,0],[14,4,68,0,"get"],[14,7,68,0],[14,18,68,0,"get"],[14,19,68,0],[15,6,68,0],[15,13,68,9,"makeFetchTransport"],[15,31,68,27],[16,4,68,27],[17,2,68,27],[18,2,68,30],[18,6,68,30,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,68,30],[18,45,68,30,"require"],[18,52,68,30],[18,53,68,30,"_dependencyMap"],[18,67,68,30],[19,2,68,30],[19,6,68,30,"_asyncToGenerator"],[19,23,68,30],[19,26,68,30,"_interopDefault"],[19,41,68,30],[19,42,68,30,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,68,30],[20,2,1,0],[20,6,1,0,"_sentryCore"],[20,17,1,0],[20,20,1,0,"require"],[20,27,1,0],[20,28,1,0,"_dependencyMap"],[20,42,1,0],[21,2,2,0],[21,6,2,0,"_sentryInternalBrowserUtils"],[21,33,2,0],[21,36,2,0,"require"],[21,43,2,0],[21,44,2,0,"_dependencyMap"],[21,58,2,0],[22,2,4,0],[22,6,4,6,"DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE"],[22,43,4,43],[22,46,4,46],[22,48,4,48],[24,2,6,0],[25,0,7,0],[26,0,8,0],[27,2,9,0],[27,11,9,9,"makeFetchTransport"],[27,29,9,27,"makeFetchTransport"],[27,30,10,2,"options"],[27,37,10,9],[27,39,12,2],[28,4,12,2],[28,8,11,2,"nativeFetch"],[28,19,11,13],[28,22,11,13,"arguments"],[28,31,11,13],[28,32,11,13,"length"],[28,38,11,13],[28,46,11,13,"arguments"],[28,55,11,13],[28,63,11,13,"undefined"],[28,72,11,13],[28,75,11,13,"arguments"],[28,84,11,13],[28,90,11,16],[28,94,11,16,"getNativeImplementation"],[28,121,11,39],[28,122,11,39,"getNativeImplementation"],[28,145,11,39],[28,147,11,40],[28,154,11,47],[28,155,11,48],[29,4,13,2],[29,8,13,6,"pendingBodySize"],[29,23,13,21],[29,26,13,24],[29,27,13,25],[30,4,14,2],[30,8,14,6,"pendingCount"],[30,20,14,18],[30,23,14,21],[30,24,14,22],[31,4,14,23],[31,13,16,17,"makeRequest"],[31,24,16,28,"makeRequest"],[31,25,16,28,"_x"],[31,27,16,28],[32,6,16,28],[32,13,16,28,"_makeRequest"],[32,25,16,28],[32,26,16,28,"apply"],[32,31,16,28],[32,38,16,28,"arguments"],[32,47,16,28],[33,4,16,28],[34,4,16,28],[34,13,16,28,"_makeRequest"],[34,26,16,28],[35,6,16,28,"_makeRequest"],[35,18,16,28],[35,25,16,28,"_asyncToGenerator"],[35,42,16,28],[35,43,16,28,"default"],[35,50,16,28],[35,52,16,2],[35,63,16,29,"request"],[35,70,16,36],[35,72,16,38],[36,8,17,4],[36,12,17,10,"requestSize"],[36,23,17,21],[36,26,17,24,"request"],[36,33,17,31],[36,34,17,32,"body"],[36,38,17,36],[36,39,17,37,"length"],[36,45,17,43],[37,8,18,4,"pendingBodySize"],[37,23,18,19],[37,27,18,23,"requestSize"],[37,38,18,34],[38,8,19,4,"pendingCount"],[38,20,19,16],[38,22,19,18],[39,8,21,4],[39,12,21,10,"requestOptions"],[39,26,21,24],[39,29,21,27],[40,10,22,6,"body"],[40,14,22,10],[40,16,22,12,"request"],[40,23,22,19],[40,24,22,20,"body"],[40,28,22,24],[41,10,23,6,"method"],[41,16,23,12],[41,18,23,14],[41,24,23,20],[42,10,24,6,"referrerPolicy"],[42,24,24,20],[42,26,24,22],[42,41,24,37],[43,10,25,6,"headers"],[43,17,25,13],[43,19,25,15,"options"],[43,26,25,22],[43,27,25,23,"headers"],[43,34,25,30],[44,10,26,6],[45,10,27,6],[46,10,28,6],[47,10,29,6],[48,10,30,6],[49,10,31,6],[50,10,32,6],[51,10,33,6],[52,10,34,6],[53,10,35,6],[54,10,36,6],[55,10,37,6,"keepalive"],[55,19,37,15],[55,21,37,17,"pendingBodySize"],[55,36,37,32],[55,40,37,36],[55,45,37,41],[55,49,37,45,"pendingCount"],[55,61,37,57],[55,64,37,60],[55,66,37,62],[56,10,38,6],[56,13,38,9,"options"],[56,20,38,16],[56,21,38,17,"fetchOptions"],[57,8,39,4],[57,9,39,5],[58,8,41,4],[58,12,41,8],[59,10,42,6],[60,10,43,6],[60,14,43,12,"response"],[60,22,43,20],[60,31,43,29,"nativeFetch"],[60,42,43,40],[60,43,43,41,"options"],[60,50,43,48],[60,51,43,49,"url"],[60,54,43,52],[60,56,43,54,"requestOptions"],[60,70,43,68],[60,71,43,69],[61,10,45,6],[61,17,45,13],[62,12,46,8,"statusCode"],[62,22,46,18],[62,24,46,20,"response"],[62,32,46,28],[62,33,46,29,"status"],[62,39,46,35],[63,12,47,8,"headers"],[63,19,47,15],[63,21,47,17],[64,14,48,10],[64,36,48,32],[64,38,48,34,"response"],[64,46,48,42],[64,47,48,43,"headers"],[64,54,48,50],[64,55,48,51,"get"],[64,58,48,54],[64,59,48,55],[64,81,48,77],[64,82,48,78],[65,14,49,10],[65,27,49,23],[65,29,49,25,"response"],[65,37,49,33],[65,38,49,34,"headers"],[65,45,49,41],[65,46,49,42,"get"],[65,49,49,45],[65,50,49,46],[65,63,49,59],[66,12,50,8],[67,10,51,6],[67,11,51,7],[68,8,52,4],[68,9,52,5],[68,10,52,6],[68,17,52,13,"e"],[68,18,52,14],[68,20,52,16],[69,10,53,6],[69,14,53,6,"clearCachedImplementation"],[69,41,53,31],[69,42,53,31,"clearCachedImplementation"],[69,67,53,31],[69,69,53,32],[69,76,53,39],[69,77,53,40],[70,10,54,6],[70,16,54,12,"e"],[70,17,54,13],[71,8,55,4],[71,9,55,5],[71,18,55,14],[72,10,56,6,"pendingBodySize"],[72,25,56,21],[72,29,56,25,"requestSize"],[72,40,56,36],[73,10,57,6,"pendingCount"],[73,22,57,18],[73,24,57,20],[74,8,58,4],[75,6,59,2],[75,7,59,3],[76,6,59,3],[76,13,59,3,"_makeRequest"],[76,25,59,3],[76,26,59,3,"apply"],[76,31,59,3],[76,38,59,3,"arguments"],[76,47,59,3],[77,4,59,3],[78,4,61,2],[78,11,61,9],[78,15,61,9,"createTransport"],[78,26,61,24],[78,27,61,24,"createTransport"],[78,42,61,24],[78,44,62,4,"options"],[78,51,62,11],[78,53,63,4,"makeRequest"],[78,64,63,15],[78,66,64,4],[78,70,64,4,"makePromiseBuffer"],[78,81,64,21],[78,82,64,21,"makePromiseBuffer"],[78,99,64,21],[78,101,64,22,"options"],[78,108,64,29],[78,109,64,30,"bufferSize"],[78,119,64,40],[78,123,64,44,"DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE"],[78,160,64,81],[78,161,65,2],[78,162,65,3],[79,2,66,0],[80,0,66,1],[80,3]],"functionMap":{"names":["<global>","makeFetchTransport","makeRequest"],"mappings":"AAA;ACQ;ECO;GD2C;CDO"},"hasCjsExports":false},"type":"js/module"}]}