{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.prepareShareCardDataUrl = prepareShareCardDataUrl;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  // Utilities for preparing a shareable *image item* for the native share sheet.\n  //\n  // IMPORTANT:\n  // - expo-image-manipulator only works with images stored on the local file system.\n  // - In this project we avoid adding new native packages.\n  //\n  // So we fetch the remote image and convert it into a data URL (base64).\n  // iOS treats a data:image/* URL as an image item more reliably than an http(s) URL.\n\n  function base64FromArrayBuffer(arrayBuffer) {\n    // Convert ArrayBuffer -> base64 without Buffer (works in RN/JS).\n    var bytes = new Uint8Array(arrayBuffer);\n    var alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var base64 = \"\";\n    var i = 0;\n    for (; i + 2 < bytes.length; i += 3) {\n      var chunk = bytes[i] << 16 | bytes[i + 1] << 8 | bytes[i + 2];\n      base64 += alphabet[chunk >> 18 & 63];\n      base64 += alphabet[chunk >> 12 & 63];\n      base64 += alphabet[chunk >> 6 & 63];\n      base64 += alphabet[chunk & 63];\n    }\n    var remaining = bytes.length - i;\n    if (remaining === 1) {\n      var _chunk = bytes[i] << 16;\n      base64 += alphabet[_chunk >> 18 & 63];\n      base64 += alphabet[_chunk >> 12 & 63];\n      base64 += \"==\";\n    } else if (remaining === 2) {\n      var _chunk2 = bytes[i] << 16 | bytes[i + 1] << 8;\n      base64 += alphabet[_chunk2 >> 18 & 63];\n      base64 += alphabet[_chunk2 >> 12 & 63];\n      base64 += alphabet[_chunk2 >> 6 & 63];\n      base64 += \"=\";\n    }\n    return base64;\n  }\n  function prepareShareCardDataUrl(_x) {\n    return _prepareShareCardDataUrl.apply(this, arguments);\n  }\n  function _prepareShareCardDataUrl() {\n    _prepareShareCardDataUrl = (0, _asyncToGenerator.default)(function* (remoteUrl) {\n      if (!remoteUrl || typeof remoteUrl !== \"string\") {\n        throw new Error(\"Missing remoteUrl\");\n      }\n      var resp = yield fetch(remoteUrl);\n      if (!resp.ok) {\n        throw new Error(`When fetching share image, the response was [${resp.status}] ${resp.statusText}`);\n      }\n      var contentType = resp.headers.get(\"content-type\") || \"image/png\";\n      var buf = yield resp.arrayBuffer();\n      var base64 = base64FromArrayBuffer(buf);\n      return {\n        dataUrl: `data:${contentType};base64,${base64}`,\n        contentType\n      };\n    });\n    return _prepareShareCardDataUrl.apply(this, arguments);\n  }\n});","lineCount":74,"map":[[12,2,44,0,"exports"],[12,9,44,0],[12,10,44,0,"prepareShareCardDataUrl"],[12,33,44,0],[12,36,44,0,"prepareShareCardDataUrl"],[12,59,44,0],[13,2,64,1],[13,6,64,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,64,1],[13,45,64,1,"require"],[13,52,64,1],[13,53,64,1,"_dependencyMap"],[13,67,64,1],[14,2,64,1],[14,6,64,1,"_asyncToGenerator"],[14,23,64,1],[14,26,64,1,"_interopDefault"],[14,41,64,1],[14,42,64,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,64,1],[15,2,1,0],[16,2,2,0],[17,2,3,0],[18,2,4,0],[19,2,5,0],[20,2,6,0],[21,2,7,0],[22,2,8,0],[24,2,10,0],[24,11,10,9,"base64FromArrayBuffer"],[24,32,10,30,"base64FromArrayBuffer"],[24,33,10,31,"arrayBuffer"],[24,44,10,42],[24,46,10,44],[25,4,11,2],[26,4,12,2],[26,8,12,8,"bytes"],[26,13,12,13],[26,16,12,16],[26,20,12,20,"Uint8Array"],[26,30,12,30],[26,31,12,31,"arrayBuffer"],[26,42,12,42],[26,43,12,43],[27,4,13,2],[27,8,13,8,"alphabet"],[27,16,13,16],[27,19,14,4],[27,85,14,70],[28,4,16,2],[28,8,16,6,"base64"],[28,14,16,12],[28,17,16,15],[28,19,16,17],[29,4,17,2],[29,8,17,6,"i"],[29,9,17,7],[29,12,17,10],[29,13,17,11],[30,4,19,2],[30,11,19,9,"i"],[30,12,19,10],[30,15,19,13],[30,16,19,14],[30,19,19,17,"bytes"],[30,24,19,22],[30,25,19,23,"length"],[30,31,19,29],[30,33,19,31,"i"],[30,34,19,32],[30,38,19,36],[30,39,19,37],[30,41,19,39],[31,6,20,4],[31,10,20,10,"chunk"],[31,15,20,15],[31,18,20,19,"bytes"],[31,23,20,24],[31,24,20,25,"i"],[31,25,20,26],[31,26,20,27],[31,30,20,31],[31,32,20,33],[31,35,20,38,"bytes"],[31,40,20,43],[31,41,20,44,"i"],[31,42,20,45],[31,45,20,48],[31,46,20,49],[31,47,20,50],[31,51,20,54],[31,52,20,56],[31,55,20,59,"bytes"],[31,60,20,64],[31,61,20,65,"i"],[31,62,20,66],[31,65,20,69],[31,66,20,70],[31,67,20,71],[32,6,21,4,"base64"],[32,12,21,10],[32,16,21,14,"alphabet"],[32,24,21,22],[32,25,21,24,"chunk"],[32,30,21,29],[32,34,21,33],[32,36,21,35],[32,39,21,39],[32,41,21,41],[32,42,21,42],[33,6,22,4,"base64"],[33,12,22,10],[33,16,22,14,"alphabet"],[33,24,22,22],[33,25,22,24,"chunk"],[33,30,22,29],[33,34,22,33],[33,36,22,35],[33,39,22,39],[33,41,22,41],[33,42,22,42],[34,6,23,4,"base64"],[34,12,23,10],[34,16,23,14,"alphabet"],[34,24,23,22],[34,25,23,24,"chunk"],[34,30,23,29],[34,34,23,33],[34,35,23,34],[34,38,23,38],[34,40,23,40],[34,41,23,41],[35,6,24,4,"base64"],[35,12,24,10],[35,16,24,14,"alphabet"],[35,24,24,22],[35,25,24,23,"chunk"],[35,30,24,28],[35,33,24,31],[35,35,24,33],[35,36,24,34],[36,4,25,2],[37,4,27,2],[37,8,27,8,"remaining"],[37,17,27,17],[37,20,27,20,"bytes"],[37,25,27,25],[37,26,27,26,"length"],[37,32,27,32],[37,35,27,35,"i"],[37,36,27,36],[38,4,28,2],[38,8,28,6,"remaining"],[38,17,28,15],[38,22,28,20],[38,23,28,21],[38,25,28,23],[39,6,29,4],[39,10,29,10,"chunk"],[39,16,29,15],[39,19,29,18,"bytes"],[39,24,29,23],[39,25,29,24,"i"],[39,26,29,25],[39,27,29,26],[39,31,29,30],[39,33,29,32],[40,6,30,4,"base64"],[40,12,30,10],[40,16,30,14,"alphabet"],[40,24,30,22],[40,25,30,24,"chunk"],[40,31,30,29],[40,35,30,33],[40,37,30,35],[40,40,30,39],[40,42,30,41],[40,43,30,42],[41,6,31,4,"base64"],[41,12,31,10],[41,16,31,14,"alphabet"],[41,24,31,22],[41,25,31,24,"chunk"],[41,31,31,29],[41,35,31,33],[41,37,31,35],[41,40,31,39],[41,42,31,41],[41,43,31,42],[42,6,32,4,"base64"],[42,12,32,10],[42,16,32,14],[42,20,32,18],[43,4,33,2],[43,5,33,3],[43,11,33,9],[43,15,33,13,"remaining"],[43,24,33,22],[43,29,33,27],[43,30,33,28],[43,32,33,30],[44,6,34,4],[44,10,34,10,"chunk"],[44,17,34,15],[44,20,34,19,"bytes"],[44,25,34,24],[44,26,34,25,"i"],[44,27,34,26],[44,28,34,27],[44,32,34,31],[44,34,34,33],[44,37,34,38,"bytes"],[44,42,34,43],[44,43,34,44,"i"],[44,44,34,45],[44,47,34,48],[44,48,34,49],[44,49,34,50],[44,53,34,54],[44,54,34,56],[45,6,35,4,"base64"],[45,12,35,10],[45,16,35,14,"alphabet"],[45,24,35,22],[45,25,35,24,"chunk"],[45,32,35,29],[45,36,35,33],[45,38,35,35],[45,41,35,39],[45,43,35,41],[45,44,35,42],[46,6,36,4,"base64"],[46,12,36,10],[46,16,36,14,"alphabet"],[46,24,36,22],[46,25,36,24,"chunk"],[46,32,36,29],[46,36,36,33],[46,38,36,35],[46,41,36,39],[46,43,36,41],[46,44,36,42],[47,6,37,4,"base64"],[47,12,37,10],[47,16,37,14,"alphabet"],[47,24,37,22],[47,25,37,24,"chunk"],[47,32,37,29],[47,36,37,33],[47,37,37,34],[47,40,37,38],[47,42,37,40],[47,43,37,41],[48,6,38,4,"base64"],[48,12,38,10],[48,16,38,14],[48,19,38,17],[49,4,39,2],[50,4,41,2],[50,11,41,9,"base64"],[50,17,41,15],[51,2,42,0],[52,2,42,1],[52,11,44,22,"prepareShareCardDataUrl"],[52,34,44,45,"prepareShareCardDataUrl"],[52,35,44,45,"_x"],[52,37,44,45],[53,4,44,45],[53,11,44,45,"_prepareShareCardDataUrl"],[53,35,44,45],[53,36,44,45,"apply"],[53,41,44,45],[53,48,44,45,"arguments"],[53,57,44,45],[54,2,44,45],[55,2,44,45],[55,11,44,45,"_prepareShareCardDataUrl"],[55,36,44,45],[56,4,44,45,"_prepareShareCardDataUrl"],[56,28,44,45],[56,35,44,45,"_asyncToGenerator"],[56,52,44,45],[56,53,44,45,"default"],[56,60,44,45],[56,62,44,7],[56,73,44,46,"remoteUrl"],[56,82,44,55],[56,84,44,57],[57,6,45,2],[57,10,45,6],[57,11,45,7,"remoteUrl"],[57,20,45,16],[57,24,45,20],[57,31,45,27,"remoteUrl"],[57,40,45,36],[57,45,45,41],[57,53,45,49],[57,55,45,51],[58,8,46,4],[58,14,46,10],[58,18,46,14,"Error"],[58,23,46,19],[58,24,46,20],[58,43,46,39],[58,44,46,40],[59,6,47,2],[60,6,49,2],[60,10,49,8,"resp"],[60,14,49,12],[60,23,49,21,"fetch"],[60,28,49,26],[60,29,49,27,"remoteUrl"],[60,38,49,36],[60,39,49,37],[61,6,50,2],[61,10,50,6],[61,11,50,7,"resp"],[61,15,50,11],[61,16,50,12,"ok"],[61,18,50,14],[61,20,50,16],[62,8,51,4],[62,14,51,10],[62,18,51,14,"Error"],[62,23,51,19],[62,24,52,6],[62,72,52,54,"resp"],[62,76,52,58],[62,77,52,59,"status"],[62,83,52,65],[62,88,52,70,"resp"],[62,92,52,74],[62,93,52,75,"statusText"],[62,103,52,85],[62,105,53,4],[62,106,53,5],[63,6,54,2],[64,6,56,2],[64,10,56,8,"contentType"],[64,21,56,19],[64,24,56,22,"resp"],[64,28,56,26],[64,29,56,27,"headers"],[64,36,56,34],[64,37,56,35,"get"],[64,40,56,38],[64,41,56,39],[64,55,56,53],[64,56,56,54],[64,60,56,58],[64,71,56,69],[65,6,57,2],[65,10,57,8,"buf"],[65,13,57,11],[65,22,57,20,"resp"],[65,26,57,24],[65,27,57,25,"arrayBuffer"],[65,38,57,36],[65,39,57,37],[65,40,57,38],[66,6,58,2],[66,10,58,8,"base64"],[66,16,58,14],[66,19,58,17,"base64FromArrayBuffer"],[66,40,58,38],[66,41,58,39,"buf"],[66,44,58,42],[66,45,58,43],[67,6,60,2],[67,13,60,9],[68,8,61,4,"dataUrl"],[68,15,61,11],[68,17,61,13],[68,25,61,21,"contentType"],[68,36,61,32],[68,47,61,43,"base64"],[68,53,61,49],[68,55,61,51],[69,8,62,4,"contentType"],[70,6,63,2],[70,7,63,3],[71,4,64,0],[71,5,64,1],[72,4,64,1],[72,11,64,1,"_prepareShareCardDataUrl"],[72,35,64,1],[72,36,64,1,"apply"],[72,41,64,1],[72,48,64,1,"arguments"],[72,57,64,1],[73,2,64,1],[74,0,64,1],[74,3]],"functionMap":{"names":["<global>","base64FromArrayBuffer","prepareShareCardDataUrl"],"mappings":"AAA;ACS;CDgC;OEE;CFoB"},"hasCjsExports":false},"type":"js/module"}]}