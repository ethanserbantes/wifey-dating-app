{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useDatingInsights = useDatingInsights;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1]);\n  var _tanstackReactQuery = require(_dependencyMap[2]);\n  function useDatingInsights(profile, showDatingInsights) {\n    var targetUserId = (0, _react.useMemo)(() => {\n      var n1 = Number(profile?.user_id);\n      if (Number.isFinite(n1) && n1 > 0) return Math.trunc(n1);\n      var n2 = Number(profile?.id);\n      if (Number.isFinite(n2) && n2 > 0) return Math.trunc(n2);\n      return null;\n    }, [profile?.id, profile?.user_id]);\n    var shouldFetchInsights = showDatingInsights && Number.isFinite(targetUserId);\n    var insightsQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"datingInsights\", \"profile\", targetUserId],\n      enabled: shouldFetchInsights,\n      queryFn: function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          var resp = yield fetch(`/api/dating-insights?userId=${encodeURIComponent(String(targetUserId))}`);\n          if (!resp.ok) {\n            throw new Error(`When fetching /api/dating-insights, the response was [${resp.status}] ${resp.statusText}`);\n          }\n          return resp.json();\n        });\n        return function queryFn() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      staleTime: 30_000\n    });\n    var dateHistoryLabel = typeof insightsQuery.data?.dateHistoryLabel === \"string\" ? insightsQuery.data.dateHistoryLabel : null;\n    var followThroughLabel = typeof insightsQuery.data?.followThroughLabel === \"string\" ? insightsQuery.data.followThroughLabel : null;\n    var dateHistoryLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return dateHistoryLabel || \"0 dates on Wifey\";\n    }, [dateHistoryLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    var followThroughLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return followThroughLabel || \"Not enough data yet\";\n    }, [followThroughLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    return {\n      shouldFetchInsights,\n      insightsQuery,\n      dateHistoryLine,\n      followThroughLine\n    };\n  }\n});","lineCount":74,"map":[[12,2,4,0,"exports"],[12,9,4,0],[12,10,4,0,"useDatingInsights"],[12,27,4,0],[12,30,4,0,"useDatingInsights"],[12,47,4,0],[13,2,93,1],[13,6,93,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,93,1],[13,45,93,1,"require"],[13,52,93,1],[13,53,93,1,"_dependencyMap"],[13,67,93,1],[14,2,93,1],[14,6,93,1,"_asyncToGenerator"],[14,23,93,1],[14,26,93,1,"_interopDefault"],[14,41,93,1],[14,42,93,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,93,1],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_tanstackReactQuery"],[16,25,2,0],[16,28,2,0,"require"],[16,35,2,0],[16,36,2,0,"_dependencyMap"],[16,50,2,0],[17,2,4,7],[17,11,4,16,"useDatingInsights"],[17,28,4,33,"useDatingInsights"],[17,29,4,34,"profile"],[17,36,4,41],[17,38,4,43,"showDatingInsights"],[17,56,4,61],[17,58,4,63],[18,4,5,2],[18,8,5,8,"targetUserId"],[18,20,5,20],[18,23,5,23],[18,27,5,23,"useMemo"],[18,33,5,30],[18,34,5,30,"useMemo"],[18,41,5,30],[18,43,5,31],[18,49,5,37],[19,6,6,4],[19,10,6,10,"n1"],[19,12,6,12],[19,15,6,15,"Number"],[19,21,6,21],[19,22,6,22,"profile"],[19,29,6,29],[19,31,6,31,"user_id"],[19,38,6,38],[19,39,6,39],[20,6,7,4],[20,10,7,8,"Number"],[20,16,7,14],[20,17,7,15,"isFinite"],[20,25,7,23],[20,26,7,24,"n1"],[20,28,7,26],[20,29,7,27],[20,33,7,31,"n1"],[20,35,7,33],[20,38,7,36],[20,39,7,37],[20,41,7,39],[20,48,7,46,"Math"],[20,52,7,50],[20,53,7,51,"trunc"],[20,58,7,56],[20,59,7,57,"n1"],[20,61,7,59],[20,62,7,60],[21,6,9,4],[21,10,9,10,"n2"],[21,12,9,12],[21,15,9,15,"Number"],[21,21,9,21],[21,22,9,22,"profile"],[21,29,9,29],[21,31,9,31,"id"],[21,33,9,33],[21,34,9,34],[22,6,10,4],[22,10,10,8,"Number"],[22,16,10,14],[22,17,10,15,"isFinite"],[22,25,10,23],[22,26,10,24,"n2"],[22,28,10,26],[22,29,10,27],[22,33,10,31,"n2"],[22,35,10,33],[22,38,10,36],[22,39,10,37],[22,41,10,39],[22,48,10,46,"Math"],[22,52,10,50],[22,53,10,51,"trunc"],[22,58,10,56],[22,59,10,57,"n2"],[22,61,10,59],[22,62,10,60],[23,6,12,4],[23,13,12,11],[23,17,12,15],[24,4,13,2],[24,5,13,3],[24,7,13,5],[24,8,13,6,"profile"],[24,15,13,13],[24,17,13,15,"id"],[24,19,13,17],[24,21,13,19,"profile"],[24,28,13,26],[24,30,13,28,"user_id"],[24,37,13,35],[24,38,13,36],[24,39,13,37],[25,4,15,2],[25,8,15,8,"shouldFetchInsights"],[25,27,15,27],[25,30,16,4,"showDatingInsights"],[25,48,16,22],[25,52,16,26,"Number"],[25,58,16,32],[25,59,16,33,"isFinite"],[25,67,16,41],[25,68,16,42,"targetUserId"],[25,80,16,54],[25,81,16,55],[26,4,18,2],[26,8,18,8,"insightsQuery"],[26,21,18,21],[26,24,18,24],[26,28,18,24,"useQuery"],[26,47,18,32],[26,48,18,32,"useQuery"],[26,56,18,32],[26,58,18,33],[27,6,19,4,"queryKey"],[27,14,19,12],[27,16,19,14],[27,17,19,15],[27,33,19,31],[27,35,19,33],[27,44,19,42],[27,46,19,44,"targetUserId"],[27,58,19,56],[27,59,19,57],[28,6,20,4,"enabled"],[28,13,20,11],[28,15,20,13,"shouldFetchInsights"],[28,34,20,32],[29,6,21,4,"queryFn"],[29,13,21,11],[30,8,21,11],[30,12,21,11,"_ref"],[30,16,21,11],[30,23,21,11,"_asyncToGenerator"],[30,40,21,11],[30,41,21,11,"default"],[30,48,21,11],[30,50,21,13],[30,63,21,25],[31,10,22,6],[31,14,22,12,"resp"],[31,18,22,16],[31,27,22,25,"fetch"],[31,32,22,30],[31,33,23,8],[31,64,23,39,"encodeURIComponent"],[31,82,23,57],[31,83,23,58,"String"],[31,89,23,64],[31,90,23,65,"targetUserId"],[31,102,23,77],[31,103,23,78],[31,104,23,79],[31,106,24,6],[31,107,24,7],[32,10,25,6],[32,14,25,10],[32,15,25,11,"resp"],[32,19,25,15],[32,20,25,16,"ok"],[32,22,25,18],[32,24,25,20],[33,12,26,8],[33,18,26,14],[33,22,26,18,"Error"],[33,27,26,23],[33,28,27,10],[33,85,27,67,"resp"],[33,89,27,71],[33,90,27,72,"status"],[33,96,27,78],[33,101,27,83,"resp"],[33,105,27,87],[33,106,27,88,"statusText"],[33,116,27,98],[33,118,28,8],[33,119,28,9],[34,10,29,6],[35,10,30,6],[35,17,30,13,"resp"],[35,21,30,17],[35,22,30,18,"json"],[35,26,30,22],[35,27,30,23],[35,28,30,24],[36,8,31,4],[36,9,31,5],[37,8,31,5],[37,24,21,4,"queryFn"],[37,31,21,11,"queryFn"],[37,32,21,11],[38,10,21,11],[38,17,21,11,"_ref"],[38,21,21,11],[38,22,21,11,"apply"],[38,27,21,11],[38,34,21,11,"arguments"],[38,43,21,11],[39,8,21,11],[40,6,21,11],[40,9,31,5],[41,6,32,4,"staleTime"],[41,15,32,13],[41,17,32,15],[42,4,33,2],[42,5,33,3],[42,6,33,4],[43,4,35,2],[43,8,35,8,"dateHistoryLabel"],[43,24,35,24],[43,27,36,4],[43,34,36,11,"insightsQuery"],[43,47,36,24],[43,48,36,25,"data"],[43,52,36,29],[43,54,36,31,"dateHistoryLabel"],[43,70,36,47],[43,75,36,52],[43,83,36,60],[43,86,37,8,"insightsQuery"],[43,99,37,21],[43,100,37,22,"data"],[43,104,37,26],[43,105,37,27,"dateHistoryLabel"],[43,121,37,43],[43,124,38,8],[43,128,38,12],[44,4,40,2],[44,8,40,8,"followThroughLabel"],[44,26,40,26],[44,29,41,4],[44,36,41,11,"insightsQuery"],[44,49,41,24],[44,50,41,25,"data"],[44,54,41,29],[44,56,41,31,"followThroughLabel"],[44,74,41,49],[44,79,41,54],[44,87,41,62],[44,90,42,8,"insightsQuery"],[44,103,42,21],[44,104,42,22,"data"],[44,108,42,26],[44,109,42,27,"followThroughLabel"],[44,127,42,45],[44,130,43,8],[44,134,43,12],[45,4,45,2],[45,8,45,8,"dateHistoryLine"],[45,23,45,23],[45,26,45,26],[45,30,45,26,"useMemo"],[45,36,45,33],[45,37,45,33,"useMemo"],[45,44,45,33],[45,46,45,34],[45,52,45,40],[46,6,46,4],[46,10,46,8],[46,11,46,9,"showDatingInsights"],[46,29,46,27],[46,31,46,29],[46,38,46,36],[46,42,46,40],[47,6,47,4],[47,10,47,8],[47,11,47,9,"shouldFetchInsights"],[47,30,47,28],[47,32,47,30],[47,39,47,37],[47,43,47,41],[48,6,49,4],[48,10,49,8,"insightsQuery"],[48,23,49,21],[48,24,49,22,"isLoading"],[48,33,49,31],[48,35,49,33],[49,8,50,6],[49,15,50,13],[49,25,50,23],[50,6,51,4],[51,6,53,4],[51,10,53,8,"insightsQuery"],[51,23,53,21],[51,24,53,22,"isError"],[51,31,53,29],[51,33,53,31],[52,8,54,6],[52,15,54,13],[52,28,54,26],[53,6,55,4],[54,6,57,4],[54,13,57,11,"dateHistoryLabel"],[54,29,57,27],[54,33,57,31],[54,51,57,49],[55,4,58,2],[55,5,58,3],[55,7,58,5],[55,8,59,4,"dateHistoryLabel"],[55,24,59,20],[55,26,60,4,"insightsQuery"],[55,39,60,17],[55,40,60,18,"isError"],[55,47,60,25],[55,49,61,4,"insightsQuery"],[55,62,61,17],[55,63,61,18,"isLoading"],[55,72,61,27],[55,74,62,4,"shouldFetchInsights"],[55,93,62,23],[55,95,63,4,"showDatingInsights"],[55,113,63,22],[55,114,64,3],[55,115,64,4],[56,4,66,2],[56,8,66,8,"followThroughLine"],[56,25,66,25],[56,28,66,28],[56,32,66,28,"useMemo"],[56,38,66,35],[56,39,66,35,"useMemo"],[56,46,66,35],[56,48,66,36],[56,54,66,42],[57,6,67,4],[57,10,67,8],[57,11,67,9,"showDatingInsights"],[57,29,67,27],[57,31,67,29],[57,38,67,36],[57,42,67,40],[58,6,68,4],[58,10,68,8],[58,11,68,9,"shouldFetchInsights"],[58,30,68,28],[58,32,68,30],[58,39,68,37],[58,43,68,41],[59,6,70,4],[59,10,70,8,"insightsQuery"],[59,23,70,21],[59,24,70,22,"isLoading"],[59,33,70,31],[59,35,70,33],[60,8,71,6],[60,15,71,13],[60,25,71,23],[61,6,72,4],[62,6,74,4],[62,10,74,8,"insightsQuery"],[62,23,74,21],[62,24,74,22,"isError"],[62,31,74,29],[62,33,74,31],[63,8,75,6],[63,15,75,13],[63,28,75,26],[64,6,76,4],[65,6,78,4],[65,13,78,11,"followThroughLabel"],[65,31,78,29],[65,35,78,33],[65,56,78,54],[66,4,79,2],[66,5,79,3],[66,7,79,5],[66,8,80,4,"followThroughLabel"],[66,26,80,22],[66,28,81,4,"insightsQuery"],[66,41,81,17],[66,42,81,18,"isError"],[66,49,81,25],[66,51,82,4,"insightsQuery"],[66,64,82,17],[66,65,82,18,"isLoading"],[66,74,82,27],[66,76,83,4,"shouldFetchInsights"],[66,95,83,23],[66,97,84,4,"showDatingInsights"],[66,115,84,22],[66,116,85,3],[66,117,85,4],[67,4,87,2],[67,11,87,9],[68,6,88,4,"shouldFetchInsights"],[68,25,88,23],[69,6,89,4,"insightsQuery"],[69,19,89,17],[70,6,90,4,"dateHistoryLine"],[70,21,90,19],[71,6,91,4,"followThroughLine"],[72,4,92,2],[72,5,92,3],[73,2,93,0],[74,0,93,1],[74,3]],"functionMap":{"names":["<global>","useDatingInsights","useMemo$argument_0","useQuery$argument_0.queryFn"],"mappings":"AAA;OCG;+BCC;GDQ;aEQ;KFU;kCCc;GDa;oCCQ;GDa;CDc"},"hasCjsExports":false},"type":"js/module"}]}