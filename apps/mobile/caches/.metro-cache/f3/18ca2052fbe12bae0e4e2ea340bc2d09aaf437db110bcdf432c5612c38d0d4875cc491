{"dependencies":[{"name":"../../jsutils/didYouMean.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"F4vQ+zaZeaX+DzlBIyVkDZI9jSM=","exportNames":["*"],"imports":1}},{"name":"../../jsutils/naturalCompare.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":66,"index":125}}],"key":"Be1JCWfSG5QeyxGISHooYwDgC1E=","exportNames":["*"],"imports":1}},{"name":"../../jsutils/suggestionList.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":66,"index":192}}],"key":"ecoW47ziMo+WR3l3JTWpMj8+ePI=","exportNames":["*"],"imports":1}},{"name":"../../error/GraphQLError.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":193},"end":{"line":4,"column":60,"index":253}}],"key":"bmIpo7jOJABVILoymQcjQyoT3Bc=","exportNames":["*"],"imports":1}},{"name":"../../type/definition.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":254},"end":{"line":9,"column":35,"index":351}}],"key":"OJG9n3Eg7iYSTCZRKQx0dU0wthg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.FieldsOnCorrectTypeRule = FieldsOnCorrectTypeRule;\n  var _jsutilsDidYouMeanMjs = require(_dependencyMap[0]);\n  var _jsutilsNaturalCompareMjs = require(_dependencyMap[1]);\n  var _jsutilsSuggestionListMjs = require(_dependencyMap[2]);\n  var _errorGraphQLErrorMjs = require(_dependencyMap[3]);\n  var _typeDefinitionMjs = require(_dependencyMap[4]);\n  /**\n   * Fields on correct type\n   *\n   * A GraphQL document is only valid if all fields selected are defined by the\n   * parent type, or are an allowed meta field such as __typename.\n   *\n   * See https://spec.graphql.org/draft/#sec-Field-Selections\n   */\n  function FieldsOnCorrectTypeRule(context) {\n    return {\n      Field(node) {\n        var type = context.getParentType();\n        if (type) {\n          var fieldDef = context.getFieldDef();\n          if (!fieldDef) {\n            // This field doesn't exist, lets look for suggestions.\n            var schema = context.getSchema();\n            var fieldName = node.name.value; // First determine if there are any suggested types to condition on.\n\n            var suggestion = (0, _jsutilsDidYouMeanMjs.didYouMean)('to use an inline fragment on', getSuggestedTypeNames(schema, type, fieldName)); // If there are no suggested types, then perhaps this was a typo?\n\n            if (suggestion === '') {\n              suggestion = (0, _jsutilsDidYouMeanMjs.didYouMean)(getSuggestedFieldNames(type, fieldName));\n            } // Report an error, including helpful suggestions.\n\n            context.reportError(new _errorGraphQLErrorMjs.GraphQLError(`Cannot query field \"${fieldName}\" on type \"${type.name}\".` + suggestion, {\n              nodes: node\n            }));\n          }\n        }\n      }\n    };\n  }\n  /**\n   * Go through all of the implementations of type, as well as the interfaces that\n   * they implement. If any of those types include the provided field, suggest them,\n   * sorted by how often the type is referenced.\n   */\n\n  function getSuggestedTypeNames(schema, type, fieldName) {\n    if (!(0, _typeDefinitionMjs.isAbstractType)(type)) {\n      // Must be an Object type, which does not have possible fields.\n      return [];\n    }\n    var suggestedTypes = new Set();\n    var usageCount = Object.create(null);\n    for (var possibleType of schema.getPossibleTypes(type)) {\n      if (!possibleType.getFields()[fieldName]) {\n        continue;\n      } // This object type defines this field.\n\n      suggestedTypes.add(possibleType);\n      usageCount[possibleType.name] = 1;\n      for (var possibleInterface of possibleType.getInterfaces()) {\n        var _usageCount$possibleI;\n        if (!possibleInterface.getFields()[fieldName]) {\n          continue;\n        } // This interface type defines this field.\n\n        suggestedTypes.add(possibleInterface);\n        usageCount[possibleInterface.name] = ((_usageCount$possibleI = usageCount[possibleInterface.name]) !== null && _usageCount$possibleI !== undefined ? _usageCount$possibleI : 0) + 1;\n      }\n    }\n    return [...suggestedTypes].sort((typeA, typeB) => {\n      // Suggest both interface and object types based on how common they are.\n      var usageCountDiff = usageCount[typeB.name] - usageCount[typeA.name];\n      if (usageCountDiff !== 0) {\n        return usageCountDiff;\n      } // Suggest super types first followed by subtypes\n\n      if ((0, _typeDefinitionMjs.isInterfaceType)(typeA) && schema.isSubType(typeA, typeB)) {\n        return -1;\n      }\n      if ((0, _typeDefinitionMjs.isInterfaceType)(typeB) && schema.isSubType(typeB, typeA)) {\n        return 1;\n      }\n      return (0, _jsutilsNaturalCompareMjs.naturalCompare)(typeA.name, typeB.name);\n    }).map(x => x.name);\n  }\n  /**\n   * For the field name provided, determine if there are any similar field names\n   * that may be the result of a typo.\n   */\n\n  function getSuggestedFieldNames(type, fieldName) {\n    if ((0, _typeDefinitionMjs.isObjectType)(type) || (0, _typeDefinitionMjs.isInterfaceType)(type)) {\n      var possibleFieldNames = Object.keys(type.getFields());\n      return (0, _jsutilsSuggestionListMjs.suggestionList)(fieldName, possibleFieldNames);\n    } // Otherwise, must be a Union type, which does not define fields.\n\n    return [];\n  }\n});","lineCount":105,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"FieldsOnCorrectTypeRule"],[7,33,19,0],[7,36,19,0,"FieldsOnCorrectTypeRule"],[7,59,19,0],[8,2,1,0],[8,6,1,0,"_jsutilsDidYouMeanMjs"],[8,27,1,0],[8,30,1,0,"require"],[8,37,1,0],[8,38,1,0,"_dependencyMap"],[8,52,1,0],[9,2,2,0],[9,6,2,0,"_jsutilsNaturalCompareMjs"],[9,31,2,0],[9,34,2,0,"require"],[9,41,2,0],[9,42,2,0,"_dependencyMap"],[9,56,2,0],[10,2,3,0],[10,6,3,0,"_jsutilsSuggestionListMjs"],[10,31,3,0],[10,34,3,0,"require"],[10,41,3,0],[10,42,3,0,"_dependencyMap"],[10,56,3,0],[11,2,4,0],[11,6,4,0,"_errorGraphQLErrorMjs"],[11,27,4,0],[11,30,4,0,"require"],[11,37,4,0],[11,38,4,0,"_dependencyMap"],[11,52,4,0],[12,2,5,0],[12,6,5,0,"_typeDefinitionMjs"],[12,24,5,0],[12,27,5,0,"require"],[12,34,5,0],[12,35,5,0,"_dependencyMap"],[12,49,5,0],[13,2,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,0,18,0],[21,2,19,7],[21,11,19,16,"FieldsOnCorrectTypeRule"],[21,34,19,39,"FieldsOnCorrectTypeRule"],[21,35,19,40,"context"],[21,42,19,47],[21,44,19,49],[22,4,20,2],[22,11,20,9],[23,6,21,4,"Field"],[23,11,21,9,"Field"],[23,12,21,10,"node"],[23,16,21,14],[23,18,21,16],[24,8,22,6],[24,12,22,12,"type"],[24,16,22,16],[24,19,22,19,"context"],[24,26,22,26],[24,27,22,27,"getParentType"],[24,40,22,40],[24,41,22,41],[24,42,22,42],[25,8,24,6],[25,12,24,10,"type"],[25,16,24,14],[25,18,24,16],[26,10,25,8],[26,14,25,14,"fieldDef"],[26,22,25,22],[26,25,25,25,"context"],[26,32,25,32],[26,33,25,33,"getFieldDef"],[26,44,25,44],[26,45,25,45],[26,46,25,46],[27,10,27,8],[27,14,27,12],[27,15,27,13,"fieldDef"],[27,23,27,21],[27,25,27,23],[28,12,28,10],[29,12,29,10],[29,16,29,16,"schema"],[29,22,29,22],[29,25,29,25,"context"],[29,32,29,32],[29,33,29,33,"getSchema"],[29,42,29,42],[29,43,29,43],[29,44,29,44],[30,12,30,10],[30,16,30,16,"fieldName"],[30,25,30,25],[30,28,30,28,"node"],[30,32,30,32],[30,33,30,33,"name"],[30,37,30,37],[30,38,30,38,"value"],[30,43,30,43],[30,44,30,44],[30,45,30,45],[32,12,32,10],[32,16,32,14,"suggestion"],[32,26,32,24],[32,29,32,27],[32,33,32,27,"didYouMean"],[32,54,32,37],[32,55,32,37,"didYouMean"],[32,65,32,37],[32,67,33,12],[32,97,33,42],[32,99,34,12,"getSuggestedTypeNames"],[32,120,34,33],[32,121,34,34,"schema"],[32,127,34,40],[32,129,34,42,"type"],[32,133,34,46],[32,135,34,48,"fieldName"],[32,144,34,57],[32,145,35,10],[32,146,35,11],[32,147,35,12],[32,148,35,13],[34,12,37,10],[34,16,37,14,"suggestion"],[34,26,37,24],[34,31,37,29],[34,33,37,31],[34,35,37,33],[35,14,38,12,"suggestion"],[35,24,38,22],[35,27,38,25],[35,31,38,25,"didYouMean"],[35,52,38,35],[35,53,38,35,"didYouMean"],[35,63,38,35],[35,65,38,36,"getSuggestedFieldNames"],[35,87,38,58],[35,88,38,59,"type"],[35,92,38,63],[35,94,38,65,"fieldName"],[35,103,38,74],[35,104,38,75],[35,105,38,76],[36,12,39,10],[36,13,39,11],[36,14,39,12],[38,12,41,10,"context"],[38,19,41,17],[38,20,41,18,"reportError"],[38,31,41,29],[38,32,42,12],[38,36,42,16,"GraphQLError"],[38,57,42,28],[38,58,42,28,"GraphQLError"],[38,70,42,28],[38,71,43,14],[38,94,43,37,"fieldName"],[38,103,43,46],[38,117,43,60,"type"],[38,121,43,64],[38,122,43,65,"name"],[38,126,43,69],[38,130,43,73],[38,133,44,16,"suggestion"],[38,143,44,26],[38,145,45,14],[39,14,46,16,"nodes"],[39,19,46,21],[39,21,46,23,"node"],[40,12,47,14],[40,13,48,12],[40,14,49,10],[40,15,49,11],[41,10,50,8],[42,8,51,6],[43,6,52,4],[44,4,53,2],[44,5,53,3],[45,2,54,0],[46,2,55,0],[47,0,56,0],[48,0,57,0],[49,0,58,0],[50,0,59,0],[52,2,61,0],[52,11,61,9,"getSuggestedTypeNames"],[52,32,61,30,"getSuggestedTypeNames"],[52,33,61,31,"schema"],[52,39,61,37],[52,41,61,39,"type"],[52,45,61,43],[52,47,61,45,"fieldName"],[52,56,61,54],[52,58,61,56],[53,4,62,2],[53,8,62,6],[53,9,62,7],[53,13,62,7,"isAbstractType"],[53,31,62,21],[53,32,62,21,"isAbstractType"],[53,46,62,21],[53,48,62,22,"type"],[53,52,62,26],[53,53,62,27],[53,55,62,29],[54,6,63,4],[55,6,64,4],[55,13,64,11],[55,15,64,13],[56,4,65,2],[57,4,67,2],[57,8,67,8,"suggestedTypes"],[57,22,67,22],[57,25,67,25],[57,29,67,29,"Set"],[57,32,67,32],[57,33,67,33],[57,34,67,34],[58,4,68,2],[58,8,68,8,"usageCount"],[58,18,68,18],[58,21,68,21,"Object"],[58,27,68,27],[58,28,68,28,"create"],[58,34,68,34],[58,35,68,35],[58,39,68,39],[58,40,68,40],[59,4,70,2],[59,9,70,7],[59,13,70,13,"possibleType"],[59,25,70,25],[59,29,70,29,"schema"],[59,35,70,35],[59,36,70,36,"getPossibleTypes"],[59,52,70,52],[59,53,70,53,"type"],[59,57,70,57],[59,58,70,58],[59,60,70,60],[60,6,71,4],[60,10,71,8],[60,11,71,9,"possibleType"],[60,23,71,21],[60,24,71,22,"getFields"],[60,33,71,31],[60,34,71,32],[60,35,71,33],[60,36,71,34,"fieldName"],[60,45,71,43],[60,46,71,44],[60,48,71,46],[61,8,72,6],[62,6,73,4],[62,7,73,5],[62,8,73,6],[64,6,75,4,"suggestedTypes"],[64,20,75,18],[64,21,75,19,"add"],[64,24,75,22],[64,25,75,23,"possibleType"],[64,37,75,35],[64,38,75,36],[65,6,76,4,"usageCount"],[65,16,76,14],[65,17,76,15,"possibleType"],[65,29,76,27],[65,30,76,28,"name"],[65,34,76,32],[65,35,76,33],[65,38,76,36],[65,39,76,37],[66,6,78,4],[66,11,78,9],[66,15,78,15,"possibleInterface"],[66,32,78,32],[66,36,78,36,"possibleType"],[66,48,78,48],[66,49,78,49,"getInterfaces"],[66,62,78,62],[66,63,78,63],[66,64,78,64],[66,66,78,66],[67,8,79,6],[67,12,79,10,"_usageCount$possibleI"],[67,33,79,31],[68,8,81,6],[68,12,81,10],[68,13,81,11,"possibleInterface"],[68,30,81,28],[68,31,81,29,"getFields"],[68,40,81,38],[68,41,81,39],[68,42,81,40],[68,43,81,41,"fieldName"],[68,52,81,50],[68,53,81,51],[68,55,81,53],[69,10,82,8],[70,8,83,6],[70,9,83,7],[70,10,83,8],[72,8,85,6,"suggestedTypes"],[72,22,85,20],[72,23,85,21,"add"],[72,26,85,24],[72,27,85,25,"possibleInterface"],[72,44,85,42],[72,45,85,43],[73,8,86,6,"usageCount"],[73,18,86,16],[73,19,86,17,"possibleInterface"],[73,36,86,34],[73,37,86,35,"name"],[73,41,86,39],[73,42,86,40],[73,45,87,8],[73,46,87,9],[73,47,87,10,"_usageCount$possibleI"],[73,68,87,31],[73,71,87,34,"usageCount"],[73,81,87,44],[73,82,87,45,"possibleInterface"],[73,99,87,62],[73,100,87,63,"name"],[73,104,87,67],[73,105,87,68],[73,111,88,10],[73,115,88,14],[73,119,88,18,"_usageCount$possibleI"],[73,140,88,39],[73,145,88,39,"undefined"],[73,154,88,50],[73,157,89,12,"_usageCount$possibleI"],[73,178,89,33],[73,181,90,12],[73,182,90,13],[73,186,90,17],[73,187,90,18],[74,6,91,4],[75,4,92,2],[76,4,94,2],[76,11,94,9],[76,12,94,10],[76,15,94,13,"suggestedTypes"],[76,29,94,27],[76,30,94,28],[76,31,95,5,"sort"],[76,35,95,9],[76,36,95,10],[76,37,95,11,"typeA"],[76,42,95,16],[76,44,95,18,"typeB"],[76,49,95,23],[76,54,95,28],[77,6,96,6],[78,6,97,6],[78,10,97,12,"usageCountDiff"],[78,24,97,26],[78,27,97,29,"usageCount"],[78,37,97,39],[78,38,97,40,"typeB"],[78,43,97,45],[78,44,97,46,"name"],[78,48,97,50],[78,49,97,51],[78,52,97,54,"usageCount"],[78,62,97,64],[78,63,97,65,"typeA"],[78,68,97,70],[78,69,97,71,"name"],[78,73,97,75],[78,74,97,76],[79,6,99,6],[79,10,99,10,"usageCountDiff"],[79,24,99,24],[79,29,99,29],[79,30,99,30],[79,32,99,32],[80,8,100,8],[80,15,100,15,"usageCountDiff"],[80,29,100,29],[81,6,101,6],[81,7,101,7],[81,8,101,8],[83,6,103,6],[83,10,103,10],[83,14,103,10,"isInterfaceType"],[83,32,103,25],[83,33,103,25,"isInterfaceType"],[83,48,103,25],[83,50,103,26,"typeA"],[83,55,103,31],[83,56,103,32],[83,60,103,36,"schema"],[83,66,103,42],[83,67,103,43,"isSubType"],[83,76,103,52],[83,77,103,53,"typeA"],[83,82,103,58],[83,84,103,60,"typeB"],[83,89,103,65],[83,90,103,66],[83,92,103,68],[84,8,104,8],[85,6,105,6],[86,6,107,6],[86,10,107,10],[86,14,107,10,"isInterfaceType"],[86,32,107,25],[86,33,107,25,"isInterfaceType"],[86,48,107,25],[86,50,107,26,"typeB"],[86,55,107,31],[86,56,107,32],[86,60,107,36,"schema"],[86,66,107,42],[86,67,107,43,"isSubType"],[86,76,107,52],[86,77,107,53,"typeB"],[86,82,107,58],[86,84,107,60,"typeA"],[86,89,107,65],[86,90,107,66],[86,92,107,68],[87,8,108,8],[87,15,108,15],[87,16,108,16],[88,6,109,6],[89,6,111,6],[89,13,111,13],[89,17,111,13,"naturalCompare"],[89,42,111,27],[89,43,111,27,"naturalCompare"],[89,57,111,27],[89,59,111,28,"typeA"],[89,64,111,33],[89,65,111,34,"name"],[89,69,111,38],[89,71,111,40,"typeB"],[89,76,111,45],[89,77,111,46,"name"],[89,81,111,50],[89,82,111,51],[90,4,112,4],[90,5,112,5],[90,6,112,6],[90,7,113,5,"map"],[90,10,113,8],[90,11,113,10,"x"],[90,12,113,11],[90,16,113,16,"x"],[90,17,113,17],[90,18,113,18,"name"],[90,22,113,22],[90,23,113,23],[91,2,114,0],[92,2,115,0],[93,0,116,0],[94,0,117,0],[95,0,118,0],[97,2,120,0],[97,11,120,9,"getSuggestedFieldNames"],[97,33,120,31,"getSuggestedFieldNames"],[97,34,120,32,"type"],[97,38,120,36],[97,40,120,38,"fieldName"],[97,49,120,47],[97,51,120,49],[98,4,121,2],[98,8,121,6],[98,12,121,6,"isObjectType"],[98,30,121,18],[98,31,121,18,"isObjectType"],[98,43,121,18],[98,45,121,19,"type"],[98,49,121,23],[98,50,121,24],[98,54,121,28],[98,58,121,28,"isInterfaceType"],[98,76,121,43],[98,77,121,43,"isInterfaceType"],[98,92,121,43],[98,94,121,44,"type"],[98,98,121,48],[98,99,121,49],[98,101,121,51],[99,6,122,4],[99,10,122,10,"possibleFieldNames"],[99,28,122,28],[99,31,122,31,"Object"],[99,37,122,37],[99,38,122,38,"keys"],[99,42,122,42],[99,43,122,43,"type"],[99,47,122,47],[99,48,122,48,"getFields"],[99,57,122,57],[99,58,122,58],[99,59,122,59],[99,60,122,60],[100,6,123,4],[100,13,123,11],[100,17,123,11,"suggestionList"],[100,42,123,25],[100,43,123,25,"suggestionList"],[100,57,123,25],[100,59,123,26,"fieldName"],[100,68,123,35],[100,70,123,37,"possibleFieldNames"],[100,88,123,55],[100,89,123,56],[101,4,124,2],[101,5,124,3],[101,6,124,4],[103,4,126,2],[103,11,126,9],[103,13,126,11],[104,2,127,0],[105,0,127,1],[105,3]],"functionMap":{"names":["<global>","FieldsOnCorrectTypeRule","Field","getSuggestedTypeNames","sort$argument_0","sort.map$argument_0","getSuggestedFieldNames"],"mappings":"AAA;OCkB;ICE;KD+B;CDE;AGO;UCkC;KDiB;SEC,aF;CHC;AMM;CNO"},"hasCjsExports":false},"type":"js/module"}]}