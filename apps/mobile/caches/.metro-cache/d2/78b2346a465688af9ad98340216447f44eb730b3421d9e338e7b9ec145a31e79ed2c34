{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-audio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":47,"index":113}}],"key":"GHpNh+2in6lWH3tZa8Mq2h9os0E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useVoiceMemoPlayer = useVoiceMemoPlayer;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoAudio = require(_dependencyMap[2], \"expo-audio\");\n  function useVoiceMemoPlayer() {\n    _s();\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      playingMessageId = _useState2[0],\n      setPlayingMessageId = _useState2[1];\n    var playerRef = (0, _react.useRef)(null);\n    var stopPlayer = (0, _react.useCallback)(() => {\n      var p = playerRef.current;\n      if (!p) return;\n      try {\n        p.pause();\n        p.remove();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        playerRef.current = null;\n        setPlayingMessageId(null);\n      }\n    }, []);\n    var togglePlayVoiceMemo = (0, _react.useCallback)(message => {\n      var url = String(message?.audio_url || \"\").trim();\n      if (!url) return;\n      var id = message?.id;\n      if (playingMessageId && id === playingMessageId) {\n        stopPlayer();\n        return;\n      }\n      stopPlayer();\n      try {\n        var next = (0, _expoAudio.createAudioPlayer)(url);\n        playerRef.current = next;\n        setPlayingMessageId(id);\n        next.play();\n      } catch (e) {\n        console.error(e);\n      }\n    }, [playingMessageId, stopPlayer]);\n    (0, _react.useEffect)(() => {\n      var interval = setInterval(() => {\n        var p = playerRef.current;\n        if (!p) return;\n        var finished = !p.playing && Number(p.currentTime) > 0;\n        if (finished) {\n          stopPlayer();\n        }\n      }, 250);\n      return () => {\n        clearInterval(interval);\n        stopPlayer();\n      };\n    }, [stopPlayer]);\n    return {\n      playingMessageId,\n      togglePlayVoiceMemo\n    };\n  }\n  _s(useVoiceMemoPlayer, \"WJRGCXX9affBH7r4tcopRLIa/I4=\");\n});","lineCount":76,"map":[[13,2,4,0,"exports"],[13,9,4,0],[13,10,4,0,"useVoiceMemoPlayer"],[13,28,4,0],[13,31,4,0,"useVoiceMemoPlayer"],[13,49,4,0],[14,2,68,1],[14,6,68,1,"_babelRuntimeHelpersSlicedToArray"],[14,39,68,1],[14,42,68,1,"require"],[14,49,68,1],[14,50,68,1,"_dependencyMap"],[14,64,68,1],[15,2,68,1],[15,6,68,1,"_slicedToArray"],[15,20,68,1],[15,23,68,1,"_interopDefault"],[15,38,68,1],[15,39,68,1,"_babelRuntimeHelpersSlicedToArray"],[15,72,68,1],[16,2,1,0],[16,6,1,0,"_react"],[16,12,1,0],[16,15,1,0,"require"],[16,22,1,0],[16,23,1,0,"_dependencyMap"],[16,37,1,0],[17,2,2,0],[17,6,2,0,"_expoAudio"],[17,16,2,0],[17,19,2,0,"require"],[17,26,2,0],[17,27,2,0,"_dependencyMap"],[17,41,2,0],[18,2,4,7],[18,11,4,16,"useVoiceMemoPlayer"],[18,29,4,34,"useVoiceMemoPlayer"],[18,30,4,34],[18,32,4,37],[19,4,4,37,"_s"],[19,6,4,37],[20,4,5,2],[20,8,5,2,"_useState"],[20,17,5,2],[20,20,5,50],[20,24,5,50,"useState"],[20,30,5,58],[20,31,5,58,"useState"],[20,39,5,58],[20,41,5,59],[20,45,5,63],[20,46,5,64],[21,6,5,64,"_useState2"],[21,16,5,64],[21,23,5,64,"_slicedToArray"],[21,37,5,64],[21,38,5,64,"default"],[21,45,5,64],[21,47,5,64,"_useState"],[21,56,5,64],[22,6,5,9,"playingMessageId"],[22,22,5,25],[22,25,5,25,"_useState2"],[22,35,5,25],[23,6,5,27,"setPlayingMessageId"],[23,25,5,46],[23,28,5,46,"_useState2"],[23,38,5,46],[24,4,6,2],[24,8,6,8,"playerRef"],[24,17,6,17],[24,20,6,20],[24,24,6,20,"useRef"],[24,30,6,26],[24,31,6,26,"useRef"],[24,37,6,26],[24,39,6,27],[24,43,6,31],[24,44,6,32],[25,4,8,2],[25,8,8,8,"stopPlayer"],[25,18,8,18],[25,21,8,21],[25,25,8,21,"useCallback"],[25,31,8,32],[25,32,8,32,"useCallback"],[25,43,8,32],[25,45,8,33],[25,51,8,39],[26,6,9,4],[26,10,9,10,"p"],[26,11,9,11],[26,14,9,14,"playerRef"],[26,23,9,23],[26,24,9,24,"current"],[26,31,9,31],[27,6,10,4],[27,10,10,8],[27,11,10,9,"p"],[27,12,10,10],[27,14,10,12],[28,6,11,4],[28,10,11,8],[29,8,12,6,"p"],[29,9,12,7],[29,10,12,8,"pause"],[29,15,12,13],[29,16,12,14],[29,17,12,15],[30,8,13,6,"p"],[30,9,13,7],[30,10,13,8,"remove"],[30,16,13,14],[30,17,13,15],[30,18,13,16],[31,6,14,4],[31,7,14,5],[31,8,14,6],[31,15,14,13,"e"],[31,16,14,14],[31,18,14,16],[32,8,15,6,"console"],[32,15,15,13],[32,16,15,14,"error"],[32,21,15,19],[32,22,15,20,"e"],[32,23,15,21],[32,24,15,22],[33,6,16,4],[33,7,16,5],[33,16,16,14],[34,8,17,6,"playerRef"],[34,17,17,15],[34,18,17,16,"current"],[34,25,17,23],[34,28,17,26],[34,32,17,30],[35,8,18,6,"setPlayingMessageId"],[35,27,18,25],[35,28,18,26],[35,32,18,30],[35,33,18,31],[36,6,19,4],[37,4,20,2],[37,5,20,3],[37,7,20,5],[37,9,20,7],[37,10,20,8],[38,4,22,2],[38,8,22,8,"togglePlayVoiceMemo"],[38,27,22,27],[38,30,22,30],[38,34,22,30,"useCallback"],[38,40,22,41],[38,41,22,41,"useCallback"],[38,52,22,41],[38,54,23,5,"message"],[38,61,23,12],[38,65,23,17],[39,6,24,6],[39,10,24,12,"url"],[39,13,24,15],[39,16,24,18,"String"],[39,22,24,24],[39,23,24,25,"message"],[39,30,24,32],[39,32,24,34,"audio_url"],[39,41,24,43],[39,45,24,47],[39,47,24,49],[39,48,24,50],[39,49,24,51,"trim"],[39,53,24,55],[39,54,24,56],[39,55,24,57],[40,6,25,6],[40,10,25,10],[40,11,25,11,"url"],[40,14,25,14],[40,16,25,16],[41,6,27,6],[41,10,27,12,"id"],[41,12,27,14],[41,15,27,17,"message"],[41,22,27,24],[41,24,27,26,"id"],[41,26,27,28],[42,6,28,6],[42,10,28,10,"playingMessageId"],[42,26,28,26],[42,30,28,30,"id"],[42,32,28,32],[42,37,28,37,"playingMessageId"],[42,53,28,53],[42,55,28,55],[43,8,29,8,"stopPlayer"],[43,18,29,18],[43,19,29,19],[43,20,29,20],[44,8,30,8],[45,6,31,6],[46,6,33,6,"stopPlayer"],[46,16,33,16],[46,17,33,17],[46,18,33,18],[47,6,35,6],[47,10,35,10],[48,8,36,8],[48,12,36,14,"next"],[48,16,36,18],[48,19,36,21],[48,23,36,21,"createAudioPlayer"],[48,33,36,38],[48,34,36,38,"createAudioPlayer"],[48,51,36,38],[48,53,36,39,"url"],[48,56,36,42],[48,57,36,43],[49,8,37,8,"playerRef"],[49,17,37,17],[49,18,37,18,"current"],[49,25,37,25],[49,28,37,28,"next"],[49,32,37,32],[50,8,38,8,"setPlayingMessageId"],[50,27,38,27],[50,28,38,28,"id"],[50,30,38,30],[50,31,38,31],[51,8,39,8,"next"],[51,12,39,12],[51,13,39,13,"play"],[51,17,39,17],[51,18,39,18],[51,19,39,19],[52,6,40,6],[52,7,40,7],[52,8,40,8],[52,15,40,15,"e"],[52,16,40,16],[52,18,40,18],[53,8,41,8,"console"],[53,15,41,15],[53,16,41,16,"error"],[53,21,41,21],[53,22,41,22,"e"],[53,23,41,23],[53,24,41,24],[54,6,42,6],[55,4,43,4],[55,5,43,5],[55,7,44,4],[55,8,44,5,"playingMessageId"],[55,24,44,21],[55,26,44,23,"stopPlayer"],[55,36,44,33],[55,37,45,2],[55,38,45,3],[56,4,47,2],[56,8,47,2,"useEffect"],[56,14,47,11],[56,15,47,11,"useEffect"],[56,24,47,11],[56,26,47,12],[56,32,47,18],[57,6,48,4],[57,10,48,10,"interval"],[57,18,48,18],[57,21,48,21,"setInterval"],[57,32,48,32],[57,33,48,33],[57,39,48,39],[58,8,49,6],[58,12,49,12,"p"],[58,13,49,13],[58,16,49,16,"playerRef"],[58,25,49,25],[58,26,49,26,"current"],[58,33,49,33],[59,8,50,6],[59,12,50,10],[59,13,50,11,"p"],[59,14,50,12],[59,16,50,14],[60,8,52,6],[60,12,52,12,"finished"],[60,20,52,20],[60,23,52,23],[60,24,52,24,"p"],[60,25,52,25],[60,26,52,26,"playing"],[60,33,52,33],[60,37,52,37,"Number"],[60,43,52,43],[60,44,52,44,"p"],[60,45,52,45],[60,46,52,46,"currentTime"],[60,57,52,57],[60,58,52,58],[60,61,52,61],[60,62,52,62],[61,8,53,6],[61,12,53,10,"finished"],[61,20,53,18],[61,22,53,20],[62,10,54,8,"stopPlayer"],[62,20,54,18],[62,21,54,19],[62,22,54,20],[63,8,55,6],[64,6,56,4],[64,7,56,5],[64,9,56,7],[64,12,56,10],[64,13,56,11],[65,6,58,4],[65,13,58,11],[65,19,58,17],[66,8,59,6,"clearInterval"],[66,21,59,19],[66,22,59,20,"interval"],[66,30,59,28],[66,31,59,29],[67,8,60,6,"stopPlayer"],[67,18,60,16],[67,19,60,17],[67,20,60,18],[68,6,61,4],[68,7,61,5],[69,4,62,2],[69,5,62,3],[69,7,62,5],[69,8,62,6,"stopPlayer"],[69,18,62,16],[69,19,62,17],[69,20,62,18],[70,4,64,2],[70,11,64,9],[71,6,65,4,"playingMessageId"],[71,22,65,20],[72,6,66,4,"togglePlayVoiceMemo"],[73,4,67,2],[73,5,67,3],[74,2,68,0],[75,2,68,1,"_s"],[75,4,68,1],[75,5,4,16,"useVoiceMemoPlayer"],[75,23,4,34],[76,0,4,34],[76,3]],"functionMap":{"names":["<global>","useVoiceMemoPlayer","stopPlayer","togglePlayVoiceMemo","useEffect$argument_0","setInterval$argument_0","<anonymous>"],"mappings":"AAA;OCG;iCCI;GDY;IEG;KFoB;YGI;iCCC;KDQ;WEE;KFG;GHC;CDM"},"hasCjsExports":false},"type":"js/module"}]}