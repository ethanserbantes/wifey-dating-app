{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.formatTime = formatTime;\n  exports.shouldShowStarterPreview = shouldShowStarterPreview;\n  exports.isCommittedMatch = isCommittedMatch;\n  exports.getMatchState = getMatchState;\n  exports.getMatchesData = getMatchesData;\n  function formatTime(timestamp) {\n    if (!timestamp) return \"\";\n    var date = new Date(timestamp);\n    var now = new Date();\n    var diff = now - date;\n    var hours = Math.floor(diff / (1000 * 60 * 60));\n    var days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    if (hours < 1) return \"Just now\";\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    return date.toLocaleDateString();\n  }\n  function shouldShowStarterPreview(match) {\n    var realCount = Number(match?.real_message_count);\n    var hasRealCount = Number.isFinite(realCount);\n    if (hasRealCount) {\n      if (realCount > 0) return false;\n    } else {\n      var lastMsgRaw = typeof match?.last_message === \"string\" ? match.last_message : \"\";\n      var lastMsg = lastMsgRaw.trim();\n      var isLegacyPreviewOnly = lastMsg.toLowerCase().startsWith(\"start the chat with \");\n      var hasAnyMessages = Boolean(match?.last_message_time) && !isLegacyPreviewOnly;\n      if (hasAnyMessages) return false;\n    }\n    var hasStarterSummary = typeof match?.starter_summary === \"string\" && match.starter_summary.trim().length > 0;\n    var hasStartChatLine = typeof match?.start_chat_line === \"string\" && match.start_chat_line.trim().length > 0;\n    return hasStarterSummary || hasStartChatLine;\n  }\n  function isCommittedMatch(match) {\n    var committed = Boolean(match?.my_committed);\n    var legacy = Boolean(match?.legacy_unlocked);\n    var deposit = Number(match?.my_deposit_cents || 0);\n    if (committed || legacy) return true;\n    return Number.isFinite(deposit) && deposit >= 3000;\n  }\n  function getMatchState(match) {\n    // Simple state machine used across Messages/Chat:\n    // - queued: matched but not yet committed\n    // - committed: committed (or legacy unlocked) -> eligible to appear as a chat row\n    return isCommittedMatch(match) ? \"committed\" : \"queued\";\n  }\n  function getMatchesData(matches) {\n    var list = Array.isArray(matches) ? matches : [];\n    var committedMatches = list.filter(m => isCommittedMatch(m));\n\n    // Match queue (not committed yet)\n    var queuedMatches = list.filter(m => !isCommittedMatch(m));\n    var newMatches = queuedMatches.slice(0, 12);\n    var hasCommittedAny = committedMatches.length > 0;\n    var primaryCommittedMatch = committedMatches.length > 0 ? committedMatches[0] : null;\n    var hasAnyMatches = list.length > 0;\n    var hasNewMatches = newMatches.length > 0;\n    return {\n      committedMatches,\n      queuedMatches,\n      newMatches,\n      hasCommittedAny,\n      primaryCommittedMatch,\n      hasAnyMatches,\n      hasNewMatches\n    };\n  }\n});","lineCount":74,"map":[[7,2,1,0,"exports"],[7,9,1,0],[7,10,1,0,"formatTime"],[7,20,1,0],[7,23,1,0,"formatTime"],[7,33,1,0],[8,2,15,0,"exports"],[8,9,15,0],[8,10,15,0,"shouldShowStarterPreview"],[8,34,15,0],[8,37,15,0,"shouldShowStarterPreview"],[8,61,15,0],[9,2,44,0,"exports"],[9,9,44,0],[9,10,44,0,"isCommittedMatch"],[9,26,44,0],[9,29,44,0,"isCommittedMatch"],[9,45,44,0],[10,2,52,0,"exports"],[10,9,52,0],[10,10,52,0,"getMatchState"],[10,23,52,0],[10,26,52,0,"getMatchState"],[10,39,52,0],[11,2,59,0,"exports"],[11,9,59,0],[11,10,59,0,"getMatchesData"],[11,24,59,0],[11,27,59,0,"getMatchesData"],[11,41,59,0],[12,2,1,7],[12,11,1,16,"formatTime"],[12,21,1,26,"formatTime"],[12,22,1,27,"timestamp"],[12,31,1,36],[12,33,1,38],[13,4,2,2],[13,8,2,6],[13,9,2,7,"timestamp"],[13,18,2,16],[13,20,2,18],[13,27,2,25],[13,29,2,27],[14,4,3,2],[14,8,3,8,"date"],[14,12,3,12],[14,15,3,15],[14,19,3,19,"Date"],[14,23,3,23],[14,24,3,24,"timestamp"],[14,33,3,33],[14,34,3,34],[15,4,4,2],[15,8,4,8,"now"],[15,11,4,11],[15,14,4,14],[15,18,4,18,"Date"],[15,22,4,22],[15,23,4,23],[15,24,4,24],[16,4,5,2],[16,8,5,8,"diff"],[16,12,5,12],[16,15,5,15,"now"],[16,18,5,18],[16,21,5,21,"date"],[16,25,5,25],[17,4,6,2],[17,8,6,8,"hours"],[17,13,6,13],[17,16,6,16,"Math"],[17,20,6,20],[17,21,6,21,"floor"],[17,26,6,26],[17,27,6,27,"diff"],[17,31,6,31],[17,35,6,35],[17,39,6,39],[17,42,6,42],[17,44,6,44],[17,47,6,47],[17,49,6,49],[17,50,6,50],[17,51,6,51],[18,4,7,2],[18,8,7,8,"days"],[18,12,7,12],[18,15,7,15,"Math"],[18,19,7,19],[18,20,7,20,"floor"],[18,25,7,25],[18,26,7,26,"diff"],[18,30,7,30],[18,34,7,34],[18,38,7,38],[18,41,7,41],[18,43,7,43],[18,46,7,46],[18,48,7,48],[18,51,7,51],[18,53,7,53],[18,54,7,54],[18,55,7,55],[19,4,9,2],[19,8,9,6,"hours"],[19,13,9,11],[19,16,9,14],[19,17,9,15],[19,19,9,17],[19,26,9,24],[19,36,9,34],[20,4,10,2],[20,8,10,6,"hours"],[20,13,10,11],[20,16,10,14],[20,18,10,16],[20,20,10,18],[20,27,10,25],[20,30,10,28,"hours"],[20,35,10,33],[20,42,10,40],[21,4,11,2],[21,8,11,6,"days"],[21,12,11,10],[21,15,11,13],[21,16,11,14],[21,18,11,16],[21,25,11,23],[21,28,11,26,"days"],[21,32,11,30],[21,39,11,37],[22,4,12,2],[22,11,12,9,"date"],[22,15,12,13],[22,16,12,14,"toLocaleDateString"],[22,34,12,32],[22,35,12,33],[22,36,12,34],[23,2,13,0],[24,2,15,7],[24,11,15,16,"shouldShowStarterPreview"],[24,35,15,40,"shouldShowStarterPreview"],[24,36,15,41,"match"],[24,41,15,46],[24,43,15,48],[25,4,16,2],[25,8,16,8,"realCount"],[25,17,16,17],[25,20,16,20,"Number"],[25,26,16,26],[25,27,16,27,"match"],[25,32,16,32],[25,34,16,34,"real_message_count"],[25,52,16,52],[25,53,16,53],[26,4,17,2],[26,8,17,8,"hasRealCount"],[26,20,17,20],[26,23,17,23,"Number"],[26,29,17,29],[26,30,17,30,"isFinite"],[26,38,17,38],[26,39,17,39,"realCount"],[26,48,17,48],[26,49,17,49],[27,4,18,2],[27,8,18,6,"hasRealCount"],[27,20,18,18],[27,22,18,20],[28,6,19,4],[28,10,19,8,"realCount"],[28,19,19,17],[28,22,19,20],[28,23,19,21],[28,25,19,23],[28,32,19,30],[28,37,19,35],[29,4,20,2],[29,5,20,3],[29,11,20,9],[30,6,21,4],[30,10,21,10,"lastMsgRaw"],[30,20,21,20],[30,23,22,6],[30,30,22,13,"match"],[30,35,22,18],[30,37,22,20,"last_message"],[30,49,22,32],[30,54,22,37],[30,62,22,45],[30,65,22,48,"match"],[30,70,22,53],[30,71,22,54,"last_message"],[30,83,22,66],[30,86,22,69],[30,88,22,71],[31,6,23,4],[31,10,23,10,"lastMsg"],[31,17,23,17],[31,20,23,20,"lastMsgRaw"],[31,30,23,30],[31,31,23,31,"trim"],[31,35,23,35],[31,36,23,36],[31,37,23,37],[32,6,24,4],[32,10,24,10,"isLegacyPreviewOnly"],[32,29,24,29],[32,32,24,32,"lastMsg"],[32,39,24,39],[32,40,25,7,"toLowerCase"],[32,51,25,18],[32,52,25,19],[32,53,25,20],[32,54,26,7,"startsWith"],[32,64,26,17],[32,65,26,18],[32,87,26,40],[32,88,26,41],[33,6,28,4],[33,10,28,10,"hasAnyMessages"],[33,24,28,24],[33,27,29,6,"Boolean"],[33,34,29,13],[33,35,29,14,"match"],[33,40,29,19],[33,42,29,21,"last_message_time"],[33,59,29,38],[33,60,29,39],[33,64,29,43],[33,65,29,44,"isLegacyPreviewOnly"],[33,84,29,63],[34,6,30,4],[34,10,30,8,"hasAnyMessages"],[34,24,30,22],[34,26,30,24],[34,33,30,31],[34,38,30,36],[35,4,31,2],[36,4,33,2],[36,8,33,8,"hasStarterSummary"],[36,25,33,25],[36,28,34,4],[36,35,34,11,"match"],[36,40,34,16],[36,42,34,18,"starter_summary"],[36,57,34,33],[36,62,34,38],[36,70,34,46],[36,74,35,4,"match"],[36,79,35,9],[36,80,35,10,"starter_summary"],[36,95,35,25],[36,96,35,26,"trim"],[36,100,35,30],[36,101,35,31],[36,102,35,32],[36,103,35,33,"length"],[36,109,35,39],[36,112,35,42],[36,113,35,43],[37,4,37,2],[37,8,37,8,"hasStartChatLine"],[37,24,37,24],[37,27,38,4],[37,34,38,11,"match"],[37,39,38,16],[37,41,38,18,"start_chat_line"],[37,56,38,33],[37,61,38,38],[37,69,38,46],[37,73,39,4,"match"],[37,78,39,9],[37,79,39,10,"start_chat_line"],[37,94,39,25],[37,95,39,26,"trim"],[37,99,39,30],[37,100,39,31],[37,101,39,32],[37,102,39,33,"length"],[37,108,39,39],[37,111,39,42],[37,112,39,43],[38,4,41,2],[38,11,41,9,"hasStarterSummary"],[38,28,41,26],[38,32,41,30,"hasStartChatLine"],[38,48,41,46],[39,2,42,0],[40,2,44,7],[40,11,44,16,"isCommittedMatch"],[40,27,44,32,"isCommittedMatch"],[40,28,44,33,"match"],[40,33,44,38],[40,35,44,40],[41,4,45,2],[41,8,45,8,"committed"],[41,17,45,17],[41,20,45,20,"Boolean"],[41,27,45,27],[41,28,45,28,"match"],[41,33,45,33],[41,35,45,35,"my_committed"],[41,47,45,47],[41,48,45,48],[42,4,46,2],[42,8,46,8,"legacy"],[42,14,46,14],[42,17,46,17,"Boolean"],[42,24,46,24],[42,25,46,25,"match"],[42,30,46,30],[42,32,46,32,"legacy_unlocked"],[42,47,46,47],[42,48,46,48],[43,4,47,2],[43,8,47,8,"deposit"],[43,15,47,15],[43,18,47,18,"Number"],[43,24,47,24],[43,25,47,25,"match"],[43,30,47,30],[43,32,47,32,"my_deposit_cents"],[43,48,47,48],[43,52,47,52],[43,53,47,53],[43,54,47,54],[44,4,48,2],[44,8,48,6,"committed"],[44,17,48,15],[44,21,48,19,"legacy"],[44,27,48,25],[44,29,48,27],[44,36,48,34],[44,40,48,38],[45,4,49,2],[45,11,49,9,"Number"],[45,17,49,15],[45,18,49,16,"isFinite"],[45,26,49,24],[45,27,49,25,"deposit"],[45,34,49,32],[45,35,49,33],[45,39,49,37,"deposit"],[45,46,49,44],[45,50,49,48],[45,54,49,52],[46,2,50,0],[47,2,52,7],[47,11,52,16,"getMatchState"],[47,24,52,29,"getMatchState"],[47,25,52,30,"match"],[47,30,52,35],[47,32,52,37],[48,4,53,2],[49,4,54,2],[50,4,55,2],[51,4,56,2],[51,11,56,9,"isCommittedMatch"],[51,27,56,25],[51,28,56,26,"match"],[51,33,56,31],[51,34,56,32],[51,37,56,35],[51,48,56,46],[51,51,56,49],[51,59,56,57],[52,2,57,0],[53,2,59,7],[53,11,59,16,"getMatchesData"],[53,25,59,30,"getMatchesData"],[53,26,59,31,"matches"],[53,33,59,38],[53,35,59,40],[54,4,60,2],[54,8,60,8,"list"],[54,12,60,12],[54,15,60,15,"Array"],[54,20,60,20],[54,21,60,21,"isArray"],[54,28,60,28],[54,29,60,29,"matches"],[54,36,60,36],[54,37,60,37],[54,40,60,40,"matches"],[54,47,60,47],[54,50,60,50],[54,52,60,52],[55,4,62,2],[55,8,62,8,"committedMatches"],[55,24,62,24],[55,27,62,27,"list"],[55,31,62,31],[55,32,62,32,"filter"],[55,38,62,38],[55,39,62,40,"m"],[55,40,62,41],[55,44,62,46,"isCommittedMatch"],[55,60,62,62],[55,61,62,63,"m"],[55,62,62,64],[55,63,62,65],[55,64,62,66],[57,4,64,2],[58,4,65,2],[58,8,65,8,"queuedMatches"],[58,21,65,21],[58,24,65,24,"list"],[58,28,65,28],[58,29,65,29,"filter"],[58,35,65,35],[58,36,65,37,"m"],[58,37,65,38],[58,41,65,43],[58,42,65,44,"isCommittedMatch"],[58,58,65,60],[58,59,65,61,"m"],[58,60,65,62],[58,61,65,63],[58,62,65,64],[59,4,67,2],[59,8,67,8,"newMatches"],[59,18,67,18],[59,21,67,21,"queuedMatches"],[59,34,67,34],[59,35,67,35,"slice"],[59,40,67,40],[59,41,67,41],[59,42,67,42],[59,44,67,44],[59,46,67,46],[59,47,67,47],[60,4,69,2],[60,8,69,8,"hasCommittedAny"],[60,23,69,23],[60,26,69,26,"committedMatches"],[60,42,69,42],[60,43,69,43,"length"],[60,49,69,49],[60,52,69,52],[60,53,69,53],[61,4,70,2],[61,8,70,8,"primaryCommittedMatch"],[61,29,70,29],[61,32,71,4,"committedMatches"],[61,48,71,20],[61,49,71,21,"length"],[61,55,71,27],[61,58,71,30],[61,59,71,31],[61,62,71,34,"committedMatches"],[61,78,71,50],[61,79,71,51],[61,80,71,52],[61,81,71,53],[61,84,71,56],[61,88,71,60],[62,4,72,2],[62,8,72,8,"hasAnyMatches"],[62,21,72,21],[62,24,72,24,"list"],[62,28,72,28],[62,29,72,29,"length"],[62,35,72,35],[62,38,72,38],[62,39,72,39],[63,4,73,2],[63,8,73,8,"hasNewMatches"],[63,21,73,21],[63,24,73,24,"newMatches"],[63,34,73,34],[63,35,73,35,"length"],[63,41,73,41],[63,44,73,44],[63,45,73,45],[64,4,75,2],[64,11,75,9],[65,6,76,4,"committedMatches"],[65,22,76,20],[66,6,77,4,"queuedMatches"],[66,19,77,17],[67,6,78,4,"newMatches"],[67,16,78,14],[68,6,79,4,"hasCommittedAny"],[68,21,79,19],[69,6,80,4,"primaryCommittedMatch"],[69,27,80,25],[70,6,81,4,"hasAnyMatches"],[70,19,81,17],[71,6,82,4,"hasNewMatches"],[72,4,83,2],[72,5,83,3],[73,2,84,0],[74,0,84,1],[74,3]],"functionMap":{"names":["<global>","formatTime","shouldShowStarterPreview","isCommittedMatch","getMatchState","getMatchesData","list.filter$argument_0"],"mappings":"AAA,OC;CDY;OEE;CF2B;OGE;CHM;OIE;CJK;OKE;uCCG,0BD;oCCG,2BD;CLmB"},"hasCjsExports":false},"type":"js/module"}]}