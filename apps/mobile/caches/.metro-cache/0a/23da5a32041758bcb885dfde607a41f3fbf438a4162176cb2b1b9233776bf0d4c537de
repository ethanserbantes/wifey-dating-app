{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useReportUser = useReportUser;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  function useReportUser(matchInfo, user) {\n    _s();\n    const [reportOpen, setReportOpen] = (0, _react.useState)(false);\n    const [reportType, setReportType] = (0, _react.useState)(\"HARASSMENT\");\n    const [reportDesc, setReportDesc] = (0, _react.useState)(\"\");\n    const [reportSending, setReportSending] = (0, _react.useState)(false);\n    const submitReport = (0, _react.useCallback)(async () => {\n      if (!user?.id) return;\n      const reportedUserId = matchInfo?.otherUser?.id;\n      if (!reportedUserId) {\n        Alert.default.alert(\"Report failed\", \"Could not find the other user.\");\n        return;\n      }\n      const description = reportDesc.trim();\n      if (!description) {\n        Alert.default.alert(\"Add details\", \"Please add a short description.\");\n        return;\n      }\n      try {\n        setReportSending(true);\n        const resp = await fetch(\"/api/reports\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            reporterUserId: user.id,\n            reportedUserId,\n            reportType,\n            description\n          })\n        });\n        if (!resp.ok) {\n          const text = await resp.text();\n          throw new Error(`When posting /api/reports, the response was [${resp.status}] ${resp.statusText}. ${text}`);\n        }\n        setReportOpen(false);\n        setReportDesc(\"\");\n        Alert.default.alert(\"Report sent\", \"Thanks â€” our team will review it. You can also block this user from the menu.\");\n      } catch (e) {\n        console.error(\"Could not report user\", e);\n        Alert.default.alert(\"Report failed\", \"Could not send your report right now.\");\n      } finally {\n        setReportSending(false);\n      }\n    }, [matchInfo?.otherUser?.id, reportDesc, reportType, user?.id]);\n    return {\n      reportOpen,\n      setReportOpen,\n      reportType,\n      setReportType,\n      reportDesc,\n      setReportDesc,\n      reportSending,\n      submitReport\n    };\n  }\n  _s(useReportUser, \"29jnSp10uPJ/xYBERwBg2FmiA60=\");\n});","lineCount":75,"map":[[13,2,4,0,"exports"],[13,9,4,0],[13,10,4,0,"useReportUser"],[13,23,4,0],[13,26,4,0,"useReportUser"],[13,39,4,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,1,46],[15,6,1,46,"_reactNativeWebDistExportsAlert"],[15,37,1,46],[15,40,1,46,"require"],[15,47,1,46],[15,48,1,46,"_dependencyMap"],[15,62,1,46],[16,2,1,46],[16,6,1,46,"Alert"],[16,11,1,46],[16,14,1,46,"_interopDefault"],[16,29,1,46],[16,30,1,46,"_reactNativeWebDistExportsAlert"],[16,61,1,46],[17,2,4,7],[17,11,4,16,"useReportUser"],[17,24,4,29,"useReportUser"],[17,25,4,30,"matchInfo"],[17,34,4,39],[17,36,4,41,"user"],[17,40,4,45],[17,42,4,47],[18,4,4,47,"_s"],[18,6,4,47],[19,4,5,2],[19,10,5,8],[19,11,5,9,"reportOpen"],[19,21,5,19],[19,23,5,21,"setReportOpen"],[19,36,5,34],[19,37,5,35],[19,40,5,38],[19,44,5,38,"useState"],[19,50,5,46],[19,51,5,46,"useState"],[19,59,5,46],[19,61,5,47],[19,66,5,52],[19,67,5,53],[20,4,6,2],[20,10,6,8],[20,11,6,9,"reportType"],[20,21,6,19],[20,23,6,21,"setReportType"],[20,36,6,34],[20,37,6,35],[20,40,6,38],[20,44,6,38,"useState"],[20,50,6,46],[20,51,6,46,"useState"],[20,59,6,46],[20,61,6,47],[20,73,6,59],[20,74,6,60],[21,4,7,2],[21,10,7,8],[21,11,7,9,"reportDesc"],[21,21,7,19],[21,23,7,21,"setReportDesc"],[21,36,7,34],[21,37,7,35],[21,40,7,38],[21,44,7,38,"useState"],[21,50,7,46],[21,51,7,46,"useState"],[21,59,7,46],[21,61,7,47],[21,63,7,49],[21,64,7,50],[22,4,8,2],[22,10,8,8],[22,11,8,9,"reportSending"],[22,24,8,22],[22,26,8,24,"setReportSending"],[22,42,8,40],[22,43,8,41],[22,46,8,44],[22,50,8,44,"useState"],[22,56,8,52],[22,57,8,52,"useState"],[22,65,8,52],[22,67,8,53],[22,72,8,58],[22,73,8,59],[23,4,10,2],[23,10,10,8,"submitReport"],[23,22,10,20],[23,25,10,23],[23,29,10,23,"useCallback"],[23,35,10,34],[23,36,10,34,"useCallback"],[23,47,10,34],[23,49,10,35],[23,61,10,47],[24,6,11,4],[24,10,11,8],[24,11,11,9,"user"],[24,15,11,13],[24,17,11,15,"id"],[24,19,11,17],[24,21,11,19],[25,6,12,4],[25,12,12,10,"reportedUserId"],[25,26,12,24],[25,29,12,27,"matchInfo"],[25,38,12,36],[25,40,12,38,"otherUser"],[25,49,12,47],[25,51,12,49,"id"],[25,53,12,51],[26,6,13,4],[26,10,13,8],[26,11,13,9,"reportedUserId"],[26,25,13,23],[26,27,13,25],[27,8,14,6,"Alert"],[27,13,14,11],[27,14,14,11,"default"],[27,21,14,11],[27,22,14,12,"alert"],[27,27,14,17],[27,28,14,18],[27,43,14,33],[27,45,14,35],[27,77,14,67],[27,78,14,68],[28,8,15,6],[29,6,16,4],[30,6,18,4],[30,12,18,10,"description"],[30,23,18,21],[30,26,18,24,"reportDesc"],[30,36,18,34],[30,37,18,35,"trim"],[30,41,18,39],[30,42,18,40],[30,43,18,41],[31,6,19,4],[31,10,19,8],[31,11,19,9,"description"],[31,22,19,20],[31,24,19,22],[32,8,20,6,"Alert"],[32,13,20,11],[32,14,20,11,"default"],[32,21,20,11],[32,22,20,12,"alert"],[32,27,20,17],[32,28,20,18],[32,41,20,31],[32,43,20,33],[32,76,20,66],[32,77,20,67],[33,8,21,6],[34,6,22,4],[35,6,24,4],[35,10,24,8],[36,8,25,6,"setReportSending"],[36,24,25,22],[36,25,25,23],[36,29,25,27],[36,30,25,28],[37,8,26,6],[37,14,26,12,"resp"],[37,18,26,16],[37,21,26,19],[37,27,26,25,"fetch"],[37,32,26,30],[37,33,26,31],[37,47,26,45],[37,49,26,47],[38,10,27,8,"method"],[38,16,27,14],[38,18,27,16],[38,24,27,22],[39,10,28,8,"headers"],[39,17,28,15],[39,19,28,17],[40,12,28,19],[40,26,28,33],[40,28,28,35],[41,10,28,54],[41,11,28,55],[42,10,29,8,"body"],[42,14,29,12],[42,16,29,14,"JSON"],[42,20,29,18],[42,21,29,19,"stringify"],[42,30,29,28],[42,31,29,29],[43,12,30,10,"reporterUserId"],[43,26,30,24],[43,28,30,26,"user"],[43,32,30,30],[43,33,30,31,"id"],[43,35,30,33],[44,12,31,10,"reportedUserId"],[44,26,31,24],[45,12,32,10,"reportType"],[45,22,32,20],[46,12,33,10,"description"],[47,10,34,8],[47,11,34,9],[48,8,35,6],[48,9,35,7],[48,10,35,8],[49,8,37,6],[49,12,37,10],[49,13,37,11,"resp"],[49,17,37,15],[49,18,37,16,"ok"],[49,20,37,18],[49,22,37,20],[50,10,38,8],[50,16,38,14,"text"],[50,20,38,18],[50,23,38,21],[50,29,38,27,"resp"],[50,33,38,31],[50,34,38,32,"text"],[50,38,38,36],[50,39,38,37],[50,40,38,38],[51,10,39,8],[51,16,39,14],[51,20,39,18,"Error"],[51,25,39,23],[51,26,40,10],[51,74,40,58,"resp"],[51,78,40,62],[51,79,40,63,"status"],[51,85,40,69],[51,90,40,74,"resp"],[51,94,40,78],[51,95,40,79,"statusText"],[51,105,40,89],[51,110,40,94,"text"],[51,114,40,98],[51,116,41,8],[51,117,41,9],[52,8,42,6],[53,8,44,6,"setReportOpen"],[53,21,44,19],[53,22,44,20],[53,27,44,25],[53,28,44,26],[54,8,45,6,"setReportDesc"],[54,21,45,19],[54,22,45,20],[54,24,45,22],[54,25,45,23],[55,8,46,6,"Alert"],[55,13,46,11],[55,14,46,11,"default"],[55,21,46,11],[55,22,46,12,"alert"],[55,27,46,17],[55,28,47,8],[55,41,47,21],[55,43,48,8],[55,122,49,6],[55,123,49,7],[56,6,50,4],[56,7,50,5],[56,8,50,6],[56,15,50,13,"e"],[56,16,50,14],[56,18,50,16],[57,8,51,6,"console"],[57,15,51,13],[57,16,51,14,"error"],[57,21,51,19],[57,22,51,20],[57,45,51,43],[57,47,51,45,"e"],[57,48,51,46],[57,49,51,47],[58,8,52,6,"Alert"],[58,13,52,11],[58,14,52,11,"default"],[58,21,52,11],[58,22,52,12,"alert"],[58,27,52,17],[58,28,52,18],[58,43,52,33],[58,45,52,35],[58,84,52,74],[58,85,52,75],[59,6,53,4],[59,7,53,5],[59,16,53,14],[60,8,54,6,"setReportSending"],[60,24,54,22],[60,25,54,23],[60,30,54,28],[60,31,54,29],[61,6,55,4],[62,4,56,2],[62,5,56,3],[62,7,56,5],[62,8,56,6,"matchInfo"],[62,17,56,15],[62,19,56,17,"otherUser"],[62,28,56,26],[62,30,56,28,"id"],[62,32,56,30],[62,34,56,32,"reportDesc"],[62,44,56,42],[62,46,56,44,"reportType"],[62,56,56,54],[62,58,56,56,"user"],[62,62,56,60],[62,64,56,62,"id"],[62,66,56,64],[62,67,56,65],[62,68,56,66],[63,4,58,2],[63,11,58,9],[64,6,59,4,"reportOpen"],[64,16,59,14],[65,6,60,4,"setReportOpen"],[65,19,60,17],[66,6,61,4,"reportType"],[66,16,61,14],[67,6,62,4,"setReportType"],[67,19,62,17],[68,6,63,4,"reportDesc"],[68,16,63,14],[69,6,64,4,"setReportDesc"],[69,19,64,17],[70,6,65,4,"reportSending"],[70,19,65,17],[71,6,66,4,"submitReport"],[72,4,67,2],[72,5,67,3],[73,2,68,0],[74,2,68,1,"_s"],[74,4,68,1],[74,5,4,16,"useReportUser"],[74,18,4,29],[75,0,4,29],[75,3]],"functionMap":{"names":["<global>","useReportUser","submitReport"],"mappings":"AAA;OCG;mCCM;GD8C;CDY"},"hasCjsExports":false},"type":"js/module"}]}