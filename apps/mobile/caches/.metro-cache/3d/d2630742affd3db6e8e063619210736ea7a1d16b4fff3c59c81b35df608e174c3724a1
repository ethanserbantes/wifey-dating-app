{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":69,"index":135}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":136},"end":{"line":3,"column":55,"index":191}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useConversation = useConversation;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  function useConversation(matchId) {\n    const queryClient = (0, _tanstackReactQuery.useQueryClient)();\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [messages, setMessages] = (0, _react.useState)([]);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [matchInfo, setMatchInfo] = (0, _react.useState)(null);\n    const [error, setError] = (0, _react.useState)(null);\n\n    // Prevent \"Too Many Requests\" bursts when multiple parts of the chat\n    // screen trigger a refresh at the same time (tab switches, mutations, etc).\n    const messagesAbortRef = (0, _react.useRef)(null);\n    const messagesInFlightRef = (0, _react.useRef)(false);\n    const lastMessagesFetchAtRef = (0, _react.useRef)(0);\n    const rateLimitedUntilRef = (0, _react.useRef)(0);\n    const markMatchesSeen = (0, _react.useCallback)(async userId => {\n      try {\n        const resp = await fetch(\"/api/matches/mark-seen\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            userId\n          })\n        });\n        if (resp.ok) {\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesSummary\", userId]\n          });\n          // NEW: keep the Messages tab dot in sync immediately (donâ€™t wait for polling)\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesForBadge\", userId]\n          });\n        }\n      } catch (e) {\n        console.error(\"Could not mark matches seen\", e);\n      }\n    }, [queryClient]);\n    const loadMatchInfo = async userId => {\n      if (!matchId) return;\n      try {\n        const response = await fetch(`/api/matches/${matchId}?userId=${userId}`);\n        if (!response.ok) {\n          if (response.status === 404) {\n            setMatchInfo(null);\n            setError(prev => prev || \"This match is no longer available.\");\n            return;\n          }\n\n          // When the backend is sleeping / proxy can't reach it, avoid scary gateway text.\n          if (response.status === 502 || response.status === 503 || response.status === 504) {\n            setMatchInfo(null);\n            setError(prev => prev || \"Server is starting up. Please try again in a moment.\");\n            return;\n          }\n          const text = await response.text().catch(() => \"\");\n          throw new Error(`When fetching /api/matches/${matchId}, the response was [${response.status}] ${response.statusText} ${text}`);\n        }\n        const data = await response.json();\n        setMatchInfo(data?.match || null);\n      } catch (err) {\n        console.error(\"Error loading match info:\", err);\n        setMatchInfo(null);\n\n        // Only set the UI error if one isn't already set (messages might set it first).\n        setError(prev => prev || (err?.message ? String(err.message) : \"Could not load match info.\"));\n      }\n    };\n    const loadMessages = (0, _react.useCallback)(async userId => {\n      if (!matchId) return;\n      const now = Date.now();\n      if (now < rateLimitedUntilRef.current) {\n        return;\n      }\n\n      // throttle: avoid accidental double-fetch on mount / tab switch\n      if (now - lastMessagesFetchAtRef.current < 750) {\n        return;\n      }\n\n      // Abort any in-flight request; we only care about the latest.\n      try {\n        if (messagesAbortRef.current) {\n          messagesAbortRef.current.abort();\n        }\n      } catch {\n        // ignore\n      }\n      const controller = new AbortController();\n      messagesAbortRef.current = controller;\n      lastMessagesFetchAtRef.current = now;\n\n      // prevent re-entrancy\n      if (messagesInFlightRef.current) {\n        return;\n      }\n      messagesInFlightRef.current = true;\n      try {\n        const response = await fetch(`/api/messages/${matchId}?userId=${userId}`, {\n          signal: controller.signal\n        });\n        if (!response.ok) {\n          if (response.status === 429) {\n            // Soft-fail: keep the last good messages on screen and back off.\n            rateLimitedUntilRef.current = Date.now() + 1500;\n            return;\n          }\n          if (response.status === 404) {\n            setMessages([]);\n            setError(\"This chat is no longer available.\");\n            return;\n          }\n          if (response.status === 410) {\n            setMessages([]);\n            setError(\"This match is no longer available.\");\n            return;\n          }\n\n          // When the backend is sleeping / proxy can't reach it, avoid scary gateway text.\n          if (response.status === 502 || response.status === 503 || response.status === 504) {\n            setMessages([]);\n            setError(\"Server is starting up. Please try again in a moment.\");\n            return;\n          }\n          const text = await response.text().catch(() => \"\");\n          throw new Error(`When fetching /api/messages/${matchId}, the response was [${response.status}] ${response.statusText} ${text}`);\n        }\n        const data = await response.json();\n        const nextMessages = Array.isArray(data?.messages) ? data.messages : [];\n        setMessages(nextMessages);\n\n        // Existing: keep any cached match summaries fresh\n        queryClient.invalidateQueries({\n          queryKey: [\"matchesSummary\", userId]\n        });\n\n        // /api/messages marks the one-time \"SYSTEM_HINT\" as read.\n        queryClient.invalidateQueries({\n          queryKey: [\"matchesForBadge\", userId]\n        });\n      } catch (err) {\n        if (err?.name === \"AbortError\") {\n          return;\n        }\n        console.error(\"Error loading messages:\", err);\n        setError(err?.message ? String(err.message) : \"Could not load messages for this match.\");\n      } finally {\n        messagesInFlightRef.current = false;\n      }\n    }, [matchId, queryClient]);\n    const loadUserAndMessages = async () => {\n      if (!matchId) {\n        setLoading(true);\n        return;\n      }\n      try {\n        setError(null);\n        const userData = await AsyncStorage.default.getItem(\"user\");\n        if (!userData) {\n          setUser(null);\n          setError(\"You need to log in again.\");\n          return;\n        }\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n        await markMatchesSeen(parsedUser.id);\n        await Promise.all([loadMatchInfo(parsedUser.id), loadMessages(parsedUser.id)]);\n      } catch (err) {\n        console.error(\"Error loading conversation:\", err);\n        setError(err?.message ? String(err.message) : \"Could not load this chat.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    (0, _react.useEffect)(() => {\n      // IMPORTANT: matchId can arrive slightly after first render in expo-router.\n      // If we only run once, the thread will never load.\n      loadUserAndMessages();\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [matchId]);\n    const reloadMessages = (0, _react.useCallback)(async () => {\n      const uid = user?.id;\n      if (!uid) return;\n      if (!matchId) return;\n      await loadMessages(uid);\n    }, [loadMessages, matchId, user?.id]);\n    return {\n      loading,\n      error,\n      messages,\n      setMessages,\n      user,\n      matchInfo,\n      reloadMessages\n    };\n  }\n});","lineCount":213,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useConversation"],[12,25,5,0],[12,28,5,0,"useConversation"],[12,43,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[14,42,2,0],[14,45,2,0,"require"],[14,52,2,0],[14,53,2,0,"_dependencyMap"],[14,67,2,0],[15,2,2,0],[15,6,2,0,"AsyncStorage"],[15,18,2,0],[15,21,2,0,"_interopDefault"],[15,36,2,0],[15,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[15,73,2,0],[16,2,3,0],[16,6,3,0,"_tanstackReactQuery"],[16,25,3,0],[16,28,3,0,"require"],[16,35,3,0],[16,36,3,0,"_dependencyMap"],[16,50,3,0],[17,2,5,7],[17,11,5,16,"useConversation"],[17,26,5,31,"useConversation"],[17,27,5,32,"matchId"],[17,34,5,39],[17,36,5,41],[18,4,6,2],[18,10,6,8,"queryClient"],[18,21,6,19],[18,24,6,22],[18,28,6,22,"useQueryClient"],[18,47,6,36],[18,48,6,36,"useQueryClient"],[18,62,6,36],[18,64,6,37],[18,65,6,38],[19,4,7,2],[19,10,7,8],[19,11,7,9,"loading"],[19,18,7,16],[19,20,7,18,"setLoading"],[19,30,7,28],[19,31,7,29],[19,34,7,32],[19,38,7,32,"useState"],[19,44,7,40],[19,45,7,40,"useState"],[19,53,7,40],[19,55,7,41],[19,59,7,45],[19,60,7,46],[20,4,8,2],[20,10,8,8],[20,11,8,9,"messages"],[20,19,8,17],[20,21,8,19,"setMessages"],[20,32,8,30],[20,33,8,31],[20,36,8,34],[20,40,8,34,"useState"],[20,46,8,42],[20,47,8,42,"useState"],[20,55,8,42],[20,57,8,43],[20,59,8,45],[20,60,8,46],[21,4,9,2],[21,10,9,8],[21,11,9,9,"user"],[21,15,9,13],[21,17,9,15,"setUser"],[21,24,9,22],[21,25,9,23],[21,28,9,26],[21,32,9,26,"useState"],[21,38,9,34],[21,39,9,34,"useState"],[21,47,9,34],[21,49,9,35],[21,53,9,39],[21,54,9,40],[22,4,10,2],[22,10,10,8],[22,11,10,9,"matchInfo"],[22,20,10,18],[22,22,10,20,"setMatchInfo"],[22,34,10,32],[22,35,10,33],[22,38,10,36],[22,42,10,36,"useState"],[22,48,10,44],[22,49,10,44,"useState"],[22,57,10,44],[22,59,10,45],[22,63,10,49],[22,64,10,50],[23,4,11,2],[23,10,11,8],[23,11,11,9,"error"],[23,16,11,14],[23,18,11,16,"setError"],[23,26,11,24],[23,27,11,25],[23,30,11,28],[23,34,11,28,"useState"],[23,40,11,36],[23,41,11,36,"useState"],[23,49,11,36],[23,51,11,37],[23,55,11,41],[23,56,11,42],[25,4,13,2],[26,4,14,2],[27,4,15,2],[27,10,15,8,"messagesAbortRef"],[27,26,15,24],[27,29,15,27],[27,33,15,27,"useRef"],[27,39,15,33],[27,40,15,33,"useRef"],[27,46,15,33],[27,48,15,34],[27,52,15,38],[27,53,15,39],[28,4,16,2],[28,10,16,8,"messagesInFlightRef"],[28,29,16,27],[28,32,16,30],[28,36,16,30,"useRef"],[28,42,16,36],[28,43,16,36,"useRef"],[28,49,16,36],[28,51,16,37],[28,56,16,42],[28,57,16,43],[29,4,17,2],[29,10,17,8,"lastMessagesFetchAtRef"],[29,32,17,30],[29,35,17,33],[29,39,17,33,"useRef"],[29,45,17,39],[29,46,17,39,"useRef"],[29,52,17,39],[29,54,17,40],[29,55,17,41],[29,56,17,42],[30,4,18,2],[30,10,18,8,"rateLimitedUntilRef"],[30,29,18,27],[30,32,18,30],[30,36,18,30,"useRef"],[30,42,18,36],[30,43,18,36,"useRef"],[30,49,18,36],[30,51,18,37],[30,52,18,38],[30,53,18,39],[31,4,20,2],[31,10,20,8,"markMatchesSeen"],[31,25,20,23],[31,28,20,26],[31,32,20,26,"useCallback"],[31,38,20,37],[31,39,20,37,"useCallback"],[31,50,20,37],[31,52,21,4],[31,58,21,11,"userId"],[31,64,21,17],[31,68,21,22],[32,6,22,6],[32,10,22,10],[33,8,23,8],[33,14,23,14,"resp"],[33,18,23,18],[33,21,23,21],[33,27,23,27,"fetch"],[33,32,23,32],[33,33,23,33],[33,57,23,57],[33,59,23,59],[34,10,24,10,"method"],[34,16,24,16],[34,18,24,18],[34,24,24,24],[35,10,25,10,"headers"],[35,17,25,17],[35,19,25,19],[36,12,25,21],[36,26,25,35],[36,28,25,37],[37,10,25,56],[37,11,25,57],[38,10,26,10,"body"],[38,14,26,14],[38,16,26,16,"JSON"],[38,20,26,20],[38,21,26,21,"stringify"],[38,30,26,30],[38,31,26,31],[39,12,26,33,"userId"],[40,10,26,40],[40,11,26,41],[41,8,27,8],[41,9,27,9],[41,10,27,10],[42,8,28,8],[42,12,28,12,"resp"],[42,16,28,16],[42,17,28,17,"ok"],[42,19,28,19],[42,21,28,21],[43,10,29,10,"queryClient"],[43,21,29,21],[43,22,29,22,"invalidateQueries"],[43,39,29,39],[43,40,29,40],[44,12,30,12,"queryKey"],[44,20,30,20],[44,22,30,22],[44,23,30,23],[44,39,30,39],[44,41,30,41,"userId"],[44,47,30,47],[45,10,31,10],[45,11,31,11],[45,12,31,12],[46,10,32,10],[47,10,33,10,"queryClient"],[47,21,33,21],[47,22,33,22,"invalidateQueries"],[47,39,33,39],[47,40,33,40],[48,12,34,12,"queryKey"],[48,20,34,20],[48,22,34,22],[48,23,34,23],[48,40,34,40],[48,42,34,42,"userId"],[48,48,34,48],[49,10,35,10],[49,11,35,11],[49,12,35,12],[50,8,36,8],[51,6,37,6],[51,7,37,7],[51,8,37,8],[51,15,37,15,"e"],[51,16,37,16],[51,18,37,18],[52,8,38,8,"console"],[52,15,38,15],[52,16,38,16,"error"],[52,21,38,21],[52,22,38,22],[52,51,38,51],[52,53,38,53,"e"],[52,54,38,54],[52,55,38,55],[53,6,39,6],[54,4,40,4],[54,5,40,5],[54,7,41,4],[54,8,41,5,"queryClient"],[54,19,41,16],[54,20,42,2],[54,21,42,3],[55,4,44,2],[55,10,44,8,"loadMatchInfo"],[55,23,44,21],[55,26,44,24],[55,32,44,31,"userId"],[55,38,44,37],[55,42,44,42],[56,6,45,4],[56,10,45,8],[56,11,45,9,"matchId"],[56,18,45,16],[56,20,45,18],[57,6,46,4],[57,10,46,8],[58,8,47,6],[58,14,47,12,"response"],[58,22,47,20],[58,25,47,23],[58,31,47,29,"fetch"],[58,36,47,34],[58,37,47,35],[58,53,47,51,"matchId"],[58,60,47,58],[58,71,47,69,"userId"],[58,77,47,75],[58,79,47,77],[58,80,47,78],[59,8,48,6],[59,12,48,10],[59,13,48,11,"response"],[59,21,48,19],[59,22,48,20,"ok"],[59,24,48,22],[59,26,48,24],[60,10,49,8],[60,14,49,12,"response"],[60,22,49,20],[60,23,49,21,"status"],[60,29,49,27],[60,34,49,32],[60,37,49,35],[60,39,49,37],[61,12,50,10,"setMatchInfo"],[61,24,50,22],[61,25,50,23],[61,29,50,27],[61,30,50,28],[62,12,51,10,"setError"],[62,20,51,18],[62,21,51,20,"prev"],[62,25,51,24],[62,29,51,29,"prev"],[62,33,51,33],[62,37,51,37],[62,73,51,73],[62,74,51,74],[63,12,52,10],[64,10,53,8],[66,10,55,8],[67,10,56,8],[67,14,57,10,"response"],[67,22,57,18],[67,23,57,19,"status"],[67,29,57,25],[67,34,57,30],[67,37,57,33],[67,41,58,10,"response"],[67,49,58,18],[67,50,58,19,"status"],[67,56,58,25],[67,61,58,30],[67,64,58,33],[67,68,59,10,"response"],[67,76,59,18],[67,77,59,19,"status"],[67,83,59,25],[67,88,59,30],[67,91,59,33],[67,93,60,10],[68,12,61,10,"setMatchInfo"],[68,24,61,22],[68,25,61,23],[68,29,61,27],[68,30,61,28],[69,12,62,10,"setError"],[69,20,62,18],[69,21,63,13,"prev"],[69,25,63,17],[69,29,64,14,"prev"],[69,33,64,18],[69,37,64,22],[69,91,65,10],[69,92,65,11],[70,12,66,10],[71,10,67,8],[72,10,69,8],[72,16,69,14,"text"],[72,20,69,18],[72,23,69,21],[72,29,69,27,"response"],[72,37,69,35],[72,38,69,36,"text"],[72,42,69,40],[72,43,69,41],[72,44,69,42],[72,45,69,43,"catch"],[72,50,69,48],[72,51,69,49],[72,57,69,55],[72,59,69,57],[72,60,69,58],[73,10,70,8],[73,16,70,14],[73,20,70,18,"Error"],[73,25,70,23],[73,26,71,10],[73,56,71,40,"matchId"],[73,63,71,47],[73,86,71,70,"response"],[73,94,71,78],[73,95,71,79,"status"],[73,101,71,85],[73,106,71,90,"response"],[73,114,71,98],[73,115,71,99,"statusText"],[73,125,71,109],[73,129,71,113,"text"],[73,133,71,117],[73,135,72,8],[73,136,72,9],[74,8,73,6],[75,8,74,6],[75,14,74,12,"data"],[75,18,74,16],[75,21,74,19],[75,27,74,25,"response"],[75,35,74,33],[75,36,74,34,"json"],[75,40,74,38],[75,41,74,39],[75,42,74,40],[76,8,75,6,"setMatchInfo"],[76,20,75,18],[76,21,75,19,"data"],[76,25,75,23],[76,27,75,25,"match"],[76,32,75,30],[76,36,75,34],[76,40,75,38],[76,41,75,39],[77,6,76,4],[77,7,76,5],[77,8,76,6],[77,15,76,13,"err"],[77,18,76,16],[77,20,76,18],[78,8,77,6,"console"],[78,15,77,13],[78,16,77,14,"error"],[78,21,77,19],[78,22,77,20],[78,49,77,47],[78,51,77,49,"err"],[78,54,77,52],[78,55,77,53],[79,8,78,6,"setMatchInfo"],[79,20,78,18],[79,21,78,19],[79,25,78,23],[79,26,78,24],[81,8,80,6],[82,8,81,6,"setError"],[82,16,81,14],[82,17,82,9,"prev"],[82,21,82,13],[82,25,83,10,"prev"],[82,29,83,14],[82,34,84,11,"err"],[82,37,84,14],[82,39,84,16,"message"],[82,46,84,23],[82,49,84,26,"String"],[82,55,84,32],[82,56,84,33,"err"],[82,59,84,36],[82,60,84,37,"message"],[82,67,84,44],[82,68,84,45],[82,71,84,48],[82,99,84,76],[82,100,85,6],[82,101,85,7],[83,6,86,4],[84,4,87,2],[84,5,87,3],[85,4,89,2],[85,10,89,8,"loadMessages"],[85,22,89,20],[85,25,89,23],[85,29,89,23,"useCallback"],[85,35,89,34],[85,36,89,34,"useCallback"],[85,47,89,34],[85,49,90,4],[85,55,90,11,"userId"],[85,61,90,17],[85,65,90,22],[86,6,91,6],[86,10,91,10],[86,11,91,11,"matchId"],[86,18,91,18],[86,20,91,20],[87,6,93,6],[87,12,93,12,"now"],[87,15,93,15],[87,18,93,18,"Date"],[87,22,93,22],[87,23,93,23,"now"],[87,26,93,26],[87,27,93,27],[87,28,93,28],[88,6,94,6],[88,10,94,10,"now"],[88,13,94,13],[88,16,94,16,"rateLimitedUntilRef"],[88,35,94,35],[88,36,94,36,"current"],[88,43,94,43],[88,45,94,45],[89,8,95,8],[90,6,96,6],[92,6,98,6],[93,6,99,6],[93,10,99,10,"now"],[93,13,99,13],[93,16,99,16,"lastMessagesFetchAtRef"],[93,38,99,38],[93,39,99,39,"current"],[93,46,99,46],[93,49,99,49],[93,52,99,52],[93,54,99,54],[94,8,100,8],[95,6,101,6],[97,6,103,6],[98,6,104,6],[98,10,104,10],[99,8,105,8],[99,12,105,12,"messagesAbortRef"],[99,28,105,28],[99,29,105,29,"current"],[99,36,105,36],[99,38,105,38],[100,10,106,10,"messagesAbortRef"],[100,26,106,26],[100,27,106,27,"current"],[100,34,106,34],[100,35,106,35,"abort"],[100,40,106,40],[100,41,106,41],[100,42,106,42],[101,8,107,8],[102,6,108,6],[102,7,108,7],[102,8,108,8],[102,14,108,14],[103,8,109,8],[104,6,109,8],[105,6,112,6],[105,12,112,12,"controller"],[105,22,112,22],[105,25,112,25],[105,29,112,29,"AbortController"],[105,44,112,44],[105,45,112,45],[105,46,112,46],[106,6,113,6,"messagesAbortRef"],[106,22,113,22],[106,23,113,23,"current"],[106,30,113,30],[106,33,113,33,"controller"],[106,43,113,43],[107,6,114,6,"lastMessagesFetchAtRef"],[107,28,114,28],[107,29,114,29,"current"],[107,36,114,36],[107,39,114,39,"now"],[107,42,114,42],[109,6,116,6],[110,6,117,6],[110,10,117,10,"messagesInFlightRef"],[110,29,117,29],[110,30,117,30,"current"],[110,37,117,37],[110,39,117,39],[111,8,118,8],[112,6,119,6],[113,6,121,6,"messagesInFlightRef"],[113,25,121,25],[113,26,121,26,"current"],[113,33,121,33],[113,36,121,36],[113,40,121,40],[114,6,123,6],[114,10,123,10],[115,8,124,8],[115,14,124,14,"response"],[115,22,124,22],[115,25,124,25],[115,31,124,31,"fetch"],[115,36,124,36],[115,37,125,10],[115,54,125,27,"matchId"],[115,61,125,34],[115,72,125,45,"userId"],[115,78,125,51],[115,80,125,53],[115,82,126,10],[116,10,127,12,"signal"],[116,16,127,18],[116,18,127,20,"controller"],[116,28,127,30],[116,29,127,31,"signal"],[117,8,128,10],[117,9,129,8],[117,10,129,9],[118,8,131,8],[118,12,131,12],[118,13,131,13,"response"],[118,21,131,21],[118,22,131,22,"ok"],[118,24,131,24],[118,26,131,26],[119,10,132,10],[119,14,132,14,"response"],[119,22,132,22],[119,23,132,23,"status"],[119,29,132,29],[119,34,132,34],[119,37,132,37],[119,39,132,39],[120,12,133,12],[121,12,134,12,"rateLimitedUntilRef"],[121,31,134,31],[121,32,134,32,"current"],[121,39,134,39],[121,42,134,42,"Date"],[121,46,134,46],[121,47,134,47,"now"],[121,50,134,50],[121,51,134,51],[121,52,134,52],[121,55,134,55],[121,59,134,59],[122,12,135,12],[123,10,136,10],[124,10,138,10],[124,14,138,14,"response"],[124,22,138,22],[124,23,138,23,"status"],[124,29,138,29],[124,34,138,34],[124,37,138,37],[124,39,138,39],[125,12,139,12,"setMessages"],[125,23,139,23],[125,24,139,24],[125,26,139,26],[125,27,139,27],[126,12,140,12,"setError"],[126,20,140,20],[126,21,140,21],[126,56,140,56],[126,57,140,57],[127,12,141,12],[128,10,142,10],[129,10,144,10],[129,14,144,14,"response"],[129,22,144,22],[129,23,144,23,"status"],[129,29,144,29],[129,34,144,34],[129,37,144,37],[129,39,144,39],[130,12,145,12,"setMessages"],[130,23,145,23],[130,24,145,24],[130,26,145,26],[130,27,145,27],[131,12,146,12,"setError"],[131,20,146,20],[131,21,146,21],[131,57,146,57],[131,58,146,58],[132,12,147,12],[133,10,148,10],[135,10,150,10],[136,10,151,10],[136,14,152,12,"response"],[136,22,152,20],[136,23,152,21,"status"],[136,29,152,27],[136,34,152,32],[136,37,152,35],[136,41,153,12,"response"],[136,49,153,20],[136,50,153,21,"status"],[136,56,153,27],[136,61,153,32],[136,64,153,35],[136,68,154,12,"response"],[136,76,154,20],[136,77,154,21,"status"],[136,83,154,27],[136,88,154,32],[136,91,154,35],[136,93,155,12],[137,12,156,12,"setMessages"],[137,23,156,23],[137,24,156,24],[137,26,156,26],[137,27,156,27],[138,12,157,12,"setError"],[138,20,157,20],[138,21,157,21],[138,75,157,75],[138,76,157,76],[139,12,158,12],[140,10,159,10],[141,10,161,10],[141,16,161,16,"text"],[141,20,161,20],[141,23,161,23],[141,29,161,29,"response"],[141,37,161,37],[141,38,161,38,"text"],[141,42,161,42],[141,43,161,43],[141,44,161,44],[141,45,161,45,"catch"],[141,50,161,50],[141,51,161,51],[141,57,161,57],[141,59,161,59],[141,60,161,60],[142,10,162,10],[142,16,162,16],[142,20,162,20,"Error"],[142,25,162,25],[142,26,163,12],[142,57,163,43,"matchId"],[142,64,163,50],[142,87,163,73,"response"],[142,95,163,81],[142,96,163,82,"status"],[142,102,163,88],[142,107,163,93,"response"],[142,115,163,101],[142,116,163,102,"statusText"],[142,126,163,112],[142,130,163,116,"text"],[142,134,163,120],[142,136,164,10],[142,137,164,11],[143,8,165,8],[144,8,167,8],[144,14,167,14,"data"],[144,18,167,18],[144,21,167,21],[144,27,167,27,"response"],[144,35,167,35],[144,36,167,36,"json"],[144,40,167,40],[144,41,167,41],[144,42,167,42],[145,8,168,8],[145,14,168,14,"nextMessages"],[145,26,168,26],[145,29,168,29,"Array"],[145,34,168,34],[145,35,168,35,"isArray"],[145,42,168,42],[145,43,168,43,"data"],[145,47,168,47],[145,49,168,49,"messages"],[145,57,168,57],[145,58,168,58],[145,61,168,61,"data"],[145,65,168,65],[145,66,168,66,"messages"],[145,74,168,74],[145,77,168,77],[145,79,168,79],[146,8,169,8,"setMessages"],[146,19,169,19],[146,20,169,20,"nextMessages"],[146,32,169,32],[146,33,169,33],[148,8,171,8],[149,8,172,8,"queryClient"],[149,19,172,19],[149,20,172,20,"invalidateQueries"],[149,37,172,37],[149,38,172,38],[150,10,172,40,"queryKey"],[150,18,172,48],[150,20,172,50],[150,21,172,51],[150,37,172,67],[150,39,172,69,"userId"],[150,45,172,75],[151,8,172,77],[151,9,172,78],[151,10,172,79],[153,8,174,8],[154,8,175,8,"queryClient"],[154,19,175,19],[154,20,175,20,"invalidateQueries"],[154,37,175,37],[154,38,175,38],[155,10,176,10,"queryKey"],[155,18,176,18],[155,20,176,20],[155,21,176,21],[155,38,176,38],[155,40,176,40,"userId"],[155,46,176,46],[156,8,177,8],[156,9,177,9],[156,10,177,10],[157,6,178,6],[157,7,178,7],[157,8,178,8],[157,15,178,15,"err"],[157,18,178,18],[157,20,178,20],[158,8,179,8],[158,12,179,12,"err"],[158,15,179,15],[158,17,179,17,"name"],[158,21,179,21],[158,26,179,26],[158,38,179,38],[158,40,179,40],[159,10,180,10],[160,8,181,8],[161,8,183,8,"console"],[161,15,183,15],[161,16,183,16,"error"],[161,21,183,21],[161,22,183,22],[161,47,183,47],[161,49,183,49,"err"],[161,52,183,52],[161,53,183,53],[162,8,184,8,"setError"],[162,16,184,16],[162,17,185,10,"err"],[162,20,185,13],[162,22,185,15,"message"],[162,29,185,22],[162,32,186,14,"String"],[162,38,186,20],[162,39,186,21,"err"],[162,42,186,24],[162,43,186,25,"message"],[162,50,186,32],[162,51,186,33],[162,54,187,14],[162,95,188,8],[162,96,188,9],[163,6,189,6],[163,7,189,7],[163,16,189,16],[164,8,190,8,"messagesInFlightRef"],[164,27,190,27],[164,28,190,28,"current"],[164,35,190,35],[164,38,190,38],[164,43,190,43],[165,6,191,6],[166,4,192,4],[166,5,192,5],[166,7,193,4],[166,8,193,5,"matchId"],[166,15,193,12],[166,17,193,14,"queryClient"],[166,28,193,25],[166,29,194,2],[166,30,194,3],[167,4,196,2],[167,10,196,8,"loadUserAndMessages"],[167,29,196,27],[167,32,196,30],[167,38,196,30,"loadUserAndMessages"],[167,39,196,30],[167,44,196,42],[168,6,197,4],[168,10,197,8],[168,11,197,9,"matchId"],[168,18,197,16],[168,20,197,18],[169,8,198,6,"setLoading"],[169,18,198,16],[169,19,198,17],[169,23,198,21],[169,24,198,22],[170,8,199,6],[171,6,200,4],[172,6,202,4],[172,10,202,8],[173,8,203,6,"setError"],[173,16,203,14],[173,17,203,15],[173,21,203,19],[173,22,203,20],[174,8,204,6],[174,14,204,12,"userData"],[174,22,204,20],[174,25,204,23],[174,31,204,29,"AsyncStorage"],[174,43,204,41],[174,44,204,41,"default"],[174,51,204,41],[174,52,204,42,"getItem"],[174,59,204,49],[174,60,204,50],[174,66,204,56],[174,67,204,57],[175,8,205,6],[175,12,205,10],[175,13,205,11,"userData"],[175,21,205,19],[175,23,205,21],[176,10,206,8,"setUser"],[176,17,206,15],[176,18,206,16],[176,22,206,20],[176,23,206,21],[177,10,207,8,"setError"],[177,18,207,16],[177,19,207,17],[177,46,207,44],[177,47,207,45],[178,10,208,8],[179,8,209,6],[180,8,211,6],[180,14,211,12,"parsedUser"],[180,24,211,22],[180,27,211,25,"JSON"],[180,31,211,29],[180,32,211,30,"parse"],[180,37,211,35],[180,38,211,36,"userData"],[180,46,211,44],[180,47,211,45],[181,8,212,6,"setUser"],[181,15,212,13],[181,16,212,14,"parsedUser"],[181,26,212,24],[181,27,212,25],[182,8,213,6],[182,14,213,12,"markMatchesSeen"],[182,29,213,27],[182,30,213,28,"parsedUser"],[182,40,213,38],[182,41,213,39,"id"],[182,43,213,41],[182,44,213,42],[183,8,214,6],[183,14,214,12,"Promise"],[183,21,214,19],[183,22,214,20,"all"],[183,25,214,23],[183,26,214,24],[183,27,215,8,"loadMatchInfo"],[183,40,215,21],[183,41,215,22,"parsedUser"],[183,51,215,32],[183,52,215,33,"id"],[183,54,215,35],[183,55,215,36],[183,57,216,8,"loadMessages"],[183,69,216,20],[183,70,216,21,"parsedUser"],[183,80,216,31],[183,81,216,32,"id"],[183,83,216,34],[183,84,216,35],[183,85,217,7],[183,86,217,8],[184,6,218,4],[184,7,218,5],[184,8,218,6],[184,15,218,13,"err"],[184,18,218,16],[184,20,218,18],[185,8,219,6,"console"],[185,15,219,13],[185,16,219,14,"error"],[185,21,219,19],[185,22,219,20],[185,51,219,49],[185,53,219,51,"err"],[185,56,219,54],[185,57,219,55],[186,8,220,6,"setError"],[186,16,220,14],[186,17,221,8,"err"],[186,20,221,11],[186,22,221,13,"message"],[186,29,221,20],[186,32,221,23,"String"],[186,38,221,29],[186,39,221,30,"err"],[186,42,221,33],[186,43,221,34,"message"],[186,50,221,41],[186,51,221,42],[186,54,221,45],[186,81,222,6],[186,82,222,7],[187,6,223,4],[187,7,223,5],[187,16,223,14],[188,8,224,6,"setLoading"],[188,18,224,16],[188,19,224,17],[188,24,224,22],[188,25,224,23],[189,6,225,4],[190,4,226,2],[190,5,226,3],[191,4,228,2],[191,8,228,2,"useEffect"],[191,14,228,11],[191,15,228,11,"useEffect"],[191,24,228,11],[191,26,228,12],[191,32,228,18],[192,6,229,4],[193,6,230,4],[194,6,231,4,"loadUserAndMessages"],[194,25,231,23],[194,26,231,24],[194,27,231,25],[195,6,232,4],[196,4,233,2],[196,5,233,3],[196,7,233,5],[196,8,233,6,"matchId"],[196,15,233,13],[196,16,233,14],[196,17,233,15],[197,4,235,2],[197,10,235,8,"reloadMessages"],[197,24,235,22],[197,27,235,25],[197,31,235,25,"useCallback"],[197,37,235,36],[197,38,235,36,"useCallback"],[197,49,235,36],[197,51,235,37],[197,63,235,49],[198,6,236,4],[198,12,236,10,"uid"],[198,15,236,13],[198,18,236,16,"user"],[198,22,236,20],[198,24,236,22,"id"],[198,26,236,24],[199,6,237,4],[199,10,237,8],[199,11,237,9,"uid"],[199,14,237,12],[199,16,237,14],[200,6,238,4],[200,10,238,8],[200,11,238,9,"matchId"],[200,18,238,16],[200,20,238,18],[201,6,239,4],[201,12,239,10,"loadMessages"],[201,24,239,22],[201,25,239,23,"uid"],[201,28,239,26],[201,29,239,27],[202,4,240,2],[202,5,240,3],[202,7,240,5],[202,8,240,6,"loadMessages"],[202,20,240,18],[202,22,240,20,"matchId"],[202,29,240,27],[202,31,240,29,"user"],[202,35,240,33],[202,37,240,35,"id"],[202,39,240,37],[202,40,240,38],[202,41,240,39],[203,4,242,2],[203,11,242,9],[204,6,243,4,"loading"],[204,13,243,11],[205,6,244,4,"error"],[205,11,244,9],[206,6,245,4,"messages"],[206,14,245,12],[207,6,246,4,"setMessages"],[207,17,246,15],[208,6,247,4,"user"],[208,10,247,8],[209,6,248,4,"matchInfo"],[209,15,248,13],[210,6,249,4,"reloadMessages"],[211,4,250,2],[211,5,250,3],[212,2,251,0],[213,0,251,1],[213,3]],"functionMap":{"names":["<global>","useConversation","markMatchesSeen","loadMatchInfo","setError$argument_0","response.text._catch$argument_0","loadMessages","loadUserAndMessages","useEffect$argument_0","reloadMessages"],"mappings":"AAA;OCI;ICgB;KDmB;wBEI;mBCO,sDD;YCY;4EDC;iDEK,QF;QCa;6EDE;GFG;IKG;mDDuE,QC;KL+B;8BMI;GN8B;YOE;GPK;qCQE;GRK;CDW"},"hasCjsExports":false},"type":"js/module"}]}