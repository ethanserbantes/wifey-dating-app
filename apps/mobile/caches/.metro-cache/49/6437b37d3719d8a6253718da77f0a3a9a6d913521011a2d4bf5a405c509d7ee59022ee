{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.formatTime = formatTime;\n  exports.shouldShowStarterPreview = shouldShowStarterPreview;\n  exports.isCommittedMatch = isCommittedMatch;\n  exports.getMatchState = getMatchState;\n  exports.getMatchesData = getMatchesData;\n  function formatTime(timestamp) {\n    if (!timestamp) return \"\";\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now - date;\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    if (hours < 1) return \"Just now\";\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    return date.toLocaleDateString();\n  }\n  function shouldShowStarterPreview(match) {\n    const realCount = Number(match?.real_message_count);\n    const hasRealCount = Number.isFinite(realCount);\n    if (hasRealCount) {\n      if (realCount > 0) return false;\n    } else {\n      const lastMsgRaw = typeof match?.last_message === \"string\" ? match.last_message : \"\";\n      const lastMsg = lastMsgRaw.trim();\n      const isLegacyPreviewOnly = lastMsg.toLowerCase().startsWith(\"start the chat with \");\n      const hasAnyMessages = Boolean(match?.last_message_time) && !isLegacyPreviewOnly;\n      if (hasAnyMessages) return false;\n    }\n    const hasStarterSummary = typeof match?.starter_summary === \"string\" && match.starter_summary.trim().length > 0;\n    const hasStartChatLine = typeof match?.start_chat_line === \"string\" && match.start_chat_line.trim().length > 0;\n    return hasStarterSummary || hasStartChatLine;\n  }\n  function isCommittedMatch(match) {\n    const committed = Boolean(match?.my_committed);\n    const legacy = Boolean(match?.legacy_unlocked);\n    const deposit = Number(match?.my_deposit_cents || 0);\n    if (committed || legacy) return true;\n    return Number.isFinite(deposit) && deposit >= 3000;\n  }\n  function getMatchState(match) {\n    // Simple state machine used across Messages/Chat:\n    // - queued: matched but not yet committed\n    // - committed: committed (or legacy unlocked) -> eligible to appear as a chat row\n    return isCommittedMatch(match) ? \"committed\" : \"queued\";\n  }\n  function getMatchesData(matches) {\n    const list = Array.isArray(matches) ? matches : [];\n    const committedMatches = list.filter(m => isCommittedMatch(m));\n\n    // Match queue (not committed yet)\n    const queuedMatches = list.filter(m => !isCommittedMatch(m));\n    const newMatches = queuedMatches.slice(0, 12);\n    const hasCommittedAny = committedMatches.length > 0;\n    const primaryCommittedMatch = committedMatches.length > 0 ? committedMatches[0] : null;\n    const hasAnyMatches = list.length > 0;\n    const hasNewMatches = newMatches.length > 0;\n    return {\n      committedMatches,\n      queuedMatches,\n      newMatches,\n      hasCommittedAny,\n      primaryCommittedMatch,\n      hasAnyMatches,\n      hasNewMatches\n    };\n  }\n});","lineCount":74,"map":[[7,2,1,0,"exports"],[7,9,1,0],[7,10,1,0,"formatTime"],[7,20,1,0],[7,23,1,0,"formatTime"],[7,33,1,0],[8,2,15,0,"exports"],[8,9,15,0],[8,10,15,0,"shouldShowStarterPreview"],[8,34,15,0],[8,37,15,0,"shouldShowStarterPreview"],[8,61,15,0],[9,2,44,0,"exports"],[9,9,44,0],[9,10,44,0,"isCommittedMatch"],[9,26,44,0],[9,29,44,0,"isCommittedMatch"],[9,45,44,0],[10,2,52,0,"exports"],[10,9,52,0],[10,10,52,0,"getMatchState"],[10,23,52,0],[10,26,52,0,"getMatchState"],[10,39,52,0],[11,2,59,0,"exports"],[11,9,59,0],[11,10,59,0,"getMatchesData"],[11,24,59,0],[11,27,59,0,"getMatchesData"],[11,41,59,0],[12,2,1,7],[12,11,1,16,"formatTime"],[12,21,1,26,"formatTime"],[12,22,1,27,"timestamp"],[12,31,1,36],[12,33,1,38],[13,4,2,2],[13,8,2,6],[13,9,2,7,"timestamp"],[13,18,2,16],[13,20,2,18],[13,27,2,25],[13,29,2,27],[14,4,3,2],[14,10,3,8,"date"],[14,14,3,12],[14,17,3,15],[14,21,3,19,"Date"],[14,25,3,23],[14,26,3,24,"timestamp"],[14,35,3,33],[14,36,3,34],[15,4,4,2],[15,10,4,8,"now"],[15,13,4,11],[15,16,4,14],[15,20,4,18,"Date"],[15,24,4,22],[15,25,4,23],[15,26,4,24],[16,4,5,2],[16,10,5,8,"diff"],[16,14,5,12],[16,17,5,15,"now"],[16,20,5,18],[16,23,5,21,"date"],[16,27,5,25],[17,4,6,2],[17,10,6,8,"hours"],[17,15,6,13],[17,18,6,16,"Math"],[17,22,6,20],[17,23,6,21,"floor"],[17,28,6,26],[17,29,6,27,"diff"],[17,33,6,31],[17,37,6,35],[17,41,6,39],[17,44,6,42],[17,46,6,44],[17,49,6,47],[17,51,6,49],[17,52,6,50],[17,53,6,51],[18,4,7,2],[18,10,7,8,"days"],[18,14,7,12],[18,17,7,15,"Math"],[18,21,7,19],[18,22,7,20,"floor"],[18,27,7,25],[18,28,7,26,"diff"],[18,32,7,30],[18,36,7,34],[18,40,7,38],[18,43,7,41],[18,45,7,43],[18,48,7,46],[18,50,7,48],[18,53,7,51],[18,55,7,53],[18,56,7,54],[18,57,7,55],[19,4,9,2],[19,8,9,6,"hours"],[19,13,9,11],[19,16,9,14],[19,17,9,15],[19,19,9,17],[19,26,9,24],[19,36,9,34],[20,4,10,2],[20,8,10,6,"hours"],[20,13,10,11],[20,16,10,14],[20,18,10,16],[20,20,10,18],[20,27,10,25],[20,30,10,28,"hours"],[20,35,10,33],[20,42,10,40],[21,4,11,2],[21,8,11,6,"days"],[21,12,11,10],[21,15,11,13],[21,16,11,14],[21,18,11,16],[21,25,11,23],[21,28,11,26,"days"],[21,32,11,30],[21,39,11,37],[22,4,12,2],[22,11,12,9,"date"],[22,15,12,13],[22,16,12,14,"toLocaleDateString"],[22,34,12,32],[22,35,12,33],[22,36,12,34],[23,2,13,0],[24,2,15,7],[24,11,15,16,"shouldShowStarterPreview"],[24,35,15,40,"shouldShowStarterPreview"],[24,36,15,41,"match"],[24,41,15,46],[24,43,15,48],[25,4,16,2],[25,10,16,8,"realCount"],[25,19,16,17],[25,22,16,20,"Number"],[25,28,16,26],[25,29,16,27,"match"],[25,34,16,32],[25,36,16,34,"real_message_count"],[25,54,16,52],[25,55,16,53],[26,4,17,2],[26,10,17,8,"hasRealCount"],[26,22,17,20],[26,25,17,23,"Number"],[26,31,17,29],[26,32,17,30,"isFinite"],[26,40,17,38],[26,41,17,39,"realCount"],[26,50,17,48],[26,51,17,49],[27,4,18,2],[27,8,18,6,"hasRealCount"],[27,20,18,18],[27,22,18,20],[28,6,19,4],[28,10,19,8,"realCount"],[28,19,19,17],[28,22,19,20],[28,23,19,21],[28,25,19,23],[28,32,19,30],[28,37,19,35],[29,4,20,2],[29,5,20,3],[29,11,20,9],[30,6,21,4],[30,12,21,10,"lastMsgRaw"],[30,22,21,20],[30,25,22,6],[30,32,22,13,"match"],[30,37,22,18],[30,39,22,20,"last_message"],[30,51,22,32],[30,56,22,37],[30,64,22,45],[30,67,22,48,"match"],[30,72,22,53],[30,73,22,54,"last_message"],[30,85,22,66],[30,88,22,69],[30,90,22,71],[31,6,23,4],[31,12,23,10,"lastMsg"],[31,19,23,17],[31,22,23,20,"lastMsgRaw"],[31,32,23,30],[31,33,23,31,"trim"],[31,37,23,35],[31,38,23,36],[31,39,23,37],[32,6,24,4],[32,12,24,10,"isLegacyPreviewOnly"],[32,31,24,29],[32,34,24,32,"lastMsg"],[32,41,24,39],[32,42,25,7,"toLowerCase"],[32,53,25,18],[32,54,25,19],[32,55,25,20],[32,56,26,7,"startsWith"],[32,66,26,17],[32,67,26,18],[32,89,26,40],[32,90,26,41],[33,6,28,4],[33,12,28,10,"hasAnyMessages"],[33,26,28,24],[33,29,29,6,"Boolean"],[33,36,29,13],[33,37,29,14,"match"],[33,42,29,19],[33,44,29,21,"last_message_time"],[33,61,29,38],[33,62,29,39],[33,66,29,43],[33,67,29,44,"isLegacyPreviewOnly"],[33,86,29,63],[34,6,30,4],[34,10,30,8,"hasAnyMessages"],[34,24,30,22],[34,26,30,24],[34,33,30,31],[34,38,30,36],[35,4,31,2],[36,4,33,2],[36,10,33,8,"hasStarterSummary"],[36,27,33,25],[36,30,34,4],[36,37,34,11,"match"],[36,42,34,16],[36,44,34,18,"starter_summary"],[36,59,34,33],[36,64,34,38],[36,72,34,46],[36,76,35,4,"match"],[36,81,35,9],[36,82,35,10,"starter_summary"],[36,97,35,25],[36,98,35,26,"trim"],[36,102,35,30],[36,103,35,31],[36,104,35,32],[36,105,35,33,"length"],[36,111,35,39],[36,114,35,42],[36,115,35,43],[37,4,37,2],[37,10,37,8,"hasStartChatLine"],[37,26,37,24],[37,29,38,4],[37,36,38,11,"match"],[37,41,38,16],[37,43,38,18,"start_chat_line"],[37,58,38,33],[37,63,38,38],[37,71,38,46],[37,75,39,4,"match"],[37,80,39,9],[37,81,39,10,"start_chat_line"],[37,96,39,25],[37,97,39,26,"trim"],[37,101,39,30],[37,102,39,31],[37,103,39,32],[37,104,39,33,"length"],[37,110,39,39],[37,113,39,42],[37,114,39,43],[38,4,41,2],[38,11,41,9,"hasStarterSummary"],[38,28,41,26],[38,32,41,30,"hasStartChatLine"],[38,48,41,46],[39,2,42,0],[40,2,44,7],[40,11,44,16,"isCommittedMatch"],[40,27,44,32,"isCommittedMatch"],[40,28,44,33,"match"],[40,33,44,38],[40,35,44,40],[41,4,45,2],[41,10,45,8,"committed"],[41,19,45,17],[41,22,45,20,"Boolean"],[41,29,45,27],[41,30,45,28,"match"],[41,35,45,33],[41,37,45,35,"my_committed"],[41,49,45,47],[41,50,45,48],[42,4,46,2],[42,10,46,8,"legacy"],[42,16,46,14],[42,19,46,17,"Boolean"],[42,26,46,24],[42,27,46,25,"match"],[42,32,46,30],[42,34,46,32,"legacy_unlocked"],[42,49,46,47],[42,50,46,48],[43,4,47,2],[43,10,47,8,"deposit"],[43,17,47,15],[43,20,47,18,"Number"],[43,26,47,24],[43,27,47,25,"match"],[43,32,47,30],[43,34,47,32,"my_deposit_cents"],[43,50,47,48],[43,54,47,52],[43,55,47,53],[43,56,47,54],[44,4,48,2],[44,8,48,6,"committed"],[44,17,48,15],[44,21,48,19,"legacy"],[44,27,48,25],[44,29,48,27],[44,36,48,34],[44,40,48,38],[45,4,49,2],[45,11,49,9,"Number"],[45,17,49,15],[45,18,49,16,"isFinite"],[45,26,49,24],[45,27,49,25,"deposit"],[45,34,49,32],[45,35,49,33],[45,39,49,37,"deposit"],[45,46,49,44],[45,50,49,48],[45,54,49,52],[46,2,50,0],[47,2,52,7],[47,11,52,16,"getMatchState"],[47,24,52,29,"getMatchState"],[47,25,52,30,"match"],[47,30,52,35],[47,32,52,37],[48,4,53,2],[49,4,54,2],[50,4,55,2],[51,4,56,2],[51,11,56,9,"isCommittedMatch"],[51,27,56,25],[51,28,56,26,"match"],[51,33,56,31],[51,34,56,32],[51,37,56,35],[51,48,56,46],[51,51,56,49],[51,59,56,57],[52,2,57,0],[53,2,59,7],[53,11,59,16,"getMatchesData"],[53,25,59,30,"getMatchesData"],[53,26,59,31,"matches"],[53,33,59,38],[53,35,59,40],[54,4,60,2],[54,10,60,8,"list"],[54,14,60,12],[54,17,60,15,"Array"],[54,22,60,20],[54,23,60,21,"isArray"],[54,30,60,28],[54,31,60,29,"matches"],[54,38,60,36],[54,39,60,37],[54,42,60,40,"matches"],[54,49,60,47],[54,52,60,50],[54,54,60,52],[55,4,62,2],[55,10,62,8,"committedMatches"],[55,26,62,24],[55,29,62,27,"list"],[55,33,62,31],[55,34,62,32,"filter"],[55,40,62,38],[55,41,62,40,"m"],[55,42,62,41],[55,46,62,46,"isCommittedMatch"],[55,62,62,62],[55,63,62,63,"m"],[55,64,62,64],[55,65,62,65],[55,66,62,66],[57,4,64,2],[58,4,65,2],[58,10,65,8,"queuedMatches"],[58,23,65,21],[58,26,65,24,"list"],[58,30,65,28],[58,31,65,29,"filter"],[58,37,65,35],[58,38,65,37,"m"],[58,39,65,38],[58,43,65,43],[58,44,65,44,"isCommittedMatch"],[58,60,65,60],[58,61,65,61,"m"],[58,62,65,62],[58,63,65,63],[58,64,65,64],[59,4,67,2],[59,10,67,8,"newMatches"],[59,20,67,18],[59,23,67,21,"queuedMatches"],[59,36,67,34],[59,37,67,35,"slice"],[59,42,67,40],[59,43,67,41],[59,44,67,42],[59,46,67,44],[59,48,67,46],[59,49,67,47],[60,4,69,2],[60,10,69,8,"hasCommittedAny"],[60,25,69,23],[60,28,69,26,"committedMatches"],[60,44,69,42],[60,45,69,43,"length"],[60,51,69,49],[60,54,69,52],[60,55,69,53],[61,4,70,2],[61,10,70,8,"primaryCommittedMatch"],[61,31,70,29],[61,34,71,4,"committedMatches"],[61,50,71,20],[61,51,71,21,"length"],[61,57,71,27],[61,60,71,30],[61,61,71,31],[61,64,71,34,"committedMatches"],[61,80,71,50],[61,81,71,51],[61,82,71,52],[61,83,71,53],[61,86,71,56],[61,90,71,60],[62,4,72,2],[62,10,72,8,"hasAnyMatches"],[62,23,72,21],[62,26,72,24,"list"],[62,30,72,28],[62,31,72,29,"length"],[62,37,72,35],[62,40,72,38],[62,41,72,39],[63,4,73,2],[63,10,73,8,"hasNewMatches"],[63,23,73,21],[63,26,73,24,"newMatches"],[63,36,73,34],[63,37,73,35,"length"],[63,43,73,41],[63,46,73,44],[63,47,73,45],[64,4,75,2],[64,11,75,9],[65,6,76,4,"committedMatches"],[65,22,76,20],[66,6,77,4,"queuedMatches"],[66,19,77,17],[67,6,78,4,"newMatches"],[67,16,78,14],[68,6,79,4,"hasCommittedAny"],[68,21,79,19],[69,6,80,4,"primaryCommittedMatch"],[69,27,80,25],[70,6,81,4,"hasAnyMatches"],[70,19,81,17],[71,6,82,4,"hasNewMatches"],[72,4,83,2],[72,5,83,3],[73,2,84,0],[74,0,84,1],[74,3]],"functionMap":{"names":["<global>","formatTime","shouldShowStarterPreview","isCommittedMatch","getMatchState","getMatchesData","list.filter$argument_0"],"mappings":"AAA,OC;CDY;OEE;CF2B;OGE;CHM;OIE;CJK;OKE;uCCG,0BD;oCCG,2BD;CLmB"},"hasCjsExports":false},"type":"js/module"}]}