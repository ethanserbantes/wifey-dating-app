{"dependencies":[{"name":"retry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":14,"index":26},"end":{"line":2,"column":30,"index":42}}],"key":"5yZ3yrlehwtQrF2N1Rmfe63JgGo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Packages\n  var retrier = require(_dependencyMap[0]);\n  function retry(fn, opts) {\n    function run(resolve, reject) {\n      var options = opts || {};\n      var op;\n\n      // Default `randomize` to true\n      if (!('randomize' in options)) {\n        options.randomize = true;\n      }\n      op = retrier.operation(options);\n\n      // We allow the user to abort retrying\n      // this makes sense in the cases where\n      // knowledge is obtained that retrying\n      // would be futile (e.g.: auth errors)\n\n      function bail(err) {\n        reject(err || new Error('Aborted'));\n      }\n      function onError(err, num) {\n        if (err.bail) {\n          bail(err);\n          return;\n        }\n        if (!op.retry(err)) {\n          reject(op.mainError());\n        } else if (options.onRetry) {\n          options.onRetry(err, num);\n        }\n      }\n      function runAttempt(num) {\n        var val;\n        try {\n          val = fn(bail, num);\n        } catch (err) {\n          onError(err, num);\n          return;\n        }\n        Promise.resolve(val).then(resolve).catch(function catchIt(err) {\n          onError(err, num);\n        });\n      }\n      op.attempt(runAttempt);\n    }\n    return new Promise(run);\n  }\n  module.exports = retry;\n});","lineCount":51,"map":[[2,2,1,0],[3,2,2,0],[3,6,2,4,"retrier"],[3,13,2,11],[3,16,2,14,"require"],[3,23,2,21],[3,24,2,21,"_dependencyMap"],[3,38,2,21],[3,41,2,29],[3,42,2,30],[4,2,4,0],[4,11,4,9,"retry"],[4,16,4,14,"retry"],[4,17,4,15,"fn"],[4,19,4,17],[4,21,4,19,"opts"],[4,25,4,23],[4,27,4,25],[5,4,5,2],[5,13,5,11,"run"],[5,16,5,14,"run"],[5,17,5,15,"resolve"],[5,24,5,22],[5,26,5,24,"reject"],[5,32,5,30],[5,34,5,32],[6,6,6,4],[6,10,6,8,"options"],[6,17,6,15],[6,20,6,18,"opts"],[6,24,6,22],[6,28,6,26],[6,29,6,27],[6,30,6,28],[7,6,7,4],[7,10,7,8,"op"],[7,12,7,10],[9,6,9,4],[10,6,10,4],[10,10,10,8],[10,12,10,10],[10,23,10,21],[10,27,10,25,"options"],[10,34,10,32],[10,35,10,33],[10,37,10,35],[11,8,11,6,"options"],[11,15,11,13],[11,16,11,14,"randomize"],[11,25,11,23],[11,28,11,26],[11,32,11,30],[12,6,12,4],[13,6,14,4,"op"],[13,8,14,6],[13,11,14,9,"retrier"],[13,18,14,16],[13,19,14,17,"operation"],[13,28,14,26],[13,29,14,27,"options"],[13,36,14,34],[13,37,14,35],[15,6,16,4],[16,6,17,4],[17,6,18,4],[18,6,19,4],[20,6,21,4],[20,15,21,13,"bail"],[20,19,21,17,"bail"],[20,20,21,18,"err"],[20,23,21,21],[20,25,21,23],[21,8,22,6,"reject"],[21,14,22,12],[21,15,22,13,"err"],[21,18,22,16],[21,22,22,20],[21,26,22,24,"Error"],[21,31,22,29],[21,32,22,30],[21,41,22,39],[21,42,22,40],[21,43,22,41],[22,6,23,4],[23,6,25,4],[23,15,25,13,"onError"],[23,22,25,20,"onError"],[23,23,25,21,"err"],[23,26,25,24],[23,28,25,26,"num"],[23,31,25,29],[23,33,25,31],[24,8,26,6],[24,12,26,10,"err"],[24,15,26,13],[24,16,26,14,"bail"],[24,20,26,18],[24,22,26,20],[25,10,27,8,"bail"],[25,14,27,12],[25,15,27,13,"err"],[25,18,27,16],[25,19,27,17],[26,10,28,8],[27,8,29,6],[28,8,31,6],[28,12,31,10],[28,13,31,11,"op"],[28,15,31,13],[28,16,31,14,"retry"],[28,21,31,19],[28,22,31,20,"err"],[28,25,31,23],[28,26,31,24],[28,28,31,26],[29,10,32,8,"reject"],[29,16,32,14],[29,17,32,15,"op"],[29,19,32,17],[29,20,32,18,"mainError"],[29,29,32,27],[29,30,32,28],[29,31,32,29],[29,32,32,30],[30,8,33,6],[30,9,33,7],[30,15,33,13],[30,19,33,17,"options"],[30,26,33,24],[30,27,33,25,"onRetry"],[30,34,33,32],[30,36,33,34],[31,10,34,8,"options"],[31,17,34,15],[31,18,34,16,"onRetry"],[31,25,34,23],[31,26,34,24,"err"],[31,29,34,27],[31,31,34,29,"num"],[31,34,34,32],[31,35,34,33],[32,8,35,6],[33,6,36,4],[34,6,38,4],[34,15,38,13,"runAttempt"],[34,25,38,23,"runAttempt"],[34,26,38,24,"num"],[34,29,38,27],[34,31,38,29],[35,8,39,6],[35,12,39,10,"val"],[35,15,39,13],[36,8,41,6],[36,12,41,10],[37,10,42,8,"val"],[37,13,42,11],[37,16,42,14,"fn"],[37,18,42,16],[37,19,42,17,"bail"],[37,23,42,21],[37,25,42,23,"num"],[37,28,42,26],[37,29,42,27],[38,8,43,6],[38,9,43,7],[38,10,43,8],[38,17,43,15,"err"],[38,20,43,18],[38,22,43,20],[39,10,44,8,"onError"],[39,17,44,15],[39,18,44,16,"err"],[39,21,44,19],[39,23,44,21,"num"],[39,26,44,24],[39,27,44,25],[40,10,45,8],[41,8,46,6],[42,8,48,6,"Promise"],[42,15,48,13],[42,16,48,14,"resolve"],[42,23,48,21],[42,24,48,22,"val"],[42,27,48,25],[42,28,48,26],[42,29,49,9,"then"],[42,33,49,13],[42,34,49,14,"resolve"],[42,41,49,21],[42,42,49,22],[42,43,50,9,"catch"],[42,48,50,14],[42,49,50,15],[42,58,50,24,"catchIt"],[42,65,50,31,"catchIt"],[42,66,50,32,"err"],[42,69,50,35],[42,71,50,37],[43,10,51,10,"onError"],[43,17,51,17],[43,18,51,18,"err"],[43,21,51,21],[43,23,51,23,"num"],[43,26,51,26],[43,27,51,27],[44,8,52,8],[44,9,52,9],[44,10,52,10],[45,6,53,4],[46,6,55,4,"op"],[46,8,55,6],[46,9,55,7,"attempt"],[46,16,55,14],[46,17,55,15,"runAttempt"],[46,27,55,25],[46,28,55,26],[47,4,56,2],[48,4,58,2],[48,11,58,9],[48,15,58,13,"Promise"],[48,22,58,20],[48,23,58,21,"run"],[48,26,58,24],[48,27,58,25],[49,2,59,0],[50,2,61,0,"module"],[50,8,61,6],[50,9,61,7,"exports"],[50,16,61,14],[50,19,61,17,"retry"],[50,24,61,22],[51,0,61,23],[51,3]],"functionMap":{"names":["<global>","retry","run","bail","onError","runAttempt","catchIt"],"mappings":"AAA;ACG;ECC;ICgB;KDE;IEE;KFW;IGE;eCY;SDE;KHC;GDG;CDG"},"hasCjsExports":true},"type":"js/module"}]}