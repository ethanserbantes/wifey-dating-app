{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useDatingInsights = useDatingInsights;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  function useDatingInsights(profile, showDatingInsights) {\n    const targetUserId = (0, _react.useMemo)(() => {\n      const n1 = Number(profile?.user_id);\n      if (Number.isFinite(n1) && n1 > 0) return Math.trunc(n1);\n      const n2 = Number(profile?.id);\n      if (Number.isFinite(n2) && n2 > 0) return Math.trunc(n2);\n      return null;\n    }, [profile?.id, profile?.user_id]);\n    const shouldFetchInsights = showDatingInsights && Number.isFinite(targetUserId);\n    const insightsQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"datingInsights\", \"profile\", targetUserId],\n      enabled: shouldFetchInsights,\n      queryFn: async () => {\n        const resp = await fetch(`/api/dating-insights?userId=${encodeURIComponent(String(targetUserId))}`);\n        if (!resp.ok) {\n          throw new Error(`When fetching /api/dating-insights, the response was [${resp.status}] ${resp.statusText}`);\n        }\n        return resp.json();\n      },\n      staleTime: 30_000\n    });\n    const dateHistoryLabel = typeof insightsQuery.data?.dateHistoryLabel === \"string\" ? insightsQuery.data.dateHistoryLabel : null;\n    const followThroughLabel = typeof insightsQuery.data?.followThroughLabel === \"string\" ? insightsQuery.data.followThroughLabel : null;\n    const dateHistoryLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return dateHistoryLabel || \"0 dates on Wifey\";\n    }, [dateHistoryLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    const followThroughLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return followThroughLabel || \"Not enough data yet\";\n    }, [followThroughLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    return {\n      shouldFetchInsights,\n      insightsQuery,\n      dateHistoryLine,\n      followThroughLine\n    };\n  }\n});","lineCount":62,"map":[[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"useDatingInsights"],[7,27,4,0],[7,30,4,0,"useDatingInsights"],[7,47,4,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_tanstackReactQuery"],[9,25,2,0],[9,28,2,0,"require"],[9,35,2,0],[9,36,2,0,"_dependencyMap"],[9,50,2,0],[10,2,4,7],[10,11,4,16,"useDatingInsights"],[10,28,4,33,"useDatingInsights"],[10,29,4,34,"profile"],[10,36,4,41],[10,38,4,43,"showDatingInsights"],[10,56,4,61],[10,58,4,63],[11,4,5,2],[11,10,5,8,"targetUserId"],[11,22,5,20],[11,25,5,23],[11,29,5,23,"useMemo"],[11,35,5,30],[11,36,5,30,"useMemo"],[11,43,5,30],[11,45,5,31],[11,51,5,37],[12,6,6,4],[12,12,6,10,"n1"],[12,14,6,12],[12,17,6,15,"Number"],[12,23,6,21],[12,24,6,22,"profile"],[12,31,6,29],[12,33,6,31,"user_id"],[12,40,6,38],[12,41,6,39],[13,6,7,4],[13,10,7,8,"Number"],[13,16,7,14],[13,17,7,15,"isFinite"],[13,25,7,23],[13,26,7,24,"n1"],[13,28,7,26],[13,29,7,27],[13,33,7,31,"n1"],[13,35,7,33],[13,38,7,36],[13,39,7,37],[13,41,7,39],[13,48,7,46,"Math"],[13,52,7,50],[13,53,7,51,"trunc"],[13,58,7,56],[13,59,7,57,"n1"],[13,61,7,59],[13,62,7,60],[14,6,9,4],[14,12,9,10,"n2"],[14,14,9,12],[14,17,9,15,"Number"],[14,23,9,21],[14,24,9,22,"profile"],[14,31,9,29],[14,33,9,31,"id"],[14,35,9,33],[14,36,9,34],[15,6,10,4],[15,10,10,8,"Number"],[15,16,10,14],[15,17,10,15,"isFinite"],[15,25,10,23],[15,26,10,24,"n2"],[15,28,10,26],[15,29,10,27],[15,33,10,31,"n2"],[15,35,10,33],[15,38,10,36],[15,39,10,37],[15,41,10,39],[15,48,10,46,"Math"],[15,52,10,50],[15,53,10,51,"trunc"],[15,58,10,56],[15,59,10,57,"n2"],[15,61,10,59],[15,62,10,60],[16,6,12,4],[16,13,12,11],[16,17,12,15],[17,4,13,2],[17,5,13,3],[17,7,13,5],[17,8,13,6,"profile"],[17,15,13,13],[17,17,13,15,"id"],[17,19,13,17],[17,21,13,19,"profile"],[17,28,13,26],[17,30,13,28,"user_id"],[17,37,13,35],[17,38,13,36],[17,39,13,37],[18,4,15,2],[18,10,15,8,"shouldFetchInsights"],[18,29,15,27],[18,32,16,4,"showDatingInsights"],[18,50,16,22],[18,54,16,26,"Number"],[18,60,16,32],[18,61,16,33,"isFinite"],[18,69,16,41],[18,70,16,42,"targetUserId"],[18,82,16,54],[18,83,16,55],[19,4,18,2],[19,10,18,8,"insightsQuery"],[19,23,18,21],[19,26,18,24],[19,30,18,24,"useQuery"],[19,49,18,32],[19,50,18,32,"useQuery"],[19,58,18,32],[19,60,18,33],[20,6,19,4,"queryKey"],[20,14,19,12],[20,16,19,14],[20,17,19,15],[20,33,19,31],[20,35,19,33],[20,44,19,42],[20,46,19,44,"targetUserId"],[20,58,19,56],[20,59,19,57],[21,6,20,4,"enabled"],[21,13,20,11],[21,15,20,13,"shouldFetchInsights"],[21,34,20,32],[22,6,21,4,"queryFn"],[22,13,21,11],[22,15,21,13],[22,21,21,13,"queryFn"],[22,22,21,13],[22,27,21,25],[23,8,22,6],[23,14,22,12,"resp"],[23,18,22,16],[23,21,22,19],[23,27,22,25,"fetch"],[23,32,22,30],[23,33,23,8],[23,64,23,39,"encodeURIComponent"],[23,82,23,57],[23,83,23,58,"String"],[23,89,23,64],[23,90,23,65,"targetUserId"],[23,102,23,77],[23,103,23,78],[23,104,23,79],[23,106,24,6],[23,107,24,7],[24,8,25,6],[24,12,25,10],[24,13,25,11,"resp"],[24,17,25,15],[24,18,25,16,"ok"],[24,20,25,18],[24,22,25,20],[25,10,26,8],[25,16,26,14],[25,20,26,18,"Error"],[25,25,26,23],[25,26,27,10],[25,83,27,67,"resp"],[25,87,27,71],[25,88,27,72,"status"],[25,94,27,78],[25,99,27,83,"resp"],[25,103,27,87],[25,104,27,88,"statusText"],[25,114,27,98],[25,116,28,8],[25,117,28,9],[26,8,29,6],[27,8,30,6],[27,15,30,13,"resp"],[27,19,30,17],[27,20,30,18,"json"],[27,24,30,22],[27,25,30,23],[27,26,30,24],[28,6,31,4],[28,7,31,5],[29,6,32,4,"staleTime"],[29,15,32,13],[29,17,32,15],[30,4,33,2],[30,5,33,3],[30,6,33,4],[31,4,35,2],[31,10,35,8,"dateHistoryLabel"],[31,26,35,24],[31,29,36,4],[31,36,36,11,"insightsQuery"],[31,49,36,24],[31,50,36,25,"data"],[31,54,36,29],[31,56,36,31,"dateHistoryLabel"],[31,72,36,47],[31,77,36,52],[31,85,36,60],[31,88,37,8,"insightsQuery"],[31,101,37,21],[31,102,37,22,"data"],[31,106,37,26],[31,107,37,27,"dateHistoryLabel"],[31,123,37,43],[31,126,38,8],[31,130,38,12],[32,4,40,2],[32,10,40,8,"followThroughLabel"],[32,28,40,26],[32,31,41,4],[32,38,41,11,"insightsQuery"],[32,51,41,24],[32,52,41,25,"data"],[32,56,41,29],[32,58,41,31,"followThroughLabel"],[32,76,41,49],[32,81,41,54],[32,89,41,62],[32,92,42,8,"insightsQuery"],[32,105,42,21],[32,106,42,22,"data"],[32,110,42,26],[32,111,42,27,"followThroughLabel"],[32,129,42,45],[32,132,43,8],[32,136,43,12],[33,4,45,2],[33,10,45,8,"dateHistoryLine"],[33,25,45,23],[33,28,45,26],[33,32,45,26,"useMemo"],[33,38,45,33],[33,39,45,33,"useMemo"],[33,46,45,33],[33,48,45,34],[33,54,45,40],[34,6,46,4],[34,10,46,8],[34,11,46,9,"showDatingInsights"],[34,29,46,27],[34,31,46,29],[34,38,46,36],[34,42,46,40],[35,6,47,4],[35,10,47,8],[35,11,47,9,"shouldFetchInsights"],[35,30,47,28],[35,32,47,30],[35,39,47,37],[35,43,47,41],[36,6,49,4],[36,10,49,8,"insightsQuery"],[36,23,49,21],[36,24,49,22,"isLoading"],[36,33,49,31],[36,35,49,33],[37,8,50,6],[37,15,50,13],[37,25,50,23],[38,6,51,4],[39,6,53,4],[39,10,53,8,"insightsQuery"],[39,23,53,21],[39,24,53,22,"isError"],[39,31,53,29],[39,33,53,31],[40,8,54,6],[40,15,54,13],[40,28,54,26],[41,6,55,4],[42,6,57,4],[42,13,57,11,"dateHistoryLabel"],[42,29,57,27],[42,33,57,31],[42,51,57,49],[43,4,58,2],[43,5,58,3],[43,7,58,5],[43,8,59,4,"dateHistoryLabel"],[43,24,59,20],[43,26,60,4,"insightsQuery"],[43,39,60,17],[43,40,60,18,"isError"],[43,47,60,25],[43,49,61,4,"insightsQuery"],[43,62,61,17],[43,63,61,18,"isLoading"],[43,72,61,27],[43,74,62,4,"shouldFetchInsights"],[43,93,62,23],[43,95,63,4,"showDatingInsights"],[43,113,63,22],[43,114,64,3],[43,115,64,4],[44,4,66,2],[44,10,66,8,"followThroughLine"],[44,27,66,25],[44,30,66,28],[44,34,66,28,"useMemo"],[44,40,66,35],[44,41,66,35,"useMemo"],[44,48,66,35],[44,50,66,36],[44,56,66,42],[45,6,67,4],[45,10,67,8],[45,11,67,9,"showDatingInsights"],[45,29,67,27],[45,31,67,29],[45,38,67,36],[45,42,67,40],[46,6,68,4],[46,10,68,8],[46,11,68,9,"shouldFetchInsights"],[46,30,68,28],[46,32,68,30],[46,39,68,37],[46,43,68,41],[47,6,70,4],[47,10,70,8,"insightsQuery"],[47,23,70,21],[47,24,70,22,"isLoading"],[47,33,70,31],[47,35,70,33],[48,8,71,6],[48,15,71,13],[48,25,71,23],[49,6,72,4],[50,6,74,4],[50,10,74,8,"insightsQuery"],[50,23,74,21],[50,24,74,22,"isError"],[50,31,74,29],[50,33,74,31],[51,8,75,6],[51,15,75,13],[51,28,75,26],[52,6,76,4],[53,6,78,4],[53,13,78,11,"followThroughLabel"],[53,31,78,29],[53,35,78,33],[53,56,78,54],[54,4,79,2],[54,5,79,3],[54,7,79,5],[54,8,80,4,"followThroughLabel"],[54,26,80,22],[54,28,81,4,"insightsQuery"],[54,41,81,17],[54,42,81,18,"isError"],[54,49,81,25],[54,51,82,4,"insightsQuery"],[54,64,82,17],[54,65,82,18,"isLoading"],[54,74,82,27],[54,76,83,4,"shouldFetchInsights"],[54,95,83,23],[54,97,84,4,"showDatingInsights"],[54,115,84,22],[54,116,85,3],[54,117,85,4],[55,4,87,2],[55,11,87,9],[56,6,88,4,"shouldFetchInsights"],[56,25,88,23],[57,6,89,4,"insightsQuery"],[57,19,89,17],[58,6,90,4,"dateHistoryLine"],[58,21,90,19],[59,6,91,4,"followThroughLine"],[60,4,92,2],[60,5,92,3],[61,2,93,0],[62,0,93,1],[62,3]],"functionMap":{"names":["<global>","useDatingInsights","useMemo$argument_0","useQuery$argument_0.queryFn"],"mappings":"AAA;OCG;+BCC;GDQ;aEQ;KFU;kCCc;GDa;oCCQ;GDa;CDc"},"hasCjsExports":false},"type":"js/module"}]}