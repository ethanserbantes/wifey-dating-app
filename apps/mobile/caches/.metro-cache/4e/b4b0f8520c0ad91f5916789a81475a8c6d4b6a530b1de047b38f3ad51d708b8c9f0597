{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":69,"index":135}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":136},"end":{"line":3,"column":55,"index":191}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useMessagesData = useMessagesData;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _tanstackReactQuery = require(_dependencyMap[2], \"@tanstack/react-query\");\n  function useMessagesData({\n    jwt\n  } = {}) {\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [matches, setMatches] = (0, _react.useState)([]);\n    const [pendingMatchCount, setPendingMatchCount] = (0, _react.useState)(0);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [error, setError] = (0, _react.useState)(null);\n    const queryClient = (0, _tanstackReactQuery.useQueryClient)();\n\n    // NEW: safety valve so the Messages tab can never spin forever.\n    const didFinishInitialLoadRef = (0, _react.useRef)(false);\n\n    // NEW: when we have a web-auth JWT (mobile WebView auth), make sure we are\n    // using the correct legacy `users.id`.\n    const ensureLegacyUserFromJwt = (0, _react.useCallback)(async () => {\n      const token = jwt && typeof jwt === \"string\" ? jwt : null;\n      if (!token) return null;\n      try {\n        const resp = await fetch(\"/api/users/ensure\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!resp.ok) {\n          // Non-fatal: fall back to AsyncStorage.\n          return null;\n        }\n        const data = await resp.json().catch(() => null);\n        const ensured = data?.user || null;\n        const ensuredId = Number(ensured?.id);\n        if (!Number.isFinite(ensuredId)) {\n          return null;\n        }\n        return ensured;\n      } catch (e) {\n        console.error(\"/api/users/ensure failed\", e);\n        return null;\n      }\n    }, [jwt]);\n    const markMatchesSeen = (0, _react.useCallback)(async userId => {\n      try {\n        const resp = await fetch(\"/api/matches/mark-seen\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            userId\n          })\n        });\n        if (resp.ok) {\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesForBadge\", userId]\n          });\n          queryClient.invalidateQueries({\n            queryKey: [\"matchesSummary\", userId]\n          });\n        }\n      } catch (e) {\n        console.error(\"Could not mark matches seen\", e);\n      }\n    }, [queryClient]);\n    const fetchWithTimeout = (0, _react.useCallback)(async (url, options, timeoutMs) => {\n      // NOTE: AbortController support varies across RN runtimes.\n      // Promise.race guarantees we never hang on a stuck network call.\n      const controller = typeof AbortController !== \"undefined\" ? new AbortController() : null;\n      let timeoutId = null;\n      const fetchPromise = fetch(url, {\n        ...(options || {}),\n        ...(controller ? {\n          signal: controller.signal\n        } : {})\n      }).finally(() => {\n        if (timeoutId != null) {\n          clearTimeout(timeoutId);\n        }\n      });\n      const timeoutPromise = new Promise((_, reject) => {\n        timeoutId = setTimeout(() => {\n          try {\n            controller?.abort();\n          } catch {\n            // ignore\n          }\n          const err = new Error(`Request timed out after ${timeoutMs}ms`);\n          err.name = \"TimeoutError\";\n          reject(err);\n        }, timeoutMs);\n      });\n      return Promise.race([fetchPromise, timeoutPromise]);\n    }, []);\n    const loadMatches = (0, _react.useCallback)(async userId => {\n      try {\n        setError(null);\n        const response = await fetchWithTimeout(`/api/matches?userId=${userId}`, null, 12000);\n        if (!response.ok) {\n          throw new Error(`When fetching /api/matches, the response was [${response.status}] ${response.statusText}`);\n        }\n        const data = await response.json();\n        const list = data.matches || [];\n        setMatches(list);\n        setPendingMatchCount(Number(data?.pendingMatchCount) || 0);\n        return list;\n      } catch (err) {\n        const isTimeout = String(err?.name || \"\").toLowerCase() === \"timeouterror\";\n        console.error(\"Error loading matches:\", err);\n        setError(isTimeout ? \"Messages are taking too long to load. Please try again.\" : \"Could not load matches. Please try again.\");\n        return [];\n      }\n    }, [fetchWithTimeout]);\n    const loadUserAndMatches = (0, _react.useCallback)(async () => {\n      try {\n        setError(null);\n        const ensured = await ensureLegacyUserFromJwt();\n        const userData = await AsyncStorage.default.getItem(\"user\");\n        const parsedUser = userData ? JSON.parse(userData) : null;\n\n        // Prefer ensured legacy id when available (keeps date credits + matches in sync).\n        let nextUser = parsedUser;\n        if (ensured) {\n          nextUser = {\n            ...(parsedUser || {}),\n            ...ensured,\n            id: ensured.id\n          };\n          try {\n            await AsyncStorage.default.setItem(\"user\", JSON.stringify(nextUser));\n          } catch (e) {\n            console.error(\"Could not persist ensured user\", e);\n          }\n        }\n        if (!nextUser) {\n          setUser(null);\n          setMatches([]);\n          setPendingMatchCount(0);\n          return;\n        }\n        setUser(nextUser);\n        const uid = Number(nextUser?.id);\n        if (!Number.isFinite(uid)) {\n          setError(\"Could not load messages (missing user id). Please sign in again.\");\n          return;\n        }\n\n        // IMPORTANT: never block the whole screen on mark-seen.\n        markMatchesSeen(uid).catch(() => null);\n        await loadMatches(uid);\n      } catch (error) {\n        console.error(\"Error loading user:\", error);\n        setError(\"Could not load messages. Please try again.\");\n      } finally {\n        didFinishInitialLoadRef.current = true;\n        setLoading(false);\n      }\n    }, [ensureLegacyUserFromJwt, loadMatches, markMatchesSeen]);\n    (0, _react.useEffect)(() => {\n      loadUserAndMatches();\n    }, [loadUserAndMatches]);\n    (0, _react.useEffect)(() => {\n      // If something in RN fetch/AsyncStorage ever gets into a weird state,\n      // we still stop the spinner and show an error.\n      const watchdogMs = 15000;\n      const id = setTimeout(() => {\n        if (didFinishInitialLoadRef.current) {\n          return;\n        }\n        console.error(`Messages watchdog fired after ${watchdogMs}ms (forcing loading=false).`);\n        setError(\"Messages are taking too long to load. Please try again.\");\n        setLoading(false);\n      }, watchdogMs);\n      return () => clearTimeout(id);\n    }, []);\n    return {\n      loading,\n      matches,\n      pendingMatchCount,\n      user,\n      error,\n      loadMatches,\n      markMatchesSeen\n    };\n  }\n});","lineCount":200,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useMessagesData"],[12,25,5,0],[12,28,5,0,"useMessagesData"],[12,43,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[14,42,2,0],[14,45,2,0,"require"],[14,52,2,0],[14,53,2,0,"_dependencyMap"],[14,67,2,0],[15,2,2,0],[15,6,2,0,"AsyncStorage"],[15,18,2,0],[15,21,2,0,"_interopDefault"],[15,36,2,0],[15,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[15,73,2,0],[16,2,3,0],[16,6,3,0,"_tanstackReactQuery"],[16,25,3,0],[16,28,3,0,"require"],[16,35,3,0],[16,36,3,0,"_dependencyMap"],[16,50,3,0],[17,2,5,7],[17,11,5,16,"useMessagesData"],[17,26,5,31,"useMessagesData"],[17,27,5,32],[18,4,5,34,"jwt"],[19,2,5,38],[19,3,5,39],[19,6,5,42],[19,7,5,43],[19,8,5,44],[19,10,5,46],[20,4,6,2],[20,10,6,8],[20,11,6,9,"loading"],[20,18,6,16],[20,20,6,18,"setLoading"],[20,30,6,28],[20,31,6,29],[20,34,6,32],[20,38,6,32,"useState"],[20,44,6,40],[20,45,6,40,"useState"],[20,53,6,40],[20,55,6,41],[20,59,6,45],[20,60,6,46],[21,4,7,2],[21,10,7,8],[21,11,7,9,"matches"],[21,18,7,16],[21,20,7,18,"setMatches"],[21,30,7,28],[21,31,7,29],[21,34,7,32],[21,38,7,32,"useState"],[21,44,7,40],[21,45,7,40,"useState"],[21,53,7,40],[21,55,7,41],[21,57,7,43],[21,58,7,44],[22,4,8,2],[22,10,8,8],[22,11,8,9,"pendingMatchCount"],[22,28,8,26],[22,30,8,28,"setPendingMatchCount"],[22,50,8,48],[22,51,8,49],[22,54,8,52],[22,58,8,52,"useState"],[22,64,8,60],[22,65,8,60,"useState"],[22,73,8,60],[22,75,8,61],[22,76,8,62],[22,77,8,63],[23,4,9,2],[23,10,9,8],[23,11,9,9,"user"],[23,15,9,13],[23,17,9,15,"setUser"],[23,24,9,22],[23,25,9,23],[23,28,9,26],[23,32,9,26,"useState"],[23,38,9,34],[23,39,9,34,"useState"],[23,47,9,34],[23,49,9,35],[23,53,9,39],[23,54,9,40],[24,4,10,2],[24,10,10,8],[24,11,10,9,"error"],[24,16,10,14],[24,18,10,16,"setError"],[24,26,10,24],[24,27,10,25],[24,30,10,28],[24,34,10,28,"useState"],[24,40,10,36],[24,41,10,36,"useState"],[24,49,10,36],[24,51,10,37],[24,55,10,41],[24,56,10,42],[25,4,11,2],[25,10,11,8,"queryClient"],[25,21,11,19],[25,24,11,22],[25,28,11,22,"useQueryClient"],[25,47,11,36],[25,48,11,36,"useQueryClient"],[25,62,11,36],[25,64,11,37],[25,65,11,38],[27,4,13,2],[28,4,14,2],[28,10,14,8,"didFinishInitialLoadRef"],[28,33,14,31],[28,36,14,34],[28,40,14,34,"useRef"],[28,46,14,40],[28,47,14,40,"useRef"],[28,53,14,40],[28,55,14,41],[28,60,14,46],[28,61,14,47],[30,4,16,2],[31,4,17,2],[32,4,18,2],[32,10,18,8,"ensureLegacyUserFromJwt"],[32,33,18,31],[32,36,18,34],[32,40,18,34,"useCallback"],[32,46,18,45],[32,47,18,45,"useCallback"],[32,58,18,45],[32,60,18,46],[32,72,18,58],[33,6,19,4],[33,12,19,10,"token"],[33,17,19,15],[33,20,19,18,"jwt"],[33,23,19,21],[33,27,19,25],[33,34,19,32,"jwt"],[33,37,19,35],[33,42,19,40],[33,50,19,48],[33,53,19,51,"jwt"],[33,56,19,54],[33,59,19,57],[33,63,19,61],[34,6,20,4],[34,10,20,8],[34,11,20,9,"token"],[34,16,20,14],[34,18,20,16],[34,25,20,23],[34,29,20,27],[35,6,22,4],[35,10,22,8],[36,8,23,6],[36,14,23,12,"resp"],[36,18,23,16],[36,21,23,19],[36,27,23,25,"fetch"],[36,32,23,30],[36,33,23,31],[36,52,23,50],[36,54,23,52],[37,10,24,8,"headers"],[37,17,24,15],[37,19,24,17],[38,12,24,19,"Authorization"],[38,25,24,32],[38,27,24,34],[38,37,24,44,"token"],[38,42,24,49],[39,10,24,52],[40,8,25,6],[40,9,25,7],[40,10,25,8],[41,8,27,6],[41,12,27,10],[41,13,27,11,"resp"],[41,17,27,15],[41,18,27,16,"ok"],[41,20,27,18],[41,22,27,20],[42,10,28,8],[43,10,29,8],[43,17,29,15],[43,21,29,19],[44,8,30,6],[45,8,32,6],[45,14,32,12,"data"],[45,18,32,16],[45,21,32,19],[45,27,32,25,"resp"],[45,31,32,29],[45,32,32,30,"json"],[45,36,32,34],[45,37,32,35],[45,38,32,36],[45,39,32,37,"catch"],[45,44,32,42],[45,45,32,43],[45,51,32,49],[45,55,32,53],[45,56,32,54],[46,8,33,6],[46,14,33,12,"ensured"],[46,21,33,19],[46,24,33,22,"data"],[46,28,33,26],[46,30,33,28,"user"],[46,34,33,32],[46,38,33,36],[46,42,33,40],[47,8,35,6],[47,14,35,12,"ensuredId"],[47,23,35,21],[47,26,35,24,"Number"],[47,32,35,30],[47,33,35,31,"ensured"],[47,40,35,38],[47,42,35,40,"id"],[47,44,35,42],[47,45,35,43],[48,8,36,6],[48,12,36,10],[48,13,36,11,"Number"],[48,19,36,17],[48,20,36,18,"isFinite"],[48,28,36,26],[48,29,36,27,"ensuredId"],[48,38,36,36],[48,39,36,37],[48,41,36,39],[49,10,37,8],[49,17,37,15],[49,21,37,19],[50,8,38,6],[51,8,40,6],[51,15,40,13,"ensured"],[51,22,40,20],[52,6,41,4],[52,7,41,5],[52,8,41,6],[52,15,41,13,"e"],[52,16,41,14],[52,18,41,16],[53,8,42,6,"console"],[53,15,42,13],[53,16,42,14,"error"],[53,21,42,19],[53,22,42,20],[53,48,42,46],[53,50,42,48,"e"],[53,51,42,49],[53,52,42,50],[54,8,43,6],[54,15,43,13],[54,19,43,17],[55,6,44,4],[56,4,45,2],[56,5,45,3],[56,7,45,5],[56,8,45,6,"jwt"],[56,11,45,9],[56,12,45,10],[56,13,45,11],[57,4,47,2],[57,10,47,8,"markMatchesSeen"],[57,25,47,23],[57,28,47,26],[57,32,47,26,"useCallback"],[57,38,47,37],[57,39,47,37,"useCallback"],[57,50,47,37],[57,52,48,4],[57,58,48,11,"userId"],[57,64,48,17],[57,68,48,22],[58,6,49,6],[58,10,49,10],[59,8,50,8],[59,14,50,14,"resp"],[59,18,50,18],[59,21,50,21],[59,27,50,27,"fetch"],[59,32,50,32],[59,33,50,33],[59,57,50,57],[59,59,50,59],[60,10,51,10,"method"],[60,16,51,16],[60,18,51,18],[60,24,51,24],[61,10,52,10,"headers"],[61,17,52,17],[61,19,52,19],[62,12,52,21],[62,26,52,35],[62,28,52,37],[63,10,52,56],[63,11,52,57],[64,10,53,10,"body"],[64,14,53,14],[64,16,53,16,"JSON"],[64,20,53,20],[64,21,53,21,"stringify"],[64,30,53,30],[64,31,53,31],[65,12,53,33,"userId"],[66,10,53,40],[66,11,53,41],[67,8,54,8],[67,9,54,9],[67,10,54,10],[68,8,55,8],[68,12,55,12,"resp"],[68,16,55,16],[68,17,55,17,"ok"],[68,19,55,19],[68,21,55,21],[69,10,56,10,"queryClient"],[69,21,56,21],[69,22,56,22,"invalidateQueries"],[69,39,56,39],[69,40,56,40],[70,12,57,12,"queryKey"],[70,20,57,20],[70,22,57,22],[70,23,57,23],[70,40,57,40],[70,42,57,42,"userId"],[70,48,57,48],[71,10,58,10],[71,11,58,11],[71,12,58,12],[72,10,59,10,"queryClient"],[72,21,59,21],[72,22,59,22,"invalidateQueries"],[72,39,59,39],[72,40,59,40],[73,12,60,12,"queryKey"],[73,20,60,20],[73,22,60,22],[73,23,60,23],[73,39,60,39],[73,41,60,41,"userId"],[73,47,60,47],[74,10,61,10],[74,11,61,11],[74,12,61,12],[75,8,62,8],[76,6,63,6],[76,7,63,7],[76,8,63,8],[76,15,63,15,"e"],[76,16,63,16],[76,18,63,18],[77,8,64,8,"console"],[77,15,64,15],[77,16,64,16,"error"],[77,21,64,21],[77,22,64,22],[77,51,64,51],[77,53,64,53,"e"],[77,54,64,54],[77,55,64,55],[78,6,65,6],[79,4,66,4],[79,5,66,5],[79,7,67,4],[79,8,67,5,"queryClient"],[79,19,67,16],[79,20,68,2],[79,21,68,3],[80,4,70,2],[80,10,70,8,"fetchWithTimeout"],[80,26,70,24],[80,29,70,27],[80,33,70,27,"useCallback"],[80,39,70,38],[80,40,70,38,"useCallback"],[80,51,70,38],[80,53,70,39],[80,60,70,46,"url"],[80,63,70,49],[80,65,70,51,"options"],[80,72,70,58],[80,74,70,60,"timeoutMs"],[80,83,70,69],[80,88,70,74],[81,6,71,4],[82,6,72,4],[83,6,73,4],[83,12,73,10,"controller"],[83,22,73,20],[83,25,74,6],[83,32,74,13,"AbortController"],[83,47,74,28],[83,52,74,33],[83,63,74,44],[83,66,74,47],[83,70,74,51,"AbortController"],[83,85,74,66],[83,86,74,67],[83,87,74,68],[83,90,74,71],[83,94,74,75],[84,6,76,4],[84,10,76,8,"timeoutId"],[84,19,76,17],[84,22,76,20],[84,26,76,24],[85,6,78,4],[85,12,78,10,"fetchPromise"],[85,24,78,22],[85,27,78,25,"fetch"],[85,32,78,30],[85,33,78,31,"url"],[85,36,78,34],[85,38,78,36],[86,8,79,6],[86,12,79,10,"options"],[86,19,79,17],[86,23,79,21],[86,24,79,22],[86,25,79,23],[86,26,79,24],[87,8,80,6],[87,12,80,10,"controller"],[87,22,80,20],[87,25,80,23],[88,10,80,25,"signal"],[88,16,80,31],[88,18,80,33,"controller"],[88,28,80,43],[88,29,80,44,"signal"],[89,8,80,51],[89,9,80,52],[89,12,80,55],[89,13,80,56],[89,14,80,57],[90,6,81,4],[90,7,81,5],[90,8,81,6],[90,9,81,7,"finally"],[90,16,81,14],[90,17,81,15],[90,23,81,21],[91,8,82,6],[91,12,82,10,"timeoutId"],[91,21,82,19],[91,25,82,23],[91,29,82,27],[91,31,82,29],[92,10,83,8,"clearTimeout"],[92,22,83,20],[92,23,83,21,"timeoutId"],[92,32,83,30],[92,33,83,31],[93,8,84,6],[94,6,85,4],[94,7,85,5],[94,8,85,6],[95,6,87,4],[95,12,87,10,"timeoutPromise"],[95,26,87,24],[95,29,87,27],[95,33,87,31,"Promise"],[95,40,87,38],[95,41,87,39],[95,42,87,40,"_"],[95,43,87,41],[95,45,87,43,"reject"],[95,51,87,49],[95,56,87,54],[96,8,88,6,"timeoutId"],[96,17,88,15],[96,20,88,18,"setTimeout"],[96,30,88,28],[96,31,88,29],[96,37,88,35],[97,10,89,8],[97,14,89,12],[98,12,90,10,"controller"],[98,22,90,20],[98,24,90,22,"abort"],[98,29,90,27],[98,30,90,28],[98,31,90,29],[99,10,91,8],[99,11,91,9],[99,12,91,10],[99,18,91,16],[100,12,92,10],[101,10,92,10],[102,10,94,8],[102,16,94,14,"err"],[102,19,94,17],[102,22,94,20],[102,26,94,24,"Error"],[102,31,94,29],[102,32,94,30],[102,59,94,57,"timeoutMs"],[102,68,94,66],[102,72,94,70],[102,73,94,71],[103,10,95,8,"err"],[103,13,95,11],[103,14,95,12,"name"],[103,18,95,16],[103,21,95,19],[103,35,95,33],[104,10,96,8,"reject"],[104,16,96,14],[104,17,96,15,"err"],[104,20,96,18],[104,21,96,19],[105,8,97,6],[105,9,97,7],[105,11,97,9,"timeoutMs"],[105,20,97,18],[105,21,97,19],[106,6,98,4],[106,7,98,5],[106,8,98,6],[107,6,100,4],[107,13,100,11,"Promise"],[107,20,100,18],[107,21,100,19,"race"],[107,25,100,23],[107,26,100,24],[107,27,100,25,"fetchPromise"],[107,39,100,37],[107,41,100,39,"timeoutPromise"],[107,55,100,53],[107,56,100,54],[107,57,100,55],[108,4,101,2],[108,5,101,3],[108,7,101,5],[108,9,101,7],[108,10,101,8],[109,4,103,2],[109,10,103,8,"loadMatches"],[109,21,103,19],[109,24,103,22],[109,28,103,22,"useCallback"],[109,34,103,33],[109,35,103,33,"useCallback"],[109,46,103,33],[109,48,104,4],[109,54,104,11,"userId"],[109,60,104,17],[109,64,104,22],[110,6,105,6],[110,10,105,10],[111,8,106,8,"setError"],[111,16,106,16],[111,17,106,17],[111,21,106,21],[111,22,106,22],[112,8,107,8],[112,14,107,14,"response"],[112,22,107,22],[112,25,107,25],[112,31,107,31,"fetchWithTimeout"],[112,47,107,47],[112,48,108,10],[112,71,108,33,"userId"],[112,77,108,39],[112,79,108,41],[112,81,109,10],[112,85,109,14],[112,87,110,10],[112,92,111,8],[112,93,111,9],[113,8,112,8],[113,12,112,12],[113,13,112,13,"response"],[113,21,112,21],[113,22,112,22,"ok"],[113,24,112,24],[113,26,112,26],[114,10,113,10],[114,16,113,16],[114,20,113,20,"Error"],[114,25,113,25],[114,26,114,12],[114,75,114,61,"response"],[114,83,114,69],[114,84,114,70,"status"],[114,90,114,76],[114,95,114,81,"response"],[114,103,114,89],[114,104,114,90,"statusText"],[114,114,114,100],[114,116,115,10],[114,117,115,11],[115,8,116,8],[116,8,117,8],[116,14,117,14,"data"],[116,18,117,18],[116,21,117,21],[116,27,117,27,"response"],[116,35,117,35],[116,36,117,36,"json"],[116,40,117,40],[116,41,117,41],[116,42,117,42],[117,8,118,8],[117,14,118,14,"list"],[117,18,118,18],[117,21,118,21,"data"],[117,25,118,25],[117,26,118,26,"matches"],[117,33,118,33],[117,37,118,37],[117,39,118,39],[118,8,119,8,"setMatches"],[118,18,119,18],[118,19,119,19,"list"],[118,23,119,23],[118,24,119,24],[119,8,120,8,"setPendingMatchCount"],[119,28,120,28],[119,29,120,29,"Number"],[119,35,120,35],[119,36,120,36,"data"],[119,40,120,40],[119,42,120,42,"pendingMatchCount"],[119,59,120,59],[119,60,120,60],[119,64,120,64],[119,65,120,65],[119,66,120,66],[120,8,121,8],[120,15,121,15,"list"],[120,19,121,19],[121,6,122,6],[121,7,122,7],[121,8,122,8],[121,15,122,15,"err"],[121,18,122,18],[121,20,122,20],[122,8,123,8],[122,14,123,14,"isTimeout"],[122,23,123,23],[122,26,124,10,"String"],[122,32,124,16],[122,33,124,17,"err"],[122,36,124,20],[122,38,124,22,"name"],[122,42,124,26],[122,46,124,30],[122,48,124,32],[122,49,124,33],[122,50,124,34,"toLowerCase"],[122,61,124,45],[122,62,124,46],[122,63,124,47],[122,68,124,52],[122,82,124,66],[123,8,126,8,"console"],[123,15,126,15],[123,16,126,16,"error"],[123,21,126,21],[123,22,126,22],[123,46,126,46],[123,48,126,48,"err"],[123,51,126,51],[123,52,126,52],[124,8,127,8,"setError"],[124,16,127,16],[124,17,128,10,"isTimeout"],[124,26,128,19],[124,29,129,14],[124,86,129,71],[124,89,130,14],[124,132,131,8],[124,133,131,9],[125,8,132,8],[125,15,132,15],[125,17,132,17],[126,6,133,6],[127,4,134,4],[127,5,134,5],[127,7,135,4],[127,8,135,5,"fetchWithTimeout"],[127,24,135,21],[127,25,136,2],[127,26,136,3],[128,4,138,2],[128,10,138,8,"loadUserAndMatches"],[128,28,138,26],[128,31,138,29],[128,35,138,29,"useCallback"],[128,41,138,40],[128,42,138,40,"useCallback"],[128,53,138,40],[128,55,138,41],[128,67,138,53],[129,6,139,4],[129,10,139,8],[130,8,140,6,"setError"],[130,16,140,14],[130,17,140,15],[130,21,140,19],[130,22,140,20],[131,8,142,6],[131,14,142,12,"ensured"],[131,21,142,19],[131,24,142,22],[131,30,142,28,"ensureLegacyUserFromJwt"],[131,53,142,51],[131,54,142,52],[131,55,142,53],[132,8,144,6],[132,14,144,12,"userData"],[132,22,144,20],[132,25,144,23],[132,31,144,29,"AsyncStorage"],[132,43,144,41],[132,44,144,41,"default"],[132,51,144,41],[132,52,144,42,"getItem"],[132,59,144,49],[132,60,144,50],[132,66,144,56],[132,67,144,57],[133,8,145,6],[133,14,145,12,"parsedUser"],[133,24,145,22],[133,27,145,25,"userData"],[133,35,145,33],[133,38,145,36,"JSON"],[133,42,145,40],[133,43,145,41,"parse"],[133,48,145,46],[133,49,145,47,"userData"],[133,57,145,55],[133,58,145,56],[133,61,145,59],[133,65,145,63],[135,8,147,6],[136,8,148,6],[136,12,148,10,"nextUser"],[136,20,148,18],[136,23,148,21,"parsedUser"],[136,33,148,31],[137,8,149,6],[137,12,149,10,"ensured"],[137,19,149,17],[137,21,149,19],[138,10,150,8,"nextUser"],[138,18,150,16],[138,21,150,19],[139,12,151,10],[139,16,151,14,"parsedUser"],[139,26,151,24],[139,30,151,28],[139,31,151,29],[139,32,151,30],[139,33,151,31],[140,12,152,10],[140,15,152,13,"ensured"],[140,22,152,20],[141,12,153,10,"id"],[141,14,153,12],[141,16,153,14,"ensured"],[141,23,153,21],[141,24,153,22,"id"],[142,10,154,8],[142,11,154,9],[143,10,156,8],[143,14,156,12],[144,12,157,10],[144,18,157,16,"AsyncStorage"],[144,30,157,28],[144,31,157,28,"default"],[144,38,157,28],[144,39,157,29,"setItem"],[144,46,157,36],[144,47,157,37],[144,53,157,43],[144,55,157,45,"JSON"],[144,59,157,49],[144,60,157,50,"stringify"],[144,69,157,59],[144,70,157,60,"nextUser"],[144,78,157,68],[144,79,157,69],[144,80,157,70],[145,10,158,8],[145,11,158,9],[145,12,158,10],[145,19,158,17,"e"],[145,20,158,18],[145,22,158,20],[146,12,159,10,"console"],[146,19,159,17],[146,20,159,18,"error"],[146,25,159,23],[146,26,159,24],[146,58,159,56],[146,60,159,58,"e"],[146,61,159,59],[146,62,159,60],[147,10,160,8],[148,8,161,6],[149,8,163,6],[149,12,163,10],[149,13,163,11,"nextUser"],[149,21,163,19],[149,23,163,21],[150,10,164,8,"setUser"],[150,17,164,15],[150,18,164,16],[150,22,164,20],[150,23,164,21],[151,10,165,8,"setMatches"],[151,20,165,18],[151,21,165,19],[151,23,165,21],[151,24,165,22],[152,10,166,8,"setPendingMatchCount"],[152,30,166,28],[152,31,166,29],[152,32,166,30],[152,33,166,31],[153,10,167,8],[154,8,168,6],[155,8,170,6,"setUser"],[155,15,170,13],[155,16,170,14,"nextUser"],[155,24,170,22],[155,25,170,23],[156,8,172,6],[156,14,172,12,"uid"],[156,17,172,15],[156,20,172,18,"Number"],[156,26,172,24],[156,27,172,25,"nextUser"],[156,35,172,33],[156,37,172,35,"id"],[156,39,172,37],[156,40,172,38],[157,8,173,6],[157,12,173,10],[157,13,173,11,"Number"],[157,19,173,17],[157,20,173,18,"isFinite"],[157,28,173,26],[157,29,173,27,"uid"],[157,32,173,30],[157,33,173,31],[157,35,173,33],[158,10,174,8,"setError"],[158,18,174,16],[158,19,175,10],[158,85,176,8],[158,86,176,9],[159,10,177,8],[160,8,178,6],[162,8,180,6],[163,8,181,6,"markMatchesSeen"],[163,23,181,21],[163,24,181,22,"uid"],[163,27,181,25],[163,28,181,26],[163,29,181,27,"catch"],[163,34,181,32],[163,35,181,33],[163,41,181,39],[163,45,181,43],[163,46,181,44],[164,8,183,6],[164,14,183,12,"loadMatches"],[164,25,183,23],[164,26,183,24,"uid"],[164,29,183,27],[164,30,183,28],[165,6,184,4],[165,7,184,5],[165,8,184,6],[165,15,184,13,"error"],[165,20,184,18],[165,22,184,20],[166,8,185,6,"console"],[166,15,185,13],[166,16,185,14,"error"],[166,21,185,19],[166,22,185,20],[166,43,185,41],[166,45,185,43,"error"],[166,50,185,48],[166,51,185,49],[167,8,186,6,"setError"],[167,16,186,14],[167,17,186,15],[167,61,186,59],[167,62,186,60],[168,6,187,4],[168,7,187,5],[168,16,187,14],[169,8,188,6,"didFinishInitialLoadRef"],[169,31,188,29],[169,32,188,30,"current"],[169,39,188,37],[169,42,188,40],[169,46,188,44],[170,8,189,6,"setLoading"],[170,18,189,16],[170,19,189,17],[170,24,189,22],[170,25,189,23],[171,6,190,4],[172,4,191,2],[172,5,191,3],[172,7,191,5],[172,8,191,6,"ensureLegacyUserFromJwt"],[172,31,191,29],[172,33,191,31,"loadMatches"],[172,44,191,42],[172,46,191,44,"markMatchesSeen"],[172,61,191,59],[172,62,191,60],[172,63,191,61],[173,4,193,2],[173,8,193,2,"useEffect"],[173,14,193,11],[173,15,193,11,"useEffect"],[173,24,193,11],[173,26,193,12],[173,32,193,18],[174,6,194,4,"loadUserAndMatches"],[174,24,194,22],[174,25,194,23],[174,26,194,24],[175,4,195,2],[175,5,195,3],[175,7,195,5],[175,8,195,6,"loadUserAndMatches"],[175,26,195,24],[175,27,195,25],[175,28,195,26],[176,4,197,2],[176,8,197,2,"useEffect"],[176,14,197,11],[176,15,197,11,"useEffect"],[176,24,197,11],[176,26,197,12],[176,32,197,18],[177,6,198,4],[178,6,199,4],[179,6,200,4],[179,12,200,10,"watchdogMs"],[179,22,200,20],[179,25,200,23],[179,30,200,28],[180,6,201,4],[180,12,201,10,"id"],[180,14,201,12],[180,17,201,15,"setTimeout"],[180,27,201,25],[180,28,201,26],[180,34,201,32],[181,8,202,6],[181,12,202,10,"didFinishInitialLoadRef"],[181,35,202,33],[181,36,202,34,"current"],[181,43,202,41],[181,45,202,43],[182,10,203,8],[183,8,204,6],[184,8,205,6,"console"],[184,15,205,13],[184,16,205,14,"error"],[184,21,205,19],[184,22,206,8],[184,55,206,41,"watchdogMs"],[184,65,206,51],[184,94,207,6],[184,95,207,7],[185,8,208,6,"setError"],[185,16,208,14],[185,17,208,15],[185,74,208,72],[185,75,208,73],[186,8,209,6,"setLoading"],[186,18,209,16],[186,19,209,17],[186,24,209,22],[186,25,209,23],[187,6,210,4],[187,7,210,5],[187,9,210,7,"watchdogMs"],[187,19,210,17],[187,20,210,18],[188,6,212,4],[188,13,212,11],[188,19,212,17,"clearTimeout"],[188,31,212,29],[188,32,212,30,"id"],[188,34,212,32],[188,35,212,33],[189,4,213,2],[189,5,213,3],[189,7,213,5],[189,9,213,7],[189,10,213,8],[190,4,215,2],[190,11,215,9],[191,6,216,4,"loading"],[191,13,216,11],[192,6,217,4,"matches"],[192,13,217,11],[193,6,218,4,"pendingMatchCount"],[193,23,218,21],[194,6,219,4,"user"],[194,10,219,8],[195,6,220,4,"error"],[195,11,220,9],[196,6,221,4,"loadMatches"],[196,17,221,15],[197,6,222,4,"markMatchesSeen"],[198,4,223,2],[198,5,223,3],[199,2,224,0],[200,0,224,1],[200,3]],"functionMap":{"names":["<global>","useMessagesData","ensureLegacyUserFromJwt","resp.json._catch$argument_0","markMatchesSeen","fetchWithTimeout","fetch._finally$argument_0","Promise$argument_0","setTimeout$argument_0","loadMatches","loadUserAndMatches","markMatchesSeen._catch$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;8CCa;2CCc,UD;GDa;IGG;KHkB;uCII;eCW;KDI;uCEE;6BCC;ODS;KFC;GJG;IQG;KR8B;yCSI;iCC2C,UD;GTU;YWE;GXE;YWE;0BJI;KIS;WCE,sBD;GXC;CDW"},"hasCjsExports":false},"type":"js/module"}]}