{"dependencies":[{"name":"./onCacheWrite","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":21,"index":98},"end":{"line":3,"column":46,"index":123}}],"key":"C1gITbPi5SqQkitZneYYHcu7mK8=","exportNames":["*"],"imports":1}},{"name":"./onAppBackground","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":24,"index":149},"end":{"line":4,"column":52,"index":177}}],"key":"0AnvsOLDuZ2weHnpmtMFcBa6Ti4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var onCacheWrite_1 = require(_dependencyMap[0]);\n  var onAppBackground_1 = require(_dependencyMap[1]);\n  var Trigger = function () {\n    function Trigger(_a, options) {\n      var log = _a.log,\n        persistor = _a.persistor;\n      var _this = this;\n      this.fire = function () {\n        if (!_this.debounce) {\n          _this.persist();\n          return;\n        }\n        if (_this.timeout != null) {\n          clearTimeout(_this.timeout);\n        }\n        _this.timeout = setTimeout(_this.persist, _this.debounce);\n      };\n      this.persist = function () {\n        if (_this.paused) {\n          return;\n        }\n        _this.persistor.persist();\n      };\n      var defaultDebounce = Trigger.defaultDebounce;\n      var cache = options.cache,\n        debounce = options.debounce,\n        _b = options.trigger,\n        trigger = _b === undefined ? 'write' : _b;\n      if (!trigger) {\n        return;\n      }\n      this.debounce = debounce != null ? debounce : defaultDebounce;\n      this.persistor = persistor;\n      this.paused = false;\n      switch (trigger) {\n        case 'write':\n          this.uninstall = (0, onCacheWrite_1.default)({\n            cache: cache\n          })(this.fire);\n          break;\n        case 'background':\n          if (debounce) {\n            log.warn('Debounce is not recommended with `background` trigger');\n          }\n          this.debounce = debounce;\n          this.uninstall = (0, onAppBackground_1.default)({\n            cache: cache,\n            log: log\n          })(this.fire);\n          break;\n        default:\n          if (typeof trigger === 'function') {\n            this.uninstall = trigger(this.fire);\n          } else {\n            throw Error(\"Unrecognized trigger option: \".concat(trigger));\n          }\n      }\n    }\n    Trigger.prototype.pause = function () {\n      this.paused = true;\n    };\n    Trigger.prototype.resume = function () {\n      this.paused = false;\n    };\n    Trigger.prototype.remove = function () {\n      if (this.uninstall) {\n        this.uninstall();\n        this.uninstall = null;\n        this.paused = true;\n      }\n    };\n    Trigger.defaultDebounce = 1000;\n    return Trigger;\n  }();\n  exports.default = Trigger;\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0],[7,6,3,4,"onCacheWrite_1"],[7,20,3,18],[7,23,3,21,"require"],[7,30,3,28],[7,31,3,28,"_dependencyMap"],[7,45,3,28],[7,48,3,45],[7,49,3,46],[8,2,4,0],[8,6,4,4,"onAppBackground_1"],[8,23,4,21],[8,26,4,24,"require"],[8,33,4,31],[8,34,4,31,"_dependencyMap"],[8,48,4,31],[8,51,4,51],[8,52,4,52],[9,2,5,0],[9,6,5,4,"Trigger"],[9,13,5,11],[9,16,5,15],[9,28,5,27],[10,4,6,4],[10,13,6,13,"Trigger"],[10,20,6,20,"Trigger"],[10,21,6,21,"_a"],[10,23,6,23],[10,25,6,25,"options"],[10,32,6,32],[10,34,6,34],[11,6,7,8],[11,10,7,12,"log"],[11,13,7,15],[11,16,7,18,"_a"],[11,18,7,20],[11,19,7,21,"log"],[11,22,7,24],[12,8,7,26,"persistor"],[12,17,7,35],[12,20,7,38,"_a"],[12,22,7,40],[12,23,7,41,"persistor"],[12,32,7,50],[13,6,8,8],[13,10,8,12,"_this"],[13,15,8,17],[13,18,8,20],[13,22,8,24],[14,6,9,8],[14,10,9,12],[14,11,9,13,"fire"],[14,15,9,17],[14,18,9,20],[14,30,9,32],[15,8,10,12],[15,12,10,16],[15,13,10,17,"_this"],[15,18,10,22],[15,19,10,23,"debounce"],[15,27,10,31],[15,29,10,33],[16,10,11,16,"_this"],[16,15,11,21],[16,16,11,22,"persist"],[16,23,11,29],[16,24,11,30],[16,25,11,31],[17,10,12,16],[18,8,13,12],[19,8,14,12],[19,12,14,16,"_this"],[19,17,14,21],[19,18,14,22,"timeout"],[19,25,14,29],[19,29,14,33],[19,33,14,37],[19,35,14,39],[20,10,15,16,"clearTimeout"],[20,22,15,28],[20,23,15,29,"_this"],[20,28,15,34],[20,29,15,35,"timeout"],[20,36,15,42],[20,37,15,43],[21,8,16,12],[22,8,17,12,"_this"],[22,13,17,17],[22,14,17,18,"timeout"],[22,21,17,25],[22,24,17,28,"setTimeout"],[22,34,17,38],[22,35,17,39,"_this"],[22,40,17,44],[22,41,17,45,"persist"],[22,48,17,52],[22,50,17,54,"_this"],[22,55,17,59],[22,56,17,60,"debounce"],[22,64,17,68],[22,65,17,69],[23,6,18,8],[23,7,18,9],[24,6,19,8],[24,10,19,12],[24,11,19,13,"persist"],[24,18,19,20],[24,21,19,23],[24,33,19,35],[25,8,20,12],[25,12,20,16,"_this"],[25,17,20,21],[25,18,20,22,"paused"],[25,24,20,28],[25,26,20,30],[26,10,21,16],[27,8,22,12],[28,8,23,12,"_this"],[28,13,23,17],[28,14,23,18,"persistor"],[28,23,23,27],[28,24,23,28,"persist"],[28,31,23,35],[28,32,23,36],[28,33,23,37],[29,6,24,8],[29,7,24,9],[30,6,25,8],[30,10,25,12,"defaultDebounce"],[30,25,25,27],[30,28,25,30,"Trigger"],[30,35,25,37],[30,36,25,38,"defaultDebounce"],[30,51,25,53],[31,6,26,8],[31,10,26,12,"cache"],[31,15,26,17],[31,18,26,20,"options"],[31,25,26,27],[31,26,26,28,"cache"],[31,31,26,33],[32,8,26,35,"debounce"],[32,16,26,43],[32,19,26,46,"options"],[32,26,26,53],[32,27,26,54,"debounce"],[32,35,26,62],[33,8,26,64,"_b"],[33,10,26,66],[33,13,26,69,"options"],[33,20,26,76],[33,21,26,77,"trigger"],[33,28,26,84],[34,8,26,86,"trigger"],[34,15,26,93],[34,18,26,96,"_b"],[34,20,26,98],[34,25,26,98,"undefined"],[34,34,26,109],[34,37,26,112],[34,44,26,119],[34,47,26,122,"_b"],[34,49,26,124],[35,6,27,8],[35,10,27,12],[35,11,27,13,"trigger"],[35,18,27,20],[35,20,27,22],[36,8,28,12],[37,6,29,8],[38,6,30,8],[38,10,30,12],[38,11,30,13,"debounce"],[38,19,30,21],[38,22,30,24,"debounce"],[38,30,30,32],[38,34,30,36],[38,38,30,40],[38,41,30,43,"debounce"],[38,49,30,51],[38,52,30,54,"defaultDebounce"],[38,67,30,69],[39,6,31,8],[39,10,31,12],[39,11,31,13,"persistor"],[39,20,31,22],[39,23,31,25,"persistor"],[39,32,31,34],[40,6,32,8],[40,10,32,12],[40,11,32,13,"paused"],[40,17,32,19],[40,20,32,22],[40,25,32,27],[41,6,33,8],[41,14,33,16,"trigger"],[41,21,33,23],[42,8,34,12],[42,13,34,17],[42,20,34,24],[43,10,35,16],[43,14,35,20],[43,15,35,21,"uninstall"],[43,24,35,30],[43,27,35,33],[43,28,35,34],[43,29,35,35],[43,31,35,37,"onCacheWrite_1"],[43,45,35,51],[43,46,35,52,"default"],[43,53,35,59],[43,55,35,61],[44,12,35,63,"cache"],[44,17,35,68],[44,19,35,70,"cache"],[45,10,35,76],[45,11,35,77],[45,12,35,78],[45,13,35,79],[45,17,35,83],[45,18,35,84,"fire"],[45,22,35,88],[45,23,35,89],[46,10,36,16],[47,8,37,12],[47,13,37,17],[47,25,37,29],[48,10,38,16],[48,14,38,20,"debounce"],[48,22,38,28],[48,24,38,30],[49,12,39,20,"log"],[49,15,39,23],[49,16,39,24,"warn"],[49,20,39,28],[49,21,39,29],[49,76,39,84],[49,77,39,85],[50,10,40,16],[51,10,41,16],[51,14,41,20],[51,15,41,21,"debounce"],[51,23,41,29],[51,26,41,32,"debounce"],[51,34,41,40],[52,10,42,16],[52,14,42,20],[52,15,42,21,"uninstall"],[52,24,42,30],[52,27,42,33],[52,28,42,34],[52,29,42,35],[52,31,42,37,"onAppBackground_1"],[52,48,42,54],[52,49,42,55,"default"],[52,56,42,62],[52,58,42,64],[53,12,42,66,"cache"],[53,17,42,71],[53,19,42,73,"cache"],[53,24,42,78],[54,12,42,80,"log"],[54,15,42,83],[54,17,42,85,"log"],[55,10,42,89],[55,11,42,90],[55,12,42,91],[55,13,42,92],[55,17,42,96],[55,18,42,97,"fire"],[55,22,42,101],[55,23,42,102],[56,10,43,16],[57,8,44,12],[58,10,45,16],[58,14,45,20],[58,21,45,27,"trigger"],[58,28,45,34],[58,33,45,39],[58,43,45,49],[58,45,45,51],[59,12,46,20],[59,16,46,24],[59,17,46,25,"uninstall"],[59,26,46,34],[59,29,46,37,"trigger"],[59,36,46,44],[59,37,46,45],[59,41,46,49],[59,42,46,50,"fire"],[59,46,46,54],[59,47,46,55],[60,10,47,16],[60,11,47,17],[60,17,48,21],[61,12,49,20],[61,18,49,26,"Error"],[61,23,49,31],[61,24,49,32],[61,55,49,63],[61,56,49,64,"concat"],[61,62,49,70],[61,63,49,71,"trigger"],[61,70,49,78],[61,71,49,79],[61,72,49,80],[62,10,50,16],[63,6,51,8],[64,4,52,4],[65,4,53,4,"Trigger"],[65,11,53,11],[65,12,53,12,"prototype"],[65,21,53,21],[65,22,53,22,"pause"],[65,27,53,27],[65,30,53,30],[65,42,53,42],[66,6,54,8],[66,10,54,12],[66,11,54,13,"paused"],[66,17,54,19],[66,20,54,22],[66,24,54,26],[67,4,55,4],[67,5,55,5],[68,4,56,4,"Trigger"],[68,11,56,11],[68,12,56,12,"prototype"],[68,21,56,21],[68,22,56,22,"resume"],[68,28,56,28],[68,31,56,31],[68,43,56,43],[69,6,57,8],[69,10,57,12],[69,11,57,13,"paused"],[69,17,57,19],[69,20,57,22],[69,25,57,27],[70,4,58,4],[70,5,58,5],[71,4,59,4,"Trigger"],[71,11,59,11],[71,12,59,12,"prototype"],[71,21,59,21],[71,22,59,22,"remove"],[71,28,59,28],[71,31,59,31],[71,43,59,43],[72,6,60,8],[72,10,60,12],[72,14,60,16],[72,15,60,17,"uninstall"],[72,24,60,26],[72,26,60,28],[73,8,61,12],[73,12,61,16],[73,13,61,17,"uninstall"],[73,22,61,26],[73,23,61,27],[73,24,61,28],[74,8,62,12],[74,12,62,16],[74,13,62,17,"uninstall"],[74,22,62,26],[74,25,62,29],[74,29,62,33],[75,8,63,12],[75,12,63,16],[75,13,63,17,"paused"],[75,19,63,23],[75,22,63,26],[75,26,63,30],[76,6,64,8],[77,4,65,4],[77,5,65,5],[78,4,66,4,"Trigger"],[78,11,66,11],[78,12,66,12,"defaultDebounce"],[78,27,66,27],[78,30,66,30],[78,34,66,34],[79,4,67,4],[79,11,67,11,"Trigger"],[79,18,67,18],[80,2,68,0],[80,3,68,1],[80,4,68,2],[80,5,68,4],[81,2,69,0,"exports"],[81,9,69,7],[81,10,69,8,"default"],[81,17,69,15],[81,20,69,18,"Trigger"],[81,27,69,25],[82,0,69,26],[82,3]],"functionMap":{"names":["<global>","<anonymous>","Trigger","fire","persist","prototype.pause","prototype.resume","prototype.remove"],"mappings":"AAA;eCI;ICC;oBCG;SDS;uBEC;SFK;KD4B;8BIC;KJE;+BKC;KLE;+BMC;KNM;CDG"},"hasCjsExports":true},"type":"js/module"}]}