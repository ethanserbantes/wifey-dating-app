{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../utils/rnlibraries","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":60,"index":117}}],"key":"fGrlZFgrYQrfU1K4tN9OULy4C5Q=","exportNames":["*"],"imports":1}},{"name":"../utils/xhr","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":118},"end":{"line":3,"column":69,"index":187}}],"key":"vOZixZXnOl9wEw9+pZF/CmKTIq4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.spotlightIntegration = spotlightIntegration;\n  exports.getDefaultSidecarUrl = getDefaultSidecarUrl;\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _utilsRnlibraries = require(_dependencyMap[1], \"../utils/rnlibraries\");\n  var _utilsXhr = require(_dependencyMap[2], \"../utils/xhr\");\n  /**\n   * Use this integration to send errors and transactions to Spotlight.\n   *\n   * Learn more about spotlight at https://spotlightjs.com\n   */\n  function spotlightIntegration() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$sidecarUrl = _ref.sidecarUrl,\n      sidecarUrl = _ref$sidecarUrl === void 0 ? getDefaultSidecarUrl() : _ref$sidecarUrl;\n    _sentryCore.debug.log('[Spotlight] Using Sidecar URL', sidecarUrl);\n    return {\n      name: 'Spotlight',\n      setupOnce() {\n        // nothing to do here\n      },\n      setup(client) {\n        setup(client, sidecarUrl);\n      }\n    };\n  }\n  function setup(client, sidecarUrl) {\n    sendEnvelopesToSidecar(client, sidecarUrl);\n  }\n  function sendEnvelopesToSidecar(client, sidecarUrl) {\n    if (!client.on) {\n      return;\n    }\n    client.on('beforeEnvelope', originalEnvelope => {\n      // TODO: This is a workaround for spotlight/sidecar not supporting images\n      var spotlightEnvelope = [...originalEnvelope];\n      var envelopeItems = [...originalEnvelope[1]].filter(item => typeof item[0].content_type !== 'string' || !item[0].content_type.startsWith('image'));\n      spotlightEnvelope[1] = envelopeItems;\n      var xhr = (0, _utilsXhr.createStealthXhr)();\n      if (!xhr) {\n        _sentryCore.debug.error('[Spotlight] Sentry SDK can not create XHR object');\n        return;\n      }\n      xhr.open('POST', sidecarUrl, true);\n      xhr.setRequestHeader('Content-Type', 'application/x-sentry-envelope');\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === _utilsXhr.XHR_READYSTATE_DONE) {\n          var status = xhr.status;\n          if (status === 0 || status >= 200 && status < 400) {\n            // The request has been completed successfully\n          } else {\n            // Handle the error\n            _sentryCore.debug.error(\"[Spotlight] Sentry SDK can't connect to Spotlight is it running? See https://spotlightjs.com to download it.\", new Error(xhr.statusText));\n          }\n        }\n      };\n      xhr.send((0, _sentryCore.serializeEnvelope)(spotlightEnvelope));\n    });\n  }\n  var DEFAULT_SIDECAR_URL = 'http://localhost:8969/stream';\n  /**\n   * Gets the default Spotlight sidecar URL.\n   */\n  function getDefaultSidecarUrl() {\n    var _a, _b;\n    try {\n      var _ref2 = (_b = (_a = _utilsRnlibraries.ReactNativeLibraries.Devtools) === null || _a === void 0 ? void 0 : _a.getDevServer()) !== null && _b !== void 0 ? _b : {},\n        url = _ref2.url;\n      if (!url) {\n        return DEFAULT_SIDECAR_URL;\n      }\n      return `http://${getHostnameFromString(url)}:8969/stream`;\n    } catch (_oO) {\n      // We can't load devserver URL\n    }\n    return DEFAULT_SIDECAR_URL;\n  }\n  /**\n   * React Native implementation of the URL class is missing the `hostname` property.\n   */\n  function getHostnameFromString(urlString) {\n    var regex = /^(?:\\w+:)?\\/\\/([^/:]+)(:\\d+)?(.*)$/;\n    var matches = urlString.match(regex);\n    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n      return matches[1];\n    } else {\n      // Invalid URL format\n      return null;\n    }\n  }\n});","lineCount":96,"map":[[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"spotlightIntegration"],[7,30,9,0],[7,33,9,0,"spotlightIntegration"],[7,53,9,0],[8,2,59,0,"exports"],[8,9,59,0],[8,10,59,0,"getDefaultSidecarUrl"],[8,30,59,0],[8,33,59,0,"getDefaultSidecarUrl"],[8,53,59,0],[9,2,1,0],[9,6,1,0,"_sentryCore"],[9,17,1,0],[9,20,1,0,"require"],[9,27,1,0],[9,28,1,0,"_dependencyMap"],[9,42,1,0],[10,2,2,0],[10,6,2,0,"_utilsRnlibraries"],[10,23,2,0],[10,26,2,0,"require"],[10,33,2,0],[10,34,2,0,"_dependencyMap"],[10,48,2,0],[11,2,3,0],[11,6,3,0,"_utilsXhr"],[11,15,3,0],[11,18,3,0,"require"],[11,25,3,0],[11,26,3,0,"_dependencyMap"],[11,40,3,0],[12,2,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,2,9,7],[17,11,9,16,"spotlightIntegration"],[17,31,9,36,"spotlightIntegration"],[17,32,9,36],[17,34,9,84],[18,4,9,84],[18,8,9,84,"_ref"],[18,12,9,84],[18,15,9,84,"arguments"],[18,24,9,84],[18,25,9,84,"length"],[18,31,9,84],[18,39,9,84,"arguments"],[18,48,9,84],[18,56,9,84,"undefined"],[18,65,9,84],[18,68,9,84,"arguments"],[18,77,9,84],[18,83,9,80],[18,84,9,81],[18,85,9,82],[19,6,9,82,"_ref$sidecarUrl"],[19,21,9,82],[19,24,9,82,"_ref"],[19,28,9,82],[19,29,9,39,"sidecarUrl"],[19,39,9,49],[20,6,9,39,"sidecarUrl"],[20,16,9,49],[20,19,9,49,"_ref$sidecarUrl"],[20,34,9,49],[20,48,9,52,"getDefaultSidecarUrl"],[20,68,9,72],[20,69,9,73],[20,70,9,74],[20,73,9,74,"_ref$sidecarUrl"],[20,88,9,74],[21,4,10,4,"debug"],[21,15,10,9],[21,16,10,9,"debug"],[21,21,10,9],[21,22,10,10,"log"],[21,25,10,13],[21,26,10,14],[21,57,10,45],[21,59,10,47,"sidecarUrl"],[21,69,10,57],[21,70,10,58],[22,4,11,4],[22,11,11,11],[23,6,12,8,"name"],[23,10,12,12],[23,12,12,14],[23,23,12,25],[24,6,13,8,"setupOnce"],[24,15,13,17,"setupOnce"],[24,16,13,17],[24,18,13,20],[25,8,14,12],[26,6,14,12],[26,7,15,9],[27,6,16,8,"setup"],[27,11,16,13,"setup"],[27,12,16,14,"client"],[27,18,16,20],[27,20,16,22],[28,8,17,12,"setup"],[28,13,17,17],[28,14,17,18,"client"],[28,20,17,24],[28,22,17,26,"sidecarUrl"],[28,32,17,36],[28,33,17,37],[29,6,18,8],[30,4,19,4],[30,5,19,5],[31,2,20,0],[32,2,21,0],[32,11,21,9,"setup"],[32,16,21,14,"setup"],[32,17,21,15,"client"],[32,23,21,21],[32,25,21,23,"sidecarUrl"],[32,35,21,33],[32,37,21,35],[33,4,22,4,"sendEnvelopesToSidecar"],[33,26,22,26],[33,27,22,27,"client"],[33,33,22,33],[33,35,22,35,"sidecarUrl"],[33,45,22,45],[33,46,22,46],[34,2,23,0],[35,2,24,0],[35,11,24,9,"sendEnvelopesToSidecar"],[35,33,24,31,"sendEnvelopesToSidecar"],[35,34,24,32,"client"],[35,40,24,38],[35,42,24,40,"sidecarUrl"],[35,52,24,50],[35,54,24,52],[36,4,25,4],[36,8,25,8],[36,9,25,9,"client"],[36,15,25,15],[36,16,25,16,"on"],[36,18,25,18],[36,20,25,20],[37,6,26,8],[38,4,27,4],[39,4,28,4,"client"],[39,10,28,10],[39,11,28,11,"on"],[39,13,28,13],[39,14,28,14],[39,30,28,30],[39,32,28,33,"originalEnvelope"],[39,48,28,49],[39,52,28,54],[40,6,29,8],[41,6,30,8],[41,10,30,14,"spotlightEnvelope"],[41,27,30,31],[41,30,30,34],[41,31,30,35],[41,34,30,38,"originalEnvelope"],[41,50,30,54],[41,51,30,55],[42,6,31,8],[42,10,31,14,"envelopeItems"],[42,23,31,27],[42,26,31,30],[42,27,31,31],[42,30,31,34,"originalEnvelope"],[42,46,31,50],[42,47,31,51],[42,48,31,52],[42,49,31,53],[42,50,31,54],[42,51,31,55,"filter"],[42,57,31,61],[42,58,31,62,"item"],[42,62,31,66],[42,66,31,70],[42,73,31,77,"item"],[42,77,31,81],[42,78,31,82],[42,79,31,83],[42,80,31,84],[42,81,31,85,"content_type"],[42,93,31,97],[42,98,31,102],[42,106,31,110],[42,110,31,114],[42,111,31,115,"item"],[42,115,31,119],[42,116,31,120],[42,117,31,121],[42,118,31,122],[42,119,31,123,"content_type"],[42,131,31,135],[42,132,31,136,"startsWith"],[42,142,31,146],[42,143,31,147],[42,150,31,154],[42,151,31,155],[42,152,31,156],[43,6,32,8,"spotlightEnvelope"],[43,23,32,25],[43,24,32,26],[43,25,32,27],[43,26,32,28],[43,29,32,31,"envelopeItems"],[43,42,32,44],[44,6,33,8],[44,10,33,14,"xhr"],[44,13,33,17],[44,16,33,20],[44,20,33,20,"createStealthXhr"],[44,29,33,36],[44,30,33,36,"createStealthXhr"],[44,46,33,36],[44,48,33,37],[44,49,33,38],[45,6,34,8],[45,10,34,12],[45,11,34,13,"xhr"],[45,14,34,16],[45,16,34,18],[46,8,35,12,"debug"],[46,19,35,17],[46,20,35,17,"debug"],[46,25,35,17],[46,26,35,18,"error"],[46,31,35,23],[46,32,35,24],[46,82,35,74],[46,83,35,75],[47,8,36,12],[48,6,37,8],[49,6,38,8,"xhr"],[49,9,38,11],[49,10,38,12,"open"],[49,14,38,16],[49,15,38,17],[49,21,38,23],[49,23,38,25,"sidecarUrl"],[49,33,38,35],[49,35,38,37],[49,39,38,41],[49,40,38,42],[50,6,39,8,"xhr"],[50,9,39,11],[50,10,39,12,"setRequestHeader"],[50,26,39,28],[50,27,39,29],[50,41,39,43],[50,43,39,45],[50,74,39,76],[50,75,39,77],[51,6,40,8,"xhr"],[51,9,40,11],[51,10,40,12,"onreadystatechange"],[51,28,40,30],[51,31,40,33],[51,43,40,45],[52,8,41,12],[52,12,41,16,"xhr"],[52,15,41,19],[52,16,41,20,"readyState"],[52,26,41,30],[52,31,41,35,"XHR_READYSTATE_DONE"],[52,40,41,54],[52,41,41,54,"XHR_READYSTATE_DONE"],[52,60,41,54],[52,62,41,56],[53,10,42,16],[53,14,42,22,"status"],[53,20,42,28],[53,23,42,31,"xhr"],[53,26,42,34],[53,27,42,35,"status"],[53,33,42,41],[54,10,43,16],[54,14,43,20,"status"],[54,20,43,26],[54,25,43,31],[54,26,43,32],[54,30,43,37,"status"],[54,36,43,43],[54,40,43,47],[54,43,43,50],[54,47,43,54,"status"],[54,53,43,60],[54,56,43,63],[54,59,43,67],[54,61,43,69],[55,12,44,20],[56,10,44,20],[56,11,45,17],[56,17,46,21],[57,12,47,20],[58,12,48,20,"debug"],[58,23,48,25],[58,24,48,25,"debug"],[58,29,48,25],[58,30,48,26,"error"],[58,35,48,31],[58,36,48,32],[58,146,48,142],[58,148,48,144],[58,152,48,148,"Error"],[58,157,48,153],[58,158,48,154,"xhr"],[58,161,48,157],[58,162,48,158,"statusText"],[58,172,48,168],[58,173,48,169],[58,174,48,170],[59,10,49,16],[60,8,50,12],[61,6,51,8],[61,7,51,9],[62,6,52,8,"xhr"],[62,9,52,11],[62,10,52,12,"send"],[62,14,52,16],[62,15,52,17],[62,19,52,17,"serializeEnvelope"],[62,30,52,34],[62,31,52,34,"serializeEnvelope"],[62,48,52,34],[62,50,52,35,"spotlightEnvelope"],[62,67,52,52],[62,68,52,53],[62,69,52,54],[63,4,53,4],[63,5,53,5],[63,6,53,6],[64,2,54,0],[65,2,55,0],[65,6,55,6,"DEFAULT_SIDECAR_URL"],[65,25,55,25],[65,28,55,28],[65,58,55,58],[66,2,56,0],[67,0,57,0],[68,0,58,0],[69,2,59,7],[69,11,59,16,"getDefaultSidecarUrl"],[69,31,59,36,"getDefaultSidecarUrl"],[69,32,59,36],[69,34,59,39],[70,4,60,4],[70,8,60,8,"_a"],[70,10,60,10],[70,12,60,12,"_b"],[70,14,60,14],[71,4,61,4],[71,8,61,8],[72,6,62,8],[72,10,62,8,"_ref2"],[72,15,62,8],[72,18,62,24],[72,19,62,25,"_b"],[72,21,62,27],[72,24,62,30],[72,25,62,31,"_a"],[72,27,62,33],[72,30,62,36,"ReactNativeLibraries"],[72,47,62,56],[72,48,62,56,"ReactNativeLibraries"],[72,68,62,56],[72,69,62,57,"Devtools"],[72,77,62,65],[72,83,62,71],[72,87,62,75],[72,91,62,79,"_a"],[72,93,62,81],[72,98,62,86],[72,103,62,91],[72,104,62,92],[72,107,62,95],[72,112,62,100],[72,113,62,101],[72,116,62,104,"_a"],[72,118,62,106],[72,119,62,107,"getDevServer"],[72,131,62,119],[72,132,62,120],[72,133,62,121],[72,139,62,127],[72,143,62,131],[72,147,62,135,"_b"],[72,149,62,137],[72,154,62,142],[72,159,62,147],[72,160,62,148],[72,163,62,151,"_b"],[72,165,62,153],[72,168,62,156],[72,169,62,157],[72,170,62,158],[73,8,62,16,"url"],[73,11,62,19],[73,14,62,19,"_ref2"],[73,19,62,19],[73,20,62,16,"url"],[73,23,62,19],[74,6,63,8],[74,10,63,12],[74,11,63,13,"url"],[74,14,63,16],[74,16,63,18],[75,8,64,12],[75,15,64,19,"DEFAULT_SIDECAR_URL"],[75,34,64,38],[76,6,65,8],[77,6,66,8],[77,13,66,15],[77,23,66,25,"getHostnameFromString"],[77,44,66,46],[77,45,66,47,"url"],[77,48,66,50],[77,49,66,51],[77,63,66,65],[78,4,67,4],[78,5,67,5],[78,6,68,4],[78,13,68,11,"_oO"],[78,16,68,14],[78,18,68,16],[79,6,69,8],[80,4,69,8],[81,4,71,4],[81,11,71,11,"DEFAULT_SIDECAR_URL"],[81,30,71,30],[82,2,72,0],[83,2,73,0],[84,0,74,0],[85,0,75,0],[86,2,76,0],[86,11,76,9,"getHostnameFromString"],[86,32,76,30,"getHostnameFromString"],[86,33,76,31,"urlString"],[86,42,76,40],[86,44,76,42],[87,4,77,4],[87,8,77,10,"regex"],[87,13,77,15],[87,16,77,18],[87,52,77,54],[88,4,78,4],[88,8,78,10,"matches"],[88,15,78,17],[88,18,78,20,"urlString"],[88,27,78,29],[88,28,78,30,"match"],[88,33,78,35],[88,34,78,36,"regex"],[88,39,78,41],[88,40,78,42],[89,4,79,4],[89,8,79,8,"matches"],[89,15,79,15],[89,20,79,20],[89,24,79,24],[89,28,79,28,"matches"],[89,35,79,35],[89,40,79,40],[89,45,79,45],[89,46,79,46],[89,49,79,49],[89,54,79,54],[89,55,79,55],[89,58,79,58,"matches"],[89,65,79,65],[89,66,79,66],[89,67,79,67],[89,68,79,68],[89,70,79,70],[90,6,80,8],[90,13,80,15,"matches"],[90,20,80,22],[90,21,80,23],[90,22,80,24],[90,23,80,25],[91,4,81,4],[91,5,81,5],[91,11,82,9],[92,6,83,8],[93,6,84,8],[93,13,84,15],[93,17,84,19],[94,4,85,4],[95,2,86,0],[96,0,86,1],[96,3]],"functionMap":{"names":["<global>","spotlightIntegration","setupOnce","setup","sendEnvelopesToSidecar","client.on$argument_1","filter$argument_0","xhr.onreadystatechange","getDefaultSidecarUrl","getHostnameFromString"],"mappings":"AAA;OCQ;QCI;SDE;QEC;SFE;CDE;AGC;CHE;AIC;gCCI;8DCG,6FD;iCES;SFW;KDE;CJC;OQK;CRa;ASI;CTU"},"hasCjsExports":false},"type":"js/module"}]}