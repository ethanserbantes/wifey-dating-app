{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":96,"index":96}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":97},"end":{"line":2,"column":48,"index":145}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"../helpers.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":146},"end":{"line":3,"column":39,"index":185}}],"key":"xGB1RU1bemGAHq3E44EIR7oSA2c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"registerBackgroundTabDetection\", {\n    enumerable: true,\n    get: function () {\n      return registerBackgroundTabDetection;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  var _helpersJs = require(_dependencyMap[2], \"../helpers.js\");\n  /**\n   * Add a listener that cancels and finishes a transaction when the global\n   * document is hidden.\n   */\n  function registerBackgroundTabDetection() {\n    if (_helpersJs.WINDOW.document) {\n      _helpersJs.WINDOW.document.addEventListener('visibilitychange', () => {\n        var activeSpan = (0, _sentryCore.getActiveSpan)();\n        if (!activeSpan) {\n          return;\n        }\n        var rootSpan = (0, _sentryCore.getRootSpan)(activeSpan);\n        if (_helpersJs.WINDOW.document.hidden && rootSpan) {\n          var cancelledStatus = 'cancelled';\n          var _spanToJSON = (0, _sentryCore.spanToJSON)(rootSpan),\n            op = _spanToJSON.op,\n            status = _spanToJSON.status;\n          if (_debugBuildJs.DEBUG_BUILD) {\n            _sentryCore.debug.log(`[Tracing] Transaction: ${cancelledStatus} -> since tab moved to the background, op: ${op}`);\n          }\n\n          // We should not set status if it is already set, this prevent important statuses like\n          // error or data loss from being overwritten on transaction.\n          if (!status) {\n            rootSpan.setStatus({\n              code: _sentryCore.SPAN_STATUS_ERROR,\n              message: cancelledStatus\n            });\n          }\n          rootSpan.setAttribute('sentry.cancellation_reason', 'document.hidden');\n          rootSpan.end();\n        }\n      });\n    } else {\n      _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.warn('[Tracing] Could not set up background tab detection due to lack of global document');\n    }\n  }\n});","lineCount":53,"map":[[7,2,43,0,"Object"],[7,8,43,0],[7,9,43,0,"defineProperty"],[7,23,43,0],[7,24,43,0,"exports"],[7,31,43,0],[8,4,43,0,"enumerable"],[8,14,43,0],[9,4,43,0,"get"],[9,7,43,0],[9,18,43,0,"get"],[9,19,43,0],[10,6,43,0],[10,13,43,9,"registerBackgroundTabDetection"],[10,43,43,39],[11,4,43,39],[12,2,43,39],[13,2,1,0],[13,6,1,0,"_sentryCore"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_debugBuildJs"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,3,0],[15,6,3,0,"_helpersJs"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,2,9,0],[20,11,9,9,"registerBackgroundTabDetection"],[20,41,9,39,"registerBackgroundTabDetection"],[20,42,9,39],[20,44,9,42],[21,4,10,2],[21,8,10,6,"WINDOW"],[21,18,10,12],[21,19,10,12,"WINDOW"],[21,25,10,12],[21,26,10,13,"document"],[21,34,10,21],[21,36,10,23],[22,6,11,4,"WINDOW"],[22,16,11,10],[22,17,11,10,"WINDOW"],[22,23,11,10],[22,24,11,11,"document"],[22,32,11,19],[22,33,11,20,"addEventListener"],[22,49,11,36],[22,50,11,37],[22,68,11,55],[22,70,11,57],[22,76,11,63],[23,8,12,6],[23,12,12,12,"activeSpan"],[23,22,12,22],[23,25,12,25],[23,29,12,25,"getActiveSpan"],[23,40,12,38],[23,41,12,38,"getActiveSpan"],[23,54,12,38],[23,56,12,39],[23,57,12,40],[24,8,13,6],[24,12,13,10],[24,13,13,11,"activeSpan"],[24,23,13,21],[24,25,13,23],[25,10,14,8],[26,8,15,6],[27,8,17,6],[27,12,17,12,"rootSpan"],[27,20,17,20],[27,23,17,23],[27,27,17,23,"getRootSpan"],[27,38,17,34],[27,39,17,34,"getRootSpan"],[27,50,17,34],[27,52,17,35,"activeSpan"],[27,62,17,45],[27,63,17,46],[28,8,19,6],[28,12,19,10,"WINDOW"],[28,22,19,16],[28,23,19,16,"WINDOW"],[28,29,19,16],[28,30,19,17,"document"],[28,38,19,25],[28,39,19,26,"hidden"],[28,45,19,32],[28,49,19,36,"rootSpan"],[28,57,19,44],[28,59,19,46],[29,10,20,8],[29,14,20,14,"cancelledStatus"],[29,29,20,29],[29,32,20,32],[29,43,20,43],[30,10,22,8],[30,14,22,8,"_spanToJSON"],[30,25,22,8],[30,28,22,31],[30,32,22,31,"spanToJSON"],[30,43,22,41],[30,44,22,41,"spanToJSON"],[30,54,22,41],[30,56,22,42,"rootSpan"],[30,64,22,50],[30,65,22,51],[31,12,22,16,"op"],[31,14,22,18],[31,17,22,18,"_spanToJSON"],[31,28,22,18],[31,29,22,16,"op"],[31,31,22,18],[32,12,22,20,"status"],[32,18,22,26],[32,21,22,26,"_spanToJSON"],[32,32,22,26],[32,33,22,20,"status"],[32,39,22,26],[33,10,24,8],[33,14,24,12,"DEBUG_BUILD"],[33,27,24,23],[33,28,24,23,"DEBUG_BUILD"],[33,39,24,23],[33,41,24,25],[34,12,25,10,"debug"],[34,23,25,15],[34,24,25,15,"debug"],[34,29,25,15],[34,30,25,16,"log"],[34,33,25,19],[34,34,25,20],[34,60,25,46,"cancelledStatus"],[34,75,25,61],[34,121,25,107,"op"],[34,123,25,109],[34,125,25,111],[34,126,25,112],[35,10,26,8],[37,10,28,8],[38,10,29,8],[39,10,30,8],[39,14,30,12],[39,15,30,13,"status"],[39,21,30,19],[39,23,30,21],[40,12,31,10,"rootSpan"],[40,20,31,18],[40,21,31,19,"setStatus"],[40,30,31,28],[40,31,31,29],[41,14,31,31,"code"],[41,18,31,35],[41,20,31,37,"SPAN_STATUS_ERROR"],[41,31,31,54],[41,32,31,54,"SPAN_STATUS_ERROR"],[41,49,31,54],[42,14,31,56,"message"],[42,21,31,63],[42,23,31,65,"cancelledStatus"],[43,12,31,81],[43,13,31,82],[43,14,31,83],[44,10,32,8],[45,10,34,8,"rootSpan"],[45,18,34,16],[45,19,34,17,"setAttribute"],[45,31,34,29],[45,32,34,30],[45,60,34,58],[45,62,34,60],[45,79,34,77],[45,80,34,78],[46,10,35,8,"rootSpan"],[46,18,35,16],[46,19,35,17,"end"],[46,22,35,20],[46,23,35,21],[46,24,35,22],[47,8,36,6],[48,6,37,4],[48,7,37,5],[48,8,37,6],[49,4,38,2],[49,5,38,3],[49,11,38,9],[50,6,39,4,"DEBUG_BUILD"],[50,19,39,15],[50,20,39,15,"DEBUG_BUILD"],[50,31,39,15],[50,35,39,19,"debug"],[50,46,39,24],[50,47,39,24,"debug"],[50,52,39,24],[50,53,39,25,"warn"],[50,57,39,29],[50,58,39,30],[50,142,39,114],[50,143,39,115],[51,4,40,2],[52,2,41,0],[53,0,41,1],[53,3]],"functionMap":{"names":["<global>","registerBackgroundTabDetection","WINDOW.document.addEventListener$argument_1"],"mappings":"AAA;ACQ;yDCE;KD0B;CDI"},"hasCjsExports":false},"type":"js/module"}]}