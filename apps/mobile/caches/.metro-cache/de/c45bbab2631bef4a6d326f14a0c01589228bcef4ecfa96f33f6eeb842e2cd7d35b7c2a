{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"react-native-purchases","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":47,"index":132}}],"key":"w6kXlt3+wzwVuELA/KXcfEkh03Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSubscriptionActions = useSubscriptionActions;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _reactNativePurchases = require(_dependencyMap[2], \"react-native-purchases\");\n  var Purchases = _interopDefault(_reactNativePurchases);\n  function useSubscriptionActions(isAvailable, error, refresh, goBack, alertTitle, hasSelectedTier, selectedPkg) {\n    const [purchasing, setPurchasing] = (0, _react.useState)(false);\n    const onSubscribe = (0, _react.useCallback)(async () => {\n      // If already has this tier, treat as \"Done\".\n      if (hasSelectedTier) {\n        goBack();\n        return;\n      }\n      if (!isAvailable) {\n        Alert.default.alert(alertTitle, error || \"Subscriptions are not available right now.\");\n        return;\n      }\n      if (!selectedPkg) {\n        Alert.default.alert(alertTitle, \"Please pick a plan.\");\n        return;\n      }\n      try {\n        setPurchasing(true);\n        await Purchases.default.purchasePackage(selectedPkg);\n        await refresh();\n        goBack();\n      } catch (e) {\n        const cancelled = e?.userCancelled || e?.code === \"PURCHASE_CANCELLED\";\n        if (cancelled) {\n          return;\n        }\n        console.error(e);\n        Alert.default.alert(alertTitle, \"Purchase failed. Please try again.\");\n      } finally {\n        setPurchasing(false);\n      }\n    }, [alertTitle, error, goBack, hasSelectedTier, isAvailable, refresh, selectedPkg]);\n    const onRestore = (0, _react.useCallback)(async () => {\n      if (!isAvailable) {\n        Alert.default.alert(alertTitle, error || \"Subscriptions are not available right now.\");\n        return;\n      }\n      try {\n        setPurchasing(true);\n        await Purchases.default.restorePurchases();\n        await refresh();\n        goBack();\n      } catch (e) {\n        console.error(e);\n        Alert.default.alert(alertTitle, \"Could not restore purchases.\");\n      } finally {\n        setPurchasing(false);\n      }\n    }, [alertTitle, error, goBack, isAvailable, refresh]);\n    return {\n      purchasing,\n      onSubscribe,\n      onRestore\n    };\n  }\n});","lineCount":73,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useSubscriptionActions"],[12,32,5,0],[12,35,5,0,"useSubscriptionActions"],[12,57,5,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,1,46],[14,6,1,46,"_reactNativeWebDistExportsAlert"],[14,37,1,46],[14,40,1,46,"require"],[14,47,1,46],[14,48,1,46,"_dependencyMap"],[14,62,1,46],[15,2,1,46],[15,6,1,46,"Alert"],[15,11,1,46],[15,14,1,46,"_interopDefault"],[15,29,1,46],[15,30,1,46,"_reactNativeWebDistExportsAlert"],[15,61,1,46],[16,2,3,0],[16,6,3,0,"_reactNativePurchases"],[16,27,3,0],[16,30,3,0,"require"],[16,37,3,0],[16,38,3,0,"_dependencyMap"],[16,52,3,0],[17,2,3,0],[17,6,3,0,"Purchases"],[17,15,3,0],[17,18,3,0,"_interopDefault"],[17,33,3,0],[17,34,3,0,"_reactNativePurchases"],[17,55,3,0],[18,2,5,7],[18,11,5,16,"useSubscriptionActions"],[18,33,5,38,"useSubscriptionActions"],[18,34,6,2,"isAvailable"],[18,45,6,13],[18,47,7,2,"error"],[18,52,7,7],[18,54,8,2,"refresh"],[18,61,8,9],[18,63,9,2,"goBack"],[18,69,9,8],[18,71,10,2,"alertTitle"],[18,81,10,12],[18,83,11,2,"hasSelectedTier"],[18,98,11,17],[18,100,12,2,"selectedPkg"],[18,111,12,13],[18,113,13,2],[19,4,14,2],[19,10,14,8],[19,11,14,9,"purchasing"],[19,21,14,19],[19,23,14,21,"setPurchasing"],[19,36,14,34],[19,37,14,35],[19,40,14,38],[19,44,14,38,"useState"],[19,50,14,46],[19,51,14,46,"useState"],[19,59,14,46],[19,61,14,47],[19,66,14,52],[19,67,14,53],[20,4,16,2],[20,10,16,8,"onSubscribe"],[20,21,16,19],[20,24,16,22],[20,28,16,22,"useCallback"],[20,34,16,33],[20,35,16,33,"useCallback"],[20,46,16,33],[20,48,16,34],[20,60,16,46],[21,6,17,4],[22,6,18,4],[22,10,18,8,"hasSelectedTier"],[22,25,18,23],[22,27,18,25],[23,8,19,6,"goBack"],[23,14,19,12],[23,15,19,13],[23,16,19,14],[24,8,20,6],[25,6,21,4],[26,6,23,4],[26,10,23,8],[26,11,23,9,"isAvailable"],[26,22,23,20],[26,24,23,22],[27,8,24,6,"Alert"],[27,13,24,11],[27,14,24,11,"default"],[27,21,24,11],[27,22,24,12,"alert"],[27,27,24,17],[27,28,25,8,"alertTitle"],[27,38,25,18],[27,40,26,8,"error"],[27,45,26,13],[27,49,26,17],[27,93,27,6],[27,94,27,7],[28,8,28,6],[29,6,29,4],[30,6,31,4],[30,10,31,8],[30,11,31,9,"selectedPkg"],[30,22,31,20],[30,24,31,22],[31,8,32,6,"Alert"],[31,13,32,11],[31,14,32,11,"default"],[31,21,32,11],[31,22,32,12,"alert"],[31,27,32,17],[31,28,32,18,"alertTitle"],[31,38,32,28],[31,40,32,30],[31,61,32,51],[31,62,32,52],[32,8,33,6],[33,6,34,4],[34,6,36,4],[34,10,36,8],[35,8,37,6,"setPurchasing"],[35,21,37,19],[35,22,37,20],[35,26,37,24],[35,27,37,25],[36,8,38,6],[36,14,38,12,"Purchases"],[36,23,38,21],[36,24,38,21,"default"],[36,31,38,21],[36,32,38,22,"purchasePackage"],[36,47,38,37],[36,48,38,38,"selectedPkg"],[36,59,38,49],[36,60,38,50],[37,8,39,6],[37,14,39,12,"refresh"],[37,21,39,19],[37,22,39,20],[37,23,39,21],[38,8,40,6,"goBack"],[38,14,40,12],[38,15,40,13],[38,16,40,14],[39,6,41,4],[39,7,41,5],[39,8,41,6],[39,15,41,13,"e"],[39,16,41,14],[39,18,41,16],[40,8,42,6],[40,14,42,12,"cancelled"],[40,23,42,21],[40,26,42,24,"e"],[40,27,42,25],[40,29,42,27,"userCancelled"],[40,42,42,40],[40,46,42,44,"e"],[40,47,42,45],[40,49,42,47,"code"],[40,53,42,51],[40,58,42,56],[40,78,42,76],[41,8,43,6],[41,12,43,10,"cancelled"],[41,21,43,19],[41,23,43,21],[42,10,44,8],[43,8,45,6],[44,8,46,6,"console"],[44,15,46,13],[44,16,46,14,"error"],[44,21,46,19],[44,22,46,20,"e"],[44,23,46,21],[44,24,46,22],[45,8,47,6,"Alert"],[45,13,47,11],[45,14,47,11,"default"],[45,21,47,11],[45,22,47,12,"alert"],[45,27,47,17],[45,28,47,18,"alertTitle"],[45,38,47,28],[45,40,47,30],[45,76,47,66],[45,77,47,67],[46,6,48,4],[46,7,48,5],[46,16,48,14],[47,8,49,6,"setPurchasing"],[47,21,49,19],[47,22,49,20],[47,27,49,25],[47,28,49,26],[48,6,50,4],[49,4,51,2],[49,5,51,3],[49,7,51,5],[49,8,52,4,"alertTitle"],[49,18,52,14],[49,20,53,4,"error"],[49,25,53,9],[49,27,54,4,"goBack"],[49,33,54,10],[49,35,55,4,"hasSelectedTier"],[49,50,55,19],[49,52,56,4,"isAvailable"],[49,63,56,15],[49,65,57,4,"refresh"],[49,72,57,11],[49,74,58,4,"selectedPkg"],[49,85,58,15],[49,86,59,3],[49,87,59,4],[50,4,61,2],[50,10,61,8,"onRestore"],[50,19,61,17],[50,22,61,20],[50,26,61,20,"useCallback"],[50,32,61,31],[50,33,61,31,"useCallback"],[50,44,61,31],[50,46,61,32],[50,58,61,44],[51,6,62,4],[51,10,62,8],[51,11,62,9,"isAvailable"],[51,22,62,20],[51,24,62,22],[52,8,63,6,"Alert"],[52,13,63,11],[52,14,63,11,"default"],[52,21,63,11],[52,22,63,12,"alert"],[52,27,63,17],[52,28,64,8,"alertTitle"],[52,38,64,18],[52,40,65,8,"error"],[52,45,65,13],[52,49,65,17],[52,93,66,6],[52,94,66,7],[53,8,67,6],[54,6,68,4],[55,6,70,4],[55,10,70,8],[56,8,71,6,"setPurchasing"],[56,21,71,19],[56,22,71,20],[56,26,71,24],[56,27,71,25],[57,8,72,6],[57,14,72,12,"Purchases"],[57,23,72,21],[57,24,72,21,"default"],[57,31,72,21],[57,32,72,22,"restorePurchases"],[57,48,72,38],[57,49,72,39],[57,50,72,40],[58,8,73,6],[58,14,73,12,"refresh"],[58,21,73,19],[58,22,73,20],[58,23,73,21],[59,8,74,6,"goBack"],[59,14,74,12],[59,15,74,13],[59,16,74,14],[60,6,75,4],[60,7,75,5],[60,8,75,6],[60,15,75,13,"e"],[60,16,75,14],[60,18,75,16],[61,8,76,6,"console"],[61,15,76,13],[61,16,76,14,"error"],[61,21,76,19],[61,22,76,20,"e"],[61,23,76,21],[61,24,76,22],[62,8,77,6,"Alert"],[62,13,77,11],[62,14,77,11,"default"],[62,21,77,11],[62,22,77,12,"alert"],[62,27,77,17],[62,28,77,18,"alertTitle"],[62,38,77,28],[62,40,77,30],[62,70,77,60],[62,71,77,61],[63,6,78,4],[63,7,78,5],[63,16,78,14],[64,8,79,6,"setPurchasing"],[64,21,79,19],[64,22,79,20],[64,27,79,25],[64,28,79,26],[65,6,80,4],[66,4,81,2],[66,5,81,3],[66,7,81,5],[66,8,81,6,"alertTitle"],[66,18,81,16],[66,20,81,18,"error"],[66,25,81,23],[66,27,81,25,"goBack"],[66,33,81,31],[66,35,81,33,"isAvailable"],[66,46,81,44],[66,48,81,46,"refresh"],[66,55,81,53],[66,56,81,54],[66,57,81,55],[67,4,83,2],[67,11,83,9],[68,6,83,11,"purchasing"],[68,16,83,21],[69,6,83,23,"onSubscribe"],[69,17,83,34],[70,6,83,36,"onRestore"],[71,4,83,46],[71,5,83,47],[72,2,84,0],[73,0,84,1],[73,3]],"functionMap":{"names":["<global>","useSubscriptionActions","onSubscribe","onRestore"],"mappings":"AAA;OCI;kCCW;GDmC;gCEU;GFoB;CDG"},"hasCjsExports":false},"type":"js/module"}]}