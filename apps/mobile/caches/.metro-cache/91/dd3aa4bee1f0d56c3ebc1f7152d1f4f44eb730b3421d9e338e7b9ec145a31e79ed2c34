{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-audio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":47,"index":113}}],"key":"GHpNh+2in6lWH3tZa8Mq2h9os0E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useVoiceMemoPlayer = useVoiceMemoPlayer;\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[1]);\n  var _expoAudio = require(_dependencyMap[2]);\n  function useVoiceMemoPlayer() {\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      playingMessageId = _useState2[0],\n      setPlayingMessageId = _useState2[1];\n    var playerRef = (0, _react.useRef)(null);\n    var stopPlayer = (0, _react.useCallback)(() => {\n      var p = playerRef.current;\n      if (!p) return;\n      try {\n        p.pause();\n        p.remove();\n      } catch (e) {\n        console.error(e);\n      } finally {\n        playerRef.current = null;\n        setPlayingMessageId(null);\n      }\n    }, []);\n    var togglePlayVoiceMemo = (0, _react.useCallback)(message => {\n      var url = String(message?.audio_url || \"\").trim();\n      if (!url) return;\n      var id = message?.id;\n      if (playingMessageId && id === playingMessageId) {\n        stopPlayer();\n        return;\n      }\n      stopPlayer();\n      try {\n        var next = (0, _expoAudio.createAudioPlayer)(url);\n        playerRef.current = next;\n        setPlayingMessageId(id);\n        next.play();\n      } catch (e) {\n        console.error(e);\n      }\n    }, [playingMessageId, stopPlayer]);\n    (0, _react.useEffect)(() => {\n      var interval = setInterval(() => {\n        var p = playerRef.current;\n        if (!p) return;\n        var finished = !p.playing && Number(p.currentTime) > 0;\n        if (finished) {\n          stopPlayer();\n        }\n      }, 250);\n      return () => {\n        clearInterval(interval);\n        stopPlayer();\n      };\n    }, [stopPlayer]);\n    return {\n      playingMessageId,\n      togglePlayVoiceMemo\n    };\n  }\n});","lineCount":73,"map":[[12,2,4,0,"exports"],[12,9,4,0],[12,10,4,0,"useVoiceMemoPlayer"],[12,28,4,0],[12,31,4,0,"useVoiceMemoPlayer"],[12,49,4,0],[13,2,68,1],[13,6,68,1,"_babelRuntimeHelpersSlicedToArray"],[13,39,68,1],[13,42,68,1,"require"],[13,49,68,1],[13,50,68,1,"_dependencyMap"],[13,64,68,1],[14,2,68,1],[14,6,68,1,"_slicedToArray"],[14,20,68,1],[14,23,68,1,"_interopDefault"],[14,38,68,1],[14,39,68,1,"_babelRuntimeHelpersSlicedToArray"],[14,72,68,1],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_expoAudio"],[16,16,2,0],[16,19,2,0,"require"],[16,26,2,0],[16,27,2,0,"_dependencyMap"],[16,41,2,0],[17,2,4,7],[17,11,4,16,"useVoiceMemoPlayer"],[17,29,4,34,"useVoiceMemoPlayer"],[17,30,4,34],[17,32,4,37],[18,4,5,2],[18,8,5,2,"_useState"],[18,17,5,2],[18,20,5,50],[18,24,5,50,"useState"],[18,30,5,58],[18,31,5,58,"useState"],[18,39,5,58],[18,41,5,59],[18,45,5,63],[18,46,5,64],[19,6,5,64,"_useState2"],[19,16,5,64],[19,23,5,64,"_slicedToArray"],[19,37,5,64],[19,38,5,64,"default"],[19,45,5,64],[19,47,5,64,"_useState"],[19,56,5,64],[20,6,5,9,"playingMessageId"],[20,22,5,25],[20,25,5,25,"_useState2"],[20,35,5,25],[21,6,5,27,"setPlayingMessageId"],[21,25,5,46],[21,28,5,46,"_useState2"],[21,38,5,46],[22,4,6,2],[22,8,6,8,"playerRef"],[22,17,6,17],[22,20,6,20],[22,24,6,20,"useRef"],[22,30,6,26],[22,31,6,26,"useRef"],[22,37,6,26],[22,39,6,27],[22,43,6,31],[22,44,6,32],[23,4,8,2],[23,8,8,8,"stopPlayer"],[23,18,8,18],[23,21,8,21],[23,25,8,21,"useCallback"],[23,31,8,32],[23,32,8,32,"useCallback"],[23,43,8,32],[23,45,8,33],[23,51,8,39],[24,6,9,4],[24,10,9,10,"p"],[24,11,9,11],[24,14,9,14,"playerRef"],[24,23,9,23],[24,24,9,24,"current"],[24,31,9,31],[25,6,10,4],[25,10,10,8],[25,11,10,9,"p"],[25,12,10,10],[25,14,10,12],[26,6,11,4],[26,10,11,8],[27,8,12,6,"p"],[27,9,12,7],[27,10,12,8,"pause"],[27,15,12,13],[27,16,12,14],[27,17,12,15],[28,8,13,6,"p"],[28,9,13,7],[28,10,13,8,"remove"],[28,16,13,14],[28,17,13,15],[28,18,13,16],[29,6,14,4],[29,7,14,5],[29,8,14,6],[29,15,14,13,"e"],[29,16,14,14],[29,18,14,16],[30,8,15,6,"console"],[30,15,15,13],[30,16,15,14,"error"],[30,21,15,19],[30,22,15,20,"e"],[30,23,15,21],[30,24,15,22],[31,6,16,4],[31,7,16,5],[31,16,16,14],[32,8,17,6,"playerRef"],[32,17,17,15],[32,18,17,16,"current"],[32,25,17,23],[32,28,17,26],[32,32,17,30],[33,8,18,6,"setPlayingMessageId"],[33,27,18,25],[33,28,18,26],[33,32,18,30],[33,33,18,31],[34,6,19,4],[35,4,20,2],[35,5,20,3],[35,7,20,5],[35,9,20,7],[35,10,20,8],[36,4,22,2],[36,8,22,8,"togglePlayVoiceMemo"],[36,27,22,27],[36,30,22,30],[36,34,22,30,"useCallback"],[36,40,22,41],[36,41,22,41,"useCallback"],[36,52,22,41],[36,54,23,5,"message"],[36,61,23,12],[36,65,23,17],[37,6,24,6],[37,10,24,12,"url"],[37,13,24,15],[37,16,24,18,"String"],[37,22,24,24],[37,23,24,25,"message"],[37,30,24,32],[37,32,24,34,"audio_url"],[37,41,24,43],[37,45,24,47],[37,47,24,49],[37,48,24,50],[37,49,24,51,"trim"],[37,53,24,55],[37,54,24,56],[37,55,24,57],[38,6,25,6],[38,10,25,10],[38,11,25,11,"url"],[38,14,25,14],[38,16,25,16],[39,6,27,6],[39,10,27,12,"id"],[39,12,27,14],[39,15,27,17,"message"],[39,22,27,24],[39,24,27,26,"id"],[39,26,27,28],[40,6,28,6],[40,10,28,10,"playingMessageId"],[40,26,28,26],[40,30,28,30,"id"],[40,32,28,32],[40,37,28,37,"playingMessageId"],[40,53,28,53],[40,55,28,55],[41,8,29,8,"stopPlayer"],[41,18,29,18],[41,19,29,19],[41,20,29,20],[42,8,30,8],[43,6,31,6],[44,6,33,6,"stopPlayer"],[44,16,33,16],[44,17,33,17],[44,18,33,18],[45,6,35,6],[45,10,35,10],[46,8,36,8],[46,12,36,14,"next"],[46,16,36,18],[46,19,36,21],[46,23,36,21,"createAudioPlayer"],[46,33,36,38],[46,34,36,38,"createAudioPlayer"],[46,51,36,38],[46,53,36,39,"url"],[46,56,36,42],[46,57,36,43],[47,8,37,8,"playerRef"],[47,17,37,17],[47,18,37,18,"current"],[47,25,37,25],[47,28,37,28,"next"],[47,32,37,32],[48,8,38,8,"setPlayingMessageId"],[48,27,38,27],[48,28,38,28,"id"],[48,30,38,30],[48,31,38,31],[49,8,39,8,"next"],[49,12,39,12],[49,13,39,13,"play"],[49,17,39,17],[49,18,39,18],[49,19,39,19],[50,6,40,6],[50,7,40,7],[50,8,40,8],[50,15,40,15,"e"],[50,16,40,16],[50,18,40,18],[51,8,41,8,"console"],[51,15,41,15],[51,16,41,16,"error"],[51,21,41,21],[51,22,41,22,"e"],[51,23,41,23],[51,24,41,24],[52,6,42,6],[53,4,43,4],[53,5,43,5],[53,7,44,4],[53,8,44,5,"playingMessageId"],[53,24,44,21],[53,26,44,23,"stopPlayer"],[53,36,44,33],[53,37,45,2],[53,38,45,3],[54,4,47,2],[54,8,47,2,"useEffect"],[54,14,47,11],[54,15,47,11,"useEffect"],[54,24,47,11],[54,26,47,12],[54,32,47,18],[55,6,48,4],[55,10,48,10,"interval"],[55,18,48,18],[55,21,48,21,"setInterval"],[55,32,48,32],[55,33,48,33],[55,39,48,39],[56,8,49,6],[56,12,49,12,"p"],[56,13,49,13],[56,16,49,16,"playerRef"],[56,25,49,25],[56,26,49,26,"current"],[56,33,49,33],[57,8,50,6],[57,12,50,10],[57,13,50,11,"p"],[57,14,50,12],[57,16,50,14],[58,8,52,6],[58,12,52,12,"finished"],[58,20,52,20],[58,23,52,23],[58,24,52,24,"p"],[58,25,52,25],[58,26,52,26,"playing"],[58,33,52,33],[58,37,52,37,"Number"],[58,43,52,43],[58,44,52,44,"p"],[58,45,52,45],[58,46,52,46,"currentTime"],[58,57,52,57],[58,58,52,58],[58,61,52,61],[58,62,52,62],[59,8,53,6],[59,12,53,10,"finished"],[59,20,53,18],[59,22,53,20],[60,10,54,8,"stopPlayer"],[60,20,54,18],[60,21,54,19],[60,22,54,20],[61,8,55,6],[62,6,56,4],[62,7,56,5],[62,9,56,7],[62,12,56,10],[62,13,56,11],[63,6,58,4],[63,13,58,11],[63,19,58,17],[64,8,59,6,"clearInterval"],[64,21,59,19],[64,22,59,20,"interval"],[64,30,59,28],[64,31,59,29],[65,8,60,6,"stopPlayer"],[65,18,60,16],[65,19,60,17],[65,20,60,18],[66,6,61,4],[66,7,61,5],[67,4,62,2],[67,5,62,3],[67,7,62,5],[67,8,62,6,"stopPlayer"],[67,18,62,16],[67,19,62,17],[67,20,62,18],[68,4,64,2],[68,11,64,9],[69,6,65,4,"playingMessageId"],[69,22,65,20],[70,6,66,4,"togglePlayVoiceMemo"],[71,4,67,2],[71,5,67,3],[72,2,68,0],[73,0,68,1],[73,3]],"functionMap":{"names":["<global>","useVoiceMemoPlayer","stopPlayer","togglePlayVoiceMemo","useEffect$argument_0","setInterval$argument_0","<anonymous>"],"mappings":"AAA;OCG;iCCI;GDY;IEG;KFoB;YGI;iCCC;KDQ;WEE;KFG;GHC;CDM"},"hasCjsExports":false},"type":"js/module"}]}