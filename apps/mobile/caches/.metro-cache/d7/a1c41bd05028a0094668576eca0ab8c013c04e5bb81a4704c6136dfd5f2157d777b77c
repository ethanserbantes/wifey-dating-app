{"dependencies":[{"name":"../../error/GraphQLError.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"bmIpo7jOJABVILoymQcjQyoT3Bc=","exportNames":["*"],"imports":1}},{"name":"../../language/kinds.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":48,"index":109}}],"key":"Pst0V1b6vjNwQXmeu75q8aBhbiU=","exportNames":["*"],"imports":1}},{"name":"../../language/predicates.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":110},"end":{"line":6,"column":39,"index":205}}],"key":"hqw0PcNSnGkM7Ia8n1EEi+6RnqQ=","exportNames":["*"],"imports":1}},{"name":"../../type/directives.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":206},"end":{"line":7,"column":64,"index":270}}],"key":"vqgrUrxCFQhMbPaSBgmH8RNqLTE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.UniqueDirectivesPerLocationRule = UniqueDirectivesPerLocationRule;\n  var _errorGraphQLErrorMjs = require(_dependencyMap[0]);\n  var _languageKindsMjs = require(_dependencyMap[1]);\n  var _languagePredicatesMjs = require(_dependencyMap[2]);\n  var _typeDirectivesMjs = require(_dependencyMap[3]);\n  /**\n   * Unique directive names per location\n   *\n   * A GraphQL document is only valid if all non-repeatable directives at\n   * a given location are uniquely named.\n   *\n   * See https://spec.graphql.org/draft/#sec-Directives-Are-Unique-Per-Location\n   */\n  function UniqueDirectivesPerLocationRule(context) {\n    var uniqueDirectiveMap = Object.create(null);\n    var schema = context.getSchema();\n    var definedDirectives = schema ? schema.getDirectives() : _typeDirectivesMjs.specifiedDirectives;\n    for (var directive of definedDirectives) {\n      uniqueDirectiveMap[directive.name] = !directive.isRepeatable;\n    }\n    var astDefinitions = context.getDocument().definitions;\n    for (var def of astDefinitions) {\n      if (def.kind === _languageKindsMjs.Kind.DIRECTIVE_DEFINITION) {\n        uniqueDirectiveMap[def.name.value] = !def.repeatable;\n      }\n    }\n    var schemaDirectives = Object.create(null);\n    var typeDirectivesMap = Object.create(null);\n    return {\n      // Many different AST nodes may contain directives. Rather than listing\n      // them all, just listen for entering any node, and check to see if it\n      // defines any directives.\n      enter(node) {\n        if (!('directives' in node) || !node.directives) {\n          return;\n        }\n        var seenDirectives;\n        if (node.kind === _languageKindsMjs.Kind.SCHEMA_DEFINITION || node.kind === _languageKindsMjs.Kind.SCHEMA_EXTENSION) {\n          seenDirectives = schemaDirectives;\n        } else if ((0, _languagePredicatesMjs.isTypeDefinitionNode)(node) || (0, _languagePredicatesMjs.isTypeExtensionNode)(node)) {\n          var typeName = node.name.value;\n          seenDirectives = typeDirectivesMap[typeName];\n          if (seenDirectives === undefined) {\n            typeDirectivesMap[typeName] = seenDirectives = Object.create(null);\n          }\n        } else {\n          seenDirectives = Object.create(null);\n        }\n        for (var _directive of node.directives) {\n          var directiveName = _directive.name.value;\n          if (uniqueDirectiveMap[directiveName]) {\n            if (seenDirectives[directiveName]) {\n              context.reportError(new _errorGraphQLErrorMjs.GraphQLError(`The directive \"@${directiveName}\" can only be used once at this location.`, {\n                nodes: [seenDirectives[directiveName], _directive]\n              }));\n            } else {\n              seenDirectives[directiveName] = _directive;\n            }\n          }\n        }\n      }\n    };\n  }\n});","lineCount":70,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"UniqueDirectivesPerLocationRule"],[7,41,17,0],[7,44,17,0,"UniqueDirectivesPerLocationRule"],[7,75,17,0],[8,2,1,0],[8,6,1,0,"_errorGraphQLErrorMjs"],[8,27,1,0],[8,30,1,0,"require"],[8,37,1,0],[8,38,1,0,"_dependencyMap"],[8,52,1,0],[9,2,2,0],[9,6,2,0,"_languageKindsMjs"],[9,23,2,0],[9,26,2,0,"require"],[9,33,2,0],[9,34,2,0,"_dependencyMap"],[9,48,2,0],[10,2,3,0],[10,6,3,0,"_languagePredicatesMjs"],[10,28,3,0],[10,31,3,0,"require"],[10,38,3,0],[10,39,3,0,"_dependencyMap"],[10,53,3,0],[11,2,7,0],[11,6,7,0,"_typeDirectivesMjs"],[11,24,7,0],[11,27,7,0,"require"],[11,34,7,0],[11,35,7,0,"_dependencyMap"],[11,49,7,0],[12,2,9,0],[13,0,10,0],[14,0,11,0],[15,0,12,0],[16,0,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,2,17,7],[20,11,17,16,"UniqueDirectivesPerLocationRule"],[20,42,17,47,"UniqueDirectivesPerLocationRule"],[20,43,17,48,"context"],[20,50,17,55],[20,52,17,57],[21,4,18,2],[21,8,18,8,"uniqueDirectiveMap"],[21,26,18,26],[21,29,18,29,"Object"],[21,35,18,35],[21,36,18,36,"create"],[21,42,18,42],[21,43,18,43],[21,47,18,47],[21,48,18,48],[22,4,19,2],[22,8,19,8,"schema"],[22,14,19,14],[22,17,19,17,"context"],[22,24,19,24],[22,25,19,25,"getSchema"],[22,34,19,34],[22,35,19,35],[22,36,19,36],[23,4,20,2],[23,8,20,8,"definedDirectives"],[23,25,20,25],[23,28,20,28,"schema"],[23,34,20,34],[23,37,21,6,"schema"],[23,43,21,12],[23,44,21,13,"getDirectives"],[23,57,21,26],[23,58,21,27],[23,59,21,28],[23,62,22,6,"specifiedDirectives"],[23,80,22,25],[23,81,22,25,"specifiedDirectives"],[23,100,22,25],[24,4,24,2],[24,9,24,7],[24,13,24,13,"directive"],[24,22,24,22],[24,26,24,26,"definedDirectives"],[24,43,24,43],[24,45,24,45],[25,6,25,4,"uniqueDirectiveMap"],[25,24,25,22],[25,25,25,23,"directive"],[25,34,25,32],[25,35,25,33,"name"],[25,39,25,37],[25,40,25,38],[25,43,25,41],[25,44,25,42,"directive"],[25,53,25,51],[25,54,25,52,"isRepeatable"],[25,66,25,64],[26,4,26,2],[27,4,28,2],[27,8,28,8,"astDefinitions"],[27,22,28,22],[27,25,28,25,"context"],[27,32,28,32],[27,33,28,33,"getDocument"],[27,44,28,44],[27,45,28,45],[27,46,28,46],[27,47,28,47,"definitions"],[27,58,28,58],[28,4,30,2],[28,9,30,7],[28,13,30,13,"def"],[28,16,30,16],[28,20,30,20,"astDefinitions"],[28,34,30,34],[28,36,30,36],[29,6,31,4],[29,10,31,8,"def"],[29,13,31,11],[29,14,31,12,"kind"],[29,18,31,16],[29,23,31,21,"Kind"],[29,40,31,25],[29,41,31,25,"Kind"],[29,45,31,25],[29,46,31,26,"DIRECTIVE_DEFINITION"],[29,66,31,46],[29,68,31,48],[30,8,32,6,"uniqueDirectiveMap"],[30,26,32,24],[30,27,32,25,"def"],[30,30,32,28],[30,31,32,29,"name"],[30,35,32,33],[30,36,32,34,"value"],[30,41,32,39],[30,42,32,40],[30,45,32,43],[30,46,32,44,"def"],[30,49,32,47],[30,50,32,48,"repeatable"],[30,60,32,58],[31,6,33,4],[32,4,34,2],[33,4,36,2],[33,8,36,8,"schemaDirectives"],[33,24,36,24],[33,27,36,27,"Object"],[33,33,36,33],[33,34,36,34,"create"],[33,40,36,40],[33,41,36,41],[33,45,36,45],[33,46,36,46],[34,4,37,2],[34,8,37,8,"typeDirectivesMap"],[34,25,37,25],[34,28,37,28,"Object"],[34,34,37,34],[34,35,37,35,"create"],[34,41,37,41],[34,42,37,42],[34,46,37,46],[34,47,37,47],[35,4,38,2],[35,11,38,9],[36,6,39,4],[37,6,40,4],[38,6,41,4],[39,6,42,4,"enter"],[39,11,42,9,"enter"],[39,12,42,10,"node"],[39,16,42,14],[39,18,42,16],[40,8,43,6],[40,12,43,10],[40,14,43,12],[40,26,43,24],[40,30,43,28,"node"],[40,34,43,32],[40,35,43,33],[40,39,43,37],[40,40,43,38,"node"],[40,44,43,42],[40,45,43,43,"directives"],[40,55,43,53],[40,57,43,55],[41,10,44,8],[42,8,45,6],[43,8,47,6],[43,12,47,10,"seenDirectives"],[43,26,47,24],[44,8,49,6],[44,12,50,8,"node"],[44,16,50,12],[44,17,50,13,"kind"],[44,21,50,17],[44,26,50,22,"Kind"],[44,43,50,26],[44,44,50,26,"Kind"],[44,48,50,26],[44,49,50,27,"SCHEMA_DEFINITION"],[44,66,50,44],[44,70,51,8,"node"],[44,74,51,12],[44,75,51,13,"kind"],[44,79,51,17],[44,84,51,22,"Kind"],[44,101,51,26],[44,102,51,26,"Kind"],[44,106,51,26],[44,107,51,27,"SCHEMA_EXTENSION"],[44,123,51,43],[44,125,52,8],[45,10,53,8,"seenDirectives"],[45,24,53,22],[45,27,53,25,"schemaDirectives"],[45,43,53,41],[46,8,54,6],[46,9,54,7],[46,15,54,13],[46,19,54,17],[46,23,54,17,"isTypeDefinitionNode"],[46,45,54,37],[46,46,54,37,"isTypeDefinitionNode"],[46,66,54,37],[46,68,54,38,"node"],[46,72,54,42],[46,73,54,43],[46,77,54,47],[46,81,54,47,"isTypeExtensionNode"],[46,103,54,66],[46,104,54,66,"isTypeExtensionNode"],[46,123,54,66],[46,125,54,67,"node"],[46,129,54,71],[46,130,54,72],[46,132,54,74],[47,10,55,8],[47,14,55,14,"typeName"],[47,22,55,22],[47,25,55,25,"node"],[47,29,55,29],[47,30,55,30,"name"],[47,34,55,34],[47,35,55,35,"value"],[47,40,55,40],[48,10,56,8,"seenDirectives"],[48,24,56,22],[48,27,56,25,"typeDirectivesMap"],[48,44,56,42],[48,45,56,43,"typeName"],[48,53,56,51],[48,54,56,52],[49,10,58,8],[49,14,58,12,"seenDirectives"],[49,28,58,26],[49,33,58,31,"undefined"],[49,42,58,40],[49,44,58,42],[50,12,59,10,"typeDirectivesMap"],[50,29,59,27],[50,30,59,28,"typeName"],[50,38,59,36],[50,39,59,37],[50,42,59,40,"seenDirectives"],[50,56,59,54],[50,59,59,57,"Object"],[50,65,59,63],[50,66,59,64,"create"],[50,72,59,70],[50,73,59,71],[50,77,59,75],[50,78,59,76],[51,10,60,8],[52,8,61,6],[52,9,61,7],[52,15,61,13],[53,10,62,8,"seenDirectives"],[53,24,62,22],[53,27,62,25,"Object"],[53,33,62,31],[53,34,62,32,"create"],[53,40,62,38],[53,41,62,39],[53,45,62,43],[53,46,62,44],[54,8,63,6],[55,8,65,6],[55,13,65,11],[55,17,65,17,"directive"],[55,27,65,26],[55,31,65,30,"node"],[55,35,65,34],[55,36,65,35,"directives"],[55,46,65,45],[55,48,65,47],[56,10,66,8],[56,14,66,14,"directiveName"],[56,27,66,27],[56,30,66,30,"directive"],[56,40,66,39],[56,41,66,40,"name"],[56,45,66,44],[56,46,66,45,"value"],[56,51,66,50],[57,10,68,8],[57,14,68,12,"uniqueDirectiveMap"],[57,32,68,30],[57,33,68,31,"directiveName"],[57,46,68,44],[57,47,68,45],[57,49,68,47],[58,12,69,10],[58,16,69,14,"seenDirectives"],[58,30,69,28],[58,31,69,29,"directiveName"],[58,44,69,42],[58,45,69,43],[58,47,69,45],[59,14,70,12,"context"],[59,21,70,19],[59,22,70,20,"reportError"],[59,33,70,31],[59,34,71,14],[59,38,71,18,"GraphQLError"],[59,59,71,30],[59,60,71,30,"GraphQLError"],[59,72,71,30],[59,73,72,16],[59,92,72,35,"directiveName"],[59,105,72,48],[59,148,72,91],[59,150,73,16],[60,16,74,18,"nodes"],[60,21,74,23],[60,23,74,25],[60,24,74,26,"seenDirectives"],[60,38,74,40],[60,39,74,41,"directiveName"],[60,52,74,54],[60,53,74,55],[60,55,74,57,"directive"],[60,65,74,66],[61,14,75,16],[61,15,76,14],[61,16,77,12],[61,17,77,13],[62,12,78,10],[62,13,78,11],[62,19,78,17],[63,14,79,12,"seenDirectives"],[63,28,79,26],[63,29,79,27,"directiveName"],[63,42,79,40],[63,43,79,41],[63,46,79,44,"directive"],[63,56,79,53],[64,12,80,10],[65,10,81,8],[66,8,82,6],[67,6,83,4],[68,4,84,2],[68,5,84,3],[69,2,85,0],[70,0,85,1],[70,3]],"functionMap":{"names":["<global>","UniqueDirectivesPerLocationRule","enter"],"mappings":"AAA;OCgB;ICyB;KDyC;CDE"},"hasCjsExports":false},"type":"js/module"}]}