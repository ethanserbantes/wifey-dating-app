{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":31,"index":79}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[2], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoFileSystem = require(_dependencyMap[3], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _react = require(_dependencyMap[4], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var baseURL = _expoVirtualEnv.env.EXPO_PUBLIC_BASE_URL || \"\";\n          var uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          if ('reactNativeAsset' in input && input.reactNativeAsset) {\n            // Read image file as base64\n            var uri = input.reactNativeAsset.uri;\n            var base64 = yield FileSystem.readAsStringAsync(uri, {\n              encoding: FileSystem.EncodingType.Base64\n            });\n\n            // Send base64 image data to backend\n            var response = yield fetch(uploadUrl, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                base64: base64,\n                fileName: input.reactNativeAsset?.name || \"photo.jpg\",\n                mimeType: input.reactNativeAsset?.mimeType || \"image/jpeg\"\n              })\n            });\n            if (!response.ok) {\n              if (response.status === 413) {\n                throw new Error('Upload failed: File too large.');\n              }\n              throw new Error(`Upload failed: ${response.status}`);\n            }\n            var data = yield response.json();\n            return {\n              url: data.url,\n              mimeType: data.mimeType || null\n            };\n          } else {\n            throw new Error('Invalid upload input');\n          }\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === 'string') {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: 'Upload failed'\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":122,"map":[[28,2,60,0,"Object"],[28,8,60,0],[28,9,60,0,"defineProperty"],[28,23,60,0],[28,24,60,0,"exports"],[28,31,60,0],[29,4,60,0,"enumerable"],[29,14,60,0],[30,4,60,0,"get"],[30,7,60,0],[30,18,60,0,"get"],[30,19,60,0],[31,6,60,0],[31,13,60,0,"_default"],[31,21,60,0],[32,4,60,0],[33,2,60,0],[34,2,59,0,"Object"],[34,8,59,0],[34,9,59,0,"defineProperty"],[34,23,59,0],[34,24,59,0,"exports"],[34,31,59,0],[35,4,59,0,"enumerable"],[35,14,59,0],[36,4,59,0,"get"],[36,7,59,0],[36,18,59,0,"get"],[36,19,59,0],[37,6,59,0],[37,13,59,9,"useUpload"],[37,22,59,18],[38,4,59,18],[39,2,59,18],[40,2,59,21],[40,6,59,21,"_expoVirtualEnv"],[40,21,59,21],[40,24,59,21,"require"],[40,31,59,21],[40,32,59,21,"_dependencyMap"],[40,46,59,21],[41,2,59,21],[41,6,59,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,42,59,21],[41,45,59,21,"require"],[41,52,59,21],[41,53,59,21,"_dependencyMap"],[41,67,59,21],[42,2,59,21],[42,6,59,21,"_asyncToGenerator"],[42,23,59,21],[42,26,59,21,"_interopDefault"],[42,41,59,21],[42,42,59,21,"_babelRuntimeHelpersAsyncToGenerator"],[42,78,59,21],[43,2,59,21],[43,6,59,21,"_babelRuntimeHelpersSlicedToArray"],[43,39,59,21],[43,42,59,21,"require"],[43,49,59,21],[43,50,59,21,"_dependencyMap"],[43,64,59,21],[44,2,59,21],[44,6,59,21,"_slicedToArray"],[44,20,59,21],[44,23,59,21,"_interopDefault"],[44,38,59,21],[44,39,59,21,"_babelRuntimeHelpersSlicedToArray"],[44,72,59,21],[45,2,1,0],[45,6,1,0,"_expoFileSystem"],[45,21,1,0],[45,24,1,0,"require"],[45,31,1,0],[45,32,1,0,"_dependencyMap"],[45,46,1,0],[46,2,1,0],[46,6,1,0,"FileSystem"],[46,16,1,0],[46,19,1,0,"_interopNamespace"],[46,36,1,0],[46,37,1,0,"_expoFileSystem"],[46,52,1,0],[47,2,2,0],[47,6,2,0,"_react"],[47,12,2,0],[47,15,2,0,"require"],[47,22,2,0],[47,23,2,0,"_dependencyMap"],[47,37,2,0],[48,2,2,0],[48,6,2,0,"React"],[48,11,2,0],[48,14,2,0,"_interopNamespace"],[48,31,2,0],[48,32,2,0,"_react"],[48,38,2,0],[49,2,4,0],[49,11,4,9,"useUpload"],[49,20,4,18,"useUpload"],[49,21,4,18],[49,23,4,21],[50,4,4,21,"_s"],[50,6,4,21],[51,4,5,2],[51,8,5,2,"_React$useState"],[51,23,5,2],[51,26,5,32,"React"],[51,31,5,37],[51,32,5,38,"useState"],[51,40,5,46],[51,41,5,47],[51,46,5,52],[51,47,5,53],[52,6,5,53,"_React$useState2"],[52,22,5,53],[52,29,5,53,"_slicedToArray"],[52,43,5,53],[52,44,5,53,"default"],[52,51,5,53],[52,53,5,53,"_React$useState"],[52,68,5,53],[53,6,5,9,"loading"],[53,13,5,16],[53,16,5,16,"_React$useState2"],[53,32,5,16],[54,6,5,18,"setLoading"],[54,16,5,28],[54,19,5,28,"_React$useState2"],[54,35,5,28],[55,4,6,2],[55,8,6,8,"upload"],[55,14,6,14],[55,17,6,17,"React"],[55,22,6,22],[55,23,6,23,"useCallback"],[55,34,6,34],[56,6,6,34],[56,10,6,34,"_ref"],[56,14,6,34],[56,21,6,34,"_asyncToGenerator"],[56,38,6,34],[56,39,6,34,"default"],[56,46,6,34],[56,48,6,35],[56,59,6,42,"input"],[56,64,6,47],[56,66,6,52],[57,8,7,4],[57,12,7,8],[58,10,8,6,"setLoading"],[58,20,8,16],[58,21,8,17],[58,25,8,21],[58,26,8,22],[59,10,9,6],[59,14,9,12,"baseURL"],[59,21,9,19],[59,24,9,22,"_expoVirtualEnv"],[59,39,9,22],[59,40,9,22,"env"],[59,43,9,22],[59,44,9,22,"EXPO_PUBLIC_BASE_URL"],[59,64,9,22],[59,68,9,58],[59,70,9,60],[60,10,10,6],[60,14,10,12,"uploadUrl"],[60,23,10,21],[60,26,10,24,"baseURL"],[60,33,10,31],[60,36,10,34],[60,39,10,37,"baseURL"],[60,46,10,44],[60,68,10,66],[60,71,10,69],[60,93,10,91],[61,10,12,6],[61,14,12,10],[61,32,12,28],[61,36,12,32,"input"],[61,41,12,37],[61,45,12,41,"input"],[61,50,12,46],[61,51,12,47,"reactNativeAsset"],[61,67,12,63],[61,69,12,65],[62,12,13,8],[63,12,14,8],[63,16,14,14,"uri"],[63,19,14,17],[63,22,14,20,"input"],[63,27,14,25],[63,28,14,26,"reactNativeAsset"],[63,44,14,42],[63,45,14,43,"uri"],[63,48,14,46],[64,12,15,8],[64,16,15,14,"base64"],[64,22,15,20],[64,31,15,29,"FileSystem"],[64,41,15,39],[64,42,15,40,"readAsStringAsync"],[64,59,15,57],[64,60,15,58,"uri"],[64,63,15,61],[64,65,15,63],[65,14,16,10,"encoding"],[65,22,16,18],[65,24,16,20,"FileSystem"],[65,34,16,30],[65,35,16,31,"EncodingType"],[65,47,16,43],[65,48,16,44,"Base64"],[66,12,17,8],[66,13,17,9],[66,14,17,10],[68,12,19,8],[69,12,20,8],[69,16,20,14,"response"],[69,24,20,22],[69,33,20,31,"fetch"],[69,38,20,36],[69,39,20,37,"uploadUrl"],[69,48,20,46],[69,50,20,48],[70,14,21,10,"method"],[70,20,21,16],[70,22,21,18],[70,28,21,24],[71,14,22,10,"headers"],[71,21,22,17],[71,23,22,19],[72,16,23,12],[72,30,23,26],[72,32,23,28],[73,14,24,10],[73,15,24,11],[74,14,25,10,"body"],[74,18,25,14],[74,20,25,16,"JSON"],[74,24,25,20],[74,25,25,21,"stringify"],[74,34,25,30],[74,35,25,31],[75,16,26,12,"base64"],[75,22,26,18],[75,24,26,20,"base64"],[75,30,26,26],[76,16,27,12,"fileName"],[76,24,27,20],[76,26,27,22,"input"],[76,31,27,27],[76,32,27,28,"reactNativeAsset"],[76,48,27,44],[76,50,27,46,"name"],[76,54,27,50],[76,58,27,54],[76,69,27,65],[77,16,28,12,"mimeType"],[77,24,28,20],[77,26,28,22,"input"],[77,31,28,27],[77,32,28,28,"reactNativeAsset"],[77,48,28,44],[77,50,28,46,"mimeType"],[77,58,28,54],[77,62,28,58],[78,14,29,10],[78,15,29,11],[79,12,30,8],[79,13,30,9],[79,14,30,10],[80,12,32,8],[80,16,32,12],[80,17,32,13,"response"],[80,25,32,21],[80,26,32,22,"ok"],[80,28,32,24],[80,30,32,26],[81,14,33,10],[81,18,33,14,"response"],[81,26,33,22],[81,27,33,23,"status"],[81,33,33,29],[81,38,33,34],[81,41,33,37],[81,43,33,39],[82,16,34,12],[82,22,34,18],[82,26,34,22,"Error"],[82,31,34,27],[82,32,34,28],[82,64,34,60],[82,65,34,61],[83,14,35,10],[84,14,36,10],[84,20,36,16],[84,24,36,20,"Error"],[84,29,36,25],[84,30,36,26],[84,48,36,44,"response"],[84,56,36,52],[84,57,36,53,"status"],[84,63,36,59],[84,65,36,61],[84,66,36,62],[85,12,37,8],[86,12,38,8],[86,16,38,14,"data"],[86,20,38,18],[86,29,38,27,"response"],[86,37,38,35],[86,38,38,36,"json"],[86,42,38,40],[86,43,38,41],[86,44,38,42],[87,12,39,8],[87,19,39,15],[88,14,39,17,"url"],[88,17,39,20],[88,19,39,22,"data"],[88,23,39,26],[88,24,39,27,"url"],[88,27,39,30],[89,14,39,32,"mimeType"],[89,22,39,40],[89,24,39,42,"data"],[89,28,39,46],[89,29,39,47,"mimeType"],[89,37,39,55],[89,41,39,59],[90,12,39,64],[90,13,39,65],[91,10,40,6],[91,11,40,7],[91,17,40,13],[92,12,41,8],[92,18,41,14],[92,22,41,18,"Error"],[92,27,41,23],[92,28,41,24],[92,50,41,46],[92,51,41,47],[93,10,42,6],[94,8,43,4],[94,9,43,5],[94,10,43,6],[94,17,43,13,"uploadError"],[94,28,43,24],[94,30,43,26],[95,10,44,6],[95,14,44,10,"uploadError"],[95,25,44,21],[95,37,44,33,"Error"],[95,42,44,38],[95,44,44,40],[96,12,45,8],[96,19,45,15],[97,14,45,17,"error"],[97,19,45,22],[97,21,45,24,"uploadError"],[97,32,45,35],[97,33,45,36,"message"],[98,12,45,44],[98,13,45,45],[99,10,46,6],[100,10,47,6],[100,14,47,10],[100,21,47,17,"uploadError"],[100,32,47,28],[100,37,47,33],[100,45,47,41],[100,47,47,43],[101,12,48,8],[101,19,48,15],[102,14,48,17,"error"],[102,19,48,22],[102,21,48,24,"uploadError"],[103,12,48,36],[103,13,48,37],[104,10,49,6],[105,10,50,6],[105,17,50,13],[106,12,50,15,"error"],[106,17,50,20],[106,19,50,22],[107,10,50,38],[107,11,50,39],[108,8,51,4],[108,9,51,5],[108,18,51,14],[109,10,52,6,"setLoading"],[109,20,52,16],[109,21,52,17],[109,26,52,22],[109,27,52,23],[110,8,53,4],[111,6,54,2],[111,7,54,3],[112,6,54,3],[112,23,54,3,"_x"],[112,25,54,3],[113,8,54,3],[113,15,54,3,"_ref"],[113,19,54,3],[113,20,54,3,"apply"],[113,25,54,3],[113,32,54,3,"arguments"],[113,41,54,3],[114,6,54,3],[115,4,54,3],[115,9,54,5],[115,11,54,7],[115,12,54,8],[116,4,56,2],[116,11,56,9],[116,12,56,10,"upload"],[116,18,56,16],[116,20,56,18],[117,6,56,20,"loading"],[118,4,56,28],[118,5,56,29],[118,6,56,30],[119,2,57,0],[120,2,57,1,"_s"],[120,4,57,1],[120,5,4,9,"useUpload"],[120,14,4,18],[121,2,60,0],[121,6,60,0,"_default"],[121,14,60,0],[121,17,60,15,"useUpload"],[121,26,60,24],[122,0,60,25],[122,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACG;mCCE;GDgD;CDG"},"hasCjsExports":false},"type":"js/module"}]}