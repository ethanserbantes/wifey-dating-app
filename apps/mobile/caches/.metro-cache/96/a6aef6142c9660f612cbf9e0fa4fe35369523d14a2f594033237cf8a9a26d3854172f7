{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[2], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[3], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var baseURL = _expoVirtualEnv.env.EXPO_PUBLIC_BASE_URL || \"\";\n          var uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          if ('reactNativeAsset' in input && input.reactNativeAsset) {\n            // Create FormData with image file\n            var formData = new FormData();\n            formData.append('file', {\n              uri: input.reactNativeAsset.uri,\n              name: input.reactNativeAsset.name || \"photo.jpg\",\n              type: input.reactNativeAsset.mimeType || \"image/jpeg\"\n            });\n\n            // Send to backend\n            var response = yield fetch(uploadUrl, {\n              method: 'POST',\n              body: formData\n            });\n            if (!response.ok) {\n              if (response.status === 413) {\n                throw new Error('Upload failed: File too large.');\n              }\n              throw new Error(`Upload failed: ${response.status}`);\n            }\n            var data = yield response.json();\n            return {\n              url: data.url,\n              mimeType: data.mimeType || null\n            };\n          } else {\n            throw new Error('Invalid upload input');\n          }\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === 'string') {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: 'Upload failed'\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":115,"map":[[28,2,54,0,"Object"],[28,8,54,0],[28,9,54,0,"defineProperty"],[28,23,54,0],[28,24,54,0,"exports"],[28,31,54,0],[29,4,54,0,"enumerable"],[29,14,54,0],[30,4,54,0,"get"],[30,7,54,0],[30,18,54,0,"get"],[30,19,54,0],[31,6,54,0],[31,13,54,0,"_default"],[31,21,54,0],[32,4,54,0],[33,2,54,0],[34,2,53,0,"Object"],[34,8,53,0],[34,9,53,0,"defineProperty"],[34,23,53,0],[34,24,53,0,"exports"],[34,31,53,0],[35,4,53,0,"enumerable"],[35,14,53,0],[36,4,53,0,"get"],[36,7,53,0],[36,18,53,0,"get"],[36,19,53,0],[37,6,53,0],[37,13,53,9,"useUpload"],[37,22,53,18],[38,4,53,18],[39,2,53,18],[40,2,53,21],[40,6,53,21,"_expoVirtualEnv"],[40,21,53,21],[40,24,53,21,"require"],[40,31,53,21],[40,32,53,21,"_dependencyMap"],[40,46,53,21],[41,2,53,21],[41,6,53,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,42,53,21],[41,45,53,21,"require"],[41,52,53,21],[41,53,53,21,"_dependencyMap"],[41,67,53,21],[42,2,53,21],[42,6,53,21,"_asyncToGenerator"],[42,23,53,21],[42,26,53,21,"_interopDefault"],[42,41,53,21],[42,42,53,21,"_babelRuntimeHelpersAsyncToGenerator"],[42,78,53,21],[43,2,53,21],[43,6,53,21,"_babelRuntimeHelpersSlicedToArray"],[43,39,53,21],[43,42,53,21,"require"],[43,49,53,21],[43,50,53,21,"_dependencyMap"],[43,64,53,21],[44,2,53,21],[44,6,53,21,"_slicedToArray"],[44,20,53,21],[44,23,53,21,"_interopDefault"],[44,38,53,21],[44,39,53,21,"_babelRuntimeHelpersSlicedToArray"],[44,72,53,21],[45,2,1,0],[45,6,1,0,"_react"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"React"],[46,11,1,0],[46,14,1,0,"_interopNamespace"],[46,31,1,0],[46,32,1,0,"_react"],[46,38,1,0],[47,2,3,0],[47,11,3,9,"useUpload"],[47,20,3,18,"useUpload"],[47,21,3,18],[47,23,3,21],[48,4,3,21,"_s"],[48,6,3,21],[49,4,4,2],[49,8,4,2,"_React$useState"],[49,23,4,2],[49,26,4,32,"React"],[49,31,4,37],[49,32,4,38,"useState"],[49,40,4,46],[49,41,4,47],[49,46,4,52],[49,47,4,53],[50,6,4,53,"_React$useState2"],[50,22,4,53],[50,29,4,53,"_slicedToArray"],[50,43,4,53],[50,44,4,53,"default"],[50,51,4,53],[50,53,4,53,"_React$useState"],[50,68,4,53],[51,6,4,9,"loading"],[51,13,4,16],[51,16,4,16,"_React$useState2"],[51,32,4,16],[52,6,4,18,"setLoading"],[52,16,4,28],[52,19,4,28,"_React$useState2"],[52,35,4,28],[53,4,5,2],[53,8,5,8,"upload"],[53,14,5,14],[53,17,5,17,"React"],[53,22,5,22],[53,23,5,23,"useCallback"],[53,34,5,34],[54,6,5,34],[54,10,5,34,"_ref"],[54,14,5,34],[54,21,5,34,"_asyncToGenerator"],[54,38,5,34],[54,39,5,34,"default"],[54,46,5,34],[54,48,5,35],[54,59,5,42,"input"],[54,64,5,47],[54,66,5,52],[55,8,6,4],[55,12,6,8],[56,10,7,6,"setLoading"],[56,20,7,16],[56,21,7,17],[56,25,7,21],[56,26,7,22],[57,10,8,6],[57,14,8,12,"baseURL"],[57,21,8,19],[57,24,8,22,"_expoVirtualEnv"],[57,39,8,22],[57,40,8,22,"env"],[57,43,8,22],[57,44,8,22,"EXPO_PUBLIC_BASE_URL"],[57,64,8,22],[57,68,8,58],[57,70,8,60],[58,10,9,6],[58,14,9,12,"uploadUrl"],[58,23,9,21],[58,26,9,24,"baseURL"],[58,33,9,31],[58,36,9,34],[58,39,9,37,"baseURL"],[58,46,9,44],[58,68,9,66],[58,71,9,69],[58,93,9,91],[59,10,11,6],[59,14,11,10],[59,32,11,28],[59,36,11,32,"input"],[59,41,11,37],[59,45,11,41,"input"],[59,50,11,46],[59,51,11,47,"reactNativeAsset"],[59,67,11,63],[59,69,11,65],[60,12,12,8],[61,12,13,8],[61,16,13,14,"formData"],[61,24,13,22],[61,27,13,25],[61,31,13,29,"FormData"],[61,39,13,37],[61,40,13,38],[61,41,13,39],[62,12,14,8,"formData"],[62,20,14,16],[62,21,14,17,"append"],[62,27,14,23],[62,28,14,24],[62,34,14,30],[62,36,14,32],[63,14,15,10,"uri"],[63,17,15,13],[63,19,15,15,"input"],[63,24,15,20],[63,25,15,21,"reactNativeAsset"],[63,41,15,37],[63,42,15,38,"uri"],[63,45,15,41],[64,14,16,10,"name"],[64,18,16,14],[64,20,16,16,"input"],[64,25,16,21],[64,26,16,22,"reactNativeAsset"],[64,42,16,38],[64,43,16,39,"name"],[64,47,16,43],[64,51,16,47],[64,62,16,58],[65,14,17,10,"type"],[65,18,17,14],[65,20,17,16,"input"],[65,25,17,21],[65,26,17,22,"reactNativeAsset"],[65,42,17,38],[65,43,17,39,"mimeType"],[65,51,17,47],[65,55,17,51],[66,12,18,8],[66,13,18,9],[66,14,18,10],[68,12,20,8],[69,12,21,8],[69,16,21,14,"response"],[69,24,21,22],[69,33,21,31,"fetch"],[69,38,21,36],[69,39,21,37,"uploadUrl"],[69,48,21,46],[69,50,21,48],[70,14,22,10,"method"],[70,20,22,16],[70,22,22,18],[70,28,22,24],[71,14,23,10,"body"],[71,18,23,14],[71,20,23,16,"formData"],[72,12,24,8],[72,13,24,9],[72,14,24,10],[73,12,26,8],[73,16,26,12],[73,17,26,13,"response"],[73,25,26,21],[73,26,26,22,"ok"],[73,28,26,24],[73,30,26,26],[74,14,27,10],[74,18,27,14,"response"],[74,26,27,22],[74,27,27,23,"status"],[74,33,27,29],[74,38,27,34],[74,41,27,37],[74,43,27,39],[75,16,28,12],[75,22,28,18],[75,26,28,22,"Error"],[75,31,28,27],[75,32,28,28],[75,64,28,60],[75,65,28,61],[76,14,29,10],[77,14,30,10],[77,20,30,16],[77,24,30,20,"Error"],[77,29,30,25],[77,30,30,26],[77,48,30,44,"response"],[77,56,30,52],[77,57,30,53,"status"],[77,63,30,59],[77,65,30,61],[77,66,30,62],[78,12,31,8],[79,12,32,8],[79,16,32,14,"data"],[79,20,32,18],[79,29,32,27,"response"],[79,37,32,35],[79,38,32,36,"json"],[79,42,32,40],[79,43,32,41],[79,44,32,42],[80,12,33,8],[80,19,33,15],[81,14,33,17,"url"],[81,17,33,20],[81,19,33,22,"data"],[81,23,33,26],[81,24,33,27,"url"],[81,27,33,30],[82,14,33,32,"mimeType"],[82,22,33,40],[82,24,33,42,"data"],[82,28,33,46],[82,29,33,47,"mimeType"],[82,37,33,55],[82,41,33,59],[83,12,33,64],[83,13,33,65],[84,10,34,6],[84,11,34,7],[84,17,34,13],[85,12,35,8],[85,18,35,14],[85,22,35,18,"Error"],[85,27,35,23],[85,28,35,24],[85,50,35,46],[85,51,35,47],[86,10,36,6],[87,8,37,4],[87,9,37,5],[87,10,37,6],[87,17,37,13,"uploadError"],[87,28,37,24],[87,30,37,26],[88,10,38,6],[88,14,38,10,"uploadError"],[88,25,38,21],[88,37,38,33,"Error"],[88,42,38,38],[88,44,38,40],[89,12,39,8],[89,19,39,15],[90,14,39,17,"error"],[90,19,39,22],[90,21,39,24,"uploadError"],[90,32,39,35],[90,33,39,36,"message"],[91,12,39,44],[91,13,39,45],[92,10,40,6],[93,10,41,6],[93,14,41,10],[93,21,41,17,"uploadError"],[93,32,41,28],[93,37,41,33],[93,45,41,41],[93,47,41,43],[94,12,42,8],[94,19,42,15],[95,14,42,17,"error"],[95,19,42,22],[95,21,42,24,"uploadError"],[96,12,42,36],[96,13,42,37],[97,10,43,6],[98,10,44,6],[98,17,44,13],[99,12,44,15,"error"],[99,17,44,20],[99,19,44,22],[100,10,44,38],[100,11,44,39],[101,8,45,4],[101,9,45,5],[101,18,45,14],[102,10,46,6,"setLoading"],[102,20,46,16],[102,21,46,17],[102,26,46,22],[102,27,46,23],[103,8,47,4],[104,6,48,2],[104,7,48,3],[105,6,48,3],[105,23,48,3,"_x"],[105,25,48,3],[106,8,48,3],[106,15,48,3,"_ref"],[106,19,48,3],[106,20,48,3,"apply"],[106,25,48,3],[106,32,48,3,"arguments"],[106,41,48,3],[107,6,48,3],[108,4,48,3],[108,9,48,5],[108,11,48,7],[108,12,48,8],[109,4,50,2],[109,11,50,9],[109,12,50,10,"upload"],[109,18,50,16],[109,20,50,18],[110,6,50,20,"loading"],[111,4,50,28],[111,5,50,29],[111,6,50,30],[112,2,51,0],[113,2,51,1,"_s"],[113,4,51,1],[113,5,3,9,"useUpload"],[113,14,3,18],[114,2,54,0],[114,6,54,0,"_default"],[114,14,54,0],[114,17,54,15,"useUpload"],[114,26,54,24],[115,0,54,25],[115,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GD2C;CDG"},"hasCjsExports":false},"type":"js/module"}]}