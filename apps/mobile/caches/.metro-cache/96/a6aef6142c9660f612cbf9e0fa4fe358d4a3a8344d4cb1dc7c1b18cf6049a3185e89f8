{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[2], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[3], \"react\");\n  var React = _interopNamespace(_react);\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var baseURL = _expoVirtualEnv.env.EXPO_PUBLIC_BASE_URL || \"\";\n          var uploadUrl = baseURL ? `${baseURL}/_create/api/upload/` : \"/_create/api/upload/\";\n          var response;\n\n          // Simple MVP upload: always POST to our backend\n          // Backend will generate a mock URL for now\n          response = yield fetch(uploadUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              fileName: input.reactNativeAsset?.name || \"photo.jpg\",\n              mimeType: input.reactNativeAsset?.mimeType || \"image/jpeg\"\n            })\n          });\n          if (!response.ok) {\n            if (response.status === 413) {\n              throw new Error('Upload failed: File too large.');\n            }\n            throw new Error(`Upload failed: ${response.status}`);\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === 'string') {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: 'Upload failed'\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":112,"map":[[28,2,51,0,"Object"],[28,8,51,0],[28,9,51,0,"defineProperty"],[28,23,51,0],[28,24,51,0,"exports"],[28,31,51,0],[29,4,51,0,"enumerable"],[29,14,51,0],[30,4,51,0,"get"],[30,7,51,0],[30,18,51,0,"get"],[30,19,51,0],[31,6,51,0],[31,13,51,0,"_default"],[31,21,51,0],[32,4,51,0],[33,2,51,0],[34,2,50,0,"Object"],[34,8,50,0],[34,9,50,0,"defineProperty"],[34,23,50,0],[34,24,50,0,"exports"],[34,31,50,0],[35,4,50,0,"enumerable"],[35,14,50,0],[36,4,50,0,"get"],[36,7,50,0],[36,18,50,0,"get"],[36,19,50,0],[37,6,50,0],[37,13,50,9,"useUpload"],[37,22,50,18],[38,4,50,18],[39,2,50,18],[40,2,50,21],[40,6,50,21,"_expoVirtualEnv"],[40,21,50,21],[40,24,50,21,"require"],[40,31,50,21],[40,32,50,21,"_dependencyMap"],[40,46,50,21],[41,2,50,21],[41,6,50,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,42,50,21],[41,45,50,21,"require"],[41,52,50,21],[41,53,50,21,"_dependencyMap"],[41,67,50,21],[42,2,50,21],[42,6,50,21,"_asyncToGenerator"],[42,23,50,21],[42,26,50,21,"_interopDefault"],[42,41,50,21],[42,42,50,21,"_babelRuntimeHelpersAsyncToGenerator"],[42,78,50,21],[43,2,50,21],[43,6,50,21,"_babelRuntimeHelpersSlicedToArray"],[43,39,50,21],[43,42,50,21,"require"],[43,49,50,21],[43,50,50,21,"_dependencyMap"],[43,64,50,21],[44,2,50,21],[44,6,50,21,"_slicedToArray"],[44,20,50,21],[44,23,50,21,"_interopDefault"],[44,38,50,21],[44,39,50,21,"_babelRuntimeHelpersSlicedToArray"],[44,72,50,21],[45,2,1,0],[45,6,1,0,"_react"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"React"],[46,11,1,0],[46,14,1,0,"_interopNamespace"],[46,31,1,0],[46,32,1,0,"_react"],[46,38,1,0],[47,2,3,0],[47,11,3,9,"useUpload"],[47,20,3,18,"useUpload"],[47,21,3,18],[47,23,3,21],[48,4,3,21,"_s"],[48,6,3,21],[49,4,4,2],[49,8,4,2,"_React$useState"],[49,23,4,2],[49,26,4,32,"React"],[49,31,4,37],[49,32,4,38,"useState"],[49,40,4,46],[49,41,4,47],[49,46,4,52],[49,47,4,53],[50,6,4,53,"_React$useState2"],[50,22,4,53],[50,29,4,53,"_slicedToArray"],[50,43,4,53],[50,44,4,53,"default"],[50,51,4,53],[50,53,4,53,"_React$useState"],[50,68,4,53],[51,6,4,9,"loading"],[51,13,4,16],[51,16,4,16,"_React$useState2"],[51,32,4,16],[52,6,4,18,"setLoading"],[52,16,4,28],[52,19,4,28,"_React$useState2"],[52,35,4,28],[53,4,5,2],[53,8,5,8,"upload"],[53,14,5,14],[53,17,5,17,"React"],[53,22,5,22],[53,23,5,23,"useCallback"],[53,34,5,34],[54,6,5,34],[54,10,5,34,"_ref"],[54,14,5,34],[54,21,5,34,"_asyncToGenerator"],[54,38,5,34],[54,39,5,34,"default"],[54,46,5,34],[54,48,5,35],[54,59,5,42,"input"],[54,64,5,47],[54,66,5,52],[55,8,6,4],[55,12,6,8],[56,10,7,6,"setLoading"],[56,20,7,16],[56,21,7,17],[56,25,7,21],[56,26,7,22],[57,10,8,6],[57,14,8,12,"baseURL"],[57,21,8,19],[57,24,8,22,"_expoVirtualEnv"],[57,39,8,22],[57,40,8,22,"env"],[57,43,8,22],[57,44,8,22,"EXPO_PUBLIC_BASE_URL"],[57,64,8,22],[57,68,8,58],[57,70,8,60],[58,10,9,6],[58,14,9,12,"uploadUrl"],[58,23,9,21],[58,26,9,24,"baseURL"],[58,33,9,31],[58,36,9,34],[58,39,9,37,"baseURL"],[58,46,9,44],[58,68,9,66],[58,71,9,69],[58,93,9,91],[59,10,11,6],[59,14,11,10,"response"],[59,22,11,18],[61,10,13,6],[62,10,14,6],[63,10,15,6,"response"],[63,18,15,14],[63,27,15,23,"fetch"],[63,32,15,28],[63,33,15,29,"uploadUrl"],[63,42,15,38],[63,44,15,40],[64,12,16,8,"method"],[64,18,16,14],[64,20,16,16],[64,26,16,22],[65,12,17,8,"headers"],[65,19,17,15],[65,21,17,17],[66,14,18,10],[66,28,18,24],[66,30,18,26],[67,12,19,8],[67,13,19,9],[68,12,20,8,"body"],[68,16,20,12],[68,18,20,14,"JSON"],[68,22,20,18],[68,23,20,19,"stringify"],[68,32,20,28],[68,33,20,29],[69,14,21,10,"fileName"],[69,22,21,18],[69,24,21,20,"input"],[69,29,21,25],[69,30,21,26,"reactNativeAsset"],[69,46,21,42],[69,48,21,44,"name"],[69,52,21,48],[69,56,21,52],[69,67,21,63],[70,14,22,10,"mimeType"],[70,22,22,18],[70,24,22,20,"input"],[70,29,22,25],[70,30,22,26,"reactNativeAsset"],[70,46,22,42],[70,48,22,44,"mimeType"],[70,56,22,52],[70,60,22,56],[71,12,23,8],[71,13,23,9],[72,10,24,6],[72,11,24,7],[72,12,24,8],[73,10,26,6],[73,14,26,10],[73,15,26,11,"response"],[73,23,26,19],[73,24,26,20,"ok"],[73,26,26,22],[73,28,26,24],[74,12,27,8],[74,16,27,12,"response"],[74,24,27,20],[74,25,27,21,"status"],[74,31,27,27],[74,36,27,32],[74,39,27,35],[74,41,27,37],[75,14,28,10],[75,20,28,16],[75,24,28,20,"Error"],[75,29,28,25],[75,30,28,26],[75,62,28,58],[75,63,28,59],[76,12,29,8],[77,12,30,8],[77,18,30,14],[77,22,30,18,"Error"],[77,27,30,23],[77,28,30,24],[77,46,30,42,"response"],[77,54,30,50],[77,55,30,51,"status"],[77,61,30,57],[77,63,30,59],[77,64,30,60],[78,10,31,6],[79,10,32,6],[79,14,32,12,"data"],[79,18,32,16],[79,27,32,25,"response"],[79,35,32,33],[79,36,32,34,"json"],[79,40,32,38],[79,41,32,39],[79,42,32,40],[80,10,33,6],[80,17,33,13],[81,12,33,15,"url"],[81,15,33,18],[81,17,33,20,"data"],[81,21,33,24],[81,22,33,25,"url"],[81,25,33,28],[82,12,33,30,"mimeType"],[82,20,33,38],[82,22,33,40,"data"],[82,26,33,44],[82,27,33,45,"mimeType"],[82,35,33,53],[82,39,33,57],[83,10,33,62],[83,11,33,63],[84,8,34,4],[84,9,34,5],[84,10,34,6],[84,17,34,13,"uploadError"],[84,28,34,24],[84,30,34,26],[85,10,35,6],[85,14,35,10,"uploadError"],[85,25,35,21],[85,37,35,33,"Error"],[85,42,35,38],[85,44,35,40],[86,12,36,8],[86,19,36,15],[87,14,36,17,"error"],[87,19,36,22],[87,21,36,24,"uploadError"],[87,32,36,35],[87,33,36,36,"message"],[88,12,36,44],[88,13,36,45],[89,10,37,6],[90,10,38,6],[90,14,38,10],[90,21,38,17,"uploadError"],[90,32,38,28],[90,37,38,33],[90,45,38,41],[90,47,38,43],[91,12,39,8],[91,19,39,15],[92,14,39,17,"error"],[92,19,39,22],[92,21,39,24,"uploadError"],[93,12,39,36],[93,13,39,37],[94,10,40,6],[95,10,41,6],[95,17,41,13],[96,12,41,15,"error"],[96,17,41,20],[96,19,41,22],[97,10,41,38],[97,11,41,39],[98,8,42,4],[98,9,42,5],[98,18,42,14],[99,10,43,6,"setLoading"],[99,20,43,16],[99,21,43,17],[99,26,43,22],[99,27,43,23],[100,8,44,4],[101,6,45,2],[101,7,45,3],[102,6,45,3],[102,23,45,3,"_x"],[102,25,45,3],[103,8,45,3],[103,15,45,3,"_ref"],[103,19,45,3],[103,20,45,3,"apply"],[103,25,45,3],[103,32,45,3,"arguments"],[103,41,45,3],[104,6,45,3],[105,4,45,3],[105,9,45,5],[105,11,45,7],[105,12,45,8],[106,4,47,2],[106,11,47,9],[106,12,47,10,"upload"],[106,18,47,16],[106,20,47,18],[107,6,47,20,"loading"],[108,4,47,28],[108,5,47,29],[108,6,47,30],[109,2,48,0],[110,2,48,1,"_s"],[110,4,48,1],[110,5,3,9,"useUpload"],[110,14,3,18],[111,2,51,0],[111,6,51,0,"_default"],[111,14,51,0],[111,17,51,15,"useUpload"],[111,26,51,24],[112,0,51,25],[112,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACE;mCCE;GDwC;CDG"},"hasCjsExports":false},"type":"js/module"}]}