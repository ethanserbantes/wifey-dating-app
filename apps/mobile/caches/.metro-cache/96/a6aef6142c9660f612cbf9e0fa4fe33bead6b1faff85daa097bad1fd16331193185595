{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":31,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _uploadcareUploadClient = require(_dependencyMap[3], \"@uploadcare/upload-client\");\n  var _react = require(_dependencyMap[4], \"react\");\n  var React = _interopNamespace(_react);\n  var client = new _uploadcareUploadClient.UploadClient({\n    publicKey: _expoVirtualEnv.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if ('reactNativeAsset' in input && input.reactNativeAsset) {\n            if (input.reactNativeAsset.file) {\n              var formData = new FormData();\n              formData.append('file', input.reactNativeAsset.file);\n              response = yield fetch('/_create/api/upload/', {\n                method: 'POST',\n                body: formData\n              });\n            } else {\n              var _response = yield fetch('/_create/api/upload/presign/', {\n                method: 'POST'\n              });\n              var _yield$_response$json = yield _response.json(),\n                secureSignature = _yield$_response$json.secureSignature,\n                secureExpire = _yield$_response$json.secureExpire;\n              var result = yield client.uploadFile(input.reactNativeAsset, {\n                fileName: input.reactNativeAsset.name ?? input.reactNativeAsset.uri.split('/').pop(),\n                contentType: input.reactNativeAsset.mimeType,\n                secureSignature,\n                secureExpire\n              });\n              return {\n                url: `${_expoVirtualEnv.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n                mimeType: result.mimeType || null\n              };\n            }\n          } else if ('url' in input) {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if ('base64' in input) {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/octet-stream'\n              },\n              body: input.buffer\n            });\n          }\n          if (!response.ok) {\n            if (response.status === 413) {\n              throw new Error('Upload failed: File too large.');\n            }\n            throw new Error('Upload failed');\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === 'string') {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: 'Upload failed'\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":156,"map":[[28,2,85,0,"Object"],[28,8,85,0],[28,9,85,0,"defineProperty"],[28,23,85,0],[28,24,85,0,"exports"],[28,31,85,0],[29,4,85,0,"enumerable"],[29,14,85,0],[30,4,85,0,"get"],[30,7,85,0],[30,18,85,0,"get"],[30,19,85,0],[31,6,85,0],[31,13,85,0,"_default"],[31,21,85,0],[32,4,85,0],[33,2,85,0],[34,2,84,0,"Object"],[34,8,84,0],[34,9,84,0,"defineProperty"],[34,23,84,0],[34,24,84,0,"exports"],[34,31,84,0],[35,4,84,0,"enumerable"],[35,14,84,0],[36,4,84,0,"get"],[36,7,84,0],[36,18,84,0,"get"],[36,19,84,0],[37,6,84,0],[37,13,84,9,"useUpload"],[37,22,84,18],[38,4,84,18],[39,2,84,18],[40,2,84,21],[40,6,84,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,84,21],[40,45,84,21,"require"],[40,52,84,21],[40,53,84,21,"_dependencyMap"],[40,67,84,21],[41,2,84,21],[41,6,84,21,"_asyncToGenerator"],[41,23,84,21],[41,26,84,21,"_interopDefault"],[41,41,84,21],[41,42,84,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,84,21],[42,2,84,21],[42,6,84,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,84,21],[42,42,84,21,"require"],[42,49,84,21],[42,50,84,21,"_dependencyMap"],[42,64,84,21],[43,2,84,21],[43,6,84,21,"_slicedToArray"],[43,20,84,21],[43,23,84,21,"_interopDefault"],[43,38,84,21],[43,39,84,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,84,21],[44,2,84,21],[44,6,84,21,"_expoVirtualEnv"],[44,21,84,21],[44,24,84,21,"require"],[44,31,84,21],[44,32,84,21,"_dependencyMap"],[44,46,84,21],[45,2,1,0],[45,6,1,0,"_uploadcareUploadClient"],[45,29,1,0],[45,32,1,0,"require"],[45,39,1,0],[45,40,1,0,"_dependencyMap"],[45,54,1,0],[46,2,2,0],[46,6,2,0,"_react"],[46,12,2,0],[46,15,2,0,"require"],[46,22,2,0],[46,23,2,0,"_dependencyMap"],[46,37,2,0],[47,2,2,0],[47,6,2,0,"React"],[47,11,2,0],[47,14,2,0,"_interopNamespace"],[47,31,2,0],[47,32,2,0,"_react"],[47,38,2,0],[48,2,3,0],[48,6,3,6,"client"],[48,12,3,12],[48,15,3,15],[48,19,3,19,"UploadClient"],[48,42,3,31],[48,43,3,31,"UploadClient"],[48,55,3,31],[48,56,3,32],[49,4,3,34,"publicKey"],[49,13,3,43],[49,15,3,43,"_expoVirtualEnv"],[49,30,3,43],[49,31,3,43,"env"],[49,34,3,43],[49,35,3,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[50,2,3,91],[50,3,3,92],[50,4,3,93],[51,2,5,0],[51,11,5,9,"useUpload"],[51,20,5,18,"useUpload"],[51,21,5,18],[51,23,5,21],[52,4,5,21,"_s"],[52,6,5,21],[53,4,6,2],[53,8,6,2,"_React$useState"],[53,23,6,2],[53,26,6,32,"React"],[53,31,6,37],[53,32,6,38,"useState"],[53,40,6,46],[53,41,6,47],[53,46,6,52],[53,47,6,53],[54,6,6,53,"_React$useState2"],[54,22,6,53],[54,29,6,53,"_slicedToArray"],[54,43,6,53],[54,44,6,53,"default"],[54,51,6,53],[54,53,6,53,"_React$useState"],[54,68,6,53],[55,6,6,9,"loading"],[55,13,6,16],[55,16,6,16,"_React$useState2"],[55,32,6,16],[56,6,6,18,"setLoading"],[56,16,6,28],[56,19,6,28,"_React$useState2"],[56,35,6,28],[57,4,7,2],[57,8,7,8,"upload"],[57,14,7,14],[57,17,7,17,"React"],[57,22,7,22],[57,23,7,23,"useCallback"],[57,34,7,34],[58,6,7,34],[58,10,7,34,"_ref"],[58,14,7,34],[58,21,7,34,"_asyncToGenerator"],[58,38,7,34],[58,39,7,34,"default"],[58,46,7,34],[58,48,7,35],[58,59,7,42,"input"],[58,64,7,47],[58,66,7,52],[59,8,8,4],[59,12,8,8],[60,10,9,6,"setLoading"],[60,20,9,16],[60,21,9,17],[60,25,9,21],[60,26,9,22],[61,10,10,6],[61,14,10,10,"response"],[61,22,10,18],[62,10,11,6],[62,14,11,10],[62,32,11,28],[62,36,11,32,"input"],[62,41,11,37],[62,45,11,41,"input"],[62,50,11,46],[62,51,11,47,"reactNativeAsset"],[62,67,11,63],[62,69,11,65],[63,12,12,8],[63,16,12,12,"input"],[63,21,12,17],[63,22,12,18,"reactNativeAsset"],[63,38,12,34],[63,39,12,35,"file"],[63,43,12,39],[63,45,12,41],[64,14,13,10],[64,18,13,16,"formData"],[64,26,13,24],[64,29,13,27],[64,33,13,31,"FormData"],[64,41,13,39],[64,42,13,40],[64,43,13,41],[65,14,14,10,"formData"],[65,22,14,18],[65,23,14,19,"append"],[65,29,14,25],[65,30,14,26],[65,36,14,32],[65,38,14,34,"input"],[65,43,14,39],[65,44,14,40,"reactNativeAsset"],[65,60,14,56],[65,61,14,57,"file"],[65,65,14,61],[65,66,14,62],[66,14,15,10,"response"],[66,22,15,18],[66,31,15,27,"fetch"],[66,36,15,32],[66,37,15,33],[66,59,15,55],[66,61,15,57],[67,16,16,12,"method"],[67,22,16,18],[67,24,16,20],[67,30,16,26],[68,16,17,12,"body"],[68,20,17,16],[68,22,17,18,"formData"],[69,14,18,10],[69,15,18,11],[69,16,18,12],[70,12,19,8],[70,13,19,9],[70,19,19,15],[71,14,20,10],[71,18,20,16,"response"],[71,27,20,24],[71,36,20,33,"fetch"],[71,41,20,38],[71,42,20,39],[71,72,20,69],[71,74,20,71],[72,16,21,12,"method"],[72,22,21,18],[72,24,21,20],[73,14,22,10],[73,15,22,11],[73,16,22,12],[74,14,23,10],[74,18,23,10,"_yield$_response$json"],[74,39,23,10],[74,48,23,58,"response"],[74,57,23,66],[74,58,23,67,"json"],[74,62,23,71],[74,63,23,72],[74,64,23,73],[75,16,23,18,"secureSignature"],[75,31,23,33],[75,34,23,33,"_yield$_response$json"],[75,55,23,33],[75,56,23,18,"secureSignature"],[75,71,23,33],[76,16,23,35,"secureExpire"],[76,28,23,47],[76,31,23,47,"_yield$_response$json"],[76,52,23,47],[76,53,23,35,"secureExpire"],[76,65,23,47],[77,14,24,10],[77,18,24,16,"result"],[77,24,24,22],[77,33,24,31,"client"],[77,39,24,37],[77,40,24,38,"uploadFile"],[77,50,24,48],[77,51,24,49,"input"],[77,56,24,54],[77,57,24,55,"reactNativeAsset"],[77,73,24,71],[77,75,24,73],[78,16,25,12,"fileName"],[78,24,25,20],[78,26,25,22,"input"],[78,31,25,27],[78,32,25,28,"reactNativeAsset"],[78,48,25,44],[78,49,25,45,"name"],[78,53,25,49],[78,57,25,53,"input"],[78,62,25,58],[78,63,25,59,"reactNativeAsset"],[78,79,25,75],[78,80,25,76,"uri"],[78,83,25,79],[78,84,25,80,"split"],[78,89,25,85],[78,90,25,86],[78,93,25,89],[78,94,25,90],[78,95,25,91,"pop"],[78,98,25,94],[78,99,25,95],[78,100,25,96],[79,16,26,12,"contentType"],[79,27,26,23],[79,29,26,25,"input"],[79,34,26,30],[79,35,26,31,"reactNativeAsset"],[79,51,26,47],[79,52,26,48,"mimeType"],[79,60,26,56],[80,16,27,12,"secureSignature"],[80,31,27,27],[81,16,28,12,"secureExpire"],[82,14,29,10],[82,15,29,11],[82,16,29,12],[83,14,30,10],[83,21,30,17],[84,16,31,12,"url"],[84,19,31,15],[84,21,31,17],[84,24,31,17,"_expoVirtualEnv"],[84,39,31,17],[84,40,31,17,"env"],[84,43,31,17],[84,44,31,17,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[84,84,31,17],[84,88,31,76,"result"],[84,94,31,82],[84,95,31,83,"uuid"],[84,99,31,87],[84,102,31,90],[85,16,32,12,"mimeType"],[85,24,32,20],[85,26,32,22,"result"],[85,32,32,28],[85,33,32,29,"mimeType"],[85,41,32,37],[85,45,32,41],[86,14,33,10],[86,15,33,11],[87,12,34,8],[88,10,35,6],[88,11,35,7],[88,17,35,13],[88,21,35,17],[88,26,35,22],[88,30,35,26,"input"],[88,35,35,31],[88,37,35,33],[89,12,36,8,"response"],[89,20,36,16],[89,29,36,25,"fetch"],[89,34,36,30],[89,35,36,31],[89,57,36,53],[89,59,36,55],[90,14,37,10,"method"],[90,20,37,16],[90,22,37,18],[90,28,37,24],[91,14,38,10,"headers"],[91,21,38,17],[91,23,38,19],[92,16,39,12],[92,30,39,26],[92,32,39,28],[93,14,40,10],[93,15,40,11],[94,14,41,10,"body"],[94,18,41,14],[94,20,41,16,"JSON"],[94,24,41,20],[94,25,41,21,"stringify"],[94,34,41,30],[94,35,41,31],[95,16,41,33,"url"],[95,19,41,36],[95,21,41,38,"input"],[95,26,41,43],[95,27,41,44,"url"],[96,14,41,48],[96,15,41,49],[97,12,42,8],[97,13,42,9],[97,14,42,10],[98,10,43,6],[98,11,43,7],[98,17,43,13],[98,21,43,17],[98,29,43,25],[98,33,43,29,"input"],[98,38,43,34],[98,40,43,36],[99,12,44,8,"response"],[99,20,44,16],[99,29,44,25,"fetch"],[99,34,44,30],[99,35,44,31],[99,57,44,53],[99,59,44,55],[100,14,45,10,"method"],[100,20,45,16],[100,22,45,18],[100,28,45,24],[101,14,46,10,"headers"],[101,21,46,17],[101,23,46,19],[102,16,47,12],[102,30,47,26],[102,32,47,28],[103,14,48,10],[103,15,48,11],[104,14,49,10,"body"],[104,18,49,14],[104,20,49,16,"JSON"],[104,24,49,20],[104,25,49,21,"stringify"],[104,34,49,30],[104,35,49,31],[105,16,49,33,"base64"],[105,22,49,39],[105,24,49,41,"input"],[105,29,49,46],[105,30,49,47,"base64"],[106,14,49,54],[106,15,49,55],[107,12,50,8],[107,13,50,9],[107,14,50,10],[108,10,51,6],[108,11,51,7],[108,17,51,13],[109,12,52,8,"response"],[109,20,52,16],[109,29,52,25,"fetch"],[109,34,52,30],[109,35,52,31],[109,57,52,53],[109,59,52,55],[110,14,53,10,"method"],[110,20,53,16],[110,22,53,18],[110,28,53,24],[111,14,54,10,"headers"],[111,21,54,17],[111,23,54,19],[112,16,55,12],[112,30,55,26],[112,32,55,28],[113,14,56,10],[113,15,56,11],[114,14,57,10,"body"],[114,18,57,14],[114,20,57,16,"input"],[114,25,57,21],[114,26,57,22,"buffer"],[115,12,58,8],[115,13,58,9],[115,14,58,10],[116,10,59,6],[117,10,60,6],[117,14,60,10],[117,15,60,11,"response"],[117,23,60,19],[117,24,60,20,"ok"],[117,26,60,22],[117,28,60,24],[118,12,61,8],[118,16,61,12,"response"],[118,24,61,20],[118,25,61,21,"status"],[118,31,61,27],[118,36,61,32],[118,39,61,35],[118,41,61,37],[119,14,62,10],[119,20,62,16],[119,24,62,20,"Error"],[119,29,62,25],[119,30,62,26],[119,62,62,58],[119,63,62,59],[120,12,63,8],[121,12,64,8],[121,18,64,14],[121,22,64,18,"Error"],[121,27,64,23],[121,28,64,24],[121,43,64,39],[121,44,64,40],[122,10,65,6],[123,10,66,6],[123,14,66,12,"data"],[123,18,66,16],[123,27,66,25,"response"],[123,35,66,33],[123,36,66,34,"json"],[123,40,66,38],[123,41,66,39],[123,42,66,40],[124,10,67,6],[124,17,67,13],[125,12,67,15,"url"],[125,15,67,18],[125,17,67,20,"data"],[125,21,67,24],[125,22,67,25,"url"],[125,25,67,28],[126,12,67,30,"mimeType"],[126,20,67,38],[126,22,67,40,"data"],[126,26,67,44],[126,27,67,45,"mimeType"],[126,35,67,53],[126,39,67,57],[127,10,67,62],[127,11,67,63],[128,8,68,4],[128,9,68,5],[128,10,68,6],[128,17,68,13,"uploadError"],[128,28,68,24],[128,30,68,26],[129,10,69,6],[129,14,69,10,"uploadError"],[129,25,69,21],[129,37,69,33,"Error"],[129,42,69,38],[129,44,69,40],[130,12,70,8],[130,19,70,15],[131,14,70,17,"error"],[131,19,70,22],[131,21,70,24,"uploadError"],[131,32,70,35],[131,33,70,36,"message"],[132,12,70,44],[132,13,70,45],[133,10,71,6],[134,10,72,6],[134,14,72,10],[134,21,72,17,"uploadError"],[134,32,72,28],[134,37,72,33],[134,45,72,41],[134,47,72,43],[135,12,73,8],[135,19,73,15],[136,14,73,17,"error"],[136,19,73,22],[136,21,73,24,"uploadError"],[137,12,73,36],[137,13,73,37],[138,10,74,6],[139,10,75,6],[139,17,75,13],[140,12,75,15,"error"],[140,17,75,20],[140,19,75,22],[141,10,75,38],[141,11,75,39],[142,8,76,4],[142,9,76,5],[142,18,76,14],[143,10,77,6,"setLoading"],[143,20,77,16],[143,21,77,17],[143,26,77,22],[143,27,77,23],[144,8,78,4],[145,6,79,2],[145,7,79,3],[146,6,79,3],[146,23,79,3,"_x"],[146,25,79,3],[147,8,79,3],[147,15,79,3,"_ref"],[147,19,79,3],[147,20,79,3,"apply"],[147,25,79,3],[147,32,79,3,"arguments"],[147,41,79,3],[148,6,79,3],[149,4,79,3],[149,9,79,5],[149,11,79,7],[149,12,79,8],[150,4,81,2],[150,11,81,9],[150,12,81,10,"upload"],[150,18,81,16],[150,20,81,18],[151,6,81,20,"loading"],[152,4,81,28],[152,5,81,29],[152,6,81,30],[153,2,82,0],[154,2,82,1,"_s"],[154,4,82,1],[154,5,5,9,"useUpload"],[154,14,5,18],[155,2,85,0],[155,6,85,0,"_default"],[155,14,85,0],[155,17,85,15,"useUpload"],[155,26,85,24],[156,0,85,25],[156,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GDwE;CDG"},"hasCjsExports":false},"type":"js/module"}]}