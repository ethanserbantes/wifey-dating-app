{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":31,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _uploadcareUploadClient = require(_dependencyMap[3], \"@uploadcare/upload-client\");\n  var _react = require(_dependencyMap[4], \"react\");\n  var React = _interopNamespace(_react);\n  var client = new _uploadcareUploadClient.UploadClient({\n    publicKey: _expoVirtualEnv.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if ('reactNativeAsset' in input && input.reactNativeAsset) {\n            if (input.reactNativeAsset.file) {\n              var formData = new FormData();\n              formData.append('file', input.reactNativeAsset.file);\n              response = yield fetch('/_create/api/upload/', {\n                method: 'POST',\n                body: formData\n              });\n            } else {\n              var baseURL = _expoVirtualEnv.env.EXPO_PUBLIC_BASE_URL || \"\";\n              var presignUrl = baseURL ? `${baseURL}/_create/api/upload/presign/` : \"/_create/api/upload/presign/\";\n              var _response = yield fetch(presignUrl, {\n                method: 'POST'\n              });\n              var _yield$_response$json = yield _response.json(),\n                secureSignature = _yield$_response$json.secureSignature,\n                secureExpire = _yield$_response$json.secureExpire;\n              var result = yield client.uploadFile(input.reactNativeAsset, {\n                fileName: input.reactNativeAsset.name ?? input.reactNativeAsset.uri.split('/').pop(),\n                contentType: input.reactNativeAsset.mimeType,\n                secureSignature,\n                secureExpire\n              });\n              return {\n                url: `${_expoVirtualEnv.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n                mimeType: result.mimeType || null\n              };\n            }\n          } else if ('url' in input) {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if ('base64' in input) {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield fetch('/_create/api/upload/', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/octet-stream'\n              },\n              body: input.buffer\n            });\n          }\n          if (!response.ok) {\n            if (response.status === 413) {\n              throw new Error('Upload failed: File too large.');\n            }\n            throw new Error('Upload failed');\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === 'string') {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: 'Upload failed'\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":158,"map":[[28,2,88,0,"Object"],[28,8,88,0],[28,9,88,0,"defineProperty"],[28,23,88,0],[28,24,88,0,"exports"],[28,31,88,0],[29,4,88,0,"enumerable"],[29,14,88,0],[30,4,88,0,"get"],[30,7,88,0],[30,18,88,0,"get"],[30,19,88,0],[31,6,88,0],[31,13,88,0,"_default"],[31,21,88,0],[32,4,88,0],[33,2,88,0],[34,2,87,0,"Object"],[34,8,87,0],[34,9,87,0,"defineProperty"],[34,23,87,0],[34,24,87,0,"exports"],[34,31,87,0],[35,4,87,0,"enumerable"],[35,14,87,0],[36,4,87,0,"get"],[36,7,87,0],[36,18,87,0,"get"],[36,19,87,0],[37,6,87,0],[37,13,87,9,"useUpload"],[37,22,87,18],[38,4,87,18],[39,2,87,18],[40,2,87,21],[40,6,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,87,21],[40,45,87,21,"require"],[40,52,87,21],[40,53,87,21,"_dependencyMap"],[40,67,87,21],[41,2,87,21],[41,6,87,21,"_asyncToGenerator"],[41,23,87,21],[41,26,87,21,"_interopDefault"],[41,41,87,21],[41,42,87,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,87,21],[42,2,87,21],[42,6,87,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,87,21],[42,42,87,21,"require"],[42,49,87,21],[42,50,87,21,"_dependencyMap"],[42,64,87,21],[43,2,87,21],[43,6,87,21,"_slicedToArray"],[43,20,87,21],[43,23,87,21,"_interopDefault"],[43,38,87,21],[43,39,87,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,87,21],[44,2,87,21],[44,6,87,21,"_expoVirtualEnv"],[44,21,87,21],[44,24,87,21,"require"],[44,31,87,21],[44,32,87,21,"_dependencyMap"],[44,46,87,21],[45,2,1,0],[45,6,1,0,"_uploadcareUploadClient"],[45,29,1,0],[45,32,1,0,"require"],[45,39,1,0],[45,40,1,0,"_dependencyMap"],[45,54,1,0],[46,2,2,0],[46,6,2,0,"_react"],[46,12,2,0],[46,15,2,0,"require"],[46,22,2,0],[46,23,2,0,"_dependencyMap"],[46,37,2,0],[47,2,2,0],[47,6,2,0,"React"],[47,11,2,0],[47,14,2,0,"_interopNamespace"],[47,31,2,0],[47,32,2,0,"_react"],[47,38,2,0],[48,2,3,0],[48,6,3,6,"client"],[48,12,3,12],[48,15,3,15],[48,19,3,19,"UploadClient"],[48,42,3,31],[48,43,3,31,"UploadClient"],[48,55,3,31],[48,56,3,32],[49,4,3,34,"publicKey"],[49,13,3,43],[49,15,3,43,"_expoVirtualEnv"],[49,30,3,43],[49,31,3,43,"env"],[49,34,3,43],[49,35,3,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[50,2,3,91],[50,3,3,92],[50,4,3,93],[51,2,5,0],[51,11,5,9,"useUpload"],[51,20,5,18,"useUpload"],[51,21,5,18],[51,23,5,21],[52,4,5,21,"_s"],[52,6,5,21],[53,4,6,2],[53,8,6,2,"_React$useState"],[53,23,6,2],[53,26,6,32,"React"],[53,31,6,37],[53,32,6,38,"useState"],[53,40,6,46],[53,41,6,47],[53,46,6,52],[53,47,6,53],[54,6,6,53,"_React$useState2"],[54,22,6,53],[54,29,6,53,"_slicedToArray"],[54,43,6,53],[54,44,6,53,"default"],[54,51,6,53],[54,53,6,53,"_React$useState"],[54,68,6,53],[55,6,6,9,"loading"],[55,13,6,16],[55,16,6,16,"_React$useState2"],[55,32,6,16],[56,6,6,18,"setLoading"],[56,16,6,28],[56,19,6,28,"_React$useState2"],[56,35,6,28],[57,4,7,2],[57,8,7,8,"upload"],[57,14,7,14],[57,17,7,17,"React"],[57,22,7,22],[57,23,7,23,"useCallback"],[57,34,7,34],[58,6,7,34],[58,10,7,34,"_ref"],[58,14,7,34],[58,21,7,34,"_asyncToGenerator"],[58,38,7,34],[58,39,7,34,"default"],[58,46,7,34],[58,48,7,35],[58,59,7,42,"input"],[58,64,7,47],[58,66,7,52],[59,8,8,4],[59,12,8,8],[60,10,9,6,"setLoading"],[60,20,9,16],[60,21,9,17],[60,25,9,21],[60,26,9,22],[61,10,10,6],[61,14,10,10,"response"],[61,22,10,18],[62,10,11,6],[62,14,11,10],[62,32,11,28],[62,36,11,32,"input"],[62,41,11,37],[62,45,11,41,"input"],[62,50,11,46],[62,51,11,47,"reactNativeAsset"],[62,67,11,63],[62,69,11,65],[63,12,12,8],[63,16,12,12,"input"],[63,21,12,17],[63,22,12,18,"reactNativeAsset"],[63,38,12,34],[63,39,12,35,"file"],[63,43,12,39],[63,45,12,41],[64,14,13,10],[64,18,13,16,"formData"],[64,26,13,24],[64,29,13,27],[64,33,13,31,"FormData"],[64,41,13,39],[64,42,13,40],[64,43,13,41],[65,14,14,10,"formData"],[65,22,14,18],[65,23,14,19,"append"],[65,29,14,25],[65,30,14,26],[65,36,14,32],[65,38,14,34,"input"],[65,43,14,39],[65,44,14,40,"reactNativeAsset"],[65,60,14,56],[65,61,14,57,"file"],[65,65,14,61],[65,66,14,62],[66,14,15,10,"response"],[66,22,15,18],[66,31,15,27,"fetch"],[66,36,15,32],[66,37,15,33],[66,59,15,55],[66,61,15,57],[67,16,16,12,"method"],[67,22,16,18],[67,24,16,20],[67,30,16,26],[68,16,17,12,"body"],[68,20,17,16],[68,22,17,18,"formData"],[69,14,18,10],[69,15,18,11],[69,16,18,12],[70,12,19,8],[70,13,19,9],[70,19,19,15],[71,14,20,10],[71,18,20,16,"baseURL"],[71,25,20,23],[71,28,20,26,"_expoVirtualEnv"],[71,43,20,26],[71,44,20,26,"env"],[71,47,20,26],[71,48,20,26,"EXPO_PUBLIC_BASE_URL"],[71,68,20,26],[71,72,20,62],[71,74,20,64],[72,14,21,10],[72,18,21,16,"presignUrl"],[72,28,21,26],[72,31,21,29,"baseURL"],[72,38,21,36],[72,41,21,39],[72,44,21,42,"baseURL"],[72,51,21,49],[72,81,21,79],[72,84,21,82],[72,114,21,112],[73,14,23,10],[73,18,23,16,"response"],[73,27,23,24],[73,36,23,33,"fetch"],[73,41,23,38],[73,42,23,39,"presignUrl"],[73,52,23,49],[73,54,23,51],[74,16,24,12,"method"],[74,22,24,18],[74,24,24,20],[75,14,25,10],[75,15,25,11],[75,16,25,12],[76,14,26,10],[76,18,26,10,"_yield$_response$json"],[76,39,26,10],[76,48,26,58,"response"],[76,57,26,66],[76,58,26,67,"json"],[76,62,26,71],[76,63,26,72],[76,64,26,73],[77,16,26,18,"secureSignature"],[77,31,26,33],[77,34,26,33,"_yield$_response$json"],[77,55,26,33],[77,56,26,18,"secureSignature"],[77,71,26,33],[78,16,26,35,"secureExpire"],[78,28,26,47],[78,31,26,47,"_yield$_response$json"],[78,52,26,47],[78,53,26,35,"secureExpire"],[78,65,26,47],[79,14,27,10],[79,18,27,16,"result"],[79,24,27,22],[79,33,27,31,"client"],[79,39,27,37],[79,40,27,38,"uploadFile"],[79,50,27,48],[79,51,27,49,"input"],[79,56,27,54],[79,57,27,55,"reactNativeAsset"],[79,73,27,71],[79,75,27,73],[80,16,28,12,"fileName"],[80,24,28,20],[80,26,28,22,"input"],[80,31,28,27],[80,32,28,28,"reactNativeAsset"],[80,48,28,44],[80,49,28,45,"name"],[80,53,28,49],[80,57,28,53,"input"],[80,62,28,58],[80,63,28,59,"reactNativeAsset"],[80,79,28,75],[80,80,28,76,"uri"],[80,83,28,79],[80,84,28,80,"split"],[80,89,28,85],[80,90,28,86],[80,93,28,89],[80,94,28,90],[80,95,28,91,"pop"],[80,98,28,94],[80,99,28,95],[80,100,28,96],[81,16,29,12,"contentType"],[81,27,29,23],[81,29,29,25,"input"],[81,34,29,30],[81,35,29,31,"reactNativeAsset"],[81,51,29,47],[81,52,29,48,"mimeType"],[81,60,29,56],[82,16,30,12,"secureSignature"],[82,31,30,27],[83,16,31,12,"secureExpire"],[84,14,32,10],[84,15,32,11],[84,16,32,12],[85,14,33,10],[85,21,33,17],[86,16,34,12,"url"],[86,19,34,15],[86,21,34,17],[86,24,34,17,"_expoVirtualEnv"],[86,39,34,17],[86,40,34,17,"env"],[86,43,34,17],[86,44,34,17,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[86,84,34,17],[86,88,34,76,"result"],[86,94,34,82],[86,95,34,83,"uuid"],[86,99,34,87],[86,102,34,90],[87,16,35,12,"mimeType"],[87,24,35,20],[87,26,35,22,"result"],[87,32,35,28],[87,33,35,29,"mimeType"],[87,41,35,37],[87,45,35,41],[88,14,36,10],[88,15,36,11],[89,12,37,8],[90,10,38,6],[90,11,38,7],[90,17,38,13],[90,21,38,17],[90,26,38,22],[90,30,38,26,"input"],[90,35,38,31],[90,37,38,33],[91,12,39,8,"response"],[91,20,39,16],[91,29,39,25,"fetch"],[91,34,39,30],[91,35,39,31],[91,57,39,53],[91,59,39,55],[92,14,40,10,"method"],[92,20,40,16],[92,22,40,18],[92,28,40,24],[93,14,41,10,"headers"],[93,21,41,17],[93,23,41,19],[94,16,42,12],[94,30,42,26],[94,32,42,28],[95,14,43,10],[95,15,43,11],[96,14,44,10,"body"],[96,18,44,14],[96,20,44,16,"JSON"],[96,24,44,20],[96,25,44,21,"stringify"],[96,34,44,30],[96,35,44,31],[97,16,44,33,"url"],[97,19,44,36],[97,21,44,38,"input"],[97,26,44,43],[97,27,44,44,"url"],[98,14,44,48],[98,15,44,49],[99,12,45,8],[99,13,45,9],[99,14,45,10],[100,10,46,6],[100,11,46,7],[100,17,46,13],[100,21,46,17],[100,29,46,25],[100,33,46,29,"input"],[100,38,46,34],[100,40,46,36],[101,12,47,8,"response"],[101,20,47,16],[101,29,47,25,"fetch"],[101,34,47,30],[101,35,47,31],[101,57,47,53],[101,59,47,55],[102,14,48,10,"method"],[102,20,48,16],[102,22,48,18],[102,28,48,24],[103,14,49,10,"headers"],[103,21,49,17],[103,23,49,19],[104,16,50,12],[104,30,50,26],[104,32,50,28],[105,14,51,10],[105,15,51,11],[106,14,52,10,"body"],[106,18,52,14],[106,20,52,16,"JSON"],[106,24,52,20],[106,25,52,21,"stringify"],[106,34,52,30],[106,35,52,31],[107,16,52,33,"base64"],[107,22,52,39],[107,24,52,41,"input"],[107,29,52,46],[107,30,52,47,"base64"],[108,14,52,54],[108,15,52,55],[109,12,53,8],[109,13,53,9],[109,14,53,10],[110,10,54,6],[110,11,54,7],[110,17,54,13],[111,12,55,8,"response"],[111,20,55,16],[111,29,55,25,"fetch"],[111,34,55,30],[111,35,55,31],[111,57,55,53],[111,59,55,55],[112,14,56,10,"method"],[112,20,56,16],[112,22,56,18],[112,28,56,24],[113,14,57,10,"headers"],[113,21,57,17],[113,23,57,19],[114,16,58,12],[114,30,58,26],[114,32,58,28],[115,14,59,10],[115,15,59,11],[116,14,60,10,"body"],[116,18,60,14],[116,20,60,16,"input"],[116,25,60,21],[116,26,60,22,"buffer"],[117,12,61,8],[117,13,61,9],[117,14,61,10],[118,10,62,6],[119,10,63,6],[119,14,63,10],[119,15,63,11,"response"],[119,23,63,19],[119,24,63,20,"ok"],[119,26,63,22],[119,28,63,24],[120,12,64,8],[120,16,64,12,"response"],[120,24,64,20],[120,25,64,21,"status"],[120,31,64,27],[120,36,64,32],[120,39,64,35],[120,41,64,37],[121,14,65,10],[121,20,65,16],[121,24,65,20,"Error"],[121,29,65,25],[121,30,65,26],[121,62,65,58],[121,63,65,59],[122,12,66,8],[123,12,67,8],[123,18,67,14],[123,22,67,18,"Error"],[123,27,67,23],[123,28,67,24],[123,43,67,39],[123,44,67,40],[124,10,68,6],[125,10,69,6],[125,14,69,12,"data"],[125,18,69,16],[125,27,69,25,"response"],[125,35,69,33],[125,36,69,34,"json"],[125,40,69,38],[125,41,69,39],[125,42,69,40],[126,10,70,6],[126,17,70,13],[127,12,70,15,"url"],[127,15,70,18],[127,17,70,20,"data"],[127,21,70,24],[127,22,70,25,"url"],[127,25,70,28],[128,12,70,30,"mimeType"],[128,20,70,38],[128,22,70,40,"data"],[128,26,70,44],[128,27,70,45,"mimeType"],[128,35,70,53],[128,39,70,57],[129,10,70,62],[129,11,70,63],[130,8,71,4],[130,9,71,5],[130,10,71,6],[130,17,71,13,"uploadError"],[130,28,71,24],[130,30,71,26],[131,10,72,6],[131,14,72,10,"uploadError"],[131,25,72,21],[131,37,72,33,"Error"],[131,42,72,38],[131,44,72,40],[132,12,73,8],[132,19,73,15],[133,14,73,17,"error"],[133,19,73,22],[133,21,73,24,"uploadError"],[133,32,73,35],[133,33,73,36,"message"],[134,12,73,44],[134,13,73,45],[135,10,74,6],[136,10,75,6],[136,14,75,10],[136,21,75,17,"uploadError"],[136,32,75,28],[136,37,75,33],[136,45,75,41],[136,47,75,43],[137,12,76,8],[137,19,76,15],[138,14,76,17,"error"],[138,19,76,22],[138,21,76,24,"uploadError"],[139,12,76,36],[139,13,76,37],[140,10,77,6],[141,10,78,6],[141,17,78,13],[142,12,78,15,"error"],[142,17,78,20],[142,19,78,22],[143,10,78,38],[143,11,78,39],[144,8,79,4],[144,9,79,5],[144,18,79,14],[145,10,80,6,"setLoading"],[145,20,80,16],[145,21,80,17],[145,26,80,22],[145,27,80,23],[146,8,81,4],[147,6,82,2],[147,7,82,3],[148,6,82,3],[148,23,82,3,"_x"],[148,25,82,3],[149,8,82,3],[149,15,82,3,"_ref"],[149,19,82,3],[149,20,82,3,"apply"],[149,25,82,3],[149,32,82,3,"arguments"],[149,41,82,3],[150,6,82,3],[151,4,82,3],[151,9,82,5],[151,11,82,7],[151,12,82,8],[152,4,84,2],[152,11,84,9],[152,12,84,10,"upload"],[152,18,84,16],[152,20,84,18],[153,6,84,20,"loading"],[154,4,84,28],[154,5,84,29],[154,6,84,30],[155,2,85,0],[156,2,85,1,"_s"],[156,4,85,1],[156,5,5,9,"useUpload"],[156,14,5,18],[157,2,88,0],[157,6,88,0,"_default"],[157,14,88,0],[157,17,88,15,"useUpload"],[157,26,88,24],[158,0,88,25],[158,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACI;mCCE;GD2E;CDG"},"hasCjsExports":false},"type":"js/module"}]}