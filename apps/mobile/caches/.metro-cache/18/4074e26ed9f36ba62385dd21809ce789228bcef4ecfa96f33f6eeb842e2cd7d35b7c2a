{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":37,"index":84}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"react-native-purchases","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":47,"index":132}}],"key":"w6kXlt3+wzwVuELA/KXcfEkh03Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSubscriptionActions = useSubscriptionActions;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNative = require(_dependencyMap[3]);\n  var _reactNativePurchases = require(_dependencyMap[4]);\n  var Purchases = _interopDefault(_reactNativePurchases);\n  function useSubscriptionActions(isAvailable, error, refresh, goBack, alertTitle, hasSelectedTier, selectedPkg) {\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      purchasing = _useState2[0],\n      setPurchasing = _useState2[1];\n    var onSubscribe = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      // If already has this tier, treat as \"Done\".\n      if (hasSelectedTier) {\n        goBack();\n        return;\n      }\n      if (!isAvailable) {\n        _reactNative.Alert.alert(alertTitle, error || \"Subscriptions are not available right now.\");\n        return;\n      }\n      if (!selectedPkg) {\n        _reactNative.Alert.alert(alertTitle, \"Please pick a plan.\");\n        return;\n      }\n      try {\n        setPurchasing(true);\n        yield Purchases.default.purchasePackage(selectedPkg);\n        yield refresh();\n        goBack();\n      } catch (e) {\n        var cancelled = e?.userCancelled || e?.code === \"PURCHASE_CANCELLED\";\n        if (cancelled) {\n          return;\n        }\n        console.error(e);\n        _reactNative.Alert.alert(alertTitle, \"Purchase failed. Please try again.\");\n      } finally {\n        setPurchasing(false);\n      }\n    }), [alertTitle, error, goBack, hasSelectedTier, isAvailable, refresh, selectedPkg]);\n    var onRestore = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!isAvailable) {\n        _reactNative.Alert.alert(alertTitle, error || \"Subscriptions are not available right now.\");\n        return;\n      }\n      try {\n        setPurchasing(true);\n        yield Purchases.default.restorePurchases();\n        yield refresh();\n        goBack();\n      } catch (e) {\n        console.error(e);\n        _reactNative.Alert.alert(alertTitle, \"Could not restore purchases.\");\n      } finally {\n        setPurchasing(false);\n      }\n    }), [alertTitle, error, goBack, isAvailable, refresh]);\n    return {\n      purchasing,\n      onSubscribe,\n      onRestore\n    };\n  }\n});","lineCount":79,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useSubscriptionActions"],[12,32,5,0],[12,35,5,0,"useSubscriptionActions"],[12,57,5,0],[13,2,84,1],[13,6,84,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,84,1],[13,45,84,1,"require"],[13,52,84,1],[13,53,84,1,"_dependencyMap"],[13,67,84,1],[14,2,84,1],[14,6,84,1,"_asyncToGenerator"],[14,23,84,1],[14,26,84,1,"_interopDefault"],[14,41,84,1],[14,42,84,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,84,1],[15,2,84,1],[15,6,84,1,"_babelRuntimeHelpersSlicedToArray"],[15,39,84,1],[15,42,84,1,"require"],[15,49,84,1],[15,50,84,1,"_dependencyMap"],[15,64,84,1],[16,2,84,1],[16,6,84,1,"_slicedToArray"],[16,20,84,1],[16,23,84,1,"_interopDefault"],[16,38,84,1],[16,39,84,1,"_babelRuntimeHelpersSlicedToArray"],[16,72,84,1],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNative"],[18,18,2,0],[18,21,2,0,"require"],[18,28,2,0],[18,29,2,0,"_dependencyMap"],[18,43,2,0],[19,2,3,0],[19,6,3,0,"_reactNativePurchases"],[19,27,3,0],[19,30,3,0,"require"],[19,37,3,0],[19,38,3,0,"_dependencyMap"],[19,52,3,0],[20,2,3,0],[20,6,3,0,"Purchases"],[20,15,3,0],[20,18,3,0,"_interopDefault"],[20,33,3,0],[20,34,3,0,"_reactNativePurchases"],[20,55,3,0],[21,2,5,7],[21,11,5,16,"useSubscriptionActions"],[21,33,5,38,"useSubscriptionActions"],[21,34,6,2,"isAvailable"],[21,45,6,13],[21,47,7,2,"error"],[21,52,7,7],[21,54,8,2,"refresh"],[21,61,8,9],[21,63,9,2,"goBack"],[21,69,9,8],[21,71,10,2,"alertTitle"],[21,81,10,12],[21,83,11,2,"hasSelectedTier"],[21,98,11,17],[21,100,12,2,"selectedPkg"],[21,111,12,13],[21,113,13,2],[22,4,14,2],[22,8,14,2,"_useState"],[22,17,14,2],[22,20,14,38],[22,24,14,38,"useState"],[22,30,14,46],[22,31,14,46,"useState"],[22,39,14,46],[22,41,14,47],[22,46,14,52],[22,47,14,53],[23,6,14,53,"_useState2"],[23,16,14,53],[23,23,14,53,"_slicedToArray"],[23,37,14,53],[23,38,14,53,"default"],[23,45,14,53],[23,47,14,53,"_useState"],[23,56,14,53],[24,6,14,9,"purchasing"],[24,16,14,19],[24,19,14,19,"_useState2"],[24,29,14,19],[25,6,14,21,"setPurchasing"],[25,19,14,34],[25,22,14,34,"_useState2"],[25,32,14,34],[26,4,16,2],[26,8,16,8,"onSubscribe"],[26,19,16,19],[26,22,16,22],[26,26,16,22,"useCallback"],[26,32,16,33],[26,33,16,33,"useCallback"],[26,44,16,33],[26,63,16,33,"_asyncToGenerator"],[26,80,16,33],[26,81,16,33,"default"],[26,88,16,33],[26,90,16,34],[26,103,16,46],[27,6,17,4],[28,6,18,4],[28,10,18,8,"hasSelectedTier"],[28,25,18,23],[28,27,18,25],[29,8,19,6,"goBack"],[29,14,19,12],[29,15,19,13],[29,16,19,14],[30,8,20,6],[31,6,21,4],[32,6,23,4],[32,10,23,8],[32,11,23,9,"isAvailable"],[32,22,23,20],[32,24,23,22],[33,8,24,6,"Alert"],[33,20,24,11],[33,21,24,11,"Alert"],[33,26,24,11],[33,27,24,12,"alert"],[33,32,24,17],[33,33,25,8,"alertTitle"],[33,43,25,18],[33,45,26,8,"error"],[33,50,26,13],[33,54,26,17],[33,98,27,6],[33,99,27,7],[34,8,28,6],[35,6,29,4],[36,6,31,4],[36,10,31,8],[36,11,31,9,"selectedPkg"],[36,22,31,20],[36,24,31,22],[37,8,32,6,"Alert"],[37,20,32,11],[37,21,32,11,"Alert"],[37,26,32,11],[37,27,32,12,"alert"],[37,32,32,17],[37,33,32,18,"alertTitle"],[37,43,32,28],[37,45,32,30],[37,66,32,51],[37,67,32,52],[38,8,33,6],[39,6,34,4],[40,6,36,4],[40,10,36,8],[41,8,37,6,"setPurchasing"],[41,21,37,19],[41,22,37,20],[41,26,37,24],[41,27,37,25],[42,8,38,6],[42,14,38,12,"Purchases"],[42,23,38,21],[42,24,38,21,"default"],[42,31,38,21],[42,32,38,22,"purchasePackage"],[42,47,38,37],[42,48,38,38,"selectedPkg"],[42,59,38,49],[42,60,38,50],[43,8,39,6],[43,14,39,12,"refresh"],[43,21,39,19],[43,22,39,20],[43,23,39,21],[44,8,40,6,"goBack"],[44,14,40,12],[44,15,40,13],[44,16,40,14],[45,6,41,4],[45,7,41,5],[45,8,41,6],[45,15,41,13,"e"],[45,16,41,14],[45,18,41,16],[46,8,42,6],[46,12,42,12,"cancelled"],[46,21,42,21],[46,24,42,24,"e"],[46,25,42,25],[46,27,42,27,"userCancelled"],[46,40,42,40],[46,44,42,44,"e"],[46,45,42,45],[46,47,42,47,"code"],[46,51,42,51],[46,56,42,56],[46,76,42,76],[47,8,43,6],[47,12,43,10,"cancelled"],[47,21,43,19],[47,23,43,21],[48,10,44,8],[49,8,45,6],[50,8,46,6,"console"],[50,15,46,13],[50,16,46,14,"error"],[50,21,46,19],[50,22,46,20,"e"],[50,23,46,21],[50,24,46,22],[51,8,47,6,"Alert"],[51,20,47,11],[51,21,47,11,"Alert"],[51,26,47,11],[51,27,47,12,"alert"],[51,32,47,17],[51,33,47,18,"alertTitle"],[51,43,47,28],[51,45,47,30],[51,81,47,66],[51,82,47,67],[52,6,48,4],[52,7,48,5],[52,16,48,14],[53,8,49,6,"setPurchasing"],[53,21,49,19],[53,22,49,20],[53,27,49,25],[53,28,49,26],[54,6,50,4],[55,4,51,2],[55,5,51,3],[55,8,51,5],[55,9,52,4,"alertTitle"],[55,19,52,14],[55,21,53,4,"error"],[55,26,53,9],[55,28,54,4,"goBack"],[55,34,54,10],[55,36,55,4,"hasSelectedTier"],[55,51,55,19],[55,53,56,4,"isAvailable"],[55,64,56,15],[55,66,57,4,"refresh"],[55,73,57,11],[55,75,58,4,"selectedPkg"],[55,86,58,15],[55,87,59,3],[55,88,59,4],[56,4,61,2],[56,8,61,8,"onRestore"],[56,17,61,17],[56,20,61,20],[56,24,61,20,"useCallback"],[56,30,61,31],[56,31,61,31,"useCallback"],[56,42,61,31],[56,61,61,31,"_asyncToGenerator"],[56,78,61,31],[56,79,61,31,"default"],[56,86,61,31],[56,88,61,32],[56,101,61,44],[57,6,62,4],[57,10,62,8],[57,11,62,9,"isAvailable"],[57,22,62,20],[57,24,62,22],[58,8,63,6,"Alert"],[58,20,63,11],[58,21,63,11,"Alert"],[58,26,63,11],[58,27,63,12,"alert"],[58,32,63,17],[58,33,64,8,"alertTitle"],[58,43,64,18],[58,45,65,8,"error"],[58,50,65,13],[58,54,65,17],[58,98,66,6],[58,99,66,7],[59,8,67,6],[60,6,68,4],[61,6,70,4],[61,10,70,8],[62,8,71,6,"setPurchasing"],[62,21,71,19],[62,22,71,20],[62,26,71,24],[62,27,71,25],[63,8,72,6],[63,14,72,12,"Purchases"],[63,23,72,21],[63,24,72,21,"default"],[63,31,72,21],[63,32,72,22,"restorePurchases"],[63,48,72,38],[63,49,72,39],[63,50,72,40],[64,8,73,6],[64,14,73,12,"refresh"],[64,21,73,19],[64,22,73,20],[64,23,73,21],[65,8,74,6,"goBack"],[65,14,74,12],[65,15,74,13],[65,16,74,14],[66,6,75,4],[66,7,75,5],[66,8,75,6],[66,15,75,13,"e"],[66,16,75,14],[66,18,75,16],[67,8,76,6,"console"],[67,15,76,13],[67,16,76,14,"error"],[67,21,76,19],[67,22,76,20,"e"],[67,23,76,21],[67,24,76,22],[68,8,77,6,"Alert"],[68,20,77,11],[68,21,77,11,"Alert"],[68,26,77,11],[68,27,77,12,"alert"],[68,32,77,17],[68,33,77,18,"alertTitle"],[68,43,77,28],[68,45,77,30],[68,75,77,60],[68,76,77,61],[69,6,78,4],[69,7,78,5],[69,16,78,14],[70,8,79,6,"setPurchasing"],[70,21,79,19],[70,22,79,20],[70,27,79,25],[70,28,79,26],[71,6,80,4],[72,4,81,2],[72,5,81,3],[72,8,81,5],[72,9,81,6,"alertTitle"],[72,19,81,16],[72,21,81,18,"error"],[72,26,81,23],[72,28,81,25,"goBack"],[72,34,81,31],[72,36,81,33,"isAvailable"],[72,47,81,44],[72,49,81,46,"refresh"],[72,56,81,53],[72,57,81,54],[72,58,81,55],[73,4,83,2],[73,11,83,9],[74,6,83,11,"purchasing"],[74,16,83,21],[75,6,83,23,"onSubscribe"],[75,17,83,34],[76,6,83,36,"onRestore"],[77,4,83,46],[77,5,83,47],[78,2,84,0],[79,0,84,1],[79,3]],"functionMap":{"names":["<global>","useSubscriptionActions","onSubscribe","onRestore"],"mappings":"AAA;OCI;kCCW;GDmC;gCEU;GFoB;CDG"},"hasCjsExports":false},"type":"js/module"}]}