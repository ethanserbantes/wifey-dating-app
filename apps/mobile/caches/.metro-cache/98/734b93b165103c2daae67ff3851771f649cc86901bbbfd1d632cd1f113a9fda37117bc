{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":12,"index":91},"end":{"line":5,"column":28,"index":107}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"../../utilities","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":16,"index":125},"end":{"line":6,"column":42,"index":151}}],"key":"dylU7Uvu5OAdzBgx7uCZTatncgc=","exportNames":["*"],"imports":1}},{"name":"../core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":11,"index":164},"end":{"line":7,"column":29,"index":182}}],"key":"zfOZh2Df04vdlWWq4HUHohVdYVA=","exportNames":["*"],"imports":1}},{"name":"../../errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":13,"index":197},"end":{"line":8,"column":36,"index":220}}],"key":"Oc8JdRzxfYrD1sfFSy8Y5QpQ+vg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  var tslib = require(_dependencyMap[0], \"tslib\");\n  var utilities = require(_dependencyMap[1], \"../../utilities\");\n  var core = require(_dependencyMap[2], \"../core\");\n  var errors = require(_dependencyMap[3], \"../../errors\");\n  function isLikeCloseEvent(val) {\n    return utilities.isNonNullObject(val) && \"code\" in val && \"reason\" in val;\n  }\n  function isLikeErrorEvent(err) {\n    var _a;\n    return utilities.isNonNullObject(err) && ((_a = err.target) === null || _a === void 0 ? void 0 : _a.readyState) === WebSocket.CLOSED;\n  }\n  var GraphQLWsLink = function (_super) {\n    tslib.__extends(GraphQLWsLink, _super);\n    function GraphQLWsLink(client) {\n      var _this = _super.call(this) || this;\n      _this.client = client;\n      return _this;\n    }\n    GraphQLWsLink.prototype.request = function (operation) {\n      var _this = this;\n      return new utilities.Observable(function (observer) {\n        return _this.client.subscribe(tslib.__assign(tslib.__assign({}, operation), {\n          query: utilities.print(operation.query)\n        }), {\n          next: observer.next.bind(observer),\n          complete: observer.complete.bind(observer),\n          error: function (err) {\n            if (err instanceof Error) {\n              return observer.error(err);\n            }\n            var likeClose = isLikeCloseEvent(err);\n            if (likeClose || isLikeErrorEvent(err)) {\n              return observer.error(new Error(\"Socket closed\".concat(likeClose ? \" with event \".concat(err.code) : \"\").concat(likeClose ? \" \".concat(err.reason) : \"\")));\n            }\n            return observer.error(new errors.ApolloError({\n              graphQLErrors: Array.isArray(err) ? err : [err]\n            }));\n          }\n        });\n      });\n    };\n    return GraphQLWsLink;\n  }(core.ApolloLink);\n  exports.GraphQLWsLink = GraphQLWsLink;\n});","lineCount":51,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,3,47,"value"],[5,9,3,52],[5,11,3,54],[6,2,3,59],[6,3,3,60],[6,4,3,61],[7,2,5,0],[7,6,5,4,"tslib"],[7,11,5,9],[7,14,5,12,"require"],[7,21,5,19],[7,22,5,19,"_dependencyMap"],[7,36,5,19],[7,48,5,27],[7,49,5,28],[8,2,6,0],[8,6,6,4,"utilities"],[8,15,6,13],[8,18,6,16,"require"],[8,25,6,23],[8,26,6,23,"_dependencyMap"],[8,40,6,23],[8,62,6,41],[8,63,6,42],[9,2,7,0],[9,6,7,4,"core"],[9,10,7,8],[9,13,7,11,"require"],[9,20,7,18],[9,21,7,18,"_dependencyMap"],[9,35,7,18],[9,49,7,28],[9,50,7,29],[10,2,8,0],[10,6,8,4,"errors"],[10,12,8,10],[10,15,8,13,"require"],[10,22,8,20],[10,23,8,20,"_dependencyMap"],[10,37,8,20],[10,56,8,35],[10,57,8,36],[11,2,10,0],[11,11,10,9,"isLikeCloseEvent"],[11,27,10,25,"isLikeCloseEvent"],[11,28,10,26,"val"],[11,31,10,29],[11,33,10,31],[12,4,11,4],[12,11,11,11,"utilities"],[12,20,11,20],[12,21,11,21,"isNonNullObject"],[12,36,11,36],[12,37,11,37,"val"],[12,40,11,40],[12,41,11,41],[12,45,11,45],[12,51,11,51],[12,55,11,55,"val"],[12,58,11,58],[12,62,11,62],[12,70,11,70],[12,74,11,74,"val"],[12,77,11,77],[13,2,12,0],[14,2,13,0],[14,11,13,9,"isLikeErrorEvent"],[14,27,13,25,"isLikeErrorEvent"],[14,28,13,26,"err"],[14,31,13,29],[14,33,13,31],[15,4,14,4],[15,8,14,8,"_a"],[15,10,14,10],[16,4,15,4],[16,11,15,11,"utilities"],[16,20,15,20],[16,21,15,21,"isNonNullObject"],[16,36,15,36],[16,37,15,37,"err"],[16,40,15,40],[16,41,15,41],[16,45,15,45],[16,46,15,46],[16,47,15,47,"_a"],[16,49,15,49],[16,52,15,52,"err"],[16,55,15,55],[16,56,15,56,"target"],[16,62,15,62],[16,68,15,68],[16,72,15,72],[16,76,15,76,"_a"],[16,78,15,78],[16,83,15,83],[16,88,15,88],[16,89,15,89],[16,92,15,92],[16,97,15,97],[16,98,15,98],[16,101,15,101,"_a"],[16,103,15,103],[16,104,15,104,"readyState"],[16,114,15,114],[16,120,15,120,"WebSocket"],[16,129,15,129],[16,130,15,130,"CLOSED"],[16,136,15,136],[17,2,16,0],[18,2,17,0],[18,6,17,4,"GraphQLWsLink"],[18,19,17,17],[18,22,17,22],[18,32,17,32,"_super"],[18,38,17,38],[18,40,17,40],[19,4,18,4,"tslib"],[19,9,18,9],[19,10,18,10,"__extends"],[19,19,18,19],[19,20,18,20,"GraphQLWsLink"],[19,33,18,33],[19,35,18,35,"_super"],[19,41,18,41],[19,42,18,42],[20,4,19,4],[20,13,19,13,"GraphQLWsLink"],[20,26,19,26,"GraphQLWsLink"],[20,27,19,27,"client"],[20,33,19,33],[20,35,19,35],[21,6,20,8],[21,10,20,12,"_this"],[21,15,20,17],[21,18,20,20,"_super"],[21,24,20,26],[21,25,20,27,"call"],[21,29,20,31],[21,30,20,32],[21,34,20,36],[21,35,20,37],[21,39,20,41],[21,43,20,45],[22,6,21,8,"_this"],[22,11,21,13],[22,12,21,14,"client"],[22,18,21,20],[22,21,21,23,"client"],[22,27,21,29],[23,6,22,8],[23,13,22,15,"_this"],[23,18,22,20],[24,4,23,4],[25,4,24,4,"GraphQLWsLink"],[25,17,24,17],[25,18,24,18,"prototype"],[25,27,24,27],[25,28,24,28,"request"],[25,35,24,35],[25,38,24,38],[25,48,24,48,"operation"],[25,57,24,57],[25,59,24,59],[26,6,25,8],[26,10,25,12,"_this"],[26,15,25,17],[26,18,25,20],[26,22,25,24],[27,6,26,8],[27,13,26,15],[27,17,26,19,"utilities"],[27,26,26,28],[27,27,26,29,"Observable"],[27,37,26,39],[27,38,26,40],[27,48,26,50,"observer"],[27,56,26,58],[27,58,26,60],[28,8,27,12],[28,15,27,19,"_this"],[28,20,27,24],[28,21,27,25,"client"],[28,27,27,31],[28,28,27,32,"subscribe"],[28,37,27,41],[28,38,27,42,"tslib"],[28,43,27,47],[28,44,27,48,"__assign"],[28,52,27,56],[28,53,27,57,"tslib"],[28,58,27,62],[28,59,27,63,"__assign"],[28,67,27,71],[28,68,27,72],[28,69,27,73],[28,70,27,74],[28,72,27,76,"operation"],[28,81,27,85],[28,82,27,86],[28,84,27,88],[29,10,27,90,"query"],[29,15,27,95],[29,17,27,97,"utilities"],[29,26,27,106],[29,27,27,107,"print"],[29,32,27,112],[29,33,27,113,"operation"],[29,42,27,122],[29,43,27,123,"query"],[29,48,27,128],[30,8,27,130],[30,9,27,131],[30,10,27,132],[30,12,27,134],[31,10,28,16,"next"],[31,14,28,20],[31,16,28,22,"observer"],[31,24,28,30],[31,25,28,31,"next"],[31,29,28,35],[31,30,28,36,"bind"],[31,34,28,40],[31,35,28,41,"observer"],[31,43,28,49],[31,44,28,50],[32,10,29,16,"complete"],[32,18,29,24],[32,20,29,26,"observer"],[32,28,29,34],[32,29,29,35,"complete"],[32,37,29,43],[32,38,29,44,"bind"],[32,42,29,48],[32,43,29,49,"observer"],[32,51,29,57],[32,52,29,58],[33,10,30,16,"error"],[33,15,30,21],[33,17,30,23],[33,26,30,23,"error"],[33,27,30,33,"err"],[33,30,30,36],[33,32,30,38],[34,12,31,20],[34,16,31,24,"err"],[34,19,31,27],[34,31,31,39,"Error"],[34,36,31,44],[34,38,31,46],[35,14,32,24],[35,21,32,31,"observer"],[35,29,32,39],[35,30,32,40,"error"],[35,35,32,45],[35,36,32,46,"err"],[35,39,32,49],[35,40,32,50],[36,12,33,20],[37,12,34,20],[37,16,34,24,"likeClose"],[37,25,34,33],[37,28,34,36,"isLikeCloseEvent"],[37,44,34,52],[37,45,34,53,"err"],[37,48,34,56],[37,49,34,57],[38,12,35,20],[38,16,35,24,"likeClose"],[38,25,35,33],[38,29,35,37,"isLikeErrorEvent"],[38,45,35,53],[38,46,35,54,"err"],[38,49,35,57],[38,50,35,58],[38,52,35,60],[39,14,36,24],[39,21,36,31,"observer"],[39,29,36,39],[39,30,36,40,"error"],[39,35,36,45],[39,36,37,24],[39,40,37,28,"Error"],[39,45,37,33],[39,46,37,34],[39,61,37,49],[39,62,37,50,"concat"],[39,68,37,56],[39,69,37,57,"likeClose"],[39,78,37,66],[39,81,37,69],[39,95,37,83],[39,96,37,84,"concat"],[39,102,37,90],[39,103,37,91,"err"],[39,106,37,94],[39,107,37,95,"code"],[39,111,37,99],[39,112,37,100],[39,115,37,103],[39,117,37,105],[39,118,37,106],[39,119,37,107,"concat"],[39,125,37,113],[39,126,37,114,"likeClose"],[39,135,37,123],[39,138,37,126],[39,141,37,129],[39,142,37,130,"concat"],[39,148,37,136],[39,149,37,137,"err"],[39,152,37,140],[39,153,37,141,"reason"],[39,159,37,147],[39,160,37,148],[39,163,37,151],[39,165,37,153],[39,166,37,154],[39,167,37,155],[39,168,37,156],[40,12,38,20],[41,12,39,20],[41,19,39,27,"observer"],[41,27,39,35],[41,28,39,36,"error"],[41,33,39,41],[41,34,39,42],[41,38,39,46,"errors"],[41,44,39,52],[41,45,39,53,"ApolloError"],[41,56,39,64],[41,57,39,65],[42,14,40,24,"graphQLErrors"],[42,27,40,37],[42,29,40,39,"Array"],[42,34,40,44],[42,35,40,45,"isArray"],[42,42,40,52],[42,43,40,53,"err"],[42,46,40,56],[42,47,40,57],[42,50,40,60,"err"],[42,53,40,63],[42,56,40,66],[42,57,40,67,"err"],[42,60,40,70],[43,12,41,20],[43,13,41,21],[43,14,41,22],[43,15,41,23],[44,10,42,16],[45,8,43,12],[45,9,43,13],[45,10,43,14],[46,6,44,8],[46,7,44,9],[46,8,44,10],[47,4,45,4],[47,5,45,5],[48,4,46,4],[48,11,46,11,"GraphQLWsLink"],[48,24,46,24],[49,2,47,0],[49,3,47,1],[49,4,47,2,"core"],[49,8,47,6],[49,9,47,7,"ApolloLink"],[49,19,47,17],[49,20,47,19],[50,2,49,0,"exports"],[50,9,49,7],[50,10,49,8,"GraphQLWsLink"],[50,23,49,21],[50,26,49,24,"GraphQLWsLink"],[50,39,49,37],[51,0,49,38],[51,3]],"functionMap":{"names":["<global>","isLikeCloseEvent","isLikeErrorEvent","<anonymous>","GraphQLWsLink","GraphQLWsLink.prototype.request","utilities.Observable$argument_0","_this.client.subscribe$argument_1.error"],"mappings":"AAA;ACS;CDE;AEC;CFG;sBGC;ICE;KDI;sCEC;wCCE;uBCI;iBDY;SDE;KFC;CHE"},"hasCjsExports":true},"type":"js/module"}]}