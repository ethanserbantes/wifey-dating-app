{"dependencies":[{"name":"../ai/gen-ai-attributes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":301,"index":301}}],"key":"nKHaXfEjIYF1icPUCGJgR0o1cZ8=","exportNames":["*"],"imports":1}},{"name":"../langchain/utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":302},"end":{"line":2,"column":67,"index":369}}],"key":"U+3mH+ozIZB/fwAyJFIDyLjjrBI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"extractModelMetadata\", {\n    enumerable: true,\n    get: function () {\n      return extractModelMetadata;\n    }\n  });\n  Object.defineProperty(exports, \"extractTokenUsageFromMessage\", {\n    enumerable: true,\n    get: function () {\n      return extractTokenUsageFromMessage;\n    }\n  });\n  Object.defineProperty(exports, \"extractToolCalls\", {\n    enumerable: true,\n    get: function () {\n      return extractToolCalls;\n    }\n  });\n  Object.defineProperty(exports, \"extractToolsFromCompiledGraph\", {\n    enumerable: true,\n    get: function () {\n      return extractToolsFromCompiledGraph;\n    }\n  });\n  Object.defineProperty(exports, \"setResponseAttributes\", {\n    enumerable: true,\n    get: function () {\n      return setResponseAttributes;\n    }\n  });\n  var _aiGenAiAttributesJs = require(_dependencyMap[0]);\n  var _langchainUtilsJs = require(_dependencyMap[1]);\n  /**\n   * Extract tool calls from messages\n   */\n  function extractToolCalls(messages) {\n    if (!messages || messages.length === 0) {\n      return null;\n    }\n    var toolCalls = [];\n    for (var message of messages) {\n      if (message && typeof message === 'object') {\n        var msgToolCalls = message.tool_calls;\n        if (msgToolCalls && Array.isArray(msgToolCalls)) {\n          toolCalls.push(...msgToolCalls);\n        }\n      }\n    }\n    return toolCalls.length > 0 ? toolCalls : null;\n  }\n\n  /**\n   * Extract token usage from a message's usage_metadata or response_metadata\n   * Returns token counts without setting span attributes\n   */\n  function extractTokenUsageFromMessage(message) {\n    var msg = message;\n    var inputTokens = 0;\n    var outputTokens = 0;\n    var totalTokens = 0;\n\n    // Extract from usage_metadata (newer format)\n    if (msg.usage_metadata && typeof msg.usage_metadata === 'object') {\n      var usage = msg.usage_metadata;\n      if (typeof usage.input_tokens === 'number') {\n        inputTokens = usage.input_tokens;\n      }\n      if (typeof usage.output_tokens === 'number') {\n        outputTokens = usage.output_tokens;\n      }\n      if (typeof usage.total_tokens === 'number') {\n        totalTokens = usage.total_tokens;\n      }\n      return {\n        inputTokens,\n        outputTokens,\n        totalTokens\n      };\n    }\n\n    // Fallback: Extract from response_metadata.tokenUsage\n    if (msg.response_metadata && typeof msg.response_metadata === 'object') {\n      var metadata = msg.response_metadata;\n      if (metadata.tokenUsage && typeof metadata.tokenUsage === 'object') {\n        var tokenUsage = metadata.tokenUsage;\n        if (typeof tokenUsage.promptTokens === 'number') {\n          inputTokens = tokenUsage.promptTokens;\n        }\n        if (typeof tokenUsage.completionTokens === 'number') {\n          outputTokens = tokenUsage.completionTokens;\n        }\n        if (typeof tokenUsage.totalTokens === 'number') {\n          totalTokens = tokenUsage.totalTokens;\n        }\n      }\n    }\n    return {\n      inputTokens,\n      outputTokens,\n      totalTokens\n    };\n  }\n\n  /**\n   * Extract model and finish reason from a message's response_metadata\n   */\n  function extractModelMetadata(span, message) {\n    var msg = message;\n    if (msg.response_metadata && typeof msg.response_metadata === 'object') {\n      var metadata = msg.response_metadata;\n      if (metadata.model_name && typeof metadata.model_name === 'string') {\n        span.setAttribute(_aiGenAiAttributesJs.GEN_AI_RESPONSE_MODEL_ATTRIBUTE, metadata.model_name);\n      }\n      if (metadata.finish_reason && typeof metadata.finish_reason === 'string') {\n        span.setAttribute(_aiGenAiAttributesJs.GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE, [metadata.finish_reason]);\n      }\n    }\n  }\n\n  /**\n   * Extract tools from compiled graph structure\n   *\n   * Tools are stored in: compiledGraph.builder.nodes.tools.runnable.tools\n   */\n  function extractToolsFromCompiledGraph(compiledGraph) {\n    if (!compiledGraph.builder?.nodes?.tools?.runnable?.tools) {\n      return null;\n    }\n    var tools = compiledGraph.builder?.nodes?.tools?.runnable?.tools;\n    if (!tools || !Array.isArray(tools) || tools.length === 0) {\n      return null;\n    }\n\n    // Extract name, description, and schema from each tool's lc_kwargs\n    return tools.map(tool => ({\n      name: tool.lc_kwargs?.name,\n      description: tool.lc_kwargs?.description,\n      schema: tool.lc_kwargs?.schema\n    }));\n  }\n\n  /**\n   * Set response attributes on the span\n   */\n  function setResponseAttributes(span, inputMessages, result) {\n    // Extract messages from result\n    var resultObj = result;\n    var outputMessages = resultObj?.messages;\n    if (!outputMessages || !Array.isArray(outputMessages)) {\n      return;\n    }\n\n    // Get new messages (delta between input and output)\n    var inputCount = inputMessages?.length ?? 0;\n    var newMessages = outputMessages.length > inputCount ? outputMessages.slice(inputCount) : [];\n    if (newMessages.length === 0) {\n      return;\n    }\n\n    // Extract and set tool calls from new messages BEFORE normalization\n    // (normalization strips tool_calls, so we need to extract them first)\n    var toolCalls = extractToolCalls(newMessages);\n    if (toolCalls) {\n      span.setAttribute(_aiGenAiAttributesJs.GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE, JSON.stringify(toolCalls));\n    }\n\n    // Normalize the new messages\n    var normalizedNewMessages = (0, _langchainUtilsJs.normalizeLangChainMessages)(newMessages);\n    span.setAttribute(_aiGenAiAttributesJs.GEN_AI_RESPONSE_TEXT_ATTRIBUTE, JSON.stringify(normalizedNewMessages));\n\n    // Accumulate token usage across all messages\n    var totalInputTokens = 0;\n    var totalOutputTokens = 0;\n    var totalTokens = 0;\n\n    // Extract metadata from messages\n    for (var message of newMessages) {\n      // Accumulate token usage\n      var tokens = extractTokenUsageFromMessage(message);\n      totalInputTokens += tokens.inputTokens;\n      totalOutputTokens += tokens.outputTokens;\n      totalTokens += tokens.totalTokens;\n\n      // Extract model metadata (last message's metadata wins for model/finish_reason)\n      extractModelMetadata(span, message);\n    }\n\n    // Set accumulated token usage on span\n    if (totalInputTokens > 0) {\n      span.setAttribute(_aiGenAiAttributesJs.GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE, totalInputTokens);\n    }\n    if (totalOutputTokens > 0) {\n      span.setAttribute(_aiGenAiAttributesJs.GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE, totalOutputTokens);\n    }\n    if (totalTokens > 0) {\n      span.setAttribute(_aiGenAiAttributesJs.GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE, totalTokens);\n    }\n  }\n});","lineCount":205,"map":[[7,2,176,0,"Object"],[7,8,176,0],[7,9,176,0,"defineProperty"],[7,23,176,0],[7,24,176,0,"exports"],[7,31,176,0],[8,4,176,0,"enumerable"],[8,14,176,0],[9,4,176,0,"get"],[9,7,176,0],[9,18,176,0,"get"],[9,19,176,0],[10,6,176,0],[10,13,176,9,"extractModelMetadata"],[10,33,176,29],[11,4,176,29],[12,2,176,29],[13,2,176,0,"Object"],[13,8,176,0],[13,9,176,0,"defineProperty"],[13,23,176,0],[13,24,176,0,"exports"],[13,31,176,0],[14,4,176,0,"enumerable"],[14,14,176,0],[15,4,176,0,"get"],[15,7,176,0],[15,18,176,0,"get"],[15,19,176,0],[16,6,176,0],[16,13,176,31,"extractTokenUsageFromMessage"],[16,41,176,59],[17,4,176,59],[18,2,176,59],[19,2,176,0,"Object"],[19,8,176,0],[19,9,176,0,"defineProperty"],[19,23,176,0],[19,24,176,0,"exports"],[19,31,176,0],[20,4,176,0,"enumerable"],[20,14,176,0],[21,4,176,0,"get"],[21,7,176,0],[21,18,176,0,"get"],[21,19,176,0],[22,6,176,0],[22,13,176,61,"extractToolCalls"],[22,29,176,77],[23,4,176,77],[24,2,176,77],[25,2,176,0,"Object"],[25,8,176,0],[25,9,176,0,"defineProperty"],[25,23,176,0],[25,24,176,0,"exports"],[25,31,176,0],[26,4,176,0,"enumerable"],[26,14,176,0],[27,4,176,0,"get"],[27,7,176,0],[27,18,176,0,"get"],[27,19,176,0],[28,6,176,0],[28,13,176,79,"extractToolsFromCompiledGraph"],[28,42,176,108],[29,4,176,108],[30,2,176,108],[31,2,176,0,"Object"],[31,8,176,0],[31,9,176,0,"defineProperty"],[31,23,176,0],[31,24,176,0,"exports"],[31,31,176,0],[32,4,176,0,"enumerable"],[32,14,176,0],[33,4,176,0,"get"],[33,7,176,0],[33,18,176,0,"get"],[33,19,176,0],[34,6,176,0],[34,13,176,110,"setResponseAttributes"],[34,34,176,131],[35,4,176,131],[36,2,176,131],[37,2,1,0],[37,6,1,0,"_aiGenAiAttributesJs"],[37,26,1,0],[37,29,1,0,"require"],[37,36,1,0],[37,37,1,0,"_dependencyMap"],[37,51,1,0],[38,2,2,0],[38,6,2,0,"_langchainUtilsJs"],[38,23,2,0],[38,26,2,0,"require"],[38,33,2,0],[38,34,2,0,"_dependencyMap"],[38,48,2,0],[39,2,4,0],[40,0,5,0],[41,0,6,0],[42,2,7,0],[42,11,7,9,"extractToolCalls"],[42,27,7,25,"extractToolCalls"],[42,28,7,26,"messages"],[42,36,7,34],[42,38,7,36],[43,4,8,2],[43,8,8,6],[43,9,8,7,"messages"],[43,17,8,15],[43,21,8,19,"messages"],[43,29,8,27],[43,30,8,28,"length"],[43,36,8,34],[43,41,8,39],[43,42,8,40],[43,44,8,42],[44,6,9,4],[44,13,9,11],[44,17,9,15],[45,4,10,2],[46,4,12,2],[46,8,12,8,"toolCalls"],[46,17,12,17],[46,20,12,20],[46,22,12,22],[47,4,14,2],[47,9,14,7],[47,13,14,13,"message"],[47,20,14,20],[47,24,14,24,"messages"],[47,32,14,32],[47,34,14,34],[48,6,15,4],[48,10,15,8,"message"],[48,17,15,15],[48,21,15,19],[48,28,15,26,"message"],[48,35,15,33],[48,40,15,38],[48,48,15,46],[48,50,15,48],[49,8,16,6],[49,12,16,12,"msgToolCalls"],[49,24,16,24],[49,27,16,27,"message"],[49,34,16,34],[49,35,16,35,"tool_calls"],[49,45,16,45],[50,8,17,6],[50,12,17,10,"msgToolCalls"],[50,24,17,22],[50,28,17,26,"Array"],[50,33,17,31],[50,34,17,32,"isArray"],[50,41,17,39],[50,42,17,40,"msgToolCalls"],[50,54,17,52],[50,55,17,53],[50,57,17,55],[51,10,18,8,"toolCalls"],[51,19,18,17],[51,20,18,18,"push"],[51,24,18,22],[51,25,18,23],[51,28,18,26,"msgToolCalls"],[51,40,18,38],[51,41,18,39],[52,8,19,6],[53,6,20,4],[54,4,21,2],[55,4,23,2],[55,11,23,9,"toolCalls"],[55,20,23,18],[55,21,23,19,"length"],[55,27,23,25],[55,30,23,28],[55,31,23,29],[55,34,23,32,"toolCalls"],[55,43,23,41],[55,46,23,44],[55,50,23,48],[56,2,24,0],[58,2,26,0],[59,0,27,0],[60,0,28,0],[61,0,29,0],[62,2,30,0],[62,11,30,9,"extractTokenUsageFromMessage"],[62,39,30,37,"extractTokenUsageFromMessage"],[62,40,30,38,"message"],[62,47,30,45],[62,49,32,1],[63,4,33,2],[63,8,33,8,"msg"],[63,11,33,11],[63,14,33,14,"message"],[63,21,33,21],[64,4,34,2],[64,8,34,6,"inputTokens"],[64,19,34,17],[64,22,34,20],[64,23,34,21],[65,4,35,2],[65,8,35,6,"outputTokens"],[65,20,35,18],[65,23,35,21],[65,24,35,22],[66,4,36,2],[66,8,36,6,"totalTokens"],[66,19,36,17],[66,22,36,20],[66,23,36,21],[68,4,38,2],[69,4,39,2],[69,8,39,6,"msg"],[69,11,39,9],[69,12,39,10,"usage_metadata"],[69,26,39,24],[69,30,39,28],[69,37,39,35,"msg"],[69,40,39,38],[69,41,39,39,"usage_metadata"],[69,55,39,53],[69,60,39,58],[69,68,39,66],[69,70,39,68],[70,6,40,4],[70,10,40,10,"usage"],[70,15,40,15],[70,18,40,18,"msg"],[70,21,40,21],[70,22,40,22,"usage_metadata"],[70,36,40,36],[71,6,41,4],[71,10,41,8],[71,17,41,15,"usage"],[71,22,41,20],[71,23,41,21,"input_tokens"],[71,35,41,33],[71,40,41,38],[71,48,41,46],[71,50,41,48],[72,8,42,6,"inputTokens"],[72,19,42,17],[72,22,42,20,"usage"],[72,27,42,25],[72,28,42,26,"input_tokens"],[72,40,42,38],[73,6,43,4],[74,6,44,4],[74,10,44,8],[74,17,44,15,"usage"],[74,22,44,20],[74,23,44,21,"output_tokens"],[74,36,44,34],[74,41,44,39],[74,49,44,47],[74,51,44,49],[75,8,45,6,"outputTokens"],[75,20,45,18],[75,23,45,21,"usage"],[75,28,45,26],[75,29,45,27,"output_tokens"],[75,42,45,40],[76,6,46,4],[77,6,47,4],[77,10,47,8],[77,17,47,15,"usage"],[77,22,47,20],[77,23,47,21,"total_tokens"],[77,35,47,33],[77,40,47,38],[77,48,47,46],[77,50,47,48],[78,8,48,6,"totalTokens"],[78,19,48,17],[78,22,48,20,"usage"],[78,27,48,25],[78,28,48,26,"total_tokens"],[78,40,48,38],[79,6,49,4],[80,6,50,4],[80,13,50,11],[81,8,50,13,"inputTokens"],[81,19,50,24],[82,8,50,26,"outputTokens"],[82,20,50,38],[83,8,50,40,"totalTokens"],[84,6,50,52],[84,7,50,53],[85,4,51,2],[87,4,53,2],[88,4,54,2],[88,8,54,6,"msg"],[88,11,54,9],[88,12,54,10,"response_metadata"],[88,29,54,27],[88,33,54,31],[88,40,54,38,"msg"],[88,43,54,41],[88,44,54,42,"response_metadata"],[88,61,54,59],[88,66,54,64],[88,74,54,72],[88,76,54,74],[89,6,55,4],[89,10,55,10,"metadata"],[89,18,55,18],[89,21,55,21,"msg"],[89,24,55,24],[89,25,55,25,"response_metadata"],[89,42,55,42],[90,6,56,4],[90,10,56,8,"metadata"],[90,18,56,16],[90,19,56,17,"tokenUsage"],[90,29,56,27],[90,33,56,31],[90,40,56,38,"metadata"],[90,48,56,46],[90,49,56,47,"tokenUsage"],[90,59,56,57],[90,64,56,62],[90,72,56,70],[90,74,56,72],[91,8,57,6],[91,12,57,12,"tokenUsage"],[91,22,57,22],[91,25,57,25,"metadata"],[91,33,57,33],[91,34,57,34,"tokenUsage"],[91,44,57,44],[92,8,58,6],[92,12,58,10],[92,19,58,17,"tokenUsage"],[92,29,58,27],[92,30,58,28,"promptTokens"],[92,42,58,40],[92,47,58,45],[92,55,58,53],[92,57,58,55],[93,10,59,8,"inputTokens"],[93,21,59,19],[93,24,59,22,"tokenUsage"],[93,34,59,32],[93,35,59,33,"promptTokens"],[93,47,59,45],[94,8,60,6],[95,8,61,6],[95,12,61,10],[95,19,61,17,"tokenUsage"],[95,29,61,27],[95,30,61,28,"completionTokens"],[95,46,61,44],[95,51,61,49],[95,59,61,57],[95,61,61,59],[96,10,62,8,"outputTokens"],[96,22,62,20],[96,25,62,23,"tokenUsage"],[96,35,62,33],[96,36,62,34,"completionTokens"],[96,52,62,50],[97,8,63,6],[98,8,64,6],[98,12,64,10],[98,19,64,17,"tokenUsage"],[98,29,64,27],[98,30,64,28,"totalTokens"],[98,41,64,39],[98,46,64,44],[98,54,64,52],[98,56,64,54],[99,10,65,8,"totalTokens"],[99,21,65,19],[99,24,65,22,"tokenUsage"],[99,34,65,32],[99,35,65,33,"totalTokens"],[99,46,65,44],[100,8,66,6],[101,6,67,4],[102,4,68,2],[103,4,70,2],[103,11,70,9],[104,6,70,11,"inputTokens"],[104,17,70,22],[105,6,70,24,"outputTokens"],[105,18,70,36],[106,6,70,38,"totalTokens"],[107,4,70,50],[107,5,70,51],[108,2,71,0],[110,2,73,0],[111,0,74,0],[112,0,75,0],[113,2,76,0],[113,11,76,9,"extractModelMetadata"],[113,31,76,29,"extractModelMetadata"],[113,32,76,30,"span"],[113,36,76,34],[113,38,76,36,"message"],[113,45,76,43],[113,47,76,45],[114,4,77,2],[114,8,77,8,"msg"],[114,11,77,11],[114,14,77,14,"message"],[114,21,77,21],[115,4,79,2],[115,8,79,6,"msg"],[115,11,79,9],[115,12,79,10,"response_metadata"],[115,29,79,27],[115,33,79,31],[115,40,79,38,"msg"],[115,43,79,41],[115,44,79,42,"response_metadata"],[115,61,79,59],[115,66,79,64],[115,74,79,72],[115,76,79,74],[116,6,80,4],[116,10,80,10,"metadata"],[116,18,80,18],[116,21,80,21,"msg"],[116,24,80,24],[116,25,80,25,"response_metadata"],[116,42,80,42],[117,6,82,4],[117,10,82,8,"metadata"],[117,18,82,16],[117,19,82,17,"model_name"],[117,29,82,27],[117,33,82,31],[117,40,82,38,"metadata"],[117,48,82,46],[117,49,82,47,"model_name"],[117,59,82,57],[117,64,82,62],[117,72,82,70],[117,74,82,72],[118,8,83,6,"span"],[118,12,83,10],[118,13,83,11,"setAttribute"],[118,25,83,23],[118,26,83,24,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[118,46,83,55],[118,47,83,55,"GEN_AI_RESPONSE_MODEL_ATTRIBUTE"],[118,78,83,55],[118,80,83,57,"metadata"],[118,88,83,65],[118,89,83,66,"model_name"],[118,99,83,76],[118,100,83,77],[119,6,84,4],[120,6,86,4],[120,10,86,8,"metadata"],[120,18,86,16],[120,19,86,17,"finish_reason"],[120,32,86,30],[120,36,86,34],[120,43,86,41,"metadata"],[120,51,86,49],[120,52,86,50,"finish_reason"],[120,65,86,63],[120,70,86,68],[120,78,86,76],[120,80,86,78],[121,8,87,6,"span"],[121,12,87,10],[121,13,87,11,"setAttribute"],[121,25,87,23],[121,26,87,24,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[121,46,87,64],[121,47,87,64,"GEN_AI_RESPONSE_FINISH_REASONS_ATTRIBUTE"],[121,87,87,64],[121,89,87,66],[121,90,87,67,"metadata"],[121,98,87,75],[121,99,87,76,"finish_reason"],[121,112,87,89],[121,113,87,90],[121,114,87,91],[122,6,88,4],[123,4,89,2],[124,2,90,0],[126,2,92,0],[127,0,93,0],[128,0,94,0],[129,0,95,0],[130,0,96,0],[131,2,97,0],[131,11,97,9,"extractToolsFromCompiledGraph"],[131,40,97,38,"extractToolsFromCompiledGraph"],[131,41,97,39,"compiledGraph"],[131,54,97,52],[131,56,97,54],[132,4,98,2],[132,8,98,6],[132,9,98,7,"compiledGraph"],[132,22,98,20],[132,23,98,21,"builder"],[132,30,98,28],[132,32,98,30,"nodes"],[132,37,98,35],[132,39,98,37,"tools"],[132,44,98,42],[132,46,98,44,"runnable"],[132,54,98,52],[132,56,98,54,"tools"],[132,61,98,59],[132,63,98,61],[133,6,99,4],[133,13,99,11],[133,17,99,15],[134,4,100,2],[135,4,102,2],[135,8,102,8,"tools"],[135,13,102,13],[135,16,102,16,"compiledGraph"],[135,29,102,29],[135,30,102,30,"builder"],[135,37,102,37],[135,39,102,39,"nodes"],[135,44,102,44],[135,46,102,46,"tools"],[135,51,102,51],[135,53,102,53,"runnable"],[135,61,102,61],[135,63,102,63,"tools"],[135,68,102,68],[136,4,104,2],[136,8,104,6],[136,9,104,7,"tools"],[136,14,104,12],[136,18,104,16],[136,19,104,17,"Array"],[136,24,104,22],[136,25,104,23,"isArray"],[136,32,104,30],[136,33,104,31,"tools"],[136,38,104,36],[136,39,104,37],[136,43,104,41,"tools"],[136,48,104,46],[136,49,104,47,"length"],[136,55,104,53],[136,60,104,58],[136,61,104,59],[136,63,104,61],[137,6,105,4],[137,13,105,11],[137,17,105,15],[138,4,106,2],[140,4,108,2],[141,4,109,2],[141,11,109,9,"tools"],[141,16,109,14],[141,17,109,15,"map"],[141,20,109,18],[141,21,109,20,"tool"],[141,25,109,24],[141,30,109,30],[142,6,110,4,"name"],[142,10,110,8],[142,12,110,10,"tool"],[142,16,110,14],[142,17,110,15,"lc_kwargs"],[142,26,110,24],[142,28,110,26,"name"],[142,32,110,30],[143,6,111,4,"description"],[143,17,111,15],[143,19,111,17,"tool"],[143,23,111,21],[143,24,111,22,"lc_kwargs"],[143,33,111,31],[143,35,111,33,"description"],[143,46,111,44],[144,6,112,4,"schema"],[144,12,112,10],[144,14,112,12,"tool"],[144,18,112,16],[144,19,112,17,"lc_kwargs"],[144,28,112,26],[144,30,112,28,"schema"],[145,4,113,2],[145,5,113,3],[145,6,113,4],[145,7,113,5],[146,2,114,0],[148,2,116,0],[149,0,117,0],[150,0,118,0],[151,2,119,0],[151,11,119,9,"setResponseAttributes"],[151,32,119,30,"setResponseAttributes"],[151,33,119,31,"span"],[151,37,119,35],[151,39,119,37,"inputMessages"],[151,52,119,50],[151,54,119,52,"result"],[151,60,119,58],[151,62,119,60],[152,4,120,2],[153,4,121,2],[153,8,121,8,"resultObj"],[153,17,121,17],[153,20,121,20,"result"],[153,26,121,26],[154,4,122,2],[154,8,122,8,"outputMessages"],[154,22,122,22],[154,25,122,25,"resultObj"],[154,34,122,34],[154,36,122,36,"messages"],[154,44,122,44],[155,4,124,2],[155,8,124,6],[155,9,124,7,"outputMessages"],[155,23,124,21],[155,27,124,25],[155,28,124,26,"Array"],[155,33,124,31],[155,34,124,32,"isArray"],[155,41,124,39],[155,42,124,40,"outputMessages"],[155,56,124,54],[155,57,124,55],[155,59,124,57],[156,6,125,4],[157,4,126,2],[159,4,128,2],[160,4,129,2],[160,8,129,8,"inputCount"],[160,18,129,18],[160,21,129,21,"inputMessages"],[160,34,129,34],[160,36,129,36,"length"],[160,42,129,42],[160,46,129,46],[160,47,129,47],[161,4,130,2],[161,8,130,8,"newMessages"],[161,19,130,19],[161,22,130,22,"outputMessages"],[161,36,130,36],[161,37,130,37,"length"],[161,43,130,43],[161,46,130,46,"inputCount"],[161,56,130,56],[161,59,130,59,"outputMessages"],[161,73,130,73],[161,74,130,74,"slice"],[161,79,130,79],[161,80,130,80,"inputCount"],[161,90,130,90],[161,91,130,91],[161,94,130,94],[161,96,130,96],[162,4,132,2],[162,8,132,6,"newMessages"],[162,19,132,17],[162,20,132,18,"length"],[162,26,132,24],[162,31,132,29],[162,32,132,30],[162,34,132,32],[163,6,133,4],[164,4,134,2],[166,4,136,2],[167,4,137,2],[168,4,138,2],[168,8,138,8,"toolCalls"],[168,17,138,17],[168,20,138,20,"extractToolCalls"],[168,36,138,36],[168,37,138,37,"newMessages"],[168,48,138,49],[168,49,138,50],[169,4,139,2],[169,8,139,6,"toolCalls"],[169,17,139,15],[169,19,139,17],[170,6,140,4,"span"],[170,10,140,8],[170,11,140,9,"setAttribute"],[170,23,140,21],[170,24,140,22,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[170,44,140,58],[170,45,140,58,"GEN_AI_RESPONSE_TOOL_CALLS_ATTRIBUTE"],[170,81,140,58],[170,83,140,60,"JSON"],[170,87,140,64],[170,88,140,65,"stringify"],[170,97,140,74],[170,98,140,75,"toolCalls"],[170,107,140,84],[170,108,140,85],[170,109,140,86],[171,4,141,2],[173,4,143,2],[174,4,144,2],[174,8,144,8,"normalizedNewMessages"],[174,29,144,29],[174,32,144,32],[174,36,144,32,"normalizeLangChainMessages"],[174,53,144,58],[174,54,144,58,"normalizeLangChainMessages"],[174,80,144,58],[174,82,144,59,"newMessages"],[174,93,144,70],[174,94,144,71],[175,4,145,2,"span"],[175,8,145,6],[175,9,145,7,"setAttribute"],[175,21,145,19],[175,22,145,20,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[175,42,145,50],[175,43,145,50,"GEN_AI_RESPONSE_TEXT_ATTRIBUTE"],[175,73,145,50],[175,75,145,52,"JSON"],[175,79,145,56],[175,80,145,57,"stringify"],[175,89,145,66],[175,90,145,67,"normalizedNewMessages"],[175,111,145,88],[175,112,145,89],[175,113,145,90],[177,4,147,2],[178,4,148,2],[178,8,148,6,"totalInputTokens"],[178,24,148,22],[178,27,148,25],[178,28,148,26],[179,4,149,2],[179,8,149,6,"totalOutputTokens"],[179,25,149,23],[179,28,149,26],[179,29,149,27],[180,4,150,2],[180,8,150,6,"totalTokens"],[180,19,150,17],[180,22,150,20],[180,23,150,21],[182,4,152,2],[183,4,153,2],[183,9,153,7],[183,13,153,13,"message"],[183,20,153,20],[183,24,153,24,"newMessages"],[183,35,153,35],[183,37,153,37],[184,6,154,4],[185,6,155,4],[185,10,155,10,"tokens"],[185,16,155,16],[185,19,155,19,"extractTokenUsageFromMessage"],[185,47,155,47],[185,48,155,48,"message"],[185,55,155,55],[185,56,155,56],[186,6,156,4,"totalInputTokens"],[186,22,156,20],[186,26,156,24,"tokens"],[186,32,156,30],[186,33,156,31,"inputTokens"],[186,44,156,42],[187,6,157,4,"totalOutputTokens"],[187,23,157,21],[187,27,157,25,"tokens"],[187,33,157,31],[187,34,157,32,"outputTokens"],[187,46,157,44],[188,6,158,4,"totalTokens"],[188,17,158,15],[188,21,158,19,"tokens"],[188,27,158,25],[188,28,158,26,"totalTokens"],[188,39,158,37],[190,6,160,4],[191,6,161,4,"extractModelMetadata"],[191,26,161,24],[191,27,161,25,"span"],[191,31,161,29],[191,33,161,31,"message"],[191,40,161,38],[191,41,161,39],[192,4,162,2],[194,4,164,2],[195,4,165,2],[195,8,165,6,"totalInputTokens"],[195,24,165,22],[195,27,165,25],[195,28,165,26],[195,30,165,28],[196,6,166,4,"span"],[196,10,166,8],[196,11,166,9,"setAttribute"],[196,23,166,21],[196,24,166,22,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[196,44,166,57],[196,45,166,57,"GEN_AI_USAGE_INPUT_TOKENS_ATTRIBUTE"],[196,80,166,57],[196,82,166,59,"totalInputTokens"],[196,98,166,75],[196,99,166,76],[197,4,167,2],[198,4,168,2],[198,8,168,6,"totalOutputTokens"],[198,25,168,23],[198,28,168,26],[198,29,168,27],[198,31,168,29],[199,6,169,4,"span"],[199,10,169,8],[199,11,169,9,"setAttribute"],[199,23,169,21],[199,24,169,22,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[199,44,169,58],[199,45,169,58,"GEN_AI_USAGE_OUTPUT_TOKENS_ATTRIBUTE"],[199,81,169,58],[199,83,169,60,"totalOutputTokens"],[199,100,169,77],[199,101,169,78],[200,4,170,2],[201,4,171,2],[201,8,171,6,"totalTokens"],[201,19,171,17],[201,22,171,20],[201,23,171,21],[201,25,171,23],[202,6,172,4,"span"],[202,10,172,8],[202,11,172,9,"setAttribute"],[202,23,172,21],[202,24,172,22,"GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE"],[202,44,172,57],[202,45,172,57,"GEN_AI_USAGE_TOTAL_TOKENS_ATTRIBUTE"],[202,80,172,57],[202,82,172,59,"totalTokens"],[202,93,172,70],[202,94,172,71],[203,4,173,2],[204,2,174,0],[205,0,174,1],[205,3]],"functionMap":{"names":["<global>","extractToolCalls","extractTokenUsageFromMessage","extractModelMetadata","extractToolsFromCompiledGraph","tools.map$argument_0","setResponseAttributes"],"mappings":"AAA;ACM;CDiB;AEM;CFyC;AGK;CHc;AIO;mBCY;IDI;CJC;AMK;CNuD"},"hasCjsExports":false},"type":"js/module"}]}