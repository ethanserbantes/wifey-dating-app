{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@tanstack/react-query","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":49,"index":82}}],"key":"Pzwu/0TIyhnZOrC9PAkpZx92hFo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useDatingInsights = useDatingInsights;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _tanstackReactQuery = require(_dependencyMap[1], \"@tanstack/react-query\");\n  function useDatingInsights(profile, showDatingInsights) {\n    _s();\n    const targetUserId = (0, _react.useMemo)(() => {\n      const n1 = Number(profile?.user_id);\n      if (Number.isFinite(n1) && n1 > 0) return Math.trunc(n1);\n      const n2 = Number(profile?.id);\n      if (Number.isFinite(n2) && n2 > 0) return Math.trunc(n2);\n      return null;\n    }, [profile?.id, profile?.user_id]);\n    const shouldFetchInsights = showDatingInsights && Number.isFinite(targetUserId);\n    const insightsQuery = (0, _tanstackReactQuery.useQuery)({\n      queryKey: [\"datingInsights\", \"profile\", targetUserId],\n      enabled: shouldFetchInsights,\n      queryFn: async () => {\n        const resp = await fetch(`/api/dating-insights?userId=${encodeURIComponent(String(targetUserId))}`);\n        if (!resp.ok) {\n          throw new Error(`When fetching /api/dating-insights, the response was [${resp.status}] ${resp.statusText}`);\n        }\n        return resp.json();\n      },\n      staleTime: 30_000\n    });\n    const dateHistoryLabel = typeof insightsQuery.data?.dateHistoryLabel === \"string\" ? insightsQuery.data.dateHistoryLabel : null;\n    const followThroughLabel = typeof insightsQuery.data?.followThroughLabel === \"string\" ? insightsQuery.data.followThroughLabel : null;\n    const dateHistoryLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return dateHistoryLabel || \"0 dates on Wifey\";\n    }, [dateHistoryLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    const followThroughLine = (0, _react.useMemo)(() => {\n      if (!showDatingInsights) return null;\n      if (!shouldFetchInsights) return null;\n      if (insightsQuery.isLoading) {\n        return \"Loading…\";\n      }\n      if (insightsQuery.isError) {\n        return \"Unavailable\";\n      }\n      return followThroughLabel || \"Not enough data yet\";\n    }, [followThroughLabel, insightsQuery.isError, insightsQuery.isLoading, shouldFetchInsights, showDatingInsights]);\n    return {\n      shouldFetchInsights,\n      insightsQuery,\n      dateHistoryLine,\n      followThroughLine\n    };\n  }\n  _s(useDatingInsights, \"gY+50s9uyD8P2AZHQ3zgW6ZKq0s=\", false, function () {\n    return [_tanstackReactQuery.useQuery];\n  });\n});","lineCount":67,"map":[[8,2,4,0,"exports"],[8,9,4,0],[8,10,4,0,"useDatingInsights"],[8,27,4,0],[8,30,4,0,"useDatingInsights"],[8,47,4,0],[9,2,1,0],[9,6,1,0,"_react"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,6,2,0,"_tanstackReactQuery"],[10,25,2,0],[10,28,2,0,"require"],[10,35,2,0],[10,36,2,0,"_dependencyMap"],[10,50,2,0],[11,2,4,7],[11,11,4,16,"useDatingInsights"],[11,28,4,33,"useDatingInsights"],[11,29,4,34,"profile"],[11,36,4,41],[11,38,4,43,"showDatingInsights"],[11,56,4,61],[11,58,4,63],[12,4,4,63,"_s"],[12,6,4,63],[13,4,5,2],[13,10,5,8,"targetUserId"],[13,22,5,20],[13,25,5,23],[13,29,5,23,"useMemo"],[13,35,5,30],[13,36,5,30,"useMemo"],[13,43,5,30],[13,45,5,31],[13,51,5,37],[14,6,6,4],[14,12,6,10,"n1"],[14,14,6,12],[14,17,6,15,"Number"],[14,23,6,21],[14,24,6,22,"profile"],[14,31,6,29],[14,33,6,31,"user_id"],[14,40,6,38],[14,41,6,39],[15,6,7,4],[15,10,7,8,"Number"],[15,16,7,14],[15,17,7,15,"isFinite"],[15,25,7,23],[15,26,7,24,"n1"],[15,28,7,26],[15,29,7,27],[15,33,7,31,"n1"],[15,35,7,33],[15,38,7,36],[15,39,7,37],[15,41,7,39],[15,48,7,46,"Math"],[15,52,7,50],[15,53,7,51,"trunc"],[15,58,7,56],[15,59,7,57,"n1"],[15,61,7,59],[15,62,7,60],[16,6,9,4],[16,12,9,10,"n2"],[16,14,9,12],[16,17,9,15,"Number"],[16,23,9,21],[16,24,9,22,"profile"],[16,31,9,29],[16,33,9,31,"id"],[16,35,9,33],[16,36,9,34],[17,6,10,4],[17,10,10,8,"Number"],[17,16,10,14],[17,17,10,15,"isFinite"],[17,25,10,23],[17,26,10,24,"n2"],[17,28,10,26],[17,29,10,27],[17,33,10,31,"n2"],[17,35,10,33],[17,38,10,36],[17,39,10,37],[17,41,10,39],[17,48,10,46,"Math"],[17,52,10,50],[17,53,10,51,"trunc"],[17,58,10,56],[17,59,10,57,"n2"],[17,61,10,59],[17,62,10,60],[18,6,12,4],[18,13,12,11],[18,17,12,15],[19,4,13,2],[19,5,13,3],[19,7,13,5],[19,8,13,6,"profile"],[19,15,13,13],[19,17,13,15,"id"],[19,19,13,17],[19,21,13,19,"profile"],[19,28,13,26],[19,30,13,28,"user_id"],[19,37,13,35],[19,38,13,36],[19,39,13,37],[20,4,15,2],[20,10,15,8,"shouldFetchInsights"],[20,29,15,27],[20,32,16,4,"showDatingInsights"],[20,50,16,22],[20,54,16,26,"Number"],[20,60,16,32],[20,61,16,33,"isFinite"],[20,69,16,41],[20,70,16,42,"targetUserId"],[20,82,16,54],[20,83,16,55],[21,4,18,2],[21,10,18,8,"insightsQuery"],[21,23,18,21],[21,26,18,24],[21,30,18,24,"useQuery"],[21,49,18,32],[21,50,18,32,"useQuery"],[21,58,18,32],[21,60,18,33],[22,6,19,4,"queryKey"],[22,14,19,12],[22,16,19,14],[22,17,19,15],[22,33,19,31],[22,35,19,33],[22,44,19,42],[22,46,19,44,"targetUserId"],[22,58,19,56],[22,59,19,57],[23,6,20,4,"enabled"],[23,13,20,11],[23,15,20,13,"shouldFetchInsights"],[23,34,20,32],[24,6,21,4,"queryFn"],[24,13,21,11],[24,15,21,13],[24,21,21,13,"queryFn"],[24,22,21,13],[24,27,21,25],[25,8,22,6],[25,14,22,12,"resp"],[25,18,22,16],[25,21,22,19],[25,27,22,25,"fetch"],[25,32,22,30],[25,33,23,8],[25,64,23,39,"encodeURIComponent"],[25,82,23,57],[25,83,23,58,"String"],[25,89,23,64],[25,90,23,65,"targetUserId"],[25,102,23,77],[25,103,23,78],[25,104,23,79],[25,106,24,6],[25,107,24,7],[26,8,25,6],[26,12,25,10],[26,13,25,11,"resp"],[26,17,25,15],[26,18,25,16,"ok"],[26,20,25,18],[26,22,25,20],[27,10,26,8],[27,16,26,14],[27,20,26,18,"Error"],[27,25,26,23],[27,26,27,10],[27,83,27,67,"resp"],[27,87,27,71],[27,88,27,72,"status"],[27,94,27,78],[27,99,27,83,"resp"],[27,103,27,87],[27,104,27,88,"statusText"],[27,114,27,98],[27,116,28,8],[27,117,28,9],[28,8,29,6],[29,8,30,6],[29,15,30,13,"resp"],[29,19,30,17],[29,20,30,18,"json"],[29,24,30,22],[29,25,30,23],[29,26,30,24],[30,6,31,4],[30,7,31,5],[31,6,32,4,"staleTime"],[31,15,32,13],[31,17,32,15],[32,4,33,2],[32,5,33,3],[32,6,33,4],[33,4,35,2],[33,10,35,8,"dateHistoryLabel"],[33,26,35,24],[33,29,36,4],[33,36,36,11,"insightsQuery"],[33,49,36,24],[33,50,36,25,"data"],[33,54,36,29],[33,56,36,31,"dateHistoryLabel"],[33,72,36,47],[33,77,36,52],[33,85,36,60],[33,88,37,8,"insightsQuery"],[33,101,37,21],[33,102,37,22,"data"],[33,106,37,26],[33,107,37,27,"dateHistoryLabel"],[33,123,37,43],[33,126,38,8],[33,130,38,12],[34,4,40,2],[34,10,40,8,"followThroughLabel"],[34,28,40,26],[34,31,41,4],[34,38,41,11,"insightsQuery"],[34,51,41,24],[34,52,41,25,"data"],[34,56,41,29],[34,58,41,31,"followThroughLabel"],[34,76,41,49],[34,81,41,54],[34,89,41,62],[34,92,42,8,"insightsQuery"],[34,105,42,21],[34,106,42,22,"data"],[34,110,42,26],[34,111,42,27,"followThroughLabel"],[34,129,42,45],[34,132,43,8],[34,136,43,12],[35,4,45,2],[35,10,45,8,"dateHistoryLine"],[35,25,45,23],[35,28,45,26],[35,32,45,26,"useMemo"],[35,38,45,33],[35,39,45,33,"useMemo"],[35,46,45,33],[35,48,45,34],[35,54,45,40],[36,6,46,4],[36,10,46,8],[36,11,46,9,"showDatingInsights"],[36,29,46,27],[36,31,46,29],[36,38,46,36],[36,42,46,40],[37,6,47,4],[37,10,47,8],[37,11,47,9,"shouldFetchInsights"],[37,30,47,28],[37,32,47,30],[37,39,47,37],[37,43,47,41],[38,6,49,4],[38,10,49,8,"insightsQuery"],[38,23,49,21],[38,24,49,22,"isLoading"],[38,33,49,31],[38,35,49,33],[39,8,50,6],[39,15,50,13],[39,25,50,23],[40,6,51,4],[41,6,53,4],[41,10,53,8,"insightsQuery"],[41,23,53,21],[41,24,53,22,"isError"],[41,31,53,29],[41,33,53,31],[42,8,54,6],[42,15,54,13],[42,28,54,26],[43,6,55,4],[44,6,57,4],[44,13,57,11,"dateHistoryLabel"],[44,29,57,27],[44,33,57,31],[44,51,57,49],[45,4,58,2],[45,5,58,3],[45,7,58,5],[45,8,59,4,"dateHistoryLabel"],[45,24,59,20],[45,26,60,4,"insightsQuery"],[45,39,60,17],[45,40,60,18,"isError"],[45,47,60,25],[45,49,61,4,"insightsQuery"],[45,62,61,17],[45,63,61,18,"isLoading"],[45,72,61,27],[45,74,62,4,"shouldFetchInsights"],[45,93,62,23],[45,95,63,4,"showDatingInsights"],[45,113,63,22],[45,114,64,3],[45,115,64,4],[46,4,66,2],[46,10,66,8,"followThroughLine"],[46,27,66,25],[46,30,66,28],[46,34,66,28,"useMemo"],[46,40,66,35],[46,41,66,35,"useMemo"],[46,48,66,35],[46,50,66,36],[46,56,66,42],[47,6,67,4],[47,10,67,8],[47,11,67,9,"showDatingInsights"],[47,29,67,27],[47,31,67,29],[47,38,67,36],[47,42,67,40],[48,6,68,4],[48,10,68,8],[48,11,68,9,"shouldFetchInsights"],[48,30,68,28],[48,32,68,30],[48,39,68,37],[48,43,68,41],[49,6,70,4],[49,10,70,8,"insightsQuery"],[49,23,70,21],[49,24,70,22,"isLoading"],[49,33,70,31],[49,35,70,33],[50,8,71,6],[50,15,71,13],[50,25,71,23],[51,6,72,4],[52,6,74,4],[52,10,74,8,"insightsQuery"],[52,23,74,21],[52,24,74,22,"isError"],[52,31,74,29],[52,33,74,31],[53,8,75,6],[53,15,75,13],[53,28,75,26],[54,6,76,4],[55,6,78,4],[55,13,78,11,"followThroughLabel"],[55,31,78,29],[55,35,78,33],[55,56,78,54],[56,4,79,2],[56,5,79,3],[56,7,79,5],[56,8,80,4,"followThroughLabel"],[56,26,80,22],[56,28,81,4,"insightsQuery"],[56,41,81,17],[56,42,81,18,"isError"],[56,49,81,25],[56,51,82,4,"insightsQuery"],[56,64,82,17],[56,65,82,18,"isLoading"],[56,74,82,27],[56,76,83,4,"shouldFetchInsights"],[56,95,83,23],[56,97,84,4,"showDatingInsights"],[56,115,84,22],[56,116,85,3],[56,117,85,4],[57,4,87,2],[57,11,87,9],[58,6,88,4,"shouldFetchInsights"],[58,25,88,23],[59,6,89,4,"insightsQuery"],[59,19,89,17],[60,6,90,4,"dateHistoryLine"],[60,21,90,19],[61,6,91,4,"followThroughLine"],[62,4,92,2],[62,5,92,3],[63,2,93,0],[64,2,93,1,"_s"],[64,4,93,1],[64,5,4,16,"useDatingInsights"],[64,22,4,33],[65,4,4,33],[65,12,18,24,"useQuery"],[65,31,18,32],[65,32,18,32,"useQuery"],[65,40,18,32],[66,2,18,32],[67,0,18,32],[67,3]],"functionMap":{"names":["<global>","useDatingInsights","useMemo$argument_0","useQuery$argument_0.queryFn"],"mappings":"AAA;OCG;+BCC;GDQ;aEQ;KFU;kCCc;GDa;oCCQ;GDa;CDc"},"hasCjsExports":false},"type":"js/module"}]}