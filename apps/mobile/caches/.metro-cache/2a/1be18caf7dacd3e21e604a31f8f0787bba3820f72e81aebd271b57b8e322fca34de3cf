{"dependencies":[{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"],"imports":1}},{"name":"../utils/cookie.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":49,"index":104}}],"key":"YThdOGzUvaRB6jb/6qXn3WTUc5o=","exportNames":["*"],"imports":1}},{"name":"../vendor/getIpAddress.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":105},"end":{"line":3,"column":78,"index":183}}],"key":"0oKNyq51031kf5wc4IhuDX1sUmA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"requestDataIntegration\", {\n    enumerable: true,\n    get: function () {\n      return requestDataIntegration;\n    }\n  });\n  var _integrationJs = require(_dependencyMap[0], \"../integration.js\");\n  var _utilsCookieJs = require(_dependencyMap[1], \"../utils/cookie.js\");\n  var _vendorGetIpAddressJs = require(_dependencyMap[2], \"../vendor/getIpAddress.js\");\n  // TODO(v11): Change defaults based on `sendDefaultPii`\n  var DEFAULT_INCLUDE = {\n    cookies: true,\n    data: true,\n    headers: true,\n    query_string: true,\n    url: true\n  };\n  var INTEGRATION_NAME = 'RequestData';\n  var _requestDataIntegration = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var include = {\n      ...DEFAULT_INCLUDE,\n      ...options.include\n    };\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(event, _hint, client) {\n        var _event$sdkProcessingM = event.sdkProcessingMetadata,\n          sdkProcessingMetadata = _event$sdkProcessingM === void 0 ? {} : _event$sdkProcessingM;\n        var normalizedRequest = sdkProcessingMetadata.normalizedRequest,\n          ipAddress = sdkProcessingMetadata.ipAddress;\n        var includeWithDefaultPiiApplied = {\n          ...include,\n          ip: include.ip ?? client.getOptions().sendDefaultPii\n        };\n        if (normalizedRequest) {\n          addNormalizedRequestDataToEvent(event, normalizedRequest, {\n            ipAddress\n          }, includeWithDefaultPiiApplied);\n        }\n        return event;\n      }\n    };\n  };\n\n  /**\n   * Add data about a request to an event. Primarily for use in Node-based SDKs, but included in `@sentry/core`\n   * so it can be used in cross-platform SDKs like `@sentry/nextjs`.\n   */\n  var requestDataIntegration = (0, _integrationJs.defineIntegration)(_requestDataIntegration);\n\n  /**\n   * Add already normalized request data to an event.\n   * This mutates the passed in event.\n   */\n  function addNormalizedRequestDataToEvent(event, req,\n  // Data that should not go into `event.request` but is somehow related to requests\n  additionalData, include) {\n    event.request = {\n      ...event.request,\n      ...extractNormalizedRequestData(req, include)\n    };\n    if (include.ip) {\n      var ip = req.headers && (0, _vendorGetIpAddressJs.getClientIPAddress)(req.headers) || additionalData.ipAddress;\n      if (ip) {\n        event.user = {\n          ...event.user,\n          ip_address: ip\n        };\n      }\n    }\n  }\n  function extractNormalizedRequestData(normalizedRequest, include) {\n    var requestData = {};\n    var headers = {\n      ...normalizedRequest.headers\n    };\n    if (include.headers) {\n      requestData.headers = headers;\n\n      // Remove the Cookie header in case cookie data should not be included in the event\n      if (!include.cookies) {\n        delete headers.cookie;\n      }\n\n      // Remove IP headers in case IP data should not be included in the event\n      if (!include.ip) {\n        _vendorGetIpAddressJs.ipHeaderNames.forEach(ipHeaderName => {\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete headers[ipHeaderName];\n        });\n      }\n    }\n    requestData.method = normalizedRequest.method;\n    if (include.url) {\n      requestData.url = normalizedRequest.url;\n    }\n    if (include.cookies) {\n      var cookies = normalizedRequest.cookies || (headers?.cookie ? (0, _utilsCookieJs.parseCookie)(headers.cookie) : undefined);\n      requestData.cookies = cookies || {};\n    }\n    if (include.query_string) {\n      requestData.query_string = normalizedRequest.query_string;\n    }\n    if (include.data) {\n      requestData.data = normalizedRequest.data;\n    }\n    return requestData;\n  }\n});","lineCount":116,"map":[[7,2,121,0,"Object"],[7,8,121,0],[7,9,121,0,"defineProperty"],[7,23,121,0],[7,24,121,0,"exports"],[7,31,121,0],[8,4,121,0,"enumerable"],[8,14,121,0],[9,4,121,0,"get"],[9,7,121,0],[9,18,121,0,"get"],[9,19,121,0],[10,6,121,0],[10,13,121,9,"requestDataIntegration"],[10,35,121,31],[11,4,121,31],[12,2,121,31],[13,2,1,0],[13,6,1,0,"_integrationJs"],[13,20,1,0],[13,23,1,0,"require"],[13,30,1,0],[13,31,1,0,"_dependencyMap"],[13,45,1,0],[14,2,2,0],[14,6,2,0,"_utilsCookieJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_vendorGetIpAddressJs"],[15,27,3,0],[15,30,3,0,"require"],[15,37,3,0],[15,38,3,0,"_dependencyMap"],[15,52,3,0],[16,2,5,0],[17,2,6,0],[17,6,6,6,"DEFAULT_INCLUDE"],[17,21,6,21],[17,24,6,24],[18,4,7,2,"cookies"],[18,11,7,9],[18,13,7,11],[18,17,7,15],[19,4,8,2,"data"],[19,8,8,6],[19,10,8,8],[19,14,8,12],[20,4,9,2,"headers"],[20,11,9,9],[20,13,9,11],[20,17,9,15],[21,4,10,2,"query_string"],[21,16,10,14],[21,18,10,16],[21,22,10,20],[22,4,11,2,"url"],[22,7,11,5],[22,9,11,7],[23,2,12,0],[23,3,12,1],[24,2,14,0],[24,6,14,6,"INTEGRATION_NAME"],[24,22,14,22],[24,25,14,25],[24,38,14,38],[25,2,16,0],[25,6,16,6,"_requestDataIntegration"],[25,29,16,29],[25,32,16,33],[25,41,16,33,"_requestDataIntegration"],[25,42,16,33],[25,44,16,51],[26,4,16,51],[26,8,16,34,"options"],[26,15,16,41],[26,18,16,41,"arguments"],[26,27,16,41],[26,28,16,41,"length"],[26,34,16,41],[26,42,16,41,"arguments"],[26,51,16,41],[26,59,16,41,"undefined"],[26,68,16,41],[26,71,16,41,"arguments"],[26,80,16,41],[26,86,16,44],[26,87,16,45],[26,88,16,46],[27,4,17,2],[27,8,17,8,"include"],[27,15,17,15],[27,18,17,18],[28,6,18,4],[28,9,18,7,"DEFAULT_INCLUDE"],[28,24,18,22],[29,6,19,4],[29,9,19,7,"options"],[29,16,19,14],[29,17,19,15,"include"],[30,4,20,2],[30,5,20,3],[31,4,22,2],[31,11,22,9],[32,6,23,4,"name"],[32,10,23,8],[32,12,23,10,"INTEGRATION_NAME"],[32,28,23,26],[33,6,24,4,"processEvent"],[33,18,24,16,"processEvent"],[33,19,24,17,"event"],[33,24,24,22],[33,26,24,24,"_hint"],[33,31,24,29],[33,33,24,31,"client"],[33,39,24,37],[33,41,24,39],[34,8,25,6],[34,12,25,6,"_event$sdkProcessingM"],[34,33,25,6],[34,36,25,45,"event"],[34,41,25,50],[34,42,25,14,"sdkProcessingMetadata"],[34,63,25,35],[35,10,25,14,"sdkProcessingMetadata"],[35,31,25,35],[35,34,25,35,"_event$sdkProcessingM"],[35,55,25,35],[35,69,25,38],[35,70,25,39],[35,71,25,40],[35,74,25,40,"_event$sdkProcessingM"],[35,95,25,40],[36,8,26,6],[36,12,26,14,"normalizedRequest"],[36,29,26,31],[36,32,26,47,"sdkProcessingMetadata"],[36,53,26,68],[36,54,26,14,"normalizedRequest"],[36,71,26,31],[37,10,26,33,"ipAddress"],[37,19,26,42],[37,22,26,47,"sdkProcessingMetadata"],[37,43,26,68],[37,44,26,33,"ipAddress"],[37,53,26,42],[38,8,28,6],[38,12,28,12,"includeWithDefaultPiiApplied"],[38,40,28,40],[38,43,28,43],[39,10,29,8],[39,13,29,11,"include"],[39,20,29,18],[40,10,30,8,"ip"],[40,12,30,10],[40,14,30,12,"include"],[40,21,30,19],[40,22,30,20,"ip"],[40,24,30,22],[40,28,30,26,"client"],[40,34,30,32],[40,35,30,33,"getOptions"],[40,45,30,43],[40,46,30,44],[40,47,30,45],[40,48,30,46,"sendDefaultPii"],[41,8,31,6],[41,9,31,7],[42,8,33,6],[42,12,33,10,"normalizedRequest"],[42,29,33,27],[42,31,33,29],[43,10,34,8,"addNormalizedRequestDataToEvent"],[43,41,34,39],[43,42,34,40,"event"],[43,47,34,45],[43,49,34,47,"normalizedRequest"],[43,66,34,64],[43,68,34,66],[44,12,34,68,"ipAddress"],[45,10,34,78],[45,11,34,79],[45,13,34,81,"includeWithDefaultPiiApplied"],[45,41,34,109],[45,42,34,110],[46,8,35,6],[47,8,37,6],[47,15,37,13,"event"],[47,20,37,18],[48,6,38,4],[49,4,39,2],[49,5,39,3],[50,2,40,0],[50,3,40,2],[52,2,42,0],[53,0,43,0],[54,0,44,0],[55,0,45,0],[56,2,46,0],[56,6,46,6,"requestDataIntegration"],[56,28,46,28],[56,31,46,31],[56,35,46,31,"defineIntegration"],[56,49,46,48],[56,50,46,48,"defineIntegration"],[56,67,46,48],[56,69,46,49,"_requestDataIntegration"],[56,92,46,72],[56,93,46,73],[58,2,48,0],[59,0,49,0],[60,0,50,0],[61,0,51,0],[62,2,52,0],[62,11,52,9,"addNormalizedRequestDataToEvent"],[62,42,52,40,"addNormalizedRequestDataToEvent"],[62,43,53,2,"event"],[62,48,53,7],[62,50,54,2,"req"],[62,53,54,5],[63,2,55,2],[64,2,56,2,"additionalData"],[64,16,56,16],[64,18,57,2,"include"],[64,25,57,9],[64,27,58,2],[65,4,59,2,"event"],[65,9,59,7],[65,10,59,8,"request"],[65,17,59,15],[65,20,59,18],[66,6,60,4],[66,9,60,7,"event"],[66,14,60,12],[66,15,60,13,"request"],[66,22,60,20],[67,6,61,4],[67,9,61,7,"extractNormalizedRequestData"],[67,37,61,35],[67,38,61,36,"req"],[67,41,61,39],[67,43,61,41,"include"],[67,50,61,48],[68,4,62,2],[68,5,62,3],[69,4,64,2],[69,8,64,6,"include"],[69,15,64,13],[69,16,64,14,"ip"],[69,18,64,16],[69,20,64,18],[70,6,65,4],[70,10,65,10,"ip"],[70,12,65,12],[70,15,65,16,"req"],[70,18,65,19],[70,19,65,20,"headers"],[70,26,65,27],[70,30,65,31],[70,34,65,31,"getClientIPAddress"],[70,55,65,49],[70,56,65,49,"getClientIPAddress"],[70,74,65,49],[70,76,65,50,"req"],[70,79,65,53],[70,80,65,54,"headers"],[70,87,65,61],[70,88,65,62],[70,92,65,67,"additionalData"],[70,106,65,81],[70,107,65,82,"ipAddress"],[70,116,65,91],[71,6,66,4],[71,10,66,8,"ip"],[71,12,66,10],[71,14,66,12],[72,8,67,6,"event"],[72,13,67,11],[72,14,67,12,"user"],[72,18,67,16],[72,21,67,19],[73,10,68,8],[73,13,68,11,"event"],[73,18,68,16],[73,19,68,17,"user"],[73,23,68,21],[74,10,69,8,"ip_address"],[74,20,69,18],[74,22,69,20,"ip"],[75,8,70,6],[75,9,70,7],[76,6,71,4],[77,4,72,2],[78,2,73,0],[79,2,75,0],[79,11,75,9,"extractNormalizedRequestData"],[79,39,75,37,"extractNormalizedRequestData"],[79,40,76,2,"normalizedRequest"],[79,57,76,19],[79,59,77,2,"include"],[79,66,77,9],[79,68,78,2],[80,4,79,2],[80,8,79,8,"requestData"],[80,19,79,19],[80,22,79,22],[80,23,79,23],[80,24,79,24],[81,4,80,2],[81,8,80,8,"headers"],[81,15,80,15],[81,18,80,18],[82,6,80,20],[82,9,80,23,"normalizedRequest"],[82,26,80,40],[82,27,80,41,"headers"],[83,4,80,49],[83,5,80,50],[84,4,82,2],[84,8,82,6,"include"],[84,15,82,13],[84,16,82,14,"headers"],[84,23,82,21],[84,25,82,23],[85,6,83,4,"requestData"],[85,17,83,15],[85,18,83,16,"headers"],[85,25,83,23],[85,28,83,26,"headers"],[85,35,83,33],[87,6,85,4],[88,6,86,4],[88,10,86,8],[88,11,86,9,"include"],[88,18,86,16],[88,19,86,17,"cookies"],[88,26,86,24],[88,28,86,26],[89,8,87,6],[89,15,87,14,"headers"],[89,22,87,21],[89,23,87,24,"cookie"],[89,29,87,30],[90,6,88,4],[92,6,90,4],[93,6,91,4],[93,10,91,8],[93,11,91,9,"include"],[93,18,91,16],[93,19,91,17,"ip"],[93,21,91,19],[93,23,91,21],[94,8,92,6,"ipHeaderNames"],[94,29,92,19],[94,30,92,19,"ipHeaderNames"],[94,43,92,19],[94,44,92,20,"forEach"],[94,51,92,27],[94,52,92,28,"ipHeaderName"],[94,64,92,40],[94,68,92,44],[95,10,93,8],[96,10,94,8],[96,17,94,16,"headers"],[96,24,94,23],[96,25,94,26,"ipHeaderName"],[96,37,94,38],[96,38,94,39],[97,8,95,6],[97,9,95,7],[97,10,95,8],[98,6,96,4],[99,4,97,2],[100,4,99,2,"requestData"],[100,15,99,13],[100,16,99,14,"method"],[100,22,99,20],[100,25,99,23,"normalizedRequest"],[100,42,99,40],[100,43,99,41,"method"],[100,49,99,47],[101,4,101,2],[101,8,101,6,"include"],[101,15,101,13],[101,16,101,14,"url"],[101,19,101,17],[101,21,101,19],[102,6,102,4,"requestData"],[102,17,102,15],[102,18,102,16,"url"],[102,21,102,19],[102,24,102,22,"normalizedRequest"],[102,41,102,39],[102,42,102,40,"url"],[102,45,102,43],[103,4,103,2],[104,4,105,2],[104,8,105,6,"include"],[104,15,105,13],[104,16,105,14,"cookies"],[104,23,105,21],[104,25,105,23],[105,6,106,4],[105,10,106,10,"cookies"],[105,17,106,17],[105,20,106,20,"normalizedRequest"],[105,37,106,37],[105,38,106,38,"cookies"],[105,45,106,45],[105,50,106,50,"headers"],[105,57,106,57],[105,59,106,59,"cookie"],[105,65,106,65],[105,68,106,68],[105,72,106,68,"parseCookie"],[105,86,106,79],[105,87,106,79,"parseCookie"],[105,98,106,79],[105,100,106,80,"headers"],[105,107,106,87],[105,108,106,88,"cookie"],[105,114,106,94],[105,115,106,95],[105,118,106,98,"undefined"],[105,127,106,107],[105,128,106,108],[106,6,107,4,"requestData"],[106,17,107,15],[106,18,107,16,"cookies"],[106,25,107,23],[106,28,107,26,"cookies"],[106,35,107,33],[106,39,107,37],[106,40,107,38],[106,41,107,39],[107,4,108,2],[108,4,110,2],[108,8,110,6,"include"],[108,15,110,13],[108,16,110,14,"query_string"],[108,28,110,26],[108,30,110,28],[109,6,111,4,"requestData"],[109,17,111,15],[109,18,111,16,"query_string"],[109,30,111,28],[109,33,111,31,"normalizedRequest"],[109,50,111,48],[109,51,111,49,"query_string"],[109,63,111,61],[110,4,112,2],[111,4,114,2],[111,8,114,6,"include"],[111,15,114,13],[111,16,114,14,"data"],[111,20,114,18],[111,22,114,20],[112,6,115,4,"requestData"],[112,17,115,15],[112,18,115,16,"data"],[112,22,115,20],[112,25,115,23,"normalizedRequest"],[112,42,115,40],[112,43,115,41,"data"],[112,47,115,45],[113,4,116,2],[114,4,118,2],[114,11,118,9,"requestData"],[114,22,118,20],[115,2,119,0],[116,0,119,1],[116,3]],"functionMap":{"names":["<global>","_requestDataIntegration","processEvent","addNormalizedRequestDataToEvent","extractNormalizedRequestData","ipHeaderNames.forEach$argument_0"],"mappings":"AAA;iCCe;ICQ;KDc;CDE;AGY;CHqB;AIE;4BCiB;ODG;CJwB"},"hasCjsExports":false},"type":"js/module"}]}