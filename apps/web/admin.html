<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wifey Admin - Photo Moderation</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { color: #333; margin-bottom: 30px; }
    .photos-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
    .photo-card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .photo-image { width: 100%; height: 250px; object-fit: cover; background: #ddd; }
    .photo-info { padding: 15px; }
    .photo-info p { color: #666; font-size: 12px; margin: 5px 0; }
    .status { display: inline-block; padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .status.pending { background: #ffd700; color: #333; }
    .status.approved { background: #90EE90; color: #333; }
    .status.rejected { background: #FFB6C6; color: #333; }
    .actions { display: flex; gap: 10px; margin-top: 10px; }
    button { padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; }
    .approve { background: #4CAF50; color: white; }
    .reject { background: #f44336; color: white; }
    button:hover { opacity: 0.8; }
    .loading { text-align: center; padding: 40px; color: #999; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîê Wifey Admin - Photo Verification</h1>
    <div id="photos" class="photos-grid">
      <div class="loading">Loading photos...</div>
    </div>
  </div>

  <script>
    async function loadPhotos() {
      try {
        const response = await fetch('/api/uploads');
        const data = await response.json();
        const photosDiv = document.getElementById('photos');
        
        if (!data.photos || data.photos.length === 0) {
          photosDiv.innerHTML = '<p style="grid-column: 1/-1; padding: 40px; text-align: center; color: #999;">No photos to review</p>';
          return;
        }

        photosDiv.innerHTML = data.photos.map(photo => `
          <div class="photo-card">
            <img src="${photo.url}" class="photo-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22250%22 height=%22250%22%3E%3Crect fill=%22%23ddd%22 width=%22250%22 height=%22250%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22%3EImage not available%3C/text%3E%3C/svg%3E'" alt="User photo">
            <div class="photo-info">
              <p><strong>User ID:</strong> ${photo.userId || 'unknown'}</p>
              <p><strong>Uploaded:</strong> ${new Date(photo.uploadedAt).toLocaleString()}</p>
              <p><strong>Status:</strong> <span class="status ${photo.status || 'pending'}">${photo.status || 'PENDING'}</span></p>
              <div class="actions">
                <button class="approve" onclick="approvePhoto('${photo.id}')">‚úì Approve</button>
                <button class="reject" onclick="rejectPhoto('${photo.id}')">‚úó Reject</button>
              </div>
            </div>
          </div>
        `).join('');
      } catch (error) {
        console.error('Failed to load photos:', error);
        document.getElementById('photos').innerHTML = `<p style="grid-column: 1/-1; padding: 40px; color: #f44336;">Error loading photos: ${error.message}</p>`;
      }
    }

    function approvePhoto(id) {
      alert(`Photo ${id} approved! (Feature coming soon)`);
    }

    function rejectPhoto(id) {
      alert(`Photo ${id} rejected! (Feature coming soon)`);
    }

    loadPhotos();
  </script>
</body>
</html>
